%META:TOPICINFO{author="GabrieleGarzoglio" date="1227027641" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="ITBTestingInstructions"}%
---+!! *<nop>%SPACEOUT{ "PRIMA interface testing" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "PRIMA interface testing" }%_
PRIMA interoprability interface tests.

%EDITTHIS%
%BR%

---++ Introduction

Starting with this version of VDT, GUMS and PRIMA can use two different ways to communicate with each other  
   * the old PRIMA legacy protocol, based on SAML v1
   * the new XACML2 protocol defined by the OSG-EGEE interoperability group

The old PRIMA legacy protocol works with all versions of GUMS, while the new XACML2 protocol works with GUMS v1.3.0 or later, and  with EGEE SCAS server.

These tests aim at verifying that both interfaces work as expected.

---++ Set up GUMS

*IF* you are already running an old GUMS server ( < v1.3.0 ), test the CE using the old legacy PRIMA interface (see below), before installing the new GUMS  ( >= v1.3.0 ) and testing CE against it. This verifies that the new PRIMA module can talk to the old GUMS.
 
Install the new GUMS server ( >= v1.3.0 ) by following instructions at InstallConfigureAndManageGUMS. 

---++ Set up a Compute Element

Follow the instructions in ComputeElementInstall.
In the [[ComputeElementInstall#Configure_Globus_to_use_the_PRIM][Configure Globus to use the PRIMA callout]] section, follow the instructions for the the default PRIMA interface configuration (gsi-authz.conf and prima-authz.conf).

---+++ Test the CE using the old legacy PRIMA interface

These tests should work against old GUMS (< v1.3.0) and new GUMS (>= v1.3.0) server. 
Assuming you [[ComputeElementInstall#Configure_Globus_to_use_the_PRIM][installed the CE]] with the old PRIMA interface:
   * Submit a job to the gt2 gatekeeper and check the results, as explained in the [[ValidatingComputeElement#CE_GUMS_client][CE GUMS-client]] section.
   * Transfer a file and check the results, as explained in the [[ValidatingComputeElement#Simple_Test_Of_GSIFTP_Services][Simple Test Of GSIFTP Services]] section.

---+++ Test the CE using the new XACML2 interface

These tests should work against the new GUMS (>= v1.3.0) server.
Change the configuration on the Compute Element, as explain in the [[ComputeElementInstall#Using_the_new_XACML2_GUMS_interf][Using the new XACML2 GUMS interface ]] and repeat the tests:
   * Submit a job to the gt2 gatekeeper and check the results, as explained in the [[ValidatingComputeElement#CE_GUMS_client][CE GUMS-client]] section.
   * Transfer a file and check the results, as explained in the [[ValidatingComputeElement#Simple_Test_Of_GSIFTP_Services][Simple Test Of GSIFTP Services]] section.


%STOPINCLUDE%
%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.IgorSfiligoi - 17 Nov 2008 %BR%
%REVIEW%
