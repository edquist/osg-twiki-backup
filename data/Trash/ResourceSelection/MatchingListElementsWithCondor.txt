%META:TOPICINFO{author="KyleGross" date="1225985963" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="WebHome"}%
<H1>Match List Elements With Condor</H1>

This page provides the instructions and the code to set up the match_string call-out function in a condor Match Making Service (condor_negotiator).

The match_string function is typically used from a condor job description file to express requirements on elements of a list attribute, in the form
<pre>
my_list_attribute = "El1,El2,El3"
</pre>

To use the function from a condor job description file, one can use the syntax
<pre>
requirements = match_string("String_to_be_matched";TARGET.some_list_or_var) == TRUE
</pre>

example:
<pre>
requirements = match_string("d0";TARGET.VOLIST) == TRUE
</pre>

Where the resource classads contain a list of VOs, for example:
VirtualOrganizations/VOInfoLIST = "d0,cdf,minos"

In the example above, the requirements select the classads that have a VirtualOrganizations/VOInfoLISTattribute with the element "d0". If more then one classad meets the requirements then negotiator selects one pseudo-randomly. 

To add this functionality to your condor MMS, one can follow the following instructions.

<ul>
<li> Install Condor, from example from VDT
<li> Compile the code and create a shared object or use directly the pre-compiled shared object (if compatible with your platform: see the content of the tar ball for details).
<li> In the condor_config file (of the condor_negotiator) add the following line:<br>

CLASSAD_LIB_PATH         = path_to_the_dynamically_shared_object<br>

example:<br>
CLASSAD_LIB_PATH = /products/prd/jim_broker/lib/libmatch_string.so<br>

<li> Place the shared object in the appropriate location
<li> Start your MMS.
</ul>

Download the code here or at the bottom of the page:
   * [[%ATTACHURL%/condor_function.tgz][condor_function.tgz]]: Condor Match Making call-out function: match_function
   * [[%ATTACHURL%/condor_function_debug.tgz][condor_function_debug.tgz]]: Condor Match Making call-out function debug mode: match_function

NOTE: This code has been tested for Scientific Fermi Linux-3.0.4 ,libc version2.3.2 , condor version 6.6, and gcc version 3.2.3.





-- Main.GabrieleGarzoglio - 23 Nov 2005


%META:FILEATTACHMENT{name="condor_function.tgz" attr="" comment="Condor Match Making call-out function: match_function" date="1132783664" path="condor_function.tgz" size="10419" user="GabrieleGarzoglio" version="1.1"}%
%META:FILEATTACHMENT{name="condor_function_debug.tgz" attr="" comment="Debugging version of the match_string function" date="1133369354" path="condor_function_debug.tgz" size="11657" user="GabrieleGarzoglio" version="1.1"}%
