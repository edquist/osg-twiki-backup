%META:TOPICINFO{author="DerekWeitzel" date="1308153925" format="1.1" reprev="1.20" version="1.20"}%
%META:TOPICPARENT{name="InstallConfigureAndManageGUMS"}%
%DOC_STATUS_TABLE%
---+!! GUMS Client Install
%TOC%

---++ About this Document

The GUMS Client package provides the capability to remotely administer GUMS from a node other than the server. It also provides the capability of retrieving any information available via the =gums=, =gums-host= and =gums-service= commands.


---++ Requirements
The installation of the GUMS Client requires
   * [[https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/PacmanInstall][Pacman]]
   * [[https://twiki.grid.iu.edu/bin/view/Documentation/GUMS][GUMS Host]]

A couple of key items to note:
   * The =gums-client= package *does not* have to be installed as root.
   * You will need to be defined in GUMS as belonging to the 'admin' group.
     The DN of your certificate identifies you to GUMS (from the proxy).
   * You will need a user certificate and a grid proxy to access
     GUMS remotely just as you do on the server when running command line
     processes.
   * Both =voms-proxy-init= and =grid-proxy-init= are available in the client package.
  
---++ GUMS Client Installation instructions

   1. Download and install Pacman (if not already available); see [[PacmanBestPractices][Pacman Info]]. You will use pacman to install the GUMS client.
   1. Source the pacman setup script in the pacman installation directory.
   <pre class="screen">
%UCL_PROMPT% source path/to/pacman/setup.sh
   </pre>
   1. Create a directory for the gums-client and 'cd' into that directory. We recommend that you name the directory =gums-client=.

<LI>
Set the VDT_GUMS_HOST variable as:

<pre class="screen">
$ <userinput>export VDT_GUMS_HOST=(YOUR_GUMS_SERVER) </userinput>
</pre>

This will set the variables within =$VDT_LOCATION/gums/config/gums-client.properties= to point to your GUMS server when "pacman -get" is run.

<LI>Retrieve the gums-client package from the VDT pacman cache. 

%NOTE% OSG %OSG_VERSION% <nop>GUMS servers use the VDT %VDT_VERSION% cache.
  
To be safe, you may want to run these commands or if you like, you can wait and see if you get any errors during the installation process.

<pre class="screen">
$ <userinput>export VDT_ALLOW_UNSUPPORTED=y</userinput>
$ <userinput>pacman -pretend-platform:RHEL-3</userinput>
$ <userinput>pacman -allow trust-all-caches</userinput>
</pre>

Then, install the <nop>GUMS client package from VDT: 

<pre class="screen">
$ <userinput>pacman -get http://vdt.cs.wisc.edu/%VDT_CACHE%:GUMS-Client</userinput>
</pre>

You will be asked the following questions (answers in bold):
<pre class="screen">
VDT %VDT_VERSION% installs a variety of software, each with its own license.
In order to continue, you must agree to the licenses.
You can view the licenses online at:

     http://vdt.cs.wisc.edu/licenses/%VDT_VERSION%

After the installation has completed, you will also be able to
view the licenses in the "licenses" directory.

Do you agree to the licenses? [y/n]  <userinput>y</userinput>

The VDT typically installs public certificates and signing policy files 
for the well-known public CA's. This is necessary in order for you to 
perform GSI authentication with any remote Grid services (that have 
service/host certificates signed by these CA's).

For more information please refer to the VDT documentation:
http://vdt.cs.wisc.edu/setup_ca.html

Where would you like to install CA files?

Choices:
        l (local) - install into $VDT_LOCATION/globus/share/certificates
        n (no)    - do not install
<userinput>l</userinput>

</pre>
     
The last line of the installation for VDT %VDT_VERSION% should be:
<pre class="screen">
Downloading [gums-client-1.2.10.tar.gz] from [http://vdt.cs.wisc.edu/software//gums/1.2.10]...
</pre>

<LI>Source your VDT_LOCATION/setup.sh script.<BR>

=VDT_LOCATION= will be the directory you executed the 'pacman -get' in step 4. 
<pre class="screen">
$ source VDT_LOCATION/setup.sh
</pre>

<LI>Verify =gums-host-cron= is disabled

You can verify the gums-host-cron service is disabled by executing:
<pre class="screen">
$ <userinput>vdt-control --list</userinput>
<replaceable># Sample output</replaceable>
 Service            | Type   | Desired State
 -------------------+--------+--------------
 fetch-crl          | cron   | do not enable
 gums-host-cron     | cron   | do not enable
</pre>

See GumsHostCron for more information about gums-host-cron and how to enable it.

<LI>Vierify the <i>gums-client.properties</i> file points to your <nop>GUMS server.

View =$VDT_LOCATION/gums/config/gums-client.properties= and make sure the =gums.location= and =gums.authz= variable to point to your <nop>GUMS server. It is populated by default to the value of the VDT_GUMS_HOST variable.  Here is an example:

<pre class="programlisting">
  gums.location=https://gratiax31.fnal.gov:8443/gums/services/GUMSAdmin
  gums.authz=https://gratiax31.fnal.gov:8443/gums/services/GUMSAuthorizationServicePort
</pre>

</OL>

The installation is now complete.  You should now be able to execute any of the command line tools available in =$VDT_LOCATION/gums/bin= using a grid-proxy to identify yourself:
   * gums - administrator functionality (user proxy)
   * gums-host - basic functionality (host certificate + key)
   * gums-hosts-cron - cron job for gums-host  (host certificate + key)
   * gums-service - administrator functionality (usercert + key)

%NOTE% 
You must be given read access in <nop>GUMS.   Contact your administrator if you do not have it.

---++Simple Test  of the <nop>GUMS Client
For a simple test, you could generate a <i>grid-mapfile</i> listing remotely as
follows:

<OL>
<LI>Generate a grid proxy for yourself
<pre class="screen">
$source $VDT_LOCATION/setup.sh
$ grid-proxy-init 
<b><i>....output...</b></i>
Your identity: /DC=org/DC=doegrids/OU=People/CN=John Weigand 458491
Enter GRID pass phrase for this identity:
<b><i>....enter your password...</b></i>
  Creating proxy .................................... Done
Your proxy is valid until: Thu May 31 21:48:34 2007
</pre>

<LI>To generate a grid-mapfile:   
<pre class="screen">
$ gums generateGridMapfile "/DC=org/DC=doegrids/OU=Services/CN=cmssrv09.fnal.gov"
</pre>
   The DN shown above is the DN of the CE node's host certificate that would be doing the 
   authorization.

   The output above will go to stdout. On all the command line scripts,
   the '--help' argument will provide more detail on the options.
</OL>


%STOPINCLUDE%


%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.JayPackard - 18 Oct 2007 %BR%
%REVIEW%   %BR%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = TerrenceMartin

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = VO

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%


 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = TerrenceMartin
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


############################################################################################################
-->

%META:TOPICMOVED{by="JohnWeigand" date="1181312706" from="Documentation.GumsClientInstall" to="Integration/ITB_0_7.GumsClientInstall"}%
