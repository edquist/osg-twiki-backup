%META:TOPICINFO{author="DouglasStrain" date="1312298950" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<nop>%SPACEOUT{%TOPIC%}%*
%TOC{depth="2"}%


---++ Introduction
This hands-on tutorial, created for the 2011 OSG Summer Workshop, explains how to use Globus Online
to complete an example file transfer using the command line interface and the web interface.


---+++!!Engineering Considerations

You will need two endpoints to transfer files between.  At least one of them must be a gridFTP server that you have access to, either using x509 credentials or a MyProxy server.  The other can also be a gridFTP server, or it can be a "GlobusConnect" client running on your machine (e.g. your laptop).

---++ Checklist
Before this tutorial, you will need to sign up for a Globus Online account at:
https://www.globusonline.org/SignUp

---++ Manage Identities

Globus Online is controlled via ssh.  In order to connect to the globus online 

<pre class="screen">
[dstrain@dhcp-131-225-82-65 test-ssh]$ ssh-keygen -t rsa -b 1024
Generating public/private rsa key pair.
Enter file in which to save the key (/home/dstrain/.ssh/id_dsa): /home/dstrain/.ssh/id_rsa
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/dstrain/.ssh/id_rsa.
Your public key has been saved in /home/dstrain/.ssh/id_rsa.pub.
The key fingerprint is:
89:82:f8:e7:29:05:d0:9b:f4:b1:8b:01:8d:6f:6e:ca dstrain@dhcp-131-225-82-65
[dstrain@dhcp-131-225-82-65 test-ssh]$ more id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEArF5znbvb4x3VFo1CG/kIZ+0K+ZpXHNVarM436ooPkdZF
JygCl33+U8CYvudHZCEll0TAZXVFqhbeK38vroAEaR08MivKm2Bewk0lC/zIgxEliksHlXeLQlwfhlB/
lfcDvBVRWW7zvNmjmnykbhO6/KgSL3gcc9Hs88k81lq8KsU=
</pre>


Log into the Globus Online and add this key to your account.  
Under Globus Online, go to "My Profile" -> "Manage Accounts" -> "Add SSH public key"

     <img src="%ATTACHURLPATH%/globus1.png" alt="globus1.png" width='100%' />    

Cut and paste your ssh key into the space provided.  (Include the header "ssh-rsa" etc)

     <img src="%ATTACHURLPATH%/globus2.png" alt="globus2.png" width='333' height='261' />    

After this, you should be able to connect to Globus Online shell (cli.globusonline.org).
Note that it takes a few moments to update.

<pre class="screen">
ssh -i .ssh/id_rsa cli.globusonline.org
</pre>

The "-i" option specifies what key to use.  If you have used the default, you can skip this option.

---++ Installing Globus Connect

Globus Connect is a mini-GridFTP server that you can start on your laptop or other non-server
machine to transfer files.  It will act as a client to transfer files to/from permanent endpoints.
As of now, you cannot transfer between two "Globus Connect" clients.

To install Globus Connect, sign in to Globus Online and click on "Globus Connect":

     <img src="%ATTACHURLPATH%/globus3.png" alt="globus3.png" width='50%' />    

To install,
* Click on the appropriate OS for download.
* Enter a name and description for the globus connect server (nickname)
* Copy the resulting setup key.
* Download and extract it: (eg for linux)
<pre class="screen">
[dstrain@dhcp-131-225-82-65 globus]$ tar xzvf globusconnect-latest.tgz
globusconnect-1.0/
globusconnect-1.0/gt_i386/
globusconnect-1.0/gt_i386/etc/
...
[dstrain@dhcp-131-225-82-65 globus]$ cd globusconnect-1.0/
[dstrain@dhcp-131-225-82-65 globusconnect-1.0]$ ls
gc  globusconnect  gt_amd64  gt_i386
[dstrain@dhcp-131-225-82-65 globusconnect-1.0]$ ./globusconnect
</pre>

Enter the setup code into the "Security Code" field in the dialog box:

     <img src="%ATTACHURLPATH%/globus4.png" alt="globus3.png" />    

After this, you should get a "Registration successful" message and a status screen like the following:

     <img src="%ATTACHURLPATH%/globus5.png" alt="globus3.png" />    


---++ Transfers using globus connect (web)

At this point, you can click "Click here to start a transfer" in your web browser, or
Go to Globus Online -> File Transfer.

For the endpoint, type in the two endpoints and directories.
For Globus Connect clients, the name will be of the form "username#nickname", where the first part is the username (such as "dstrain") and the second is the endpoint name that you picked out in the previous step (such as "dstrain-laptop").  Once you have typed in the endpoint name in the box, you should see the contents of your Globus Connect client show up in the window.


---++ Service Configuration/Startup/Shutdown
Description of the steps (including the commands/options) to startup and shutdown the service.
This often requires, the reader to edit lines in a config file.
If this is necessary, put the lines in a screen box with a yellow background 
(to distinguish from entering commands (green box).
<pre class="file">
Config file line a
Config file line b
</pre>


#DebugInfo
---++ Debugging Information
---+++!!File Locations
Locations of configuration files, input/output files, log files, etc. that are important for an administrator to know about if something doesn't work.  

---+++!!Debugging Procedure
What are the first things to check, step-by-step instructions to determine source of problem for this service

---+++!!Caveats/Known Issues
Restrictions and/or work around for known issues 

---+++!!References
References to additional information.  This document should be as concise as possible, but the reader can use these links if he/she wants more background or information.

---+++!!Screen Dump of the Complete Install Process
%TWISTY{
mode="div"
showlink="Show..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
complete screen dump of the install procedure
</pre>
%ENDTWISTY%


-- Main.JamesWeichel - 03 Feb 2010


%META:FILEATTACHMENT{name="globus1.png" attachment="globus1.png" attr="" comment="Globus Online - create key" date="1312295521" path="globus1.png" size="44125" stream="globus1.png" tmpFilename="/usr/tmp/CGItemp3205" user="DouglasStrain" version="1"}%
%META:FILEATTACHMENT{name="globus2.png" attachment="globus2.png" attr="" comment="Globus Online - add key" date="1312295544" path="globus2.png" size="9983" stream="globus2.png" tmpFilename="/usr/tmp/CGItemp3145" user="DouglasStrain" version="1"}%
%META:FILEATTACHMENT{name="globus3.png" attachment="globus3.png" attr="" comment="Globus Online - download Globus Connect" date="1312298235" path="globus3.png" size="46467" stream="globus3.png" tmpFilename="/usr/tmp/CGItemp6348" user="DouglasStrain" version="2"}%
%META:FILEATTACHMENT{name="globus4.png" attachment="globus4.png" attr="" comment="Globus Online - setup Globus Connect" date="1312298256" path="globus4.png" size="18104" stream="globus4.png" tmpFilename="/usr/tmp/CGItemp3233" user="DouglasStrain" version="1"}%
%META:FILEATTACHMENT{name="globus5.png" attachment="globus5.png" attr="" comment="Globus Online - run Globus Connect" date="1312298327" path="globus5.png" size="5691" stream="globus5.png" tmpFilename="/usr/tmp/CGItemp3256" user="DouglasStrain" version="1"}%
