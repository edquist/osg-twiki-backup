%META:TOPICINFO{author="RobertEngel" date="1276570950" format="1.1" reprev="1.33" version="1.33"}%
%META:TOPICPARENT{name="ValidatingComputeElement"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%DOC_STATUS_TABLE%
%TOC{depth="2"}%

---++ About this Document

%ICON{hand}% This document is for OSG users. Simple tests will be introduced which may help to test the correct _authentication_ with and _operation_ of grid resources.

%STARTINCLUDE%
%BR%

%EDITTHIS%
%BR%


---++ Authentication Test

Your [[ReleaseDocumentation/CertificateWhatIs][grid certificate]] will be used to authenticate yourself with every service provided by a *Compute Element*. The authentication process is based on the [[http://en.wikipedia.org/wiki/X.509][X.509 Public Key Infrastructure]] which consists of a private key (=userkey.pem=) and a public key (=usercert.pem=). Both files are by default located in =$HOME/.globus=:

<pre class="screen">
[robert@osg-job ~]$ ls -al $HOME/.globus
total 68
drwxr-x---  4 robert robert  4096 Mar 18 18:50 .
drwx------ 29 robert robert 12288 Jul 28 08:38 ..
drwxrwxr-x  5 robert robert  4096 Jul 20 11:18 .gass_cache
drwx------  4 robert robert  4096 Mar 27 12:14 job
-rw-r-----  1 robert robert  1724 Dec 16  2008 usercert.pem
-r--------  1 robert robert  1919 Dec 16  2008 userkey.pem
</pre>

To display detailed information about your grid certificate %TWISTY{showlink="grid-proxy-info" hidelink="Hide help page" start="hide" remember="on"}%
<pre class="file">

Syntax: grid-proxy-info [-help][-f proxyfile][-subject][...][-e [-h H][-b B]]

    Options
    -help, -usage             Displays usage
    -version                  Displays version
    -debug                    Displays debugging output
    -file <proxyfile>  (-f)   Non-standard location of proxy
    [printoptions]            Prints information about proxy
    -exists [options]  (-e)   Returns 0 if valid proxy exists, 1 otherwise

    [printoptions]
        -subject       (-s)   Distinguished name (DN) of subject
        -issuer        (-i)   DN of issuer (certificate signer)
        -identity             DN of the identity represented by the proxy
        -type                 Type of proxy (full or limited)
        -timeleft             Time (in seconds) until proxy expires
        -strength             Key size (in bits)
        -all                  All above options in a human readable format
        -text                 All of the certificate
        -path                 Pathname of proxy file

    [options to -exists]      (if none are given, H = B = 0 are assumed)
        -valid H:M     (-v)   time requirement for proxy to be valid
        -hours H       (-h)   time requirement for proxy to be valid
                              (deprecated, use -valid instead)
        -bits  B       (-b)   strength requirement for proxy to be valid
</pre>
%ENDTWISTY% can be used:

<pre class="screen">
[robert@osg-job ~]$ grid-proxy-info
subject  : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994/CN=1692124231
issuer   : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
identity : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
type     : Proxy draft (pre-RFC) compliant impersonation proxy
strength : 512 bits
path     : /tmp/x509up_u500
timeleft : 291:11:00  (12.1 days)
</pre>

*Identity* is sometimes also referred to as *Grid Identity* or more frequently as *Distinguished Name (DN)*. The last line indicates how long your current grid proxy will be valid. If there is no time left on your grid proxy, the program %TWISTY{showlink="grid-proxy-init" hidelink="Hide help page" start="hide" remember="on"}%
<pre class="file">
Syntax: grid-proxy-init [-help][-pwstdin][-limited][-valid H:M] ...

    Options
    -help, -usage             Displays usage
    -version                  Displays version
    -debug                    Enables extra debug output
    -q                        Quiet mode, minimal output
    -verify                   Verifies certificate to make proxy for
    -pwstdin                  Allows passphrase from stdin
    -limited                  Creates a limited proxy
    -independent              Creates a independent proxy
    -old                      Creates a legacy globus proxy
    -rfc                      Creates a RFC 3820 compliant proxy
    -valid <h:m>              Proxy is valid for h hours and m 
                              minutes (default:12:00)
    -hours <hours>            Deprecated support of hours option
    -bits  <bits>             Number of bits in key {512|1024|2048|4096}
    -policy <policyfile>      File containing policy to store in the
                              ProxyCertInfo extension
    -pl <oid>,                OID string for the policy language
    -policy-language <oid>    used in the policy file
    -path-length <l>          Allow a chain of at most l proxies to be 
                              generated from this one
    -cert     <certfile>      Non-standard location of user certificate
    -key      <keyfile>       Non-standard location of user key
    -certdir  <certdir>       Non-standard location of trusted cert dir
    -out      <proxyfile>     Non-standard location of new proxy cert
</pre>
%ENDTWISTY% can be used to create a new grid proxy:

<pre class="screen">
[robert@osg-job ~]$ grid-proxy-init -valid 500:00
Your identity: /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
Enter GRID pass phrase for this identity:
Creating proxy ................................. Done
Your proxy is valid until: Tue Aug 18 08:06:35 2009
</pre>

---++ Mapping Test

A valid grid proxy does not guarantee that you may authenticate with a remote grid resource. For a successful authentication your *Distinguished Name* must be _mapped_ on the remote resource. A simple and quick way to check if your *DN* is mapped is to use %TWISTY{showlink="globusrun" hidelink="Hide help page" start="hide" remember="on"}%
<pre class="file">

Syntax: globusrun [options] [RSL String]
        globusrun -version[s]
        globusrun -help

    Options
    -help | -usage
           Display help
    -version
           Display version
    -versions
           Display versions of all activated modules
    -i | -interactive 
           Run globusrun in interactive mode (multirequests only)
    -f <rsl filename> | -file <rsl filename> 
           Read RSL from the local file <rsl filename>. The RSL can
           be either a single job request, or a multirequest
    -q | -quiet
           Quiet mode (do not print diagnostic messages)
    -o | -output-enable
           Use the GASS Server library to redirect standout output
           and standard error to globusrun. Implies -quiet
    -s | -server
           $(GLOBUSRUN_GASS_URL) can be used to access files local
           to the submission machine via GASS. Implies -output-enable
           and -quiet
    -w | -write-allow
           Enable the GASS Server library and allow writing to
           GASS URLs. Implies -server and -quiet.
    -mpirun <integer>
           Currently a no-op.
    -r <resource manager> | -resource  <resource manager> 
           Submit the RSL job request to the specified resource manager.
           A resource manager can be specified in the following ways: 

           host
           host:port
           host:port/service
           host/service
           host:/service
           host::subject
           host:port:subject
           host/service:subject
           host:/service:subject
           host:port/service:subject

           For those resource manager contacts which omit the port, 
           service or subject field the following defaults are used:

           port = 2119 
           service = jobmanager 
           subject = subject based on hostname

           This is a required argument when submitting a single RSL
           request
    -n | -no-interrupt
           Cause SIGINT to terminate globusrun, while leaving the
           submitted job to run to completion. By default the SIGINT
           signal will be trapped and the job will be terminated
    -k | -kill <job ID>
           Kill a disconnected globusrun job
    -status <job ID>
           Print the current status of the specified job.
    -b | -batch
           Cause globusrun to terminate after the job is successfully
           submitted to the scheduler. Useful for batch jobs. This option
           cannot be used together with -interactive, and is also
           incompatible with multi-request jobs.
           If used with -s, files may be staged in to the job, but stdout
           and stderr will not be redirected.
           The "handle" or job ID of the submitted job will be written on
           stdout.
    -F | -fast-batch
           Similar to -b but will exit as soon as the job has been sent
           to the GRAM job manager service without waiting for a callback
           with job submission state. Useful for hosts which are not able
           to receive job state callbacks.
    -refresh-proxy | -y <job ID>
           Cause globusrun to delegate a new proxy to the job named by the
           <job ID>
    -stop-manager <job  ID>
           Cause globusrun to stop the job manager, without killing the
           job. If the save_state RSL attribute is present, then a
           job manager can be restarted by using the restart RSL attribute.

    Diagnostic Options
    -p | -parse
           Parse and validate the RSL only. Do not submit the job to
           a GRAM gatekeeper
    -a | -authenticate-only
           Submit a gatekeeper "ping" request only. Do not parse the
           RSL or submit the job request. Requires the -resource-manger 
           argument
    -d | -dryrun
           Submit the RSL to the job manager as a "dryrun" test
           The request will be parsed and authenticated. The job manager
           will execute all of the preliminary operations, and stop
           just before the job request would be executed
</pre>
%ENDTWISTY%:

<pre class="screen">
[ligo@osg-ldg ~]$ globusrun -a -r osg-ce.ligo.caltech.edu

GRAM Authentication test successful
</pre>

%NOTE% Please note that this example requires the *Grid Resource Allocation Manager (GRAM)* to be available on the resource. This is usually the case for *Compute Elements*, but not for *Storage Elements*. If you want to test authentication with a Storage Element, use the next example.

---++ Data Transfer Test

Data is transferred to and from a grid resource using a version of ftp that supports grid authentication called *GridFTP*. The %TWISTY{showlink="globus-url-copy" hidelink="Hide help page" start="hide" remember="on"}%
<pre class="file">

globus-url-copy [options] <sourceURL> <destURL>
globus-url-copy [options] -f <filename>

<sourceURL> may contain wildcard characters * ? and [ ] character ranges
in the filename only.
Any url specifying a directory must end with a forward slash '/'

If <sourceURL> is a directory, all files within that directory will
be copied.
<destURL> must be a directory if multiple files are being copied.

Note:  If the ftp server from the source url does not support the MLSD
       command, this client will attempt to transfer subdirectories as
       files, resulting in an error.  Recursion is not possible in this
       case, but you can use the -c (continue on errors) option in order
       to transfer the regular files from the top level directory.
       **GridFTP servers prior to version 1.17 (Globus Toolkit 3.2)
         do not support MLSD.

OPTIONS
  -help | -usage
       Print help
  -version
       Print the version of this program
  -versions
       Print the versions of all modules that this program uses
  -c | -continue-on-error
       Do not die after any errors.  By default, program will exit after
       most errors.
  -a | -ascii
       Convert the file to/from ASCII format to/from local file format
  -b | -binary
       Do not apply any conversion to the files. *default*
  -f <filename>
       Read a list of url pairs from filename.  Each line should contain
       <sourceURL> <destURL>
       Enclose URLs with spaces in double qoutes (").
       Blank lines and lines beginning with # will be ignored.
  -cd | -create-dest
       Create destination directory if needed
  -r | -recurse
       Copy files in subdirectories
  -fast
       Recommended when using GridFTP servers. Use MODE E for all data
       transfers, including reusing data channels between list and transfer
       operations.
  -q | -quiet 
       Suppress all output for successful operation
  -v | -verbose 
       Display urls being transferred
  -vb | -verbose-perf 
       During the transfer, display the number of bytes transferred
       and the transfer rate per second.  Show urls being transferred
  -dbg | -debugftp 
       Debug ftp connections.  Prints control channel communication
       to stderr
  -rst | -restart 
       Restart failed ftp operations.
  -rst-retries <retries>
       The maximum number of times to retry the operation before giving
       up on the transfer.  Use 0 for infinite.  Default is 5.
  -rst-interval <seconds>
       The interval in seconds to wait after a failure before retrying
       the transfer.  Use 0 for an exponential backoff.  Default is 0.
  -rst-timeout <seconds>
       Maximum time after a failure to keep retrying.  Use 0 for no
       timeout.  Default is 0.
  -rp | -relative-paths
      The path portion of ftp urls will be interpereted as relative to the
      user's starting directory on the server.  By default, all paths are
      root-relative.  When this flag is set, the path portion of the ftp url
      must start with %2F if it designates a root-relative path.
  -s  <subject> | -subject <subject>
       Use this subject to match with both the source and dest servers
  -ss <subject> | -source-subject <subject>
       Use this subject to match with the source server
  -ds <subject> | -dest-subject <subject>
       Use this subject to match with the destionation server
  -tcp-bs <size> | -tcp-buffer-size <size>
       specify the size (in bytes) of the buffer to be used by the
       underlying ftp data channels
  -bs <block size> | -block-size <block size>
       specify the size (in bytes) of the buffer to be used by the
       underlying transfer methods
  -p <parallelism> | -parallel <parallelism>
       specify the number of parallel data connections should be used.
  -notpt | -no-third-party-transfers
       turn third-party transfers off (on by default)
  -nodcau | -no-data-channel-authentication
       turn off data channel authentication for ftp transfers
  -dcsafe | -data-channel-safe
       set data channel protection mode to SAFE
  -dcpriv | -data-channel-private
       set data channel protection mode to PRIVATE
  -off | -partial-offset
       offset for partial ftp file transfers, defaults to 0
  -len | -partial-length
       length for partial ftp file transfers, used only for the source url,
       defaults the full file.
  -stripe
       enable striped transfers on supported servers
  -striped-block-size | -sbs
       set layout mode and blocksize for striped transfers
       If not set, server defaults will be used.
       If set to 0, Partitioned mode will be used.
       If set to >0, Blocked mode will be used, with this as the blocksize.
  -ipv6
       use ipv6 when available (EXPERIMENTAL)
  -nogridftp2
       do not use GridFTP2 even when available
</pre>
%ENDTWISTY% can be used for that purpose.

To verify that !GridFTP is working correctly we will 

   1 create a file using =dd=
   1 transfer the file _to_ the grid resource using =globus-url-copy=
   1 transfer the file back _from_ the grid resource using =globus-url-copy=
   1 compare both files using =diff=

First let's create the test file:

<pre class="screen">
[robert@osg-job ~]$ dd if=/dev/zero of=/tmp/osg-ce.ligo.caltech.edu.test.0 bs=1k count=1024
1024+0 records in
1024+0 records out
1048576 bytes (1.0 MB) copied, 0.005332 seconds, 197 MB/s
</pre>

Next let's transfer the file using =globus-url-copy=:

<pre class="screen">
[robert@osg-job ~]$ globus-url-copy file:///tmp/osg-ce.ligo.caltech.edu.test.0 gsiftp://osg-ce.ligo.caltech.edu/~/osg-ce.ligo.caltech.edu.test.0
[robert@osg-job ~]$ echo $?
0
</pre>

To copy the remote file back to your resource use:

<pre class="screen">
[robert@osg-job ~]$ globus-url-copy gsiftp://osg-ce.ligo.caltech.edu/~/osg-ce.ligo.caltech.edu.test.0 file:///tmp/osg-ce.ligo.caltech.edu.test.1
[robert@osg-job ~]$ echo $?
0
</pre>

Finally let's compare the original with the copy received back from the remote resource:

<pre class="screen">
[robert@osg-job ~]$ diff /tmp/osg-ce.ligo.caltech.edu.test.0  /tmp/osg-ce.ligo.caltech.edu.test.1
[robert@osg-job ~]$ echo $?
0
</pre>

%NOTE% The =file= protocol in the *URI* is used for files on a local file system. In this case no authentication is performed with the local resource before the file is read or written. Replacing =file= by =gsiftp= always requires a *GridFTP server* running at the resource specified in the URI.

 
---++ Job Submission Test

---+++ Job Submission using GRAM

Here we use the %TWISTY{showlink="globus-job-run" hidelink="Hide help page" start="hide" remember="on"}%
<pre class="file">

Usage: globus-job-run
      [-help|-usage]                     print usage and exit
      [-version]                         print version and exit
Usage: globus-job-run
      [-dumprsl]                         output RSL, don't run job
      [-dryrun]                          verify RSL, don't run job
      [-verify]                          perform dryrun, then run job
      [-file             file]           read rest of arguments from file
      [-stdin    [-l|-s] file]           global input default
      [-stdout   [-l|-s] file]           global output default
      [-stderr   [-l|-s] file]           global error output default
      [-env              name=value]...  global environment default
      [-args             [jobarg]...]    job-wide arguments
      [ host-clause  |                   job description
        -: host-clause...]               subjob description (multi-req)

host-clause syntax:
      { contact string                   only the hostname is required.
        [-np             N]              number of processing elements
        [-count          N]              same as -np
        [-host-count     nodes]          number of SMP nodes (IBM SP)
        [-m[axtime]      minutes]        time to allocate for the job
        [-p[roject]      projectID]      scheduling/accounting project ID
        [-q[ueue]        queueID]        scheduling/accounting queue ID
        [-d[ir]          directory]      working directory
        [-env            name=value]...  environment binding
        [-stdin  [-l|-s] file]           input
        [-stdout [-l|-s] file]           output
        [-stderr [-l|-s] file]           error output
        [-x rsl-clause]                  RSL extension capability
        [-l|-s] executable [args...]     executable and clause arguments

   Job stdin defaults to /dev/null.
   Job stdout/stderr default to stdout/stdout of globus-job-run.

   The file modifiers -l and -s specify different filespaces:
      -l[ocal]  file is relative to working directory of job      (DEFAULT)
      -s[tage]  file relative to job request is staged to job host

   The working directory of the submitted job defaults to $HOME.

   Valid forms of the contact string are:
       hostname
       hostname:port
       hostname:port/service
       hostname/service
       hostname:/service
       hostname::subject
       hostname:port:subject
       hostname/service:subject
       hostname:/service:subject
       hostname:port/service:subject

   More than one host-clause can be specified, in which case the job runs
   on all of the hosts simultaneously.

   The host clause begins with '-:' for a multi-request, and the contact string
   of the remote resource for a single request. It allows any of the
   specified options in any order. The first unrecognized (non-flagged)
   term  is treated as the executable, with arguments following immediately
   after.

   In the multi-request case, arguments may be specified specifically for
   each host-clause by appending them after the name of the executable, or
   job-wide with the -args flag. In either case, arguments continue until
   the end of the command-line or until the next '-:' flag signifying
   a new host-clause.

   Two '-:' flags in a row are interpreted as an escaped '-:' and the host-
   clause continues until the next unpaired '-:' flag or end of input.

   If more than one setting is defined (such as two -stdin definitions),
   the setting defined last on the command line will be used.
</pre>
%ENDTWISTY% command to execute the =id= command on the remote resource using the default *fork* jobmanager:
 
<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu /usr/bin/id
uid=506(ligo) gid=506(ligo) groups=506(ligo)
</pre>

=/usr/bin/id= will return the unix account used to execute the program on the grid resource. Upon success you verified that your grid credential was mapped to a unix account on the resource and the jopbmanager executed the command under the local unix account your Distinguished Name is mapped to. 

Please open a ticket with the %LINK_GOC_OPEN_TICKET% for the resource in case the command did not succeed. 

---+++ Test the Availability of a Job Manager

A =job manager= is a process running on the gatekeeper which is managing the execution of your job. By default =fork= will be used to fork your program directly on the gatekeeper. As a general rule of thumb you should avoid to use =fork= and to execute programs on the gatekeeper unless that is your intention. A not complete list of job managers includes =fork=, =managedfork=, =ccs=, =condor=, =lsf=, =pbs= and =sge=. Depending on the setup of the grid resource more than one job manager will be available.

Following the example above you can use =globus-job-run= to verify that job manager =fork= is available:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu/jobmanager-fork /usr/bin/id
uid=506(ligo) gid=506(ligo) groups=506(ligo)
</pre>

Notice how we append =/jobmanager-fork= to the grid resource to request job manager =fork= explicitly now. Next, let's find out if job manager =condor= is available:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu/jobmanager-condor /bin/hostname
dom118
</pre>

Because the job is scheduled to be executed through Condor this command will likely require more time to complete. Here we used =/bin/hostname= to return the hostname of the worker node executing the job. To specify a job manager that is not supported by the grid resource makes for a convenient way to find out what job managers are supported by the resource using the comfort of the command line:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu/jobmanager-pbs /bin/hostname
GRAM Job submission failed because the gatekeeper failed to find the requested service (error code 93)
[robert@osg-job ~]$ echo $?
93
</pre>

Please note that the <b>names for job managers are case sensitive</b> and are <b>all lower case for GRAM</b>.

<!-- missing section waiting to be written 
---+++ Job Submission using GRAM-WS
-->

---++ Troubleshooting

---+++ !GridFTP

Several causes can make the [[ReleaseDocumentation/CESimpleTest#Data_Transfer_Test][Data Transfer Test]] fail:

   1 the !GridFTP daemon is not answering on the default port =2811= or the remote resource is down
   1 the directory on the server where you want to write does not exist
   1 the directory on the server where you want to write is mounted read-only
   1 your unix account on the server side does not give you access to the directory you want to access for writing

Here we assume that you successfully completed the [[ReleaseDocumentation/CESimpleTest#Mapping_Test][Mapping Test]].

---++++ Test that the !GridFTP service is answering on the default port 2811

Here we will use =telnet= to connect to the default !GridFTP port =2811= on the server side:

<pre class="screen">
robert@osg-job ~]$ telnet osg-ce.ligo.caltech.edu 2811
Trying 131.215.114.48...
Connected to osg-ce.ligo.caltech.edu (131.215.114.48).
Escape character is '^]'.
220 osg-ce.ligo.caltech.edu GridFTP Server 2.8 (gcc64dbg, 1217607445-63) [VDT patched 4.0.8] ready.
Connection closed by foreign host.
</pre>

!GridFTP is available if you received a 'Connected to ...' message. Otherwise you may want to contact the %LINK_GOC_OPEN_TICKET% and submit a trouble ticket for the resource!

---++++ Test that the target directory on the !GridFTP server exists

Here we will use =globus-job-run= to remotely view the target directory on the !GridFTP server:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu /bin/bash -c "ls -al ~"
total 17632
drwxr-xr-x 18 ligo ligo    69632 Jun 14 18:40 .
drwxr-xr-x 43 root root     4096 Jun  8 14:06 ..
-rw-------  1 ligo ligo     1118 Jun 14 16:34 .Xauthority
-rw-------  1 ligo ligo    27105 Jun 10 19:50 .bash_history
-rw-------  1 ligo ligo       33 Jan 21  2009 .bash_logout
-rw-------  1 ligo ligo      414 Sep 28  2009 .bash_profile
-rwx------  1 ligo ligo      225 Jul 14  2009 .bashrc
drwx------  4 ligo ligo     4096 Dec  7  2009 .globus
-rw-rw-r--  1 ligo ligo       36 Mar 17 20:55 .gnuplot_history
-rw-------  1 ligo ligo       42 May 28 12:22 .lesshst
drwxrwxr-x  3 ligo ligo     4096 Aug 22  2009 .mc
drwx------  2 ligo ligo     4096 Apr 22 15:10 .ssh
drwx------  3 ligo ligo     4096 Jun 13  2009 .subversion
-rwxr-xr-x  1 ligo ligo    10582 Jun  8 10:11 .viminfo
-rw-r--r--  1 ligo ligo  1048576 Jun 14 18:13 osg-ce.ligo.caltech.edu.test.0
</pre>

If the directory is not available you can _try_ to create it using =globus-job-run= 

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu /bin/bash -c "mkdir -p /tmp/example"
[robert@osg-job ~]$ echo $?
0
</pre>

If you are certain that the directory should exist on the server, you may want to contact the %LINK_GOC_OPEN_TICKET% and submit a trouble ticket for the resource!

---++++ Test that the target directory on the !GridFTP server is not mounted read-only

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu /bin/bash -c "/bin/mount"
/dev/mapper/VolGroup00-LogVol00 on / type ext3 (rw)
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/xvda1 on /boot type ext3 (rw)
tmpfs on /dev/shm type tmpfs (rw)
none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
sunrpc on /var/lib/nfs/rpc_pipefs type rpc_pipefs (rw)
10.10.1.2:/home on /home type nfs (rw,addr=10.10.1.2)
fuse on /mnt/hadoop type fuse (rw,nosuid,nodev,allow_other,default_permissions)
</pre>

%NOTE% This test will only return a meaningful result for partitions that are _mounted_. It will not report partitions that are _automounted_.

If you are certain that the directory should be mounted or be mounted with write-access, you may want to contact the %LINK_GOC_OPEN_TICKET% and submit a trouble ticket for the resource!

---++++ Test that your remote unix account has sufficient privileges

Please compare the result of =id= on the server side:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu /bin/bash -c "id"
uid=506(ligo) gid=506(ligo) groups=506(ligo)
</pre>

with the ownership and group membership information of the target directory on the !GridFTP server.

If you are certain that the directory should be mounted or be mounted with write-access, you may want to contact the %LINK_GOC_OPEN_TICKET% and submit a trouble ticket for the resource!

---+++ GRAM

Several causes can make the [[ReleaseDocumentation/CESimpleTest#Job_Submission_Test][Job Submission Test]] fail:

   1 the !GRAM daemon is not answering on the default port =2911= or the remote resource is down
   1 your Distinguished Name is mapped to a unix account that does not exist
   1 you are trying to access a *jobmanager* that is not supported on the remote resource

Here we assume that you successfully completed the [[ReleaseDocumentation/CESimpleTest#Authentication_Test][Authentication Test]].

---++++ Test that the GRAM service is answering on the default port 2911

Here we will use =telnet= to connect to the default GRAM port =2911= on the server side:

<pre class="screen">
[robert@osg-job ~]$ telnet osg-ce.ligo.caltech.edu 2119
Trying 131.215.114.48...
Connected to osg-ce.ligo.caltech.edu (131.215.114.48).
Escape character is '^]'.
Connection closed by foreign host.
</pre>

GRAM is running if you receive a 'Connected to ...' message. Otherwise you may want to contact the %LINK_GOC_OPEN_TICKET% to open a trouble ticket for the resource.

---++++ Test that your Distinguished Name is mapped to an unknown unix account

In this case the [[ReleaseDocumentation/CESimpleTest#Mapping_Test][Mapping Test]] will succeed, but the jobmanager will report that it failed to put the job into execution. Please open a ticket with the %LINK_GOC_OPEN_TICKET%.

---++++ Test if a jobmanager is supported

By default jobamanager *fork* is used to execute your command on the gatekeeper. To test if a different jobamanager is supported by the resource, try to submit the =id= command to the jobmanager:

<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu:2119/jobmanager-pbs /bin/bash -c "id"
GRAM Job submission failed because the gatekeeper failed to find the requested service (error code 93)
</pre>

The list of known jobmanagers supported by GRAM includes =fork=, =managedfork=, =condor=, =sge=, =pbs=, =lsf=, =ccs=. The spelling is _case-sensitive_ and differs slightly for *GRAM-WS*: =Fork=, =ManagedFork=, =Condor=, =SGE=, =PBS=, =LSF=, =CCS=! To complicate matters further it is called a 'FactoryType' by *GRAM-WS*.

Please open a ticket with the %LINK_GOC_OPEN_TICKET% if you are certain that the jobmanager you provided should be supported by the resource.

%STOPINCLUDE%

---++ *Comments*
| Just a test | Main.RobertEngel | 18 Mar 2010 - 23:00 |
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = RobertEngel

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = HowTo
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %YES%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = SuchandraThapa
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %YES%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = IwonaSakrejda
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %YES%
############################################################################################################
-->

%META:TOPICMOVED{by="ForrestChristian" date="1166042277" from="Integration.CESimpleTest050" to="Integration/ITB_0_5.CESimpleTest"}%
