%META:TOPICINFO{author="SuchandraThapa" date="1267730648" format="1.1" version="1.25"}%
%META:TOPICPARENT{name="ComputeElementInstall"}%
---+!! *<nop>%SPACEOUT{ "Enabling Full Privilege Authentication" }%*
%DOC_STATUS_TABLE%
%TOC{depth="2"}%

%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "Enabling Full Privilege Authentication" }%_
Enabling Full Privilege Authentication for CE Install

%BR%
%STARTINCLUDE%
---++ Enabling Full Privilege Authentication
%EDITTHIS%
*WARNING*: If any of the terms "Authorization", "Authentication", "GUMS", "grid-mapfile", or "VOMS" do not mean much to you, we highly recommend reading the [[AboutAuthorizationForCE][authorization for a CE]] document.  This will help you understand this critical section on security.

It is necessary to enable some mode of authentication before you can successfully run the OSG configuration script.  There is no mode of authentication that is enabled by default.  This document focuses on enabling the recommended Full Privilege Authorization mode using a GUMS server.  All OSG sites are strongly encouraged to use this mode.  There is more 
background information about the other privilege modes  at AboutAuthorizationForCE.   If you wish to enable a different mode, please consult [[CompatibilityAuthPreConfig][Compatibility authorization page]] or [[LocalAuthPreConfig][Local authorization page]].

<!--
*Meta note from Brian B*: if they don't understand this authorization mode before reading this paragraph, it is unlikely they will understand it after this paragraph.
-->
In Full Privilege mode,  the PRIMA authorization module with a GUMS service is used for all authorizations and does not use a grid-mapfile.  The Globus gatekeeper and WS-GRAM  use a callout to PRIMA such that upon receipt of each request, PRIMA forwards the request to a GUMS service which performs the dynamic mapping of the user's certificate to a local Unix account. PRIMA and GUMS can process VOMS FQAN (Fully Qualified Attribute Names), thus enabling mappings based on VO groups and roles as defined in a VOMS server.   This removes the need for maintaining a =grid-mapfile= on each gatekeeper and/or gridftp server.   

Obviously, your site must run a GUMS server in order to run in Full Privilege mode. 

*WARNING*: This section has changed significantly from OSG 1.0 to OSG 1.2.4.  In the latest version, the effort required from the sysadmin has been greatly reduced.  For brevity, the OSG 1.0 version of this documentation has been [[FullPrivPreConfigOsg10][factored out into a separate page]].

In OSG 1.2.4, authorization is configured in the =[Misc Services]= section of the config.ini.  There are two relevant attributes:
   * *authorization_method*: Set to the string _gridmap_, _prima_, or _xacml_.  For this authorization mode, use _prima_ or _xacml_; _xacml_ can be used for GUMS 1.3 and above; _prima_ must be used for GUMS 1.2 and below.  For the [[LocalAuthPreConfig][grid-mapfile mode]], use _gridmap_.
   * *gums_host*: Set this to the hostname of the GUMS server you use _if_ you answered _prima_ or _xacml_ above.

%STOPINCLUDE%
%BR%

---++ *Comments*
| A large portion of this has become obsolete and is handled by the configure-osg script and by entries in the config.ini file... including the use of the xacml. | Main.JohnWeigand | 21 Jul 2009 - 20:01 |
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = StevenTimm

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%


 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = JohnWeigand
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %YES%


############################################################################################################
-->