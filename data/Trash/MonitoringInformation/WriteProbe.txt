%META:TOPICINFO{author="ScotKronenfeld" date="1285907233" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="RSV33"}%
---+++ How to write an !RSV probe:

---++++ Language constraints:
   * can be written in any standard language that will be universally available (e.g. sh, perl, python)


---++++ Probe output:
   * must return status and details on STDOUT (see Example Outputs below) 
   * Should write any other debugging info to STDERR.  STDERR can come before/after/in-the-middle of STDOUT

---++++ Return code:
   * always return 0 if the job produced a status and details (even if the status is not OK)
   * return non-zero if the job fails for a different reason (such as bad inputs, missing exes, etc)

---++++ How to run the job:
The metric will either be 'local' or 'remote'
   * local - the job will run on the same computer !RSV is running on
   * remote - the job will be run via globus-job-run at the host being monitored.  This might be switched to use Condor-G
   * remote-batch? - This is not supported yet, but we may add a way to run a metric on the remote batch system

---++++ How to install probes
   * put probe in bin/probes directory
   * make a symlink for each metric that the probe implements in bin/metrics directory pointing at probe
   * create a meta file in meta/metrics (more to write here)

---+++ Example metric output

Metric run resulting in 'OK' status:
<pre class="screen">
JOB RESULTS:
OK
Ping succeeded
</pre>

Metric run resulting in a non-OK status:
<pre class="screen">
JOB RESULTS:
CRITICAL
Ping unsuccessful against host foo.cs.wisc.edu

Troubleshooting tips:
 - Is the network available?
 - Is the remote computer available?

Ping output:
ping: unknown host foo
</pre>

-- Main.ScotKronenfeld - 01 Oct 2010
