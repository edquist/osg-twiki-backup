%META:TOPICINFO{author="ScotKronenfeld" date="1265994453" format="1.1" reprev="1.7" version="1.7"}%
%META:TOPICPARENT{name="RSV"}%
---++ Validating !RSV configuration
   * <p><strong>Condor_cron jobs:</strong> You can check that your !RSV monitoring jobs are running in the Condor-Cron infrastructure with the following command:
    <pre class="screen">condor_cron_q</pre>
    You should see a handful of <tt>probe_wrapper.pl</tt> jobs, and a couple of other jobs (html-consumer, gratia-script-consumer, rotate_html_files), with output similar to this:
   <pre class="programlisting">Submitter: foo.bar.edu : <156.56.m.n:nnn> : foo.bar.edu
ID      OWNER   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
21.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
   . . .
36.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
37.0   rsvuser    5/9  16:36   0+00:00:04 R 0   0.0  html-consumer     
38.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
39.0   rsvuser    5/9  16:36   0+00:00:04 R 0   0.0  gratia-script-cons
40.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  rotate_html_files.</pre> 
     <p>If you do not see these jobs in Condor-Cron, then !RSV jobs are not running on your system.

   * <strong>Service cert proxy (if applicable):</strong> If you setup RSV to use a service certificate (<tt>use_service_cert</tt> setting in your config.ini file), then you should see the proxy for it in <tt>/tmp/rsvproxy</tt> (or whatever path you specified in <tt>rsv_proxy_out_file</tt> in your config.ini file). [[MapServiceCertToRsvuser][This page]] explains how to authorize the certificate to allow RSV to run globus jobs. 

   * <strong>Local RSV status page :</strong> After the first probe has run (usually ~15 minutes), you can see the results on the local status web page that is created. This page is created at =$VDT_LOCATION/osg-rsv/output/html/index.html=. You can either view the local status pages directly on the monitoring host ; or you can view these pages on the web at !https://&#60;FQDN_of_monitoring_host&#62;:8443/rsv, as long as the <tt>setup_for_apache</tt> value in your config.ini file is enabled. 
     <p>Note: In order to view this page, you'll need to have a certificate loaded in your web browser that is accepted by one of the Certificate Authorities on your CE. 

   * <strong>RSV status on !MyOSG:</strong> After the first probe has run (usually ~15 minutes), check [[http://myosg.grid.iu.edu/wizardcurrentstatus/index?datasource=currentstatus&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&current_status_attrs_shownc=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showfqdn=on&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&start_type=7daysago&start_date=04/08/2009&end_type=now&end_date=04/15/2009&all_resources=on&gridtype=on&gridtype_1=on&service=on&service_4=on&service_1=on&service_5=on&service_2=on&service_3=on&active=on&active_value=1&disable_value=1][MyOSG's RSV resource status page]] - metric results for your resource, as well as resource status, should be displayed, assuming your resource is registered with the appropriate FQDN, and is active in OIM.
      * <p><strong>RSV output record upload to central collector (using Gratia transport):</strong> if the !MyOSG URL above does not display metrics then you can start debugging by first looking at the Gratia consumer log file: =$VDT_LOCATION/osg-rsv/logs/consumers/gratia-script-consumer.out= to see if probe results were uploaded successfully to the !GOC maintained !RSV database. You should see entries similar to this:
   <pre class="programlisting">   08-20-2007 16:35:26 - Executing script '/usr/local/grid/ . . . record.py'
   OK </pre> 
