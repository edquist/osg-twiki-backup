%META:TOPICINFO{author="MarcoMambelli" date="1247269573" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="RSV"}%
---++ Validating !RSV configuration

   * <p><strong>Condor_cron jobs:</strong> You can check all the condor-cron !RSV jobs that got submitted typing:
    <pre class="screen">condor_cron_q</pre>
   <pre class="programlisting">Submitter: foo.bar.edu : <156.56.m.n:nnn> : foo.bar.edu
ID      OWNER   SUBMITTED     RUN_TIME ST PRI SIZE CMD               
21.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
   . . .
36.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
37.0   rsvuser    5/9  16:36   0+00:00:04 R 0   0.0  html-consumer     
38.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  probe_wrapper.pl /
39.0   rsvuser    5/9  16:36   0+00:00:04 R 0   0.0  gratia-script-cons
40.0   rsvuser    5/9  16:36   0+00:00:00 I  0   0.0  rotate_html_files.</pre> 
     <p>What the above display shows are a bunch of <tt>probe_wrapper.pl</tt> jobs that are running the probes; one of those that's running the periodical proxy generator if you setup !RSV to use a service cert; and most likely 3 consumer jobs that generate local HTML pages and rotate them nightly, and upload records to the GOC !RSV collector.
   * <strong>Service cert proxy if applicable:</strong> If you setup RSV to use a service certificate, then you should see the proxy for it in <tt>/tmp/rsvproxy</tt> (unless you specified it to be a different filename). [[MonitoringInformation/MapServiceCertToRsvuser][This page]] will explain how to authorize the certificate. The service certificate can be the same of the host certificate but pay attention that in this case the files have to be copied. If they are linked there will be ownership problems because RSV and other services like the gatekeeper run under different users and need to own the certificate file.
   * <strong>RSV status on !MyOSG:</strong> After waiting about 15 minutes, check [[http://tinyurl.com/nu2p6b][MyOSG's RSV resource status page (Note: URL customized to display only registered ITB resources)]] - metric results for your resource, as well as resource status, should be displayed, _assuming your resource is registered with the appropriate FQDN, and is active in OIM_.
      * *NOTE*: We are working out some details regarding the CA cert metric - so expect your resource to be under unknown status -- the presence of other metrics in the above display indicates successful end to end transfer of RSV results from your site-level RSV client to the GOC collector.
      * <p><strong>RSV output record upload to central collector (using Gratia transport):</strong> if the !MyOSG URL above does not display metrics per your expectation then you can start debugging by first looking at the Gratia consumer log file: =$VDT_LOCATION/osg-rsv/logs/consumers/gratia-script-consumer.out= to see if probe results were uploaded successfully to the !GOC maintained !RSV database. You should a bunch of entries similar to this:
   <pre class="programlisting">   08-20-2007 16:35:26 - Executing script '/usr/local/grid/ . . . record.py'
   OK </pre> 
   * <strong>Local RSV status page :</strong> After waiting about 15 minutes, check out the local status web page that is created with results of RSV probe runs each day. By default, this page is =$VDT_LOCATION/osg-rsv/output/html/index.html=, but can be reconfigured. You can either view the local status pages directly on the monitoring host ; or you can view these pages on the web at !https://&#60;FQDN_of_monitoring_host&#62;:8443/rsv, once again assuming you configured !RSV to use the !VDT Apache using the =--setup-for-apache= switch during config time. Beware that you <em>need to have an !OSG approved cert loaded in your web browser</em> to be able to view them page. The status pages should look similar to [[http://rsv.grid.iu.edu/documentation/sample_status.html][what is documented here]].