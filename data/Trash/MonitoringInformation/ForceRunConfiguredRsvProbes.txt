%META:TOPICINFO{author="ArvindGopu" date="1249575751" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="RSV"}%
---+ Force already configured probes to run immediately 

There are occasions when a site-administrator might want to force-run one or more probe(s)  immediately -- for example, RSV may have reported a problem with CA-cert installation on a CE, the admin may have fixed the problem already but does not want to wait for the scheduled probe to run again (in one, two .. or several hours). The RSV package comes with a simple script to force-run probes in these circumstances. 

   * *Script:* The script is named =run-rsv-probe-by-hand.sh=, and it is located in =${VDT_LOCATION}/osg-rsv/bin/misc=. It submits a normal Condor job to Condor-cron that will run immediately.
   * *Arguments:* It takes a hostname_fqdn or a metric_name [NOTE: Not the probe file name], or a sub-string of one of those, as its first argument. The second argument is =${VDT_LOCATION}= if VDT's setup.sh has not been executed yet.
   * *Assumptions:* The script only works for metrics that are already configured in an existing RSV client i.e. Condor-cron submission files for said metric and host exists in =${VDT_LOCATION}/osg-rsv/submissions/probes/*.sub=
      * *How to find out metric name:* Look in =${VDT_LOCATION}/osg-rsv/submissions/probes/*.sub= -- the files are of the format =&#60;host_fqdn&#62;__&#60;probe&#62;@&#60;metric_name&#62;.sub=

---++ Examples
   * Force-run all probes against a host, say =foo.grid.iu.edu=
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/run-rsv-probe-by-hand.sh foo.grid.iu.edu ${VDT_LOCATION} </pre>
      * Similar to above example but runs a smaller number of probes due to more specifc search criteria
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/run-rsv-probe-by-hand.sh foo.grid.iu.edu*cacert-expiry  ${VDT_LOCATION} </pre>
   * Force-run one probe, say  =org.osg.certificates.cacert-expiry=, against all hosts it might be configured for
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/run-rsv-probe-by-hand.sh  org.osg.certificates.cacert-expiry ${VDT_LOCATION} </pre>
      * Similar to above example but possibly covers wider selection of metric names due to less specific search criteria
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/run-rsv-probe-by-hand.sh  cacert-expiry ${VDT_LOCATION} </pre>

---++ Sample Screen-Capture
<pre class='progamlisting'>${VDT_LOCATION}/osg-rsv/bin/misc/run-rsv-probe-by-hand.sh birdnest ${VDT_LOCATION} 
 Using VDT_LOCATION: /usr/local/rsv-2.4.1  to run metric: birdnest
 Using condor-cron submission file: birdnest...__remote-env-probe@org.osg.general.remote-env.sub ; Will create /tmp/birdnest...__remote-env-probe@org.osg.general.remote-env.sub.23655.sub
 Submitting /tmp/birdnest...__remote-env-probe@org.osg.general.remote-env.sub.23655.sub into Condor-Cron
 Submitting job(s).
 Logging submit event(s).
 1 job(s) submitted to cluster 38090.
 All done! Above metrics should be updated shortly by this manual execution</pre>

-- Main.ArvindGopu - 06 Aug 2009

%META:TOPICMOVED{by="ArvindGopu" date="1249575750" from="MonitoringInformation.ForceRunConfiguredProbes" to="MonitoringInformation.ForceRunConfiguredRsvProbes"}%
