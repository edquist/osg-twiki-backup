%META:TOPICINFO{author="ScotKronenfeld" date="1288294546" format="1.1" reprev="1.6" version="1.6"}%
%META:TOPICPARENT{name="RSV33"}%
---+ Standard !RSV Configuration

Most site administrators will be able to configure !RSV by doing the following steps:
   * Edit the [RSV] section in config.ini
   * Run =configure-osg -c=
   * Done!  Once you enable services (via =vdt-control=) you've got a working !RSV installation.

This page is intended for admins who need to do more than the basic configuration allows for, such as:
   * enable metrics that are not enabled by default
   * change parameters that are passed to the metrics

---+ Advanced !RSV configuration

---++ Using rsv-control to enable/disable metrics

You can enable and disable metrics and consumers using =rsv-control=.  Here is an example:

<pre class="screen">
[root@vdt-itb bin]# rsv-control --enable html-consumer gratia-consumer
Enabling consumer html-consumer
Enabling consumer gratia-consumer
</pre>

<pre class="screen">
[root@vdt-itb bin]# rsv-control --enable --host osg-edu.cs.wisc.edu org.osg.crl.wlcg.freshness org.osg.certificates.wlcg.verify
Enabling metric 'org.osg.crl.wlcg.freshness' for host 'osg-edu.cs.wisc.edu'
Enabling metric 'org.osg.certificates.wlcg.verify' for host 'osg-edu.cs.wisc.edu'
</pre>

<pre class="screen">
[root@vdt-itb bin]# rsv-control --disable --host osg-edu.cs.wisc.edu org.osg.crl.wlcg.freshness org.osg.certificates.wlcg.verify org.osg.srm.srmping
Disabling metric 'org.osg.crl.wlcg.freshness' for host 'osg-edu.cs.wisc.edu'
Disabling metric 'org.osg.certificates.wlcg.verify' for host 'osg-edu.cs.wisc.edu'
Disabling metric 'org.osg.srm.srmping' for host 'osg-edu.cs.wisc.edu'
   Metric already disabled
</pre>

The =enable=, =disable=, =on=, and =off= switches work the same as with the =vdt-control= command.  After enabling metrics you still need to turn them on.  After disabling metrics, if they are running you need to turn them off.  Here's the behavior of each:
   * enable = I want the probe to turn on next time the !RSV service is started (but it won't be turned on right now)
   * on = turn it on now
   * disable = don't turn this on when the service starts (but if it's running, I'm not going to shut it off)
   * off = turn it off NOW (but it won't get disabled, and it will be started the next time the !RSV service is started)

---++ Editing !RSV configuration files

#MetricConfig
---+++ Options to metrics:
=$VDT_LOCATION/osg-rsv/etc/metrics/*.conf=
The files in this directory are intended to be edited by site admins.  Any key=value pairs inside of this file will be turned into command line parameters to the probe.  For example, for this file:
<pre class="screen">
[org.osg.certificates.cacert-expiry args]
warning-hours = 6
error-hours = 12
</pre>
This would convert to =--warning-hours 6 --error-hours 12=

---++++ Meta files:
=$VDT_LOCATION/osg-rsv/meta/metrics/*.meta=

The files in this directory contain meta information about the metrics are not intended to be edited.  If you think there is a mistake in one of the .meta files or if you think you need to override one of the settings in the .meta file please contact vdt-support@opensciencegrid.org

---+++ Options to consumers:
=$VDT_LOCATION/osg-rsv/etc/consumers.conf=
| *Setting* | *Values* | *Details* |
| enabled | &lt;consumers&gt; | Comma-separated list of consumers to be enabled |
| timestamp | local | If this is set to local, a record with a local timestamp will be supplied to the consumer.  If this is set to any other value, or is not set, a record with the GMT will be created. |

---+++ Options in rsv.conf:
=$VDT_LOCATION/osg-rsv/etc/rsv.conf=
| *Setting* | *Values* | *Details* |
| user | &lt;username&gt; | The UNIX username that owns RSV.  This is mandatory |
| service-cert | &lt;path&gt; | Absolute path to the service certificate file.  If this is set service-key and service-proxy must also be set. |
| service-key | &lt;path&gt; | Absolute path to the service key file.  This must be used with service-cert. |
| service-proxy | &lt;path&gt; | Absolute path where the service proxy will be generated.  This must be used with service-cert. |
| proxy-file | &lt;path&gt; | Alternative to service-cert.  The absolute path where the user proxy file is located.  This will not be auto-regenerated. |
| details-data-trim-length | &lt;integer&gt; | The number of bytes to trim the detailsData section to.  If set to 0 no trimming will occur. |
| job-timeout | &lt;integer&gt; | Time in seconds before a metric is killed.  A metric that times out will return a CRITICAL status. |
| extra-globus-rsl | &lt;string&gt; | Extra RSL to pass to globus-job-run commands. %BR% For example, this would add an RSVJob attribute to a Condor classad (include the quotes): "&(condorsubmit=('+RSVJob' 'True'))" |


-- Main.ScotKronenfeld - 03 Sep 2010

%META:TOPICMOVED{by="ScotKronenfeld" date="1285884840" from="MonitoringInformation.RSVNewDoc" to="MonitoringInformation.RSV33Config"}%
