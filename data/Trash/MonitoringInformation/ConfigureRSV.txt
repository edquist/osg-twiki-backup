%META:TOPICINFO{author="KyleGross" date="1476285320" format="1.1" version="1.15"}%
%META:TOPICPARENT{name="RSV"}%
---+!! Notice: Information on !RSV configuration for OSG 3 is available [[Documentation/Release3.ConfigureRsv][here]].  The information on the following pages may be outdated

---+ Standard !RSV Configuration

Most site administrators will be able to configure !RSV by doing the following steps:
   * Edit the [RSV] section in config.ini
   * Run =configure-osg -c=
   * Done!  Once you enable services (via =vdt-control=) you've got a working !RSV installation.

---+ Advanced !RSV configuration

---++ Enable or disable metrics

See the [[RsvControl][rsv-control documentation]].

---++ Configure metrics

If you need to change the behavior of a metric you can edit the metric configuration files.  These replace the spec files from previous versions of RSV.
   * =VDT_LOCATION/osg-rsv/etc/metrics= - changes made to conf file in this directory will affect the metric when run against all hosts
   * =VDT_LOCATION/osg-rsv/etc/metrics/&lt;HOST&gt;= - changes made to conf files in this directory will affect the metric when run against the specific host

---+++ Change the times a metric runs

To change the time a metric runs set the =cron-interval= setting in the metric's conf file.  For example, to change the org.osg.general.ping-host to run at a different time:

<pre class="screen">
[org.osg.general.ping-host]
cron-interval = 45 * * * *

[org.osg.general.ping-host args]
#ping-count =
#ping-timeout =
</pre>

%NOTE% Be sure to put the =cron-interval= setting in the [org.osg.general.ping-host] section, and not the [org.osg.general.ping-host args] section!  The purpose of the "args" section is described below.

After modifying the cron time of a metric you must restart !RSV for the change to take effect.

To see what times each of the metrics is running you can use rsv-control, e.g.:

<pre class="screen">
# rsv-control -l --cron-times

Metrics enabled for host: osg-edu.cs.wisc.edu:10443       | Cron times         
----------------------------------------------------------+--------------------
org.osg.srm.srmcp-readwrite                               | 28 * * * *         
org.osg.srm.srmping                                       | 13,33,53 * * * *   
...
</pre>


---+++ Pass extra parameters to a metric

Any key=value pairs in the 'args' section of the metric's conf file will be turned into command line parameters to the probe.  For example, for this file:
<pre class="screen">
[org.osg.certificates.cacert-expiry args]
warning-hours = 6
error-hours = 12
</pre>
This would convert to =--warning-hours 6 --error-hours 12=

---++ Configure consumers:
=$VDT_LOCATION/osg-rsv/etc/consumers.conf=
| *Setting* | *Values* | *Details* |
| enabled | &lt;consumers&gt; | Comma-separated list of consumers to be enabled |
| timestamp | local | If this is set to local, a record with a local timestamp will be supplied to the consumer.  If this is set to any other value, or is not set, a record with the GMT will be created. |

---++ Options in rsv.conf:
=$VDT_LOCATION/osg-rsv/etc/rsv.conf=
| *Setting* | *Values* | *Details* |
| user | &lt;username&gt; | The UNIX username that owns !RSV.  This is mandatory |
| service-cert | &lt;path&gt; | Absolute path to the service certificate file.  If this is set service-key and service-proxy must also be set. |
| service-key | &lt;path&gt; | Absolute path to the service key file.  This must be used with service-cert. |
| service-proxy | &lt;path&gt; | Absolute path where the service proxy will be generated.  This must be used with service-cert. |
| proxy-file | &lt;path&gt; | Alternative to service-cert.  The absolute path where the user proxy file is located.  This will not be auto-regenerated. |
| details-data-trim-length | &lt;integer&gt; | The number of bytes to trim the detailsData section to.  If set to 0 no trimming will occur. |
| job-timeout | &lt;integer&gt; | Time in seconds before a metric is killed.  A metric that times out will return a CRITICAL status. |
| extra-globus-rsl | &lt;string&gt; | Extra RSL to pass to globus-job-run commands. %BR% For example, this would add an RSVJob attribute to a Condor classad (include the quotes): "&(condorsubmit=('+RSVJob' 'True'))" |
| source-setup-sh | 0 or 1 | Defaults to 0 (False).  If this is true then setup.sh will be sourced to setup the environment.  If false it will not be sourced but a minimal environment is still defined by the metric's meta file.  Introduced in version 3.3.11 |

-- Main.ScotKronenfeld - 03 Sep 2010

%META:TOPICMOVED{by="ScotKronenfeld" date="1300177739" from="MonitoringInformation.RSV33Config" to="MonitoringInformation.ConfigureRSV"}%
