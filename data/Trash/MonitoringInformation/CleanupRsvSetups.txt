%META:TOPICINFO{author="ArvindGopu" date="1249575196" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="RSV"}%
---+ Clean up existing RSV configurations

When RSV is initially configured, a variety of directories and files are created. Occasionally, an administrator might mis-configure !RSV, and wishes to clean up such setups -- the configure script does not remove any existing files, therefore, the RSV package comes with a simple script to clean-up shop in various ways, in these circumstances. 

   * *Script:* The script is named =cleanup-rsv.pl=, and it is located in =${VDT_LOCATION}/osg-rsv/bin/misc=. It removes files based on parameters provided.
   * *Arguments:* It takes various arguments -- type =${VDT_LOCATION}/osg-rsv/bin/misc/cleanup-rsv.pl -h= to learn more or use examples below.
   * *Assumptions:* 
      * The script does not touch customized =&#60;hostname&#62;_metrics.conf= files.
      * It is interactive, and expects confirmation before deletes..

---++ Examples
   * Reset !RSV configuration: Remove all submission files, and output files
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/cleanup-rsv.pl --reset</pre>
   * Remove !RSV configuration for a particular host (FQDN), say =foo.grid.iu.edu=
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/cleanup-rsv.pl --remove-probes foo.grid.iu.edu</pre>
   * Remove all output files -- HTML pages and gratia-uploader scripts
 <pre class='screen'> ${VDT_LOCATION}/osg-rsv/bin/misc/cleanup-rsv.pl --output-files-only</pre>

---+++ Sample Screen-capture 1

<pre class='programlisting'> ${VDT_LOCATION{/osg-rsv/bin/misc/cleanup-rsv.pl --output-files-only

 Request to cleanup all local RSV HTML webpages, and related file from /usr/local/ . . .

 The following files will be removed:
  /usr/local/rsv-2.4.1/osg-rsv/logs/probes/*.out
  /usr/local/rsv-2.4.1/osg-rsv/logs/probes/*.err
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*/*.html* 
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*.html

 The following directories will be removed:
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*

 Continue? (y/n) [n]: y 
 . . .
</pre>

---+++ Sample Screen-capture 2

<pre class='programlisting'> ${VDT_LOCATION{/osg-rsv/bin/misc/cleanup-rsv.pl --reset

 Request to reset RSV - will remove related files from /usr/local/rsv-2.4.1/osg-rsv

 The following files will be removed:
  /usr/local/rsv-2.4.1/osg-rsv/submissions/probes/*.sub
  /usr/local/rsv-2.4.1/osg-rsv/submissions/consumers/*.sub
  /usr/local/rsv-2.4.1/osg-rsv/logs/probes/*
  /usr/local/rsv-2.4.1/osg-rsv/logs/consumers/*
  /usr/local/rsv-2.4.1/osg-rsv/output/gratia/*
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*/*.html* 
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*.html

 The following directories will be removed:
  /usr/local/rsv-2.4.1/osg-rsv/output/html/*

 Continue? (y/n) [n]:y
 . . .
</pre>

-- Main.ArvindGopu - 06 Aug 2009
