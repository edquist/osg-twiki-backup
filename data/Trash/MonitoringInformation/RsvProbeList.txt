%META:TOPICINFO{author="ArvindGopu" date="1218635300" format="1.1" version="1.11"}%
%META:TOPICPARENT{name="RSV"}%
---+ !RSV Probe List

This twiki page will list information about !RSV probes - both the ones in existence right now, and ones that have been requested by someone on the OSG community.

<a name="currentlist"></a>
---++ Current list of probes

Need to fill this up or point somewhere --AG

<a name="changecurrent"></a>
---++ Change request for existing probes

---+++ Crl-expiry metric (cacert-crl-expiry-probe)

   * In conversations with Brian, I've (AG) discussed how it's too harsh ... if one CA that no one on the OSG cares about has an expired CRL, that does not mean, the resource is down, and unusable. 
   * In conversation with James Casey, I think the way we should do the CRL test is as following: 
      * Have a central service that tests all the OSG CAs, and retrieves CA/CRL expiration dates, etc. -- that information should be served off a web interface. Example: https://igtf-mon.srce.hr/nagios/ -- click on "Service Detail" 
      * The CRL probe (metric) will then run on a resource, and compare expiration dates with the ones served by above central web interface. 
   * UPDATE 2008-07: [ *Apply this to CAcerts metric too* ] The above test could be extended to the CaCert metric as well since the same problems that afflict the CRL metric, apply to it as well. Plus, the v2 CAcert metric looks for a VDT version number of the CAcerts package, and thus fails on resources that don't use the VDT update mechanism. 

   * Above method does a few things: 
      * It provides a more sensible test where a resource is not penalized for a bad CA who has not updated their CRL before it expires 
      * It provides a more sensible test from a security point of view as well - whether a resource has a (an updated) CRL that has recently been updated _before_ its expiration date by CA to revoke some certificates is a more relevant fact, than whether a CRL has expired. I am not a security expert so I might be mis-speaking here -- comments are welcome, please add comments below. 
   * UPDATE 2 - 2008-07 [ *Selective CA listing* ] : We need to also accommodate use of a web service / online list of CAs that a VO cares about in the above two metrics. 

---+++ srmcp-readwrite metric (srmcp-srm-probe)
   * Use port if provided in uri instead using 8443 in perl module -- simple fix, need to implement this in next lettered release. 

---+++ gridftp-simple metric (gridftp-simple-probe)
   * Add remote file clean up 
   * Add process id to temp file on this probe, and others to avoid race conditions better.
---+++ General - perl module
   * Ensure serviceUri is clean when uploaded via Gratia (port information, etc. as applicable ) -AG 
   * Use hostname in output files created by probes - Gratia script file (Tony). -AG 

---+++ Configure script
   * If metrics are turned off, perhaps some info on that? (ie metric force-turned off) 

<a name="futurelist"></a>
---++ Requested list of probes (for future work)

---+++ Probe to check to make sure WN-client is accessible on the head node and that its certs are up to date.
   * From Steve Timm in osg-int thread [[http://listserv.fnal.gov/scripts/wa.exe?A2=ind0805c&L=osg-int&T=0&P=14331][Re: Integrating wn-client on OSG CE installations]] -- Probably a good idea to add an !RSV probe to check to make sure WN-client is accessible on the head node and that its certs are up to date. 

   * I believe this is related as well -- From Michael Thomas in osg-int thread [[http://listserv.fnal.gov/scripts/wa.exe?A2=ind0805c&L=osg-int&T=0&P=8295][$OSG_GRID on the gatekeeper]] 
      * Have an rsv probe for it, or both. Both my ITB 0.9.0 and 0.9.1 installs were lacking $OSG_GRID on the CE, and it didn't show up as a problem until LIGO tried to validate. 
   * Probe meta data 
      * Requested: 2008-05-21 
      * Probe Type: OSG-CE 
      * Probe developer(s): 
      * Status: As if 2008-05-21 under discussion. 

---+++ Probe to check if Gratia accounting is compatible with Condor JM.

   * Chris Green to write a probe to ensure Gratia accounting will work with Condor JMs 

   * Probe meta data 
      * Requested: ~2008-04 
      * Probe Type: OSG-CE (using Condor job manager) 
      * Probe developer(s): Chris Green, with help from !RSV dev team 
      * Status: As of 2008-05-21 -- still no updates. 

---+++ Probe to check if system time on a CE is off (which in turn will lead to auth errors)

   * Alain Roy and Ben Clifford have suggested we add a probe to check time on a computer 
      * If the time is off by more five minutes or more, it's an error, and a critical one at that. It's critical because it will cause authentication to fail in some cases. 
      * Otherwise if the time is off by more than 60 seconds, it's a warning. 
      * Not sure of the best way to implement it. The problem is that if ntp isn't installed, you don't have some useful commands to figure out the current time. Plus, some of the ntp commands require root. ntpstat might be useful, if it's installed. 
      * Ben: Run this =$ /usr/sbin/ntpq -pn= as a local user. 
         * You might also try something like this: 
 

<pre> $ /usr/sbin/ntpdate -q tick.ucla.edu server 164.67.62.194, stratum 1, offset 0.005265, delay 0.08360  9 Jun 10:34:56 ntpdate[19948]: adjust time server 164.67.62.194 offset  0.005265 sec</pre>

   * Probe meta data 
      * Requested: 2008-06-08 
      * Probe Type: OSG-CE/{SE}/etc 
      * Probe developer(s): Yet to be decided -- !RSV dev team? 
      * Status: As of 2008-06-08 -- new addition. 

-- Main.ArvindGopu - 21 May 2008