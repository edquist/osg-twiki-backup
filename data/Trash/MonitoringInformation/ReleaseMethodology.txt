%META:TOPICINFO{author="ArvindGopu" date="1254236279" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="RSV"}%
---++ How to cut a release

   * The steps are similar to what we do to release other services:
      * For example, to cut a new ITB release 3.1.1:
 <pre> TAG=OSG_RSV-3.1.1
 svn rm https://osg-svn.rtinfo.indiana.edu/rsv/releases/latest-itb -m "Deleting latest-itb release, will recreate in a minute";
 svn cp https://osg-svn.rtinfo.indiana.edu/rsv/trunk https://osg-svn.rtinfo.indiana.edu/rsv/releases/${TAG} -m "Tagging ${TAG}"
 svn cp https://osg-svn.rtinfo.indiana.edu/rsv/trunk https://osg-svn.rtinfo.indiana.edu/rsv/releases/latest-itb -m "Tagging latest ITB - ${TAG}"</pre>
      * Replace "latest-itb" with "latest-vtb" for VTB releases;       
   * <u><strong>Once an ITB->ITB release is thoroughly tested</strong></u>, a production release can be cut by losing the =-itb= suffix from the above steps.
   * Above steps will be scripted in the near future.

---+++ How to cut VDT tarball release
   * We provide VDT with a barebones RSV tarball that contains the =configure_osg_rsv= script and the =install_from_svn.sh= script.
   * Checkout latest ITB or production release -- for example, =https://osg-svn.rtinfo.indiana.edu/rsv/releases/latest-itb=
      * Create tarball
 <pre> # tar --no-same-owner -zcvf OSG_RSV_Base-3.1.1.tar.gz \
osg-rsv/setup/configure_osg_rsv osg-rsv/setup/install_from_svn.sh </pre>
      * Import tarball into =https://osg-svn.rtinfo.indiana.edu/rsv/releases/tarballs/=
 <pre>svn import OSG_RSV_Base-3.1.1.tar.gz https://osg-svn.rtinfo.indiana.edu/rsv/releases/tarballs/OSG_RSV_Base-3.1.1.tar.gz</pre>
----

---++ Testing Methodology
   * Any updates are tested on VTB (=releases/latest-vtb= points to updated version)
      * Then on ITB (At this point, =releases/latest-itb= points to updated version)
   * Finally, once all testing is complete =releases/latest= will point to updated and tested version)
   * ITB has agreed to provide testing within a reasonable amount of time ... approximately 24-48 business hours.

---+++ Directory Structure
   * We might have:
 <pre> 
 releases
 	3.0 
 	3.0-1
 	3.0-2 
 	latest-3.0 (points at 3.0-2)
 	latest (points at 3.0-2)
 	3.1
 	3.1-1
 	latest-3.1 (points at 3.1-1)
	latest-itb (points at 3.1-1)</pre>
   * To fix a bug in existing production release, we will copy 
 <tt>releases/3.0-2 -> branches-3.0</tt>
 Check out branches-3.0 ... fix bug, commit
   * To release this bug fix, we copy:
<pre> branches-3.0 -> releases/3.0-3
 Point latest-3.0 at 3.0-3
 Point latest to 3.0-3</pre>


-- Main.ArvindGopu - 29 Sep 2009
