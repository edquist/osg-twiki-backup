%META:TOPICINFO{author="BrianLin" date="1497450408" format="1.1" version="1.17"}%
%META:TOPICPARENT{name="RSV"}%
---+!! Notice: Information on !RSV configuration for OSG 3 is available [[Documentation/Release3.ConfigureRsv][here]].  The information on the following pages may be outdated

---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%LINKCSS%

%TOC%

%STARTINCLUDE%
%BR%


<a name="advanced_rsv_config"></a>

---+ Advanced !RSV Installations (Configurations)

%INCLUDE{"MonitoringInformation/StartRsvV2"}%

---++ Condor-Cron 

<p> Starting with OSG 1.0 !RSV will always include a minimal Condor package called condor-cron that is used to schedule !RSV probes and consumers.

%NOTE% You can set =VDTSETUP_NO_CONDOR_CRON=1= in your environment to prevent Condor-Cron from installing.

%INCLUDE{"MonitoringInformation/MonitoringOsg10Ce"}%

---++ Pre-config check list
<p> Ensure you have gone through the [[https://twiki.grid.iu.edu/twiki/bin/view/Trash/Documentation_Release3TrashReleaseDocumentationPreparingComputeElement#RSV_Prerequisites][<strong>RSV prerequisites section of the Preparing Compute Element</strong>]] document already. 

---++ Sending !RSV records to Nagios

   1. Edit your rsv-nagios.conf file and fill in the appropriate information.  It will be located at =VDT_LOCATION/osg-rsv/etc/rsv-nagios.conf=.  If you don't have an rsv-nagios.conf file you can download a template from [[http://vdt.cs.wisc.edu/releases/2.0.0/rsv-nagios.conf]].
   1. If your nagios config file contains password information you will want to lock down the permissions.  Here is a suggested way to do this.  Replace <em>rsvuser</em> with the group of your rsvuser.
      <pre class="screen">chown root:<em>rsvuser</em> $VDT_LOCATION/osg-rsv/etc/rsv-nagios.conf
chmod 0440 $VDT_LOCATION/osg-rsv/etc/rsv-nagios.conf</pre>
   1. In the configuration file at =VDT_LOCATION/osg-rsv/etc/consumers/nagios-consumer.conf=, check the following two settings:
      * Make sure that the path to your config file is correct.  It may be referencing a directory =config= instead of =etc=
      * If you want to use rsv2nsca add the string "--send-nsca" to the =args= line.
   1. Enable and start the nagios consumer.
      <pre class="screen">rsv-control --enable nagios-consumer</pre>
      The nagios-consumer will be started the next time that you start !RSV.  If you are already running !RSV you can turn on the nagios-consumer immediately by running:
      <pre class="screen">rsv-control --on nagios-consumer</pre>
   1. To verify that the nagios-consumer is running you can run =rsv-control -j=.
   1. The log information for the nagios-consumer can be found in these files
      * =VDT_LOCATION/osg-rsv/logs/consumers/rsv2nagios.log=
      * =VDT_LOCATION/osg-rsv/logs/consumers/rsv-nagios.out=
      * =VDT_LOCATION/osg-rsv/logs/consumers/rsv-nagios.err=

---++ Enabling non-default metrics or disabling default metrics

The [[RsvControl][rsv-control]] tool can be used to enable and disable metrics.

---++ Advanced configuration

See [[ConfigureRSV][this page]] for more information on configuring !RSV.