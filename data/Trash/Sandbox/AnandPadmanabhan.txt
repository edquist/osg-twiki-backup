%META:TOPICINFO{author="KyleGross" date="1225985964" format="1.1" version="1.2"}%
--+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%


---++Introduction
Information about the Generic Information Providers for LCG interoperability.  Here we collect some information about BDII, GIP, and GLUE.  If this already exists someplace in this twiki please feel free to incorporate and consolidate, and provide the new reference.

   * *help* needed with documenting the configuration.

---++Miscellaneous Info

   * GLUE 1.2 LDAP schema, http://infnforge.cnaf.infn.it/scm/controlleroo.php?group_id=9&dir_name=/v_1_2/mapping/ldap/schema&hide_attic=0
                                                                                                                                                                
   * Documents about GLUE: http://infnforge.cnaf.infn.it/projects/glueinfomodel/


Links from Laurence Field:
 
   * BDII http://lfield.home.cern.ch/lfield/cgi-bin/wiki.cgi?area=bdii&page=documentation

   * GIP http://lfield.home.cern.ch/lfield/cgi-bin/wiki.cgi?area=gip&page=documentation

   * GLUE http://lfield.home.cern.ch/lfield/cgi-bin/wiki.cgi?area=glue&page=information


Grid3 era

   * http://griddev.uchicago.edu/download/grid3/doc.pkg/GIIS-configuration/

---++ Installation

If you installed the Generic-Information-Provider (GIP) prior to June 17th and are having problems getting the full GIP output for condor, then it would be worthwhile to update your GIP installation using pacman.

<pre>
&gt; <b>pacman -update Generic-Information-Provider</b> 
</pre>

Source your preferred setup file (setup.sh or setup.csh)

<pre>
&gt; <b>cd $VDT_LOCATION</b> 
</pre>

<pre>
&gt; <b>./vdt/setup/configure_gip --batch &lt;condor|pbs|lsf&gt;</b> 
</pre>

<pre>
We have set up the Generic Information Providers (GIP) as much as we can,
but there is some stuff that we cannot do. To complete the process edit
/opt/itb/lcg/var/gip/lcg-info-generic.conf to contain information about
your site. Then run the following command, and everything should be set.
Note that it is important to give the full pathname for the argument to
lcg-info-generic-config
</pre>

---+++ Configuration

Edit $VDT_LOCATION/lcg/var/gip/lcg-info-generic.conf

*I am not sure what to put here exactly, there is a lot that a person could change and is spread out all over the file.*

One thing that was mentioned as a good feature would be to set the values for whether there is outbound connectivity.  If you want to find this attribute, search for <nop>GlueHostNetworkAdapterOutboundIP and set to TRUE or FALSE depending on your configuration.

<nop>GlueHostNetworkAdapterOutboundIP: TRUE

---+++ Post Install

<pre>
&gt; <b>$VDT_LOCATION/lcg/sbin/lcg-info-generic-config $VDT_LOCATION/lcg/var/gip/lcg-info-generic.conf</b>
</pre>

<pre>
&gt; <b>/etc/init.d/gris stop</b>
</pre>

<pre>
&gt; <b>/etc/init.d/gris start</b>
</pre>

---++ Testing

---+++ Anonymous Bind Method (default)

<pre>
&gt; <b>ldapsearch -h your.fully.qualified.hostname -p 2135 -x -b mds-vo-name=local,o=grid</b>
</pre>

---+++ Authenticated Bind Method

<pre>
&gt; <b>grid-info-search -h your.fully.qualified.hostname</b>
</pre>

---+++ Meaning of Testing

Both methods should return an LDAP dump in LDIF format.  *In Progress*

---++ Troubleshooting

*In Progress*

---++Useful LDAP Tool

If you run an un-authenticated GRIS / GIP and want to check your results a helpful tool is the LDAP browser available from http://www-unix.mcs.anl.gov/~gawor/ldap/ .  Download the zip/tar file and unpack it.  Start it by running the lbe.sh script.
A graphical user interface will appear.  Create a new connection and enter the following properties for the new connection:

Host: your.fully.qualified.hostname<br>
Port: 2135<br>
Base DN: mds-vo-name=local,o=grid<br>

If you would simply like to see what the GIP looks like when configured, feel free to use rsgrid3.its.uiowa.edu as a hostname.
---++Explaination of BDii 

  
 BDii is the Berkeley Database Information Index. It consists of two or more standard LDAP databases that are populated by an update process. The OSG-ITB BDii service
is collecting GIP information from OSG ITB hosts which are listed in the OSG GridCat database which have installed OSG 0.1.6 (early version are not compatible).

The connect to the BDii service standard LDAP querying command can be used.

<verbatim>

ldapsearch -LLL -x -h data.grid.iu.edu -p 2170 -b "o=grid"

</verbatim>

The BDii server name is "data.grid.iu.edu" the BDii port to query is 2170.

---++Explaination of GIP / Glue Attributes

What follows is a large amount of Glue (http://www.cnaf.infn.it/~sergio/datatag/glue/index.htm) attributes which are added by the GIP with some notes on what the attributes mean.  (Note: not all the values here have been properly configured yet, they are just provided as an example)

---+++<nop>GlueSite

*OSG unique site name* <br>
=GlueSiteName: CIT_CMS_OSG=

*Human readable description of the site* <br>
=GlueSiteDescription: Caltech CMS OSG Site=

*Site email contacts*
<verbatim>
GlueSiteUserSupportContact: mailto: my@email.com
GlueSiteSysAdminContact: mailto: my@email.com
GlueSiteSecurityContact: mailto: my@email.com
</verbatim>
*Geographic location of the site* <br>
<verbatim>
GlueSiteLocation: Pasadena, US 
GlueSiteLatitude: 34
GlueSiteLongitude: 118
</verbatim>
*Web site describing the site, if any*
<verbatim>
GlueSiteWeb: http://www.opensciencegrid.org
</verbatim>

---+++<nop>GlueCEUniqueID

!GlueCEUniqueID defines a gatekeeper combined with a jobmanager and queue.  The format for the !GlueCEUniqueID is hostname:port/jobmanager-batch-queue .

*Please note that 'jobmanager-condor-atlas' does not exist as a submittable jobmanager.  'jobmanager-condor' is the actual jobmanager that exists while 'atlas' is the queue that the job should be submitted to*

*The idea is that this should express how many CPU's are available at this time to a VO*

<verbatim>
dn: GlueCEUniqueID=rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas, mds-vo-name=local,o=grid
GlueCEHostingCluster: rsgrid3.its.uiowa.edu
GlueCEName: atlas
GlueCEUniqueID: rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas
GlueCEInfoGatekeeperPort: 2119
GlueCEInfoHostName: rsgrid3.its.uiowa.edu
GlueCEInfoLRMSType: condor
GlueCEInfoLRMSVersion: 6.7.7
</verbatim>
*How many CPU's exist for this queue, may be busy or available*
<verbatim>
GlueCEInfoTotalCPUs: 10
GlueCEInfoJobManager: condor
GlueCEInfoContactString: my-ce.my.domain:2119/jobmanager-condor-atlas
</verbatim>
*How long a VirtualOrganizations/VOInfo can expect to wait before being submitted to a machine*
<verbatim>
GlueCEStateEstimatedResponseTime: 0
</verbatim>
*How many CPU's are availble right now for this VO*
<verbatim>
GlueCEStateFreeCPUs: 10
</verbatim>

*<nop>RunningJobs + <nop>WaitingJobs*
<verbatim>
GlueCEStateTotalJobs: 0
</verbatim>

*How many jobs are waiting in the queue*
<verbatim>
GlueCEStateWaitingJobs: 0
GlueCEStateWorstResponseTime: 0
</verbatim>

*How many open CPU's are availabe for the queue*
<verbatim>
GlueCEStateFreeJobSlots: 0
</verbatim>

*How long a job may remain in the queue before being removed (CPU time)*
<verbatim>
GlueCEPolicyMaxCPUTime: 0
GlueCEPolicyMaxRunningJobs: 0
GlueCEPolicyMaxTotalJobs: 0
</verbatim>

*How long a job may remain in the queue before being removed (Wall time)*
<verbatim>
GlueCEPolicyMaxWallClockTime: 0
GlueCEPolicyPriority: 1
GlueCEPolicyAssignedJobSlots: 0
</verbatim>

*Which VirtualOrganizations/VOInfo may run jobs on this queue*
<verbatim>
GlueCEAccessControlBaseRule: VO:atlas
GlueForeignKey: <nop>GlueClusterUniqueID=rsgrid3.its.uiowa.edu
GlueInformationServiceURL: ldap://rsgrid3.its.uiowa.edu:2135/mds-vo-name=local,o=grid
</verbatim>


---+++<nop>GlueSubClusterUniqueID

<nop>GlueSubClusterUniqueID provides information about what grid software version is installed on the cluster as well as general information about a cluster.  It also can hold VirtualOrganizations/VOInfo published information about what software has been installed.  For example, !GlueHostApplicationSoftwareRunTimeEnvironment: CMKIN could also be added by a VO.

<verbatim>
dn: GlueSubClusterUniqueID=rsgrid3.its.uiowa.edu, GlueClusterUniqueID=rsgrid3.its.uiowa.edu, mds-vo-name=local,o=grid
GlueChunkKey: GlueClusterUniqueID=rsgrid3.its.uiowa.edu
</verbatim>

*<nop>GlueHostApplicationSoftwareRunTimeEnvironment lists all the software installed on the cluster*
<verbatim>
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_1_0
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_1_1
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_2_0
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_3_0
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_3_1
GlueHostApplicationSoftwareRunTimeEnvironment: LCG-2_4_0
GlueHostApplicationSoftwareRunTimeEnvironment: R-GMA
GlueHostArchitectureSMPSize: 2
</verbatim>

*The SI and SF benchmarks have been used to make sure that a job will finish in a cluster before being removed*
<verbatim>
GlueHostBenchmarkSF00: 0
GlueHostBenchmarkSI00: 381
GlueHostMainMemoryRAMSize: 513
GlueHostMainMemoryVirtualSize: 1025
</verbatim>

*Method of publishing information about whether or not the cluster nodes have inbound / outbound access*
<verbatim>
GlueHostNetworkAdapterInboundIP: FALSE
GlueHostNetworkAdapterOutboundIP: TRUE
GlueHostOperatingSystemName: Redhat
GlueHostOperatingSystemRelease: 7.3
GlueHostOperatingSystemVersion: 3
GlueHostProcessorClockSpeed: 1001
GlueHostProcessorModel: PIII
GlueHostProcessorVendor: intel
GlueSubClusterName: rsgrid3.its.uiowa.edu
GlueSubClusterUniqueID: rsgrid3.its.uiowa.edu
GlueSubClusterPhysicalCPUs: 0
GlueSubClusterLogicalCPUs: 0
GlueSubClusterTmpDir: /tmp
GlueSubClusterWNTmpDir: /tmp
GlueInformationServiceURL: ldap://rsgrid3.its.uiowa.edu:2135/mds-vo-name=local,o=grid
</verbatim>


---+++<nop>GlueCESEBindGroupCEUniqueID

Defined what storage element is considered close to this Computing Element.  This is done on a per VirtualOrganizations/VOInfo basis, for example, these attributes say that the default place for atlas data to go would be to rsgrid3.its.uiowa.edu and into the directory /storage/atlas (another convention on the LCG is that the mount point has a folder in it for each VirtualOrganizations/VOInfo that is accepted)

<verbatim>
dn: GlueCESEBindGroupCEUniqueID=rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas, mds-vo-name=local,o=grid, GlueCESEBindGroupCEUniqueID: rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas
GlueCESEBindGroupSEUniqueID: rsgrid3.its.uiowa.edu

dn: GlueCESEBindSEUniqueID=rsgrid3.its.uiowa.edu, GlueCESEBindGroupCEUniqueID=rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas, mds-vo-name=local,o=grid
GlueCESEBindSEUniqueID: rsgrid3.its.uiowa.edu
GlueCESEBindCEAccesspoint: /storage
GlueCESEBindCEUniqueID: rsgrid3.its.uiowa.edu:2119/jobmanager-condor-atlas
GlueCESEBindMountInfo: none
GlueCESEBindWeight: 0
</verbatim>

---+++<nop>GlueSEUniqueID

<nop>GlueSEUniqueID defined an access point into a Storage Element.

<verbatim>
dn: GlueSEUniqueID=rsgrid3.its.uiowa.edu,mds-vo-name=local,o=grid
GlueSEUniqueID: rsgrid3.its.uiowa.edu
GlueSEName: my-site-name:disk
GlueSEPort: 8443
GlueSESizeTotal: 0
GlueSESizeFree: 0
GlueSEArchitecture: disk
GlueInformationServiceURL: ldap://rsgrid3.its.uiowa.edu:2135/mds-vo-name=local,o=grid
</verbatim>

---+++<nop>GlueSEAccessProtocolLocalID

<nop>GlueSEAccessProtocolLocalID defined the protocols that may be used to access this Storage Element.  In this example, gsiftp is the protocol that is defined.

<verbatim>
dn: GlueSEAccessProtocolLocalID=gsiftp, GlueSEUniqueID=rsgrid3.its.uiowa.edu,Mds-Vo-name=local,o=grid
GlueSEAccessProtocolLocalID: gsiftp
GlueSEAccessProtocolType: gsiftp
GlueSEAccessProtocolVersion: 1.0.0
GlueSEAccessProtocolPort: 2811
GlueSEAccessProtocolSupportedSecurity: GSI
GlueChunkKey: <nop>GlueSEUniqueID=rsgrid3.its.uiowa.edu
</verbatim>

---++ Automatic GIP Configuration
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.RobGardner - 24 May 2005

-- Main.RansomBriggs - 10 Jun 2005

-- Main.RansomBriggs - 17 Jun 2005

%STOPINCLUDE%

