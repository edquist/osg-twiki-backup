%META:TOPICINFO{author="KyleGross" date="1497450625" format="1.1" version="1.2"}%
---+ IPv6 Testing Log: !CVMFS

This testing log is part of [[Trash/Sandbox.OperationsServicesIPv6CompatibilityTable][OSG IPv6 tests]]. This page captures the specific IPv6 compatibility testing process used for one software component, CVMFS. The more general IPv6 template for testing is [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/IPV6Testing][here]].


---++ Initial Setup

This test used two hosts:

| *Host* | *OS* | *OSG Release* |
| cvmfs-stratum-one.cern.ch | ?? |  NA |
| ipv6vm009.fnal.gov | Scientific Linux Fermi release 6.6(Ramsey) | 3.2 |

---+++ Installing software

Next, OSG software was installed on each system. The UCSD host was the client and the FNAL host was the server. And VOMS software was installed following the instructions here [[https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallVoms][VOMSInstallation]]

| *Host* | *Package* | *Version* |
| cvmfs-stratum-one.cern.ch | ?? |  NA |
| ipv6vm009.fnal.gov |  2.1.19-1.8.osg32.el6  | 3.2 |

---++++ Configuration

The file =/etc/cvmfs/default.local= was configured as follows:

<pre class="file">
CVMFS_REPOSITORIES="`echo $((echo oasis.opensciencegrid.org;echo cms.cern.ch;ls /cvmfs)|sort -u)|tr ' ' ,`"
CVMFS_CACHE_BASE=%RED%/var/cache/cvmfs%ENDCOLOR%
CVMFS_QUOTA_LIMIT=%RED%10000%ENDCOLOR%
CVMFS_HTTP_PROXY=%RED%DIRECT%ENDCOLOR%
</pre>

*Note*: "in case an HTTP proxy is used, cvmfs 2.1.20 will always use IPv4 unless there are no A records." Jacob Blomer. cvmfs developer

The file =/etc/cvmfs/domain.d/cern.ch.local=

<pre class="file">
CVMFS_SERVER_URL="http://cvmfs-stratum-one.cern.ch:8000/opt/@org@;"
</pre>



---++ Testing

---+++ Testing the dual-dual configuration: OK

<pre class="screen">
<strong> [root@ipv6vm009 ~]# ls /cvmfs/cms.cern.ch</strong>
bin                                bootstrap_slc5_amd64_gcc481.log  common                     osx107_amd64_gcc462  share              slc6_amd64_gcc462
bootstrap_fc19_aarch64_gcc490.log  bootstrap_slc5_ia32_gcc434.log   COMP                       osx108_amd64_gcc470  SITECONF           slc6_amd64_gcc472
bootstrap.sh                       bootstrap_slc6_amd64_gcc462.log  crab                       osx108_amd64_gcc472  slc5_amd64_gcc434  slc6_amd64_gcc480
bootstrap_slc5_amd64_gcc434.log    bootstrap_slc6_amd64_gcc491.log  crab3                      osx108_amd64_gcc481  slc5_amd64_gcc461  slc6_amd64_gcc481
bootstrap_slc5_amd64_gcc451.log    bootstraptmp                     cvmfs                      phys_generator       slc5_amd64_gcc462  slc6_amd64_gcc490
bootstrap_slc5_amd64_gcc461.log    CMS@Home                         cvmfs-cms.cern.ch-updates  README               slc5_amd64_gcc470  slc6_amd64_gcc491
bootstrap_slc5_amd64_gcc462.log    cmsset_default.csh               etc                        README.cmssw.git     slc5_amd64_gcc472  slc6_mic_gcc481
bootstrap_slc5_amd64_gcc470.log    cmsset_default.sh                fc19_aarch64_gcc490        README.lhapdf        slc5_amd64_gcc480  var
bootstrap_slc5_amd64_gcc472.log    cmssw.git                        lhapdf                     README_mic           slc5_amd64_gcc481
bootstrap_slc5_amd64_gcc480.log    cmssw.git.daily                  oo77                       README.oo77          slc5_ia32_gcc434

</pre>


---+++ Testing that dual-dual communication defaults to IPv6: Yes



---+++ Testing the dual server / IPv4 client configuration: Yes

<pre class="screen">

<strong>[root@ipv6vm009 cvmfs]# ping6 www.google.com</strong>
connect: Network is unreachable
<strong>[root@ipv6vm009 cvmfs]# ls lhcb.cern.ch</strong>
etc  group_login.csh  group_login.sh  lib
</pre>




-- Main.EdgarMauricioFajardoHernandez2 - 03 Mar 2015
