%META:TOPICINFO{author="JeremyFischer" date="1328549098" format="1.1" reprev="1.5" version="1.5"}%
<h3>PKI Notes –November 2011</h3>
 
<b><u>Questions to be answered:</b></u>

<ul>
<li>Eval DigiCert API to see if creating an OSG frontend on to it is viable and what the trade offs are
<li>Does DigiCert provide a DB of certs we can query for credentials OR do we maintain one  -- philosophically, do we want them to have that?  It increases reliance on DigiCert and landlocks the project if DigiCert closes down their operation.
<li>Long term -> Can we get to every certificate that DigiCert has issued? Is all data accessible? What APIs are their workflows meant to support?
<ul><li><b>With the most recent API additions, it does seem that we can access every DigiCert certificate issued for OSG. However, the only means right now involve the UI -- host certs info is available via the API but requires knowing either the order number or serial number. Both of these are only easily available if you have the actual certificate already or have access to the UI. <u>We need a means to search certs by host, institution, or name</u></b></ul>
<li>What types of interactions are possible? Acting as Net HSM only to full blown PKI service…broad spectrum.
<li>Existing scripts – can they use the DigiCert API? Is that an option to keep their workflow the same on the surface?
<li>With DigiCert – do they hold all of the information necessary for renewal, can we do this with their API?
<li>is there a safety check – can’t issue same cert twice, explicitly note renewal versus new cert
     <ul>
          <li><b>Note</b>: <i>Issuing a cert to the same DN is okay as long as serial numbers are not the same. Serial numbering seems to be outside our scope of control, so assuming their system works correctly, we should be okay here. However, the concept of renewal is still an important on to have the specifics on.</i>
     </ul>
<li>What sort of metadata can be tagged on any request? Comments, codes, tie to trouble ticket, etc?
<ul><li><b>DigiCert is building comment fields into most of their API structure now. At the current time, it is the only means to add metadata via their interface. If, however, there is an OSG front end to the API system, we can add any appropriate metadata to a DB on our own server. The question comes down to defining what metadata we need.</b></ul>
<li>Can we get CRLs on demand?  Can we request at will? Created at time cert is revoked? Normal cron job? Can we request production of a CRL through the API?
<ul><li><b>At current writing, I cannot tell if CRLs can be issued automatically. In fact, I see no way via the UI or API to force issuing a CRL. This is something that must be addressed before production.</b></ul>
<li>What would the options be if DigiCert were compromised and to what depth?
<li>Security Evaluation of DigiCert API? How isolated is it? How locked down can it be? Can they be exploited?
<li>How do host and robot certs get renewed and revoked?
<li>Would DigiCert own the grid admin db? Can we manipulate grid admin policies and access control via API ?
<li>how many certs in last year, what level of history can we obtain via API, basically statistic/metric gathering and also specifics if possible on a granular basis
<li>Can we tag with metadata? Does it survive and propagate? Can it be searched on?
<li>Can we get stats/user info by VO, etc?
<li>How many and what machine/robot certs have been issued? Can we get numbers by VO?
<li>Who maintains meta servers?
<li>Can we get logging/auditing data out remotely?
<ul><li><b>A new API call exists now for getting logging data out. At first blush this looks to be the same data that is now available via the UI MKPI Audit Log. It should be adequate to troubleshoot API scripting issues. Further testing is underweigh currently.</b></ul>
 </ul>
<p>

<h3>Questions for API Analysis:</h3>

<ul>
<li>What do we want the API to do?
<li>What can the API do?
<li>What does DigiCert provide in terms of service?
<li>What can the API do that isn’t documented?
<li>What are the limitations of the API?
</ul>

<h3>Analysis of API</h3>
<ul>
<li>Does it live up to its documentation
<li>Non-Documented attributes
<li>Reliability, Scalability (how hard can we beat it until it breaks? Record limits)
</ul>

-=-

At the end, distill analysis of API into a one page architectural POV – how the API can best be implemented? Limitations ? Where it excels ? Where it fails? Best way to use? (as Net HSM? As more?)

-=- 

Bulk Gen proof of concept script is here - [[https://vdt.cs.wisc.edu/svn/sandbox/PKI-API-Testing-JLF/bulk-host-gen-proto.py][https://vdt.cs.wisc.edu/svn/sandbox/PKI-API-Testing-JLF/bulk-host-gen-proto.py]]

Adding new scripts based on API changes - [[https://vdt.cs.wisc.edu/svn/sandbox/PKI-API-Testing-JLF/]]

-- Main.JeremyFischer - 08 Nov 2011
