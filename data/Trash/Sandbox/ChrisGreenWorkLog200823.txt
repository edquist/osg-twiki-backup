%META:TOPICINFO{author="ChrisGreen" date="1213639994" format="1.1" reprev="1.8" version="1.8"}%
%META:TOPICPARENT{name="ChrisGreenWorkLog"}%
%LINKCSS%

<!-- Hidden Settings
   * Set USERSTYLEURL = %PUBURL%/%WEB%/ChrisGreenWorkLog/worklog-style.css
   * Set LinksTable = <table width="60%"><tr><td>[[#%TOPIC%_Fermigrid_Operations][Fermigrid Operations]]</td><td>[[#%TOPIC%_Gratia][Gratia]]</td><td>[[#%TOPIC%_Other][Other]]</td></tr><tr><td>[[#Top][Top of work log]]</td><td>[[#Bottom][Bottom of work log]]</td></tr></table>
-->

---+!! Chris Green's personal work log for 2008/06/09 - 2008/06/20

<!-- Day's skeleton
  <dt></dt>
  <dd>
    <ul>
      <li></li>
      <li></li>
    </ul>
  </dd>
-->

%STARTINCLUDE%
%EDITTHIS%

%LinksTable%

---+++!! <a name="%TOPIC%_Fermigrid_Operations">Fermigrid Operations</a>
<dl>
  <dt>2008/06/16</dt>
  <dd>
    <ul>
      <li>Responded to request from Neha for location of Gratia files on gratia09 for security audit. See IM logs <a class="private" href="http://127.0.0.1:4664/redir?url=http%3A%2F%2F127%2E0%2E0%2E1%3A4664%2Fcache%3Fevent%5Fid%3D829197%26schema%5Fid%3D3%26q%3Dneha%26s%3D%2Du%2Dzyxve8SVMv%5FjjkQrgNGpuyGI&src=1&schema=3&s=ftvkdL4DYcR-odB8udi-X2GqFp8">1</a> & <a class="private" href="http://127.0.0.1:4664/redir?url=http%3A%2F%2F127%2E0%2E0%2E1%3A4664%2Fcache%3Fevent%5Fid%3D829240%26schema%5Fid%3D3%26q%3Dneha%26s%3DFGpxjoNUG7EnnDQhSxxSkjEc9r8&src=1&schema=3&s=1rS-yFzqeuljVILM3HpMaghz8-I">2</a></li>
      <li>Diagnostics on state of fermi_osg -- John was worried because of lack of summary table records. This is due to glexec records being ignored, and no non-glexec records being sent to fermi_osg. Older records have a !RecordType of Batch even though they're glexec, so they ended up in the summary table.</li>
      <li>Gratia07 DB is now in a state that we can replicate records to it from gratia06 as part of the upgrade. This is now happening. Use following query to track progress:%BR%<verbatim>select date_format(`Time (m)`, '%Y-%m-%d %H:00:00') as `Time (h)`,
       sum(`No. Records`) as `No. Records`,
       avg(`Rate (/h)`) as `Avg Rate (/h)`
from (select date_format(ServerDate, '%Y-%m-%d %H:%i') as `Time (m)`,
             count(*) as `No. Records`,
             count(*) * 60 as `Rate (/h)`
from JobUsageRecord_Meta M
where ServerDate > '2008-06-16 00:00:00'
group by `Time (m)`) time_table
group by `Time (h)`
order by `Time (h)` desc;</verbatim></li>
    </ul>
  </dd>
  <dt>2008/06/12</dt>
  <dd>
    <ul>
      <li>Meeting with Keith and Mine to discuss splunk-offload of incoming XML files from gratia09. Warned Mine about susceptibility of Condor records to malicious attack by the user.</li>
    </ul>
  </dd>
  <dt>2008/06/11</dt>
  <dd>
    <ul>
      <li>Checked in configuration script changes for tomcat init script upgrade.</li>
    </ul>
  </dd>
  <dt>2008/06/10</dt>
  <dd>
    <ul>
      <li>Helped Dan and Steve with regex for killing glexec starters on CDF nodes.</li>
      <li>Updated tomcat init script to optionally start tomcat as a non-root user (still to check in).</li>
    </ul>
  </dd>
  <dt>2008/06/09</dt>
  <dd>
    <ul>
      <li>Talked to Keith about splunk, Gratia and Condor.</li>
    </ul>
  </dd>
</dl>

%LinksTable%

---+++!! <a name="%TOPIC%_Gratia">Gratia</a>
<dl>
  <dt>2008/06/16</dt>
  <dd>
    <ul>
      <li>Diasgnostics on state of tomcat-conversion for John. Upgrade had failed due to connection timeout after summary table rebuild. Corrected relevant entry in !SystemProplist and restarted collector. Now up after completing upgrade and accepting replication records from gratia06. </li>
      <li>Bring work log up to date.</li>
    </ul>
  </dd>
  <dt>2008/06/13</dt>
  <dd>
    <ul>
      <li>Discussion with Philippe on summary table replication and related issues. See <a class="private" href="http://127.0.0.1:4664/cache?event_id=815885&schema_id=3&q=replication&s=NX0DiRBU6YXLse045YNd6VzXETg">IM log</a> for details.</li>
      <li>More work on safe start.</li>
    </ul>
  </dd>
  <dt>2008/06/12</dt>
  <dd>
    <ul>
      <li>Check status on gratia07 upgrade: still adding first of 2 columns.</li>
      <li>Discussion with Philippe on RMI service control and master switch.</li>
      <li>Work on safe mode start.</li>
    </ul>
  </dd>
  <dt>2008/06/11</dt>
  <dd>
    <ul>
      <li>Weekly status report for Philippe.</li>
      <li>Review and update collector upgrade documents.</li>
      <li>Attend Gratia meeting.</li>
      <li>Step in and stop unintended upgrade of gratia06 by mis-configured =tomcat-conversion= collector. Main =gratia09= collector restarted. No ill effects.</li>
      <li>Start implementing "safe start" and admin GUI replication service control for less error-prone upgrades.</li>
      <li>Reply to mail from Alain asking whether we want a new version of services in VDT -- won't make it into OSG 1.0 anyway, so not critical; probably in a week or so.</li>
    </ul>
  </dd>
  <dt>2008/06/10</dt>
  <dd>
    <ul>
      <li>Discussions with John W. and Philippe about fixes to replication. John is going ahead with tag and test, and updating the upgrade procedure.</li>
      <li>Found further difference in checksums. Explained as (legitimate) difference due to differences in !ExtraXml fields for primary record upload and replication. However, !ListenerThread updated to overwrite no longer the server-produced !ExtraXml field with that recedived via an external source such as replication or history.</li>
    </ul>
  </dd>
  <dt>2008/06/09</dt>
  <dd>
    <ul>
      <li>Diagnosed problems at UCLA (GOC ticket #5025) -- resolved.</li>
      <li>Diagnosed and fixed problems with replication -- checksum differences were due to !GridDescription attribute not being dealt with properly, and extra !JobIdentity clauses in some replicated records were due to !ExtraXML from earlier versions of the Grid attribute. These extra clauses were in fact being ignored correctly so no action required there.</li>
    </ul>
  </dd>
</dl>

%LinksTable%

---+++!! <a name="%TOPIC%_Other">Other</a>
<dl>
  <dt>2008/06/13</dt>
  <dd>
    <ul>
      <li>Half day vacation.</li>
    </ul>
  </dd>
  <dt>2008/06/12</dt>
  <dd>
    <ul>
      <li>Monitor returned in working order. Returned loaner to Keith.</li>
    </ul>
  </dd>
  <dt>2008/06/09</dt>
  <dd>
    <ul>
      <li>Status report for Gabriele.</li>
      <li>Group meeting.</li>
    </ul>
  </dd>
</dl>

%STOPINCLUDE%

---++ Topic access settings

   * Set ALLOWTOPICVIEW = Main.ChrisGreen, Main.ChrisGreenWorkLogViewersGroup

<!-- Hidden Settings
   * Set ALLOWTOPICCHANGE = Main.ChrisGreen
   * Set ALLOWTOPICRENAME = Main.ChrisGreen
-->

%META:TOPICMOVED{by="ChrisGreen" date="1213040916" from="Sandbox.ChrisGreenWorkLog2008123" to="Sandbox.ChrisGreenWorkLog200823"}%
