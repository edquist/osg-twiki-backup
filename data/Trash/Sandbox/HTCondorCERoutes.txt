%META:TOPICINFO{author="BrianLin" date="1410561414" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Writing Routes for HTCondor CE

---++ HTCondor batch systems

---+++ Accounting Groups

Accounting groups are an HTCondor construct that allows for sharing compute time amongst groups of users rather splitting time based on Unix user name ([[http://research.cs.wisc.edu/htcondor/manual/v8.0/3_4User_Priorities.html#SECTION00447000000000000000][documented here]]). These groupings are HTCondor-specific and are not related to Unix user groups. In the past, admins used UID and extattr table files with their GRAM CE's to assign jobs to certain accounting groups based on username or proxy info ([[https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallComputeElement#7_2_Configuring_your_CE_to_use_C][documented here]]). This option still works but can be overriden in your own routes if you so choose.

---++++ Using HTCondor !ClassAds

Assigning an accounting group to a job is very flexible when using the !ClassAd language. The most basic use case takes the job's owner and appends it to a group e.g. a job with =Owner = bob= will result in =AccountingGroup = osg_group.bob=:

<pre class="file">
eval_set_AccountingGroup = strcat("osg_group.", Owner);\
</pre>

---++ Other batch systems

---++ Quirks and Pitfalls

   * If a value is set in JOB_ROUTER_DEFAULTS with =eval_set_&lt;variable&gt;= and you want to override it, you will need to use =eval_set_&lt;variable&gt;= in the JOB_ROUTER_ENTRIES.
   * Make sure to run =condor_ce_reconfig= after changing your routes, otherwise they will not take effect.
   * Before the last square bracket (]), make sure all lines end in a line continuation character (backslash (\)).

-- Main.BrianLin - 11 Sep 2014