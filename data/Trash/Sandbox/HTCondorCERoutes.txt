%META:TOPICINFO{author="BrianLin" date="1410476923" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Accounting Groups

Accounting groups are an HTCondor construct that allows for sharing compute time amongst groups of users rather splitting time based on Unix user name. These are _not_ Unix user groups, they are HTCondor-specific groupings, which can be found in the manual [[http://research.cs.wisc.edu/condor/manual/v7.6/3_4User_Priorities.html#SECTION00447000000000000000][here]].

---++ Using HTCondor !ClassAds

Assigning an accounting group to a job is very flexible when using the !ClassAd language. Here's a basic example that takes all jobs and assigns them to the =osg_group.= group with the job's owner appended e.g. a job owned by =bob= would end up with the group =osg_group.bob=:

<pre class="file">
JOB_ROUTER_ENTRIES = \
   [ \
     GridResource = "condor localhost localhost"; \
     eval_set_GridResource = strcat("condor ", "$(FULL_HOSTNAME)", "$(FULL_HOSTNAME)"); \
     TargetUniverse = 5; \
     name = "OSG Accounting"; \
     %RED%eval_set_AccountingGroup = strcat("osg_group.", Owner);\%ENDCOLOR%
   ] 
</pre>

---++ Using uid and extattr tables

To set Condor accounting groups for jobs in the Globus gatekeeper, you can follow the instructions[[Documentation.Release3.InstallComputeElement][here]] to associate accounting groups with certain UID's, DN's or VOMS attributes.

---+ Quirks and Pitfalls

   * If a value is set in JOB_ROUTER_DEFAULTS with =eval_set_&lt;variable&gt;= and you want to override it, you will need to use =eval_set_&lt;variable&gt;= in the JOB_ROUTER_ENTRIES.
   * Before the last square bracket (]), make sure all lines end in a line continuation character (backslash (\)).

-- Main.BrianLin - 11 Sep 2014