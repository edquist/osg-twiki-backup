%META:TOPICINFO{author="BurtHolzman" date="1300115986" format="1.1" reprev="1.1" version="1.1"}%
See also VDT ticket #5838 (http://crt.cs.wisc.edu/SelfService/Display.html?id=5838)

---++ Installation
   * Download the files attached to this twiki page and drop them in /tmp
   * Back up $VDT_LOCATION/globus/lib/perl/Globus/GRAM/JobManager

   * <verbatim>
cp /tmp/ea_table.txt $VDT_LOCATION/vdt-app-data
cp /tmp/uid_table.txt $VDT_LOCATION/vdt-app-data
cd $VDT_LOCATION/globus/lib/perl/Globus/GRAM/JobManager
patch -p1 < /tmp/AccountingGroups.patch
</verbatim>

   * Edit the ea_table.txt and uid_table.txt.   The UID table format is =[uid/username] [group]=.  The EA table format is =[perl-regex] [group]=.
   * The UID table gets scanned first, and the first match wins.   If no match is found in the UID table, the extended attribute table is searched.
   * Test with <verbatim>condor_q -constraint 'isUndefined(AccountingGroup) =!= True' -format '%s ' ClusterId -format '%s\n' AccountingGroup</verbatim>

---++ Helpful tips
   * Accounting groups only get mapped once, when the remote job is submitted.  Use condor_qedit to change accounting groups in the queue.

-- Main.BurtHolzman - 14 Mar 2011

%META:FILEATTACHMENT{name="condor_groupacct.pm" attachment="condor_groupacct.pm" attr="" comment="Condor Group Accounting perl module" date="1300115100" path="condor_groupacct.pm" size="2527" stream="condor_groupacct.pm" tmpFilename="/usr/tmp/CGItemp31277" user="BurtHolzman" version="1"}%
%META:FILEATTACHMENT{name="AccountingGroups.patch" attachment="AccountingGroups.patch" attr="" comment="Patch to condor jobmanager" date="1300115116" path="AccountingGroups.patch" size="1008" stream="AccountingGroups.patch" tmpFilename="/usr/tmp/CGItemp31166" user="BurtHolzman" version="1"}%
%META:FILEATTACHMENT{name="ea_table.txt" attachment="ea_table.txt" attr="" comment="Extended attributes table" date="1300115131" path="ea_table.txt" size="225" stream="ea_table.txt" tmpFilename="/usr/tmp/CGItemp31294" user="BurtHolzman" version="1"}%
%META:FILEATTACHMENT{name="uid_table.txt" attachment="uid_table.txt" attr="" comment="UID table" date="1300115144" path="uid_table.txt" size="167" stream="uid_table.txt" tmpFilename="/usr/tmp/CGItemp31246" user="BurtHolzman" version="1"}%
