%META:TOPICINFO{author="EdgarMauricioFajardoHernandez2" date="1422913336" format="1.1" reprev="1.1" version="1.1"}%
---+ XrootD IPV6 Testing

---++ Introduction

As part of [[https://twiki.opensciencegrid.org/bin/view/Sandbox/OperationsServicesIPv6CompatibilityTable][OSG IPV6 tests]]. This twiki is meant as an example of the testing done for IPV6 compatiblity on a software component (Xrootd). A more general IPV6 Testing is [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/IPV6Testing][here]].

---++ Test Setup

For this testing two nodes were used:

|*node*|*os version*|*OSG release*|
|cabinet-10-10-1.t2.ucsd.edu|CentOS release 6.5 (Final)|3.2|
|ipv6vm004.fnal.gov|Scientific Linux Fermi release 6.4 (Ramsey)|3.2|

---+++ Test Connectivity:

Ping each node from each other ping6 and norma ping

<verbatim>root@cabinet-10-10-1 ~# ping6 ipv6vm004.fnal.gov
PING ipv6vm004.fnal.gov(ipv6vm004.fnal.gov) 56 data bytes
64 bytes from ipv6vm004.fnal.gov: icmp_seq=1 ttl=51 time=62.0 ms
</verbatim>
<verbatim>
 root@cabinet-10-10-1 ~# ping ipv6vm004.fnal.gov
PING ipv6vm004.fnal.gov (131.225.41.185) 56(84) bytes of data.
64 bytes from ipv6vm004.fnal.gov (131.225.41.185): icmp_seq=1 ttl=51 time=57.6 ms
</verbatim>

---+++ Install software
|*node*|*softare name*|*version*|
|cabinet-10-10-1.t2.ucsd.edu|xrootd-client.x86_64|4.0.4|
|ipv6vm004.fnal.gov|xrootd.x86_64|4.0.4|

---+++ Configure Server
<verbatim>
[root@ipv6vm004 ~]#  service xrootd setup  
[root@ipv6vm004 ~]# service xrootd start
Starting xrootd (xrootd, default):                         [  OK  ]
[root@ipv6vm004 ~]# service cmsd start
Starting xrootd (cmsd, default):                           [  OK  ]
</verbatim>

---++ Testing
---+++ Dual-Dual Tests: *OK*
<verbatim>
[1355] root@cabinet-10-10-1 ~# xrdcp /bin/sh root://ipv6vm004.fnal.gov:1094//tmp/first_test
[917.3kB/917.3kB][100%][==================================================][917.3kB/s]  
xrdcp root://ipv6vm004.fnal.gov:1094//tmp/first_test /tmp/second_test
[917.3kB/917.3kB][100%][==================================================][917.3kB/s]
</verbatim>

---+++ Dual-Dual Communication goes Over IPV6 : *OK*

<verbatim>
xrdcp root://ipv6vm004.fnal.gov:1094//tmp/sample2.txt /tmp/1_test
[10MB/10MB][100%][==================================================][5MB/s]   
(reverse-i-search)`dd': a^Cuser hhutchison
</verbatim>
<img src="%ATTACHURLPATH%/Screen_Shot_2015-02-02_at_1.35.21_PM.png" alt="Screen_Shot_2015-02-02_at_1.35.21_PM.png" width='1084' height='176' />  


---+++ Dual-IPV4 *OK*

Disconnecting IPV6 in the client:

Modify file /etc/sysconfig/network-scripts/ifcfg-eth0
Comment ipv6 entries:
<verbatim>
#IPV6INIT=yes                                                                                                                                                 
#IPV6ADDR="2607:f720:1700:1b30::a4"                                                                                                                           
#IPV6_DEFAULTGW="2607:F720:1700:1B30::1"  
</verbatim>

Restart network:

<verbatim>
root@cabinet-10-10-1 ~# service network restart
Shutting down interface eth0:                              [  OK  ]
Shutting down loopback interface:                          [  OK  ]
Bringing up loopback interface:                            [  OK  ]
Bringing up interface eth0:  Determining if ip address 169.228.130.164 is already in use for device eth0...
                                                           [  OK  ]

</verbatim>

Actual testing

<verbatim>
xrdcp root://ipv6vm004.fnal.gov:1094//tmp/sample2.txt /tmp/1_test_noipv6
[10MB/10MB][100%][==================================================][10MB/s]  

</verbatim>

---+++ Update Results:

Update results in the table at [[https://twiki.opensciencegrid.org/bin/view/Sandbox/OperationsServicesIPv6CompatibilityTable]].

---+++ Comments



-- Main.EdgarMauricioFajardoHernandez2 - 02 Feb 2015
  

%META:FILEATTACHMENT{name="Screen_Shot_2015-02-02_at_1.35.21_PM.png" attachment="Screen_Shot_2015-02-02_at_1.35.21_PM.png" attr="h" comment="OverIpv6" date="1422912966" path="Screen Shot 2015-02-02 at 1.35.21 PM.png" size="38795" stream="Screen Shot 2015-02-02 at 1.35.21 PM.png" tmpFilename="/usr/tmp/CGItemp21110" user="EdgarMauricioFajardoHernandez2" version="1"}%
