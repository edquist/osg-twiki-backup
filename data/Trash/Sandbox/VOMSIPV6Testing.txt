%META:TOPICINFO{author="KyleGross" date="1497450626" format="1.1" version="1.7"}%
---+ IPv6 Testing Log: !VOMS

This testing log is part of [[Trash/Sandbox.OperationsServicesIPv6CompatibilityTable][OSG IPv6 tests]]. This page captures the specific IPv6 compatibility testing process used for one software component, VOMS. The more general IPv6 template for testing is [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/IPV6Testing][here]].


---++ Initial Setup

This test used two hosts:

| *Host* | *OS* | *OSG Release* |
| cabinet-10-10-4.t2.ucsd.edu | CentOS release 5.9 (Final) | 3.2 |
| ipv6vm006.fnal.gov | Scientific Linux Fermi release 6.6(Ramsey) | 3.2 |

---+++ Installing software

Next, OSG software was installed on each system. The UCSD host was the client and the FNAL host was the server. And VOMS software was installed following the instructions here [[https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallVoms][VOMSInstallation]]

| *Host* | *Package* | *Version* |
| cabinet-10-10-4.t2.ucsd.edu | voms-client |2.0.12-1.osg32.el5 |
| ipv6vm006.fnal.gov | VOMS/ osg-voms| 2.0.12-2.el6 (EPEL)  |
| cabinet-10-10-1.t2.ucsd.edu | voms-admin-client | 2.0.17 |

---++ Testing

---+++ Testing the dual-dual configuration: OK

<pre class="screen">
<strong> root@cabinet-10-10-4 ~# voms-proxy-init -cert ~/.globus/usercert.pem -key ~/.globus/userkey.pem --debug -voms ipv6osg</strong>
Detected Globus version: 2.2
Unspecified proxy version, settling on Globus version: 2
Number of bits in key :1024
Files being used:
 CA certificate file: none
 Trusted certificates directory : /etc/grid-security/certificates
 Proxy certificate file : /tmp/x509up_u0
 User certificate file: /root/.globus/usercert.pem
 User key file: /root/.globus/userkey.pem
Output to /tmp/x509up_u0
Enter GRID pass phrase:
Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
Using configuration file /root/.glite/vomses
Using configuration file /etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u0_2708 .++++++
.....++++++
 Done
Contacting  ipv6vm006.fnal.gov:8389 [/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=ipv6vm006.fnal.gov] "ipv6osg" Done

<strong> root@cabinet-10-10-4 ~# voms-proxy-info -all</strong>
subject   : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020/CN=proxy
issuer    : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
identity  : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
type      : proxy
strength  : 1024 bits
path      : /tmp/x509up_u0
timeleft  : 11:48:51
key usage : Digital Signature, Key Encipherment, Data Encipherment
=== VO ipv6osg extension information ===
VO        : ipv6osg
subject   : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
issuer    : /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=ipv6vm006.fnal.gov
attribute : /ipv6osg/Role=NULL/Capability=NULL
timeleft  : 11:48:51
uri       : ipv6vm006.fnal.gov:8389

<strong> efajardo@cabinet-10-10-1 ~$ voms-admin --verbose --vo ipv6osg --host ipv6vm006.fnal.gov list-users 
/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020,/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1,emfajard@ucsd.edu

</pre>


---+++ Testing that dual-dual communication defaults to IPv6: NO 

<pre class="screen">
<strong>  root@cabinet-10-10-4 ~# tcpdump -i eth0 -vv ip host ipv6vm006.fnal.gov</strong>
28 packets captured
32 packets received by filter
</pre>

---+++ Testing that dual-dual communication defaults to IPv6 voms-admin: Yes



---+++ Testing the dual server / IPv4 client configuration: Yes

<pre class="screen">
<strong>root@cabinet-10-10-4 ~# voms-proxy-init -cert ~/.globus/usercert.pem -key ~/.globus/userkey.pem --debug -voms ipv6osg</strong>
Detected Globus version: 2.2
Unspecified proxy version, settling on Globus version: 2
Number of bits in key :1024
Files being used:
 CA certificate file: none
 Trusted certificates directory : /etc/grid-security/certificates
 Proxy certificate file : /tmp/x509up_u0
 User certificate file: /root/.globus/usercert.pem
 User key file: /root/.globus/userkey.pem
Output to /tmp/x509up_u0
Enter GRID pass phrase:
Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020
Using configuration file /root/.glite/vomses
Using configuration file /etc/vomses
Creating temporary proxy to /tmp/tmp_x509up_u0_6951 .......................................................................++++++
.....++++++
 Done
Contacting  ipv6vm006.fnal.gov:8389 [/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=ipv6vm006.fnal.gov] "ipv6osg" Done
Creating proxy to /tmp/x509up_u0 .....++++++
...........++++++
 Done
</pre>




-- Main.EdgarMauricioFajardoHernandez2 - 03 Mar 2015
