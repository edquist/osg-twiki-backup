%META:TOPICINFO{author="SuchandraThapa" date="1226439891" format="1.1" reprev="1.5" version="1.5"}%
%META:TOPICPARENT{name="Main.SuchandraThapa"}%
---+ Installing a CE in A Few Easy Steps
---++ Preinstallation
Before you install you'll need a few things:
    1 DOE grid certificate 
    2 DOE host certificate 
    3 an user account for rsv
    4 an user account called daemon for the osg services 
Getting these will require some time so it's best to do these well in advance of installing your CE.  We will outline how to do steps 1 and 2 below, the other steps are system specific so you will need to do that as well.

----+++ Getting a DOE grid certificate
A DOE grid certificate is a certificate for individuals that will allow you to identify yourself when access grid services.  It is needed to submit jobs to grid sites and to test your new installation.  In order to get  a certificate, you will need to go to the DOE certificate [[https://pki1.doegrids.org/ca/][page]] and then fill in the form.  You will need to have a sponsor and know the VO that your site will be a member of.  If you are not a member of any VO, then you should be able to use OSG if you discuss it with the OSG registration authority.

---+++ Getting a DOE host  certificate
Getting a host certificate is a little more involved.  You will need a host certificate and 2 service certificates (http and rsv) for your site so that your site will be able to authenticate itself when accepting requests from grid enabled tools such as globus-job-run or gridftp.  If you have an existing OSG installation you can request certificates by issuing the following commands:
<verbatim>
source $OSG_LOCATION/setup.sh
cd 
mkdir host_cert
cd host_cert
cert-request  -host your.host  -dir .  -ou s
mkdir http_cert
cd http_cert
cert-request  -host your.host  -dir .  -ou s -service http 
mkdir rsv_cert
cd rsv_cert
cert-request  -host your.host  -dir .  -ou s -service rsv 
</verbatim>

to request certificates.  You will need to answer a few questions when generating the requests and will get an id after the command completes.  This id will let you retrieve your certificate once it has been signed.  Also after running these commands, you will have a file of the form xxxkey.pem where xxx is a number.  You will need that file since it contains the private key for your certificate.  

If you don't have an existing OSG CE installation, you can create a certificate in the process of installing the CE software.  We will outline how to do so below.

---++ Installation
This guide will assume that you install software in the /opt directory.   Please adjust this to your specific circumstances.  

---+++ Pacman
The first component you will need to install is pacman.  Pacman is the package manager that is used by the OSG to distribute it's software.  The installation process for this is fairly simple and is outlined below

   * =cd /opt=
   * <verbatim>wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-latest.tar.gz</verbatim>
<verbatim>
[root@uct3-edge5 opt]# wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-latest.tar.gz
--15:20:25--  http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-latest.tar.gz
           => `pacman-latest.tar.gz'
Resolving physics.bu.edu... 128.197.41.42
Connecting to physics.bu.edu|128.197.41.42|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 852,424 (832K) [application/x-gzip]

100%[====================================>] 852,424        1.67M/s             

15:20:26 (1.67 MB/s) - `pacman-latest.tar.gz' saved [852424/852424]
</verbatim>
   * =tar xzf pacman-latest.tar.gz=
   * At this point you will have a directory called pacman-*x.xx* where *x.xx* is version number of pacman
   * =ln -s pacman-*x.xx* pacman=, This will allow you to upgrade pacman at a later time without changing your references to the pacman binaries
   * =cd pacman=
   * =source setup.sh= or =source setup.csh= depending on whether you are using a bash shell or c shell.  This step will initialize the pacman setup and get the correct environment variables and paths into your environment.

At this point, pacman is setup and is ready for your use.

---+++ Installing the CE software
This guide assumes that you will be using a gridmap for your setup and not a GUMS server.  To setup things up using a gums server, please refer to the release documentation for OSG CE software.

   * =cd /opt=
   * =mkdir osg-1.0.0=
   * =ln -s osg-1.0.0 osg=, Doing this lets you refer to things in /opt/osg so that you can upgrade your osg ce installation in a versioned directory (e.g. osg-x.y.z) and seamlessly switch from an older install to a newer install.
   * =cd osg=
   * =pacman -get OSG:ce= , you should see the following
<verbatim>
</verbatim>

---+++ Configuring the CE software
---++ Finishing up

-- Main.SuchandraThapa - 10 Nov 2008
