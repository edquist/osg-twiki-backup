%META:TOPICINFO{author="ForrestChristian" date="1173829621" format="1.1" reprev="1.69" version="1.69"}%
%META:TOPICPARENT{name="Main.ForrestChristian"}%
<link rel="stylesheet" type="text/css" href="%ATTACHURLPATH%/exercises.css">


<script type="text/javascript" src="%PUBURL%/Main/ToolsListing/AppleJavascriptUtility.txt">
<script type="text/javascript">
<!--
function switchDiv(div_id)
{
  var style_sheet = getStyleObject(div_id);
  if (style_sheet)
  {
    hideAll();
    changeObjectVisibility(div_id, "visible");
  }
  else 
  {
    alert("Sorry, this only works in browsers that suu Dynamic HTML");
  }
}
d10 1

function makeTopicName() {

  if(document.getElementById('ReportType').value = 'PI') {
      var first = document.getElementById('ReportType').value;
      var second = document.getElementById('PiReporter').value;
      var third = document.getElementById('period').value;
  } else  {
      var first = document.getElementById('ReportType').value;
      var second = document.getElementById('SubAr').value;
      var third = document.getElementById('period').value;
  }
  
  var topicName = "Rpt" + first + second + third;
  
  document.getElementById('topicForNew').value = topicName
  document.ProjectQuarterlyReport_form.submit();
d22 2
}  




d28 2
// -->
</script>

a7 120
<div class="topnotch">
---+!! %SPACEOUT{ "%TOPIC%" }%





onLoad="setPref('LOGINNAME', 'Timmy'); setPref('LOGINHOST', 'this.is.my.host.be'); 
<!-- Form and Javascript only show what the user has chosen. -->
<form name="ProjectQuarterlyReport_form" action="%SCRIPTURLPATH{edit}%/%WEB%/" id="ProjectQuarterlyReport_form">
<span id="twid_%CALC{$GET(twisty_id)}%hide" class="twistyHidden"><a href="#" class="twistyTrigger">close</a></span>

<div style="position: relative; width: 46%; text-align: right; font-weight: bold;">Type of Report</div> 
<div style="position: relative; text-align: left;"><select name="ReportType" id="ReportType">
       <option value="null" >..Choose..</option>
       <option value="PI" onSelect="switchDiv('Pi')">PI</option>
       <option value="SubArea">Sub-Area</option>
---++ Fermilab SRM clients
 </div>    
 
<!-- open the div that hides the unused function --> 
<div id="EnclosePiSubAreaOptions" style="width:100%; position: relative; clear: both;">
<!-- the div for the PI report -->
<div id="PiDiv" style="position:absolute; top:100px; left:5px; visibility:hidden;">
  <div style="width: 46%; text-align: right; font-weight: bold;">Select PI area:</div> 
  <div style="width: 40%; text-align: left;">
    <select name="PiReporter" id="PiReporter" >
       <option value="Boston">Boston U.</option>
       <option value="BNL">BNL</option>
       <option value="CalTech">CalTech</option>
       <option value="UscIsi">USC - ISI</option>
       <option value="Columbia">Columbia</option>
       <option value="Cornell">Cornell</option>
       <option value="FermiLab">Fermilab</option>
       <option value="Indiana">Indiana</option>
       <option value="Lbnl">LBNL</option>
       <option value="Slac">SLAC</option>
       <option value="Ucsd">UCSD</option>
       <option value="ChicagoAnl">Chicago/ANL</option>
       <option value="Florida">Florida</option>
       <option value="Iowa">Iowa</option>
       <option value="UncRenci">UNC-RENCI</option>
       <option value="UWMadison">UW Madison</option>
Buffer size, ...
   </div>
</div><!-- End PI report div -->
Additionally, dCache allows you to specify certain ports or port ranges for use when behind firewalls.
<div id="SubArDiv" style="position:absolute; top:100px; left:5px; visibility:hidden;">
  <div style="width: 46%; text-align: right; font-weight: bold;">Select Sub-Area:</div>
  <div style="width: 40%; text-align: left;">
     <select name="SubAr" id="SubAr">
       <option value="AppCoord" onSelect="document.getElementById('SubArPerson').value='Torre Wenaus & Frank Wurthwein'">Application Coordinator (Wenaus/Wurthwein)</option>
       <option value="Eto" onSelect="document.getElementById('SubArPerson').value='Mike Wilde'">Education, Training, and Outreach (Wilde)</option>
       <option value="CommAdmin" onSelect="document.getElementById('SubArPerson').value='Ruth Pordes'">Comm. and Admin. (Pordes)</option>
       <option value="Engage" onSelect="document.getElementById('SubArPerson').value='John McGee'">Engagement (McGee)</option>
       <option value="ExtCoor" onSelect="document.getElementById('SubArPerson').value='Torre Wenaus & Frank Wurthwein'">Extensions Coordinators (Wenaus / Wurthwein)</option>
       <option value="Facility" onSelect="document.getElementById('SubArPerson').value='Miron Livny & Todd Tannenbaum'">Facility (Livny / Tannenbaum)</option>
       <option value="OpsCoor" onSelect="document.getElementById('SubArPerson').value='Rob Quick'">Operations Coordinator (Quick)</option>
       <option value="ResourceMgr" onSelect="document.getElementById('SubArPerson').value='Paul Avery & Kent Blackburn'">Resource Manager (Avery / Blackburn)</option>
       <option value="Security" onSelect="document.getElementById('SubArPerson').value='Petravick'">Security (Petravick)</option>
       <option value="SoftwareCoor" onSelect="document.getElementById('SubArPerson').value='Alain Roy'">Software Coordinator (Roy)</option>
       <option value="UserCoor" onSelect="document.getElementById('SubArPerson').value='Chris Green & Abhishek Rana'">User Coordinators (Rana / Green)</option>
   * pnfsManager
     <input type="hidden" name="SubArPerson" id="SubArPerson" />
   </div>  
</div><!-- End of Sub-Area report div -->
</div><!-- close the div that hides the SubArea or PI div-->

d128 1
  <div style="width: 46%; text-align: right; font-weight: bold;">Period of Report:</div>
  <div style="width: 40%; text-align: left;">
   * Three door nodes running dcap + grid doors
    <select name="period" id="period">
</td></tr></table>

This should be around 30 terabytes with a throughput of ~20 MB/sec.


  </div>
      * The installation script suggests service distribution
  <input type="hidden" name="topicparent" value="%TOPIC%" id="topicparent" /><!-- sets this topic as the parent for the report topic that we are creating -->
  <input type="hidden" name="onlywikiname" value="on" id="onlywikiname" />
  <input type="hidden" name="onlynewtopic" value="on" id="onlynewtopic" /><!-- we can't overwrite an existing topic -->
  <input type="hidden" name="templatetopic" value="WebTopicTemplateTesting" id="templatetopic" /><!-- sets the template that we are going to use -->
  <input type="hidden" name="topic" value="RptErrorPleasePressCancel" id="topicForNew" />
  <input type="button" class="twikiSubmit" onClick="return makeTopicName()" value="Create" id="twikiSubmit" /><!-- have to make the topic name before we can submit! -->
Home areas for each user
      * Use NFS-­lite configuration or some global file system for home areas.
      * Bluearc NAS head has worked well for us thus far.
      * Others out there &mdash; Ibrix, Panasas, etc.

%WARNING% The condor negotiator/collector and NFS servers don't mix.


---++ Software, Pre-­Installation

---+++ Condor
   * Install first and separately out of VDT area.
   * Condor needs upgraded more than rest of VDT
   * Some versions may not be available in VDT&#8212;use RPM
   * We install rpm on every WN&#8212;helps with network trouble
   * Needed for <nop>ManagedFork even if main batch system isn't condor.

---+++ Accounts
Create accounts in advance. We suggest using the =/sbin/nologin= shell

---+++ Ganglia
Have your gmetad somewhere other than your head node. It's a big network-traffic generator &mdash; and CPU load, too.


---++ Software, during install
I install worker node client on head node and on each worker

Big load on VDT server and on CRL servers&#8212;in 0.5.0 plan to use Squid to mitigate this.

---+++ <nop>ManagedFork
This is a lifesaver.  Only way to log and control what users are doing with the jobmanager-­fork.

---+++ =$VDT_LOCATION/globus/TRUSTED_CA=
   * This is the default location for certificates. 
   * =/etc/grid­-security/certificates= must also be symlinked to this, otherwise Condor 6.7.18+ doesn't know where to get certificates.
   * Ensure that the worker node client's TRUSTED_CA points here.


   



---++ Importance of a central submit node
Have a central submit node!!
   * Discourage people from submitting from their desktops
      * Can't control the configuration of desktops
	  * Lots of ways to make it insecure
   * Can kill rogue condor-­G processes, if necessary
   * See the same condor errors they are seeing
   * Laptops turn off and jobs get held that would otherwise succeed.
   * Most serious grid work needs a bigger staging disk than a desktop will provide anyway.


---++ Importance of a central submit node
Have a central submit node!!
   * Discourage people from submitting from their desktops. You can't control the configuration of desktops, and there are lots of ways to make it insecure.
   * With central submit node, you can kill rogue condor­G processes if necessary and it allows you to see the same condor errors the users are seeing.
   * Most serious grid work needs bigger staging disk than a desktop will provide anyway
   * Laptops turn off and jobs get held that would otherwise succeed





---++ Wish List
   * Better audit trail in Condor_G
      * source job ID available to remote and vice versa
   * globus-­job-­manager reaper, kill hung processes
   * Better home area cleanup of =/home/.globus/.gass_cache/*=
   * MySQL root is open. Why?
   * Policies for VOs to clean up APP and DATA
   * Watchdog to look for broken services.
   * Hostnames
   * Paths to and sizes of your pools
   * Doors: types, number


%BR%

ForrestChristianSandboxDocScientists

------------
%INCLUDE{ "Documentation.ToolsBottomMatter" }%
-- Main.ForrestChristian - 12 Sep 200
   * [[%ATTACHURL%/dcb.css][Stylesheet for HTML file]]
   * [[%ATTACHURL%/InstallingDcacheForOSG.html][Installing dCache for the Open Science Grid]]
   * [[%ATTACHURL%/efc_css_test.css][Tasty css]] 
   * [[%ATTACHURL%/forrestSideBar.css][forrestSideBar.css]]: 
   * [[%ATTACHURL%/forrestSideBar.css][forrestSideBar.css]]: Tasty sidebar css
   * [[%ATTACHURL%/PacmanInfo.html][PacmanInfo.html]]: Printable version of pacmaninfo for testing
  

%META:FILEATTACHMENT{name="natskintest_patternskin_low.gif" attr="" autoattached="1" comment="GIF for JS test" date="1179934676" path="natskintest_patternskin_low.gif" size="80644" user="Main.ForrestChristian" version="1"}%
%META:FILEATTACHMENT{name="dcb.css" attr="" autoattached="1" comment="Stylesheet for HTML file" date="1168467137" path="dcb.css" size="3057" user="Main.ForrestChristian" version="1"}%
%META:FILEATTACHMENT{name="forrestSideBar.css" attr="" autoattached="1" comment="Tasty sidebar css" date="1170442852" path="forrestSideBar.css" size="2359" user="Main.ForrestChristian" version="18"}%
%META:FILEATTACHMENT{name="javascript_cookies.js" attr="" autoattached="1" comment="Javascript cookies js file" date="1179437627" path="javascript_cookies.js" size="2513" user="Main.ForrestChristian" version="1"}%
%META:FILEATTACHMENT{name="PacmanInfo.html" attr="" autoattached="1" comment="Printable version of pacmaninfo for testing" date="1171647730" path="PacmanInfo.html" size="17888" user="Main.ForrestChristian" version="1"}%
%META:FILEATTACHMENT{name="efc_css_test.css" attr="" autoattached="1" comment="Tasty css" date="1170432403" path="efc_css_test.css" size="2638" user="Main.ForrestChristian" version="8"}%
%META:FILEATTACHMENT{name="forrestSideBar.css" attr="" autoattached="1" comment="Tasty sidebar css" date="1175543808" path="forrestSideBar.css" size="2802" user="Main.ForrestChristian" version="28"}%
