%META:TOPICINFO{author="MarcoMambelli" date="1282336313" format="1.1" reprev="1.95" version="1.95"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%DOC_STATUS_TABLE%
%TOC{depth="2"}%

%INCLUDE{"InstallingComputeElementServices"}%

%INCLUDE{"CaCertificatesUpdatesConfig"}%
On Compute Element (CE) installs, the enabling of these services  is performed by the _configure-osg_ script based on the following option in the _config.ini_ file:<pre class="file">
[Misc Services]
use_cert_updater = %(enable)s
</pre>

---++ Additional Installations.
There are several pieces of software closely related to, but not a part of the default CE install.  We recommend to carefully consider the following installs:
   * *[[ManagedFork][Managed Fork]]*: By default, anyone can launch an arbitrary number of processes on the CE node itself (through "jobmanager-fork").  Most "good users" know not to do this, but accidents have happened previously.  Managed fork uses Condor to manage incoming fork requests. Commands such as condor_q and condor_history can be used to see the fork jobs, providing an important tracing capability.  The number of concurrently running fork jobs can be set in the Condor config file.  Managed fork does not prevent a malicious user from overwhelming the CE.  We recommend large sites (>1000 cores) consider running managed fork. 
   * *[[GlobusWebServicesInstall][Globus Web Services]]*:  This is a web service that implements a variety of protocols, including WS-GRAM, a replacement for the GRAM protocol used widely in the OSG.  Currently, this is rarely used or configured.
For brevity of the CE install documents, these have been split out into a separate page.  
<!--
It was an easy decision to move Globus-WS off to another page; the Managed Fork stuff is closer to belonging on the top page.
-->

%BR%
---+ Configuration
This next major chapter of this document covers the configuration of the OSG CE.  We first introduce the configuration tool itself, then provide a high-level description of the configuration file.

%INCLUDE{"ConfigureOSGAttributes"}%
%INCLUDE{"FullPrivPreConfig"}%
%INCLUDE{"GipConfiguration"}%
%INCLUDE{"InstallAndConfigureRSV"}%

---++ Run =configure-osg=

At this point, you should have configured every section in the config.ini.  First, validate the setup with:
<pre class="screen">
configure-osg -v
</pre>
This may discover several issues you have to address; don't forget to [[SiteAdminResources][ask for help if needed]].  Once this exits successfully, you are ready to run the configuration:
<pre class="screen">
configure-osg -c
</pre>
This will additionally enable any services required by your configuration settings, but not turn them on.

%INCLUDE{"StartingServices"}%
<!--
%BR%
Note: MPI documentation needs a major overhaul before it can be included here.
[[https://twiki.grid.iu.edu/bin/view/Documentation/AdminSetupMPI][How to Support MPI Jobs On Your Site]]
-->
%BR%


---++ *Comments*
| If you have a server certificate but it is expired "vdt-control --on" will start your service but they will not work. Check the gatekeeper log file if you cannot authenticate. | Main.MarcoMambelli | 10 Jul 2009 - 19:15 |
| If the OLD_VDT_LOCATION is set there is no need to run the cert updater by hand, the certs will be handled same way as they were in the old install. I am not sure whether that happens always, but always for me.<br />Also seems to me that the Enabling Full Privilege Authentication is done automatically based on config.ini and the files are placed where they need to be - nothing to be done for it these days.<br /> | Main.IwonaSakrejda | 23 Jul 2009 - 20:54 |
| TAG_TEST = YES | Main.RobertEngel | 14 May 2010 - 17:47 |
| If Condor has been installed via RPM what should VDTSETUP_CONDOR_LOCATION be? Or, better, how do I point the condor-jobmanager to it? | Main.MarcoMambelli | 26 May 2010 - 23:44 |
%COMMENT{type="tableappend"}%



<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = SuchandraThapa

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %YES%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = StevenTimm
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %YES%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = IwonaSakrejda
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %YES%
############################################################################################################
-->


%META:TOPICMOVED{by="RobGardner" date="1192745464" from="Integration/ITB_0_7.ComputeElementInstallGuide" to="Integration/ITB_0_7.ComputeElementInstall"}%
