%META:TOPICINFO{author="KyleGross" date="1476285005" format="1.1" version="1.6"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

---++ Overall process
---+++ ITB release
The overall process for ITB releases is as follows:
   * Tag ITB release in svn repository 
   * Wait for VDT to update the ITB cache (VDT 2.0.99 currently)
   * Request the GOC to update the ITB cache and wait for update
   * Test updated cache and verify correct files are in place
   * Send out notice to ITB list and update twiki (as outlined in the section below on twiki updates)

---+++ Production release
The overall process for production releases is as follows.   Note the goc update request should be sent out by noon central and should not be on a Friday.
   * Create update notice using template
   * Circulate update notice and make sure there are no changes 
   * Tag production release in svn repository 
   * Wait for VDT to update the production cache (VDT 2.0.0 currently)
   * Request the GOC to update the production cache and wait for update
   * Test updated cache and verify correct files are in place 
   * Change date on update notice from place holder to actual date and send notice to GOC
   * Use the [[http://premailer.dialect.ca/][premailer]] web site to convert the update notice to text and a non-css version for the twiki page
   * Update twiki  (as outlined in the section below on twiki updates)

---++ Subversion cache changes
In order to commit changes to the subversion repository at the GOC, you will need to have the GOC add your DOE Cert DN to the list of authorized committers and use a version of subversion that can use X.509 certs for authentication.  Most recent subversion clients should do this.

---+++ Modifying release information
The common information for the pacman files is located in a file called =cache-information.ini= that holds mappings from tags to values.  When the cache is being generated, instances of a tag (e.g. =@OSG-CACHE@=) will be replaced by the appropriate value.  An example of the cache-information.ini file as used for the osg 1.2.9 release is given below.
<pre class="file">
[Symbols]
vdt-version = 2.0.0
osg-version = 1.2.9
osg-tag = OSG
osg-cache = http://software.grid.iu.edu/osg-1.2
vdt-cache = http://vdt.cs.wisc.edu/vdt_200_cache
vdt-url = http://vdt.cs.wisc.edu/releases/2.0.0/index.html
osg-tarball-location = http://software.grid.iu.edu/osg-1.2/tarballs
config-version = 1.2.47
vo-client-version = 31
vo-package-version = 31
</pre>
---+++ ITB release
The pacman files for the OSG and ITB cache are located in a subversion repository that the GOC hosts.  To release a new ITB cache update, the following steps need to be taken
   * Tag a set of pacman files for the release, e.g. <pre class="screen">
[sthapa@nsit-dhcp-250-234 ~]$ svn copy https://osg-svn.rtinfo.indiana.edu/softwarecache/branches/itb-1.1 https://osg-svn.rtinfo.indiana.edu/softwarecache/tags/itb-1.1.22 -m "Tagged itb-1.1.22 release"
</pre>  The files for the itb cache for the osg 1.2 releases are kept at =https://osg-svn.rtinfo.indiana.edu/softwarecache/branches/itb-1.1= .  
   * Send email to the goc (goc@opensciencegrid.org) requesting the ITB cache to be updated and indicating which tag to use
   * Once the goc has updated the cache,  the files will be at =http://software-itb.grid.iu.edu/osg-1.2/=
   * After verifying the correct files are present (ce install, site_verify passes), an announcement should go to the ITB
---+++ Production release
To release a new production cache update, the following steps are taken:
   * Tag a set of pacman files for the release, e.g. <pre class="screen">
[sthapa@nsit-dhcp-250-234 ~]$ svn copy https://osg-svn.rtinfo.indiana.edu/softwarecache/trunk https://osg-svn.rtinfo.indiana.edu/softwarecache/tags/osg-1.2.9 -m "Tag files for osg 1.2.9 release"
</pre>  The files for the itb cache for the osg 1.2 releases are kept at =https://osg-svn.rtinfo.indiana.edu/softwarecache/trunk= .  
   * Send email to the goc (goc@opensciencegrid.org) requesting the production cache to be updated and indicating which tag to use
   * Once the goc has updated the cache,  the files will be at =http://software.grid.iu.edu/osg-1.2/=
   * Use the [[http://premailer.dialect.ca/][premailer]] web site to convert the release announcement to 
   * After verifying the correct files are present (ce install, site_verify passes), the release announcement should be sent to the goc so that they can release it to the OSG mailing lists.
   
---+++ Testing tagged releases
The subversion cache has scripts used to create the cache based on a tagged release.  These scripts are located at =https://osg-svn.rtinfo.indiana.edu/softwarecache/scripts/itb= or =https://osg-svn.rtinfo.indiana.edu/softwarecache/scripts/production= depending on whether the itb or production cache is being generated.  The =create-cache.py= should be invoked with the tag to use (e.g. =./create-cache.py osg-1.2.9=) and will create a directory called =cache= containing a pacman cache that can be placed on the web for pacman.

---++ Twiki changes
---+++ ITB Release 
The changes needed for an ITB release are fairly minor:
   * The News & Update section on the [[ReleaseDocumentation.WebHome][web home]] needs to be updated
   * The [[ReleaseDocumentation.WebPreferences][ReleaseDocumentation Web Preferences]]  needs to be updated to reflect the new itb version
   * The [[Trash/Integration.WebPreferences][Trash/Integration Web Preferences]]  needs to be updated to reflect the new itb version

---+++ Production release
The twiki needs to be update for a production release.  The following things need to be changed on the ReleaseDocumentation page:
   * The News & Update section on the [[ReleaseDocumentation.WebHome][web home]] needs to be updated
   * The release announcement page needs to be created using the non-css version of the release update 
   * The [[ReleaseDocumentation.WebPreferences][ReleaseDocumentation Web Preferences]]  needs to be updated to reflect the new osg version


-- Main.SuchandraThapa - 07 Jun 2010

%META:FILEATTACHMENT{name="update_template.html" attachment="update_template.html" attr="" comment="HTML template file for release notices" date="1275931650" path="update template.html" size="4268" stream="update template.html" tmpFilename="/usr/tmp/CGItemp62321" user="SuchandraThapa" version="1"}%
%META:FILEATTACHMENT{name="update_template.dwt" attachment="update_template.dwt" attr="" comment="Dreamweaver template for release notice" date="1275931674" path="update template.dwt" size="1800" stream="update template.dwt" tmpFilename="/usr/tmp/CGItemp62408" user="SuchandraThapa" version="1"}%
