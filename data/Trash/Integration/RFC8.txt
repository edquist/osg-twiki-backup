%META:TOPICINFO{author="MineAltunay" date="1266598494" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="RFCS"}%
---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

[[RFCS][All RFCS]]

---+ RFC 8: Disabling configuration of a config.ini section

---++ Problem
Configure-osg has a fundamental problem that it replicates configuration that is stored elsewhere, and the configuration has to be kept in sync. For example, the name of the Gratia collector is stored both in the config.ini and in the Gratia probe configuration files. (We should not that this is also a good thing: configure-osg can consistently set configuration across a range of underlying components.) If a system administrator needs to do a configuration that is not possible in configure-osg, there are two solutions:

   1. Enhance configure-osg to make it possible. <br>The problem with this is that configure-osg's configuration file becomes more and more complicated over time. 
   1. Edit the underlying configuration file. <br>The problem is that if you re-run configure-osg, you risk losing your hand-edits to the configuration changes because configure-osg will reapply the changes it thinks are correct.

At the moment, we're particularly concerned with RSV. Most of the time, people need simple configurations for RSV and configure-osg's ability is sufficient. But in some cases people need complicated setups. For example, if you want to test two CE's or SE's, with different configurations, you need to make configuration changes beyond configure-osg's current abilities. We don't want to make the config.ini more complicated than it already is: capturing the wide variety of possible RSV configuration in config.ini is quite possible.

---++ Scope
This will not require any changes to the default config.ini, nor to any deployed conig.ini files. It will merely add the possibility for a new value for existing configuration variables. 

---++ Effects / Changes

---+++ Short description
Add a new "ignore" state for the "enabled" portion of a section.

---+++ Long description
Sections in the config.ini that control a service have a bit about it being enabled. For instance, for RSV this looks like:

<verbatim>
;===================================================================
;                            RSV
;===================================================================

[RSV]
; The enable option indicates whether rsv should be enable or disabled.  It should
; be set to True or False
enabled = %(enable)s
</verbatim>

We propose that "enabled" should be three valued, with values "True", "False", and "Ignore". When configure-osg sees "Ignore" (case insensitive), it should mean that the rest of the section is completely ignored--configure-osg will do nothing to enable, disable, or otherwise change the service's configuration. 

When configure-osg is run, it should print a brief note that it is not acting on the ignored section. 

---+++ Commentary
We'll need to update the documentation (in the Twiki and the comments in the config.ini) file to make sure this is clear for people. We will need to emphasize that when users do this, they take responsibility for configuration into their own hands, and it's up to them to deal with the resulting problems. 

I think that today "False" sometimes doesn't actually disable a service but is equivalent to the "ignore" I am proposing. I would call that a bug, but not one that I am proposing we fix now, except for RSV. (Unless people want to change it.) For RSV, setting "enabled" to "False" should actually disable it. 

Most of the time, people will not need the ignore option. But when it's appropriate for RSV, we'll encourage people to set it so that when configure-osg is run, it doesn't change their RSV configuration in a surprising way. We have a new tool (rsv-control) that can be used to enable and disable individual metrics, and if this RFC is accepted, we will encourage people to set the this section to "ignore" when appropriate. (And *only* when it is appropriate.)

If the changes to configure-osg are more complex than I expect, we propose that only the RSV section accepts the "ignore" option for now. 

---++ Timeline
This change would come out with OSG 1.2.8. 

---++ Current Status
Posted to osg-int for discussion on 17-Feb-2010. Interesting and useful discussion.

---++ Comments
| can you give me an example of the case that users would NOT use ignore option for RSV and would want to use config-ini. is that only when the user needs to change variable values in the config.ini file, and not touch any other variables? is this a common scenario? just curious.   | Main.MineAltunay | 19 Feb 2010 - 16:48 |
| read the email thread and got the answers. Ignore my question above | Main.MineAltunay | 19 Feb 2010 - 16:54 |
%COMMENT{type="tableappend"}%
