%META:TOPICINFO{author="IwonaSakrejda" date="1285890940" format="1.1" version="1.25"}%
%META:TOPICPARENT{name="Trash.ReleaseDocumentationComputeElementAuthorization"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%
---++ This page is obsolete

This Web page is obsolete. It is here just to host a few bits of information that have not been verified to exist elsewhere.

Please refer to for [[Trash.ReleaseDocumentationCompatibilityAuthPreConfig][the Compatibility Authorization information]] from now on.

---++ Old info

---++++ !!Test grid-mapfile generation
To test =grid-mapfile= generation, you need to run the below sequence (as root).  Note this uses the CE's host certificate.

<pre class="screen">
# <b>source $VDT_LOCATION/setup.sh </b>
# <b>cd $VDT_LOCATION/gums/scripts </b>
# <b>./gums-host generateGridMapfile</b>    <em>(output goes  to stdout. To get 
                                      a file: either redirect stdout or 
                                      use '--file file_name')</em>
     <em>...output  should look similar to the following dependent on your 
     GUMS server mappings..</em>
   #---- members of vo: osg ----#
    "/DC=org/DC=doegrids/OU=People/CN=Alexis Rodriguez 233072" osg01
   "/DC=org/DC=doegrids/OU=People/CN=Andrew Zahn 730598" osg01
   "/DC=org/DC=doegrids/OU=People/CN=Craig Phillip Prescott 50911" osg01
   #---- members of vo: Test3userGroup ----#
   "/DC=org/DC=doegrids/OU=People/CN=Anne Heavey 830711" osg01account
   "/DC=org/DC=doegrids/OU=People/CN=John Weigand 458491" osg01account
      <em>.... and so on</em>
</pre>

If gums-host generateGrid3UserVoMap fails, the GUMS server configuration may not be correct.  Please contact your administrator, or if you are the administrator, make sure you have the following elements in your gums.config (which can be easily configured from the web interface):
   * A hostToGroupMapping element which matches the host name from which you are issuing the request
   * A groupToAccountMapping (referenced by the hostToGroupMapping) element which contains a user group and account mapper
   * A userGroup element (referenced by the groupToAccountMapping) to validate membership of the requested DN
   * A accountMapper element (referenced by the groupToAccountMapping) to return the account for the requested DN

---++++ !!Test osg-user-vo-map generation
To test the =osg-user-vo-map= generation, you need to run as <i>root</i>.  This uses the CE host certificate.
<pre class="screen">
# <b>source $VDT_LOCATION/setup.sh </b>
# <b>cd $VDT_LOCATION/gums/scripts </b>
# <b>./gums-host generateOsgUserVoMap</b>   <em>(output goes  to stdout. To get
                                        a file: either redirect stdout 
                                        or use '--file file_name')</em>
     <em>...output  should look similar to the following dependent on your GUMS
     server mappings..</em>
  #User-VO map
  # #comment line, format of each regular line line: account VO
  # Next 2 lines with VO names, same order, all lowercase, with case (lines starting with #voi, #VOc)
  #voi xxx test3
  #VOc OSG TEST3
  #---- accounts for vo: osg ----#
  osg01 xxx
  #---- accounts for vo: Test3userGroup ----#
  osg01account test3
  <em>  .... and so on</em>
</pre>

If gums-host generateGrid3UserVoMap fails, the GUMS server configuration may not be correct.  Please contact your administrator, or if you are the administrator, make sure you have the following elements in your gums.config (which can be easily configured from the web interface):
   * A hostToGroupMapping element which matches the host name from which you are issuing the request
   * A groupToAccountMapping (referenced by the hostToGroupMapping) element which contains a user group and account mapper
   * A userGroup element (referenced by the groupToAccountMapping) to validate membership of the requested DN
   * A accountMapper element (referenced by the groupToAccountMapping) to return the account for the requested DN

---++ Retest the authorization mode using site verify
Run the [[ValidateSiteVerify][Site Verification]] script again locally (as a regular user, not root) and verify that the authorization still works. 


%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.JayPackard - 31 Oct 2007 %BR%
%REVIEW% - Main.AnneHeavey - 14 Nov 2007 %BR%
%REVCOM% not tested during review

%META:TOPICMOVED{by="AnneHeavey" date="1192818795" from="Integration/ITB_0_7.OsgCEAuthCompatibility" to="Integration/ITB_0_7.CompatibilityModeAuthorization"}%
