%META:TOPICINFO{author="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dSuchandra_20Thapa_20757586" date="1291405805" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="Trash.ReleaseDocumentationShuttingDownCE"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
Guide to shutting down services on installations of osg earlier than version 0.6.0.

%EDITTHIS%
%BR%
---++ Shutting services from version of OSG earlier than 0.6.0

Earlier versions of the OSG software did not contain the ==vdt-control== script.  For these earlier versions of OSG, it is necessary to stop the services by manually running the ==/etc/init.d== control scripts.  Some or all of the following commands will need to be run depending on what was installed on the system:

<pre class="screen">
# <b>service tomcat-5 stop </b>
# <b>service apache stop </b>
# <b>service MLD stop </b>
# <b>service mysql stop </b>
# <b>service edg-crl-upgraded stop </b>
# <b>service gris stop </b>
# <b>service bdii stop </b>
# <b>service globus-ws stop</b>
</pre>

=/etc/xinetd.d= services can be disabled by either removing the service configuration from the =/etc/xinetd.d= directory, or setting <tt>disable=yes</tt> in the service's =/etc/xinetd.d= configuration file and restarting xinetd.

Pay special attention to deprecated services as there are some files in the /etc/rc.d/init.d/ directory left over from previous VDT versions which have to be removed manually.  Usually vdt-control will let you know if they are in the way when it comes time to do =vdt-control --on=.  

---++ Additional considerations

---+++ Cron services 
The osg installation may have installed a cron job to handle logrotation.  You can check this by running =crontab -l= as root and checking for an invocation of =vdt-rotate-logs=.  If this is the case, you can disable it by running =crontab -e= and then deleting or commenting out the line that runs =vdt-rotate-logs=.

---+++ !!<nop>MonALISA 
Bear in mind that MonALISA also uses a database backend.  You should therefore run =/etc/init.d/MLD stop= to stop the !MonALISA service and then remove the =MLD= script from the init.d directory.  Next, open =$MonaLisa_HOME/Service/CMD/ml_env= and look for =MONALISA_USER= to determine the user that !MonALISA is running under.  You should then remove the user that !MonALISA is running under if that user is not used by any other service.  If !MonALISA is using an account such as daemon, then you can leave the account in place since the OSG install will use that account for other services. 


%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 18 Oct 2007 %BR%
%REVIEW% Main.HorstSeverini - 16 Jun 2008 %BR%

%REVFLAG% %Y% %BR%