%META:TOPICINFO{author="BrianBockelman" date="1233936918" format="1.1" reprev="1.7" version="1.7"}%
---+!! *%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%INCLUDE{"ConfigurationFileGIP"}%
%BR%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ Gip Configuration Overview
Configuration of the GIP is done through the $VDT_LOCATION/monitoring/config.ini configuration file.  Any change you make there is automatically read by the GIP -- there is no need to re-run configure-osg.py!

---++ Gip Features

---+++ PBS batch system notes
Globus allows users to submit to any queue listed in $VDT_LOCATION/globus/share/globus_gram_job_manager/pbs.rvf.  The GIP automatically reads this file and advertises all listed queues.  If any of the queues have acl_users or acl_groups set, the GIP will also try to map the user/group names to VOs and correctly advertise which VOs are allowed access to which queues.

This process is not perfect and sometimes fails to generate the right information; we have provided a manual override.  PBS sites may add the following attributes to the [PBS] section of config.ini.

   * =&lt;queuename&gt;_blacklist= - Comma separated list of VO names to exclude from queue <queuename>; * to exclude all.
      * To generate a list of supported VOs for a queue, first the queue's blacklist is generated, then the whitelist is applied.  This way, even if the blacklist is *, some VO might be allowed in it.
   * =&lt;queuename&gt;_whitelist= - Comma separated list of VO names which are always allowed in this queue.
   * =queue_exclude= - Local-user only queues which should not be advertised to the grid.


---+++ Configuring to publish GUMS information
 GIP is now automatically configured to to publish GUMS service status information. For more details, please look at [[http://vdt.cs.wisc.edu/releases/1.10.1/notes/GUMS.html]].  By default, this is turned off.  If you want to override the default behavior, set
<verbatim>
advertise_gums=False
</verbatim> in config.ini in the [GIP] section.

---+++ Condor batch system notes
 By default owner VMs are counted for the total CPU numbers published by GIP. According to Condor definition an Owner state implies "The machine is being used by the machine owner, and/or is not available to run Condor jobs". But technically it could be available in the future, for this purpose, GIP counts this field to determine total CPUs on the system, but it does not count this for the available CPUs or available slots. But some sites have been using this "Owner" state to create shadow pools which will be never available and should not be counted as a part of total CPUs.

In order to tell the GIP not to count the CPUs in "Owner" state for the total CPU count a site administrator should add the following line
<verbatim>
subtract_owner=True
</verbatim> to config.ini in the [CONDOR] section.
%STOPINCLUDE%
%BR%

%COMPLETE1% %BR% 
%RESPONSIBLE% Main.AnthonyTiradani - 03 Jul 2008 %BR% 
%REVIEW%
