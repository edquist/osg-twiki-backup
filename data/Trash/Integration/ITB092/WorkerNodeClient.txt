%META:TOPICINFO{author="AnneHeavey" date="1190320862" format="1.1" version="1.24"}%
%META:TOPICPARENT{name="DocumentationTable"}%
%LINKCSS%

---+!! %SPACEOUT{ "%TOPIC%" }%


%TOC%

%STARTINCLUDE%

---+ Install Worker Node Client
%EDITTHIS%

This should be done before installing the CE.
The worker node client is a minimal set of executables that need to be made available to the worker nodes in a Compute Element. It must be installed in a location visible to jobs executing on the worker node.   No host cert/key files are necessary for the worker node client installation.


---++ Package listing
Note that it contains some packages that are not part of the CE package. 

<pre class="screen">
[root@fgitb002 grid]# vdt-version
You have installed a subset of VDT version 1.8.0e:
    CA Certificates v29 (includes IGTF 1.16 CAs)
    cURL 7.16.2
    Fetch CRL 2.6.2
    Globus Toolkit, pre web-services, client 4.0.5
    Globus Toolkit, web-services, client 4.0.5
    GPT 3.2
    Java 5 SDK 1.5.0_12
    Logrotate 3.7
    Pegaus Worker Package 2.0.1
    RLS, client 3.0.041021
    SRM V1 Client 1.25
    SRM V2 Client 2.2.0.2
    UberFTP 1.24
    Wget 1.10.2
</pre>


These client programs need to be available from the worker node so that jobs which need to access grid-enabled mass storage during the job (e.g. via globus-url-copy, VDS, or srmcp) can do so.  The worker node also has to have either via NFS or locally a good set of certificate authority files with up to date certificate revocation lists (CRL's) for those clients to work properly.

---++ Installation Options
There are three installation options:

   1. _Suggested Installation:_ Install the wn-client package on the file server separate from the CE that you use for $APP. You will be installing the fetch-crl program onto this node, which requires root access, and adds a script into cron. The updates require outgoing network access from the node it is installed on.  (Should arrange to make it accessible from the CE as well). %BR% %BR%  
   2. _CE installation:_ Install the wn-client package on your CE. While we do not suggest you do this, we provide instructions, and support this installation as an option.  
   3. _Local installation:_  Install the worker node client software on each node.  However, modifications have to be made to the fetch-crl configuration so that hundreds of worker nodes do not attempt to contact the certificate authority servers independently.  You can use Squid as a front end or you can use rsync to 
copy the CA Certificates and CRL files from another node.  Instructions on 
both options are given below.

In all cases you need to choose a path that is common to all worker nodes and the CE. You will be prompted for this path when running the =configure-osg.sh= script on the gatekeeper in order to set the =$OSG_GRID= variable.


---++ Known problems
(none currently)

---++ How to install
Install using: 
<pre class="screen">
pacman -get %CACHE%:wn-client
</pre>

A full log of an installation is below, followed by comments on why each choice is made.

<pre class="screen">
[root@fgitb129 grid]# pacman -get %CACHE%:wn-client
Do you want to add [http://software.grid.iu.edu/%CACHE%/] to [trusted.caches]? (y or n): <b>y</b>
Package [wn-client] found in [%CACHE%]...
Do you want to add [http://vdt.cs.wisc.edu/vdt_180_cache] to [trusted.caches]? (y or n): <b>y</b>
Package [CA-Certificates] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Common] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Core] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Core-Bin] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Version] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Version-Info] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-System-Profiler] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Questions-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:CA-Certificates-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [CA-Certificates-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Common] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Fetch-CRL] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Fetch-CRL-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Licenses] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Licenses-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-Fetch-CRL] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Service-Management] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Configure-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Perl-Modules] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Perl-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Expat] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Berkeley-DB] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Perl] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Common] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Core] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Core-Bin] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Version] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Version-Info] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-System-Profiler] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Questions-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [CA-Certificates-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [CA-Certificates-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Fetch-CRL] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Fetch-CRL-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Licenses] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Licenses-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-Fetch-CRL] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Service-Management] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Configure-Base] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Perl-Modules] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Perl-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Expat] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Berkeley-DB] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Perl] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Client-Questions] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RM-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RM-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:GPT] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-User-Environment] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RM-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RM-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Essentials-Questions]found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-Cert-Request] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-Cert-Request-Questions]found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:CA-Certificates] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Info-Client] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Info-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Info-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-Info-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RM-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RM-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [GPT] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-User-Environment] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RM-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RM-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-Cert-Request] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-Cert-Request-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Info-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Info-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Info-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-Info-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-WS-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-WS-Client-Questions] foundin [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WSGRAM-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WSGRAM-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WSGRAM-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WSGRAM-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WS-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-WS-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:JDK-1.5] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:JDK-1.5-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Ant] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Ant-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:JDK-1.4] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:JDK-1.4-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-WS-Options] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-Globus-WS] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Logrotate] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:VDT-Logrotate-Questions] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Logrotate] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Logrotate-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-VDT-Logrotate] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RFT-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RFT-Client-Questions]found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RFT-Essentials] foundin [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-Base-RFT-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-WS-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WSGRAM-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WSGRAM-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WSGRAM-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WSGRAM-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WS-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-WS-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [JDK-1.5] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [JDK-1.5-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Ant] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Ant-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [JDK-1.4] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [JDK-1.4-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-WS-Options] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-Globus-WS] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Logrotate] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [VDT-Logrotate-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Logrotate] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Logrotate-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-VDT-Logrotate] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RFT-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RFT-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RFT-Essentials] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-Base-RFT-Essentials-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-RLS-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-RLS-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Globus-RLS-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Pegasus-Worker] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Pegasus-Worker-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Globus-RLS-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Pegasus-Worker-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Wget] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Wget-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Wget-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Curl] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Curl-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Curl-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [UberFTP] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:UberFTP-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [UberFTP-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [SRM-V1-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:SRM-V1-Client-Questions] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:Configure-SRM] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [SRM-V1-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [Configure-SRM] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [SRM-V2-Client] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [http://vdt.cs.wisc.edu/vdt_180_cache:SRM-V2-Client-Questions] found in[http://vdt.cs.wisc.edu/vdt_180_cache]...
Package [SRM-V2-Client-Questions] found in [http://vdt.cs.wisc.edu/vdt_180_cache]...
Downloading [vdt-common-1-200.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-common/1]...
Downloading [vdt-core-1.2.1-326.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-core/1.2.1]...
Downloading [vdt-environment-1-172.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-environment/1]...
Downloading [vdt-core-bin-2.1.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-core-bin/2.1-3]...
Downloading [vdt-version-5-222.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-version/5]...
Downloading [vdt-version-info-1.8.0-20.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-version-info/1.8.0]...
Downloading [vdt-system-profiler-3-204.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-system-profiler/3]...
Downloading [vdt-questions-2.0-269.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-questions/2.0]...
Downloading [CA-Certificates-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...

VDT 1.8.0 installs a variety of software, each with its own license.
In order to continue, you must agree to the licenses.
You can view the licenses online at:

     http://vdt.cs.wisc.edu/licenses/1.8.0

After the installation has completed, you will also be able to
view the licenses in the "licenses" directory.

Do you agree to the licenses? [y/n] <b>y</b>

Do you want to run a cron job that will update the CA certificate
revocation lists automatically? This will use the fetch-crl program
that comes with the VDT. The cron job will run at a random time
between midnight and 6:00am. We select a random time to avoid having
all VDT installations fetching CRLs at the same time.

Do you want to update the CA certification revocation lists (CRLs) automatically? [y/n] <b>y</b>

The VDT typically installs public certificates and signing policy files
for the well-known public CA's. This is necessary in order for you to
perform GSI authentication with any remote Grid services (that have
service/host certificates signed by these CA's).

For more information please refer to the VDT documentation:
http://vdt.cs.wisc.edu/setup_ca.html

Where would you like to install CA files?

Choices:
        r (root)  - install into /etc/grid-security/certificates
                   (existing CA files will be preserved)
        l (local) - install into $VDT_LOCATION/globus/share/certificates
        n (no)    - do not install
<b>l</b>
Downloading [certificates-install-4-237.tar.gz] from [http://vdt.cs.wisc.edu/software//certificates-install/4]...
Downloading [certificates-29-1.tar.gz] from [http://vdt.cs.wisc.edu/software/certificates/29]...
Installing package [CA-Certificates-Base].
Downloading [Fetch-CRL-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Licenses-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [licenses-1.8.0-13.tar.gz] from [http://vdt.cs.wisc.edu/software//licenses/1.8.0]...
Downloading [configure_fetch_crl-1-120.tar.gz] from [http://vdt.cs.wisc.edu/software//configure_fetch_crl/1]...
Downloading [vdt-service-management-1.0-129.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-service-management/1.0]...
Downloading [vdt-configure-base-1-360.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-configure-base/1]...
Downloading [perl-environment-1-205.tar.gz] from [http://vdt.cs.wisc.edu/software//perl-environment/1]...
Downloading [expat-2.0.0.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//expat/2.0.0-2]...
Downloading [berkeley-db-4.4.20.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//berkeley-db/4.4.20-2]...
Downloading [perl-modules-6-1.7.1.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//perl-modules/6]...
Downloading [fetch-crl-2.6.2-vdt.tar.gz] from [http://vdt.cs.wisc.edu/software//fetch-crl/2.6.2]...
Downloading [Globus-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-RM-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [globus-user-env.tar.gz] from [http://vdt.cs.wisc.edu/software//globus-user-env]...
Downloading [gpt-3.2.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//gpt/3.2_VDT-1.7.0]...
Downloading [Globus-Base-RM-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [privacy-Globus-Base-Essentials.txt] from [http://vdt.cs.wisc.edu/software/privacy/1.8.0]...
Downloading [Configure-Cert-Request-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [setup_cert_request-3-252.tar.gz] from [http://vdt.cs.wisc.edu/software//setup_cert_request/3]...
Downloading [vdt_globus_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_rm_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_rm_client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [Globus-Base-Info-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-Info-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [vdt_globus_info_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_info_client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [Globus-WS-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...

Several services provided by the VDT create unbounded log files.  If you wish, we can rotate those file on a daily basis.

Would you like to setup daily rotation of VDT log files?

Possible answers:
    y: Yes, I want the service to run automatically (once enabled)
    n: No, I do NOT want the service to run automatically

Note: Services are enabled with vdt-control; see 'post-install/README'.

<b>n</b>
Downloading [Globus-Base-WSGRAM-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-WSGRAM-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-WS-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [JDK-1.5-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [jdk-1.5.0_12.x86_rh_7.2.tar.gz] from [http://vdt.cs.wisc.edu/software//jdk/1.5.0_12]...
Downloading [Ant-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [ant-1.6.5.tar.gz] from [http://vdt.cs.wisc.edu/software//ant/1.6.5]...
Downloading [globus_ws_options-1-135.tar.gz] from [http://vdt.cs.wisc.edu/software//globus_ws_options/1]...
Downloading [configure_globus_ws-1-219.tar.gz] from [http://vdt.cs.wisc.edu/software//configure_globus_ws/1]...
Downloading [VDT-Logrotate-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [vdt-logrotate-1-217.tar.gz] from [http://vdt.cs.wisc.edu/software//vdt-logrotate/1]...
Downloading [Logrotate-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [logrotate-3.7.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//logrotate/3.7-3]...
Downloading [configure_vdt_logrotate-2-247.tar.gz] from [http://vdt.cs.wisc.edu/software//configure_vdt_logrotate/2]...
Downloading [vdt_globus_ws_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_wsgram_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_wsgram_client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [Globus-Base-RFT-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [Globus-Base-RFT-Essentials-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [vdt_globus_rft_essentials-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [vdt_globus_rft_client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [Globus-RLS-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [vdt_globus_rls_client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//globus/4.0.5_VDT-1.7.1]...
Downloading [Pegasus-Worker-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [pegasus-worker-2.0.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//pegasus/2.0.1]...
Downloading [Wget-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [wget-1.10.2.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//wget/1.10.2-1]...
Downloading [Curl-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [curl-7.16.2.x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//curl/7.16.2]...
Downloading [UberFTP-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [uberftp-client-VDT1.7.1-x86_rhas_4.tar.gz] from [http://vdt.cs.wisc.edu/software//uberftp/1.24_VDT-1.7.1]...
Downloading [SRM-V1-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [configure_srm-1-86.tar.gz] from [http://vdt.cs.wisc.edu/software//configure_srm/1]...
Downloading [srm-client-1.25.tar.gz] from [http://vdt.cs.wisc.edu/software//srm-v1-client/1.25]...
Downloading [SRM-V2-Client-1.8.0.tar.gz] from [http://vdt.cs.wisc.edu/software/questions/1.8.0]...
Downloading [srm-client-2.2.0.2.tar.gz] from [http://vdt.cs.wisc.edu/software//srm-v2-client/2.2.0.2]...

The OSG Worker Node Client package %CACHE% version 0.7.0 %RED%fix version for OSG -- or replace entire output section%ENDCOLOR% has been installed.
</pre>

The installation will first ask if you trust the pacman caches, and then if you agree to the VDT licenses.  

It then asks where you would like to install the CA files and whether to run the fetch-crl cron script. There are a couple of options:

---+++ !Option 1
For the suggested installation option, i.e. option (1) where you install this worker node client package on the file server that serves $APP, and you have no previous installation of the fetch-crl cron script, you should answer =l= (lowercase letter L) for the location and =y= to run the fetch-crl cron.

---+++ !Option 2
If you are installing this worker node client on the OSG CE, i.e. option (2) answer =l= (lowercase letter L) for local location of CRL and =n= on running the cron script.  You will change the symlink to point to the main VDT location, =$VDT_LOCATION/globus/share/certificates= once the OSG CE is installed.

---+++!Option 3
If you are installing this worker node client on every single worker node, i.e. option (3), answer =l= for local location of CRL and "y" on running the cron. But this should not 
be attempted without adding a squid proxy to the configuration.  This is done 
by creating the file
/etc/sysconfig/fetch-crl
with contents
<pre>
export http_proxy=fermigrid4.fnal.gov:3128
</pre>
where fermigrid4.fnal.gov would be replaced with whatever the name of your
site Squid server is.


---++Automation
The Worker Node Client installation process can be automated for any 
of the scenarios above, whether installing on the head node or on a bunch of worker nodes., so that you don't have to type in the letters.

<pre class="programlisting">
VDTSETUP_AGREE_TO_LICENSES=y
export VDTSETUP_AGREE_TO_LICENSES
VDTSETUP_INSTALL_CERTS=l
export VDTSETUP_INSTALL_CERTS
VDTSETUP_EDG_CRL_UPDATE=y
export VDTSETUP_EDG_CRL_UPDATE
VDTSETUP_ENABLE_ROTATE=n
export VDTSETUP_ENABLE_ROTATE
pacman -trust-all-caches -get %CACHE%:wn-client
</pre> 
---++ Enabling VDT services
If you answered "y" to rotate the logs, or run the fetch-crl daemon, then you should
enable it with the following command
=vdt-control --on=

---++gLexec Installation.

gLexec is an optional package new to VDT 1.8.0 and greater which, if installed,
should be installed with the software on the worker node client.  gLexec is designed
for authentication of pilot jobs.  Several VO's submit pilot jobs under the DN of one user 
which then call back to the VO submit host, e.g. Panda or !GlideWMS, to get a job
from a different user.  gLexec is designed to be installed on every worker node
and authenticate the user who is submitting the real job. It does this by calling 
a configurable callout (either LCG's lcas/lcmaps or GUMS/PRIMA).

%IMPORTANT% Instructions on how to configure gLexec can be found at [[GlexecInstall]]. 

---++ Post-install checks
If the OSG WN client is installed along with some other VDT package on any given node, the CE for instance, as in option 2, you should do the following steps afterwards.

Look at =crontab -l= for root, make sure that the fetch-crl that is there is running from the correct area. Make sure that it's sourcing the correct location.

For example, if the OSG CE is installed in =/usr/local/vdt= , then the OSG WN Client is installed in =/usr/local/grid=

Look at the =/usr/local/grid/globus/TRUSTED_CA= link. It should point to the real area where your certificates will live, in this example =/usr/local/vdt/globus/share/certificates= . If it doesn't, change it to that location.


<pre class="screen">
[root@fgtest3 globus]# <b>pwd </b>
/usr/local/grid/globus
[root@fgtest3 globus]# <b>ls -l TRUSTED_CA </b>
lrwxrwxrwx  1 root root 41 Mar 16 15:44 TRUSTED_CA -> /usr/local/grid/globus/share/certificates
[root@fgtest3 globus]# <b>rm TRUSTED_CA </b>
[root@fgtest3 globus]# <b>ln -s /usr/local/vdt/globus/share/certificates TRUSTED_CA </b>
</pre>

%NOTE% If Condor is used as the job manager, you should also make a symlink from =/etc/grid-security/certificates= to =$VDT_LOCATION/globus/share/certificates= .

---++ Notes
%IMPORTANT% If you are installing this package on a head node / compute element where an OSG CE install will also be done afterwards, it is recommended that you log out and log back in before continuing with the main OSG CE Install, otherwise all the wn-client stuff will be in your path and confuse everything.
%IMPORTANT% A side effect of the worker node client as currently configured, is that $GLOBUS_LOCATION can and does wind up in a different location on the head node than it does on the worker node.  The environment at the beginning of the job will give you $GLOBUS_LOCATION on the head node.  You have to source =$OSG_GRID/setup.sh= to get where $GLOBUS_LOCATION is available to you on the worker node. %BR% %BR%   To avoid this, it is required to add an appropriate softlink on every worker node such that $GLOBUS_LOCATION as defined on the head node points to the place where it is located on the worker node after the wn client installation. E.g., CMS analysis jobs submitted via Resource Broker will presently fail without this softlink. %RED% It has been claimed that in OSG 0.8.0/VDT 1.8.x, the vdt-job-environment routines which are called by the Globus jobmanager.pm to 
insert all the OSG variables into the job environment, will fix the $GLOBUS_LOCATION too, but in fact the problem still persists.%ENDCOLOR%.


---++ Current WN Contents

   * http://software.grid.iu.edu/itb/wn-client-0.7.0.pacman


---++ References

   * [[http://software.grid.iu.edu/pacman/][OSG cache directory]]
   * [[http://software.grid.iu.edu/itb/][ITB cache directory]]
   * [[http://vdt.cs.wisc.edu/vdt_180_cache/][VDT 1.8.0 cache directory]]

---++ Alternative Viewpoint and Approach

Installation of the worker node client package does imply maintenance of the certificates that it installs.  
It is possible to rsync either the full worker node client package to the worker nodes, or just the
CA certificate directory found in $VDT_LOCATION/globus/TRUSTED_CA.  This eliminates the 
need to do multiple pacman updates every time a new CA-Certificates package comes out, which 
is on the average of every couple of months.  

It is not enough to rsync the OSG CE installation, or NFS-mount it to the worker nodes.  The Worker 
Node client package now contains software that is not in the base OSG CE installation and VO's are
expecting it to be there, so it must be made available somewhere.

Doing anything automatically on the worker nodes requires care.  An example script that looks to see what worker nodes on a cluster using pbsnodes is attached to this page.  It can be edited or replaced with a more general version to match your specific cluster conditions.  Note that the example script does not use the batch system itself, but uses a feature of the local batch scheduler to avoid trying to push certificates to worker nodes that are down and to build a list of operating nodes to receive the update.  To use this script with the greatest amount of integration into existing certificate update procedures, it can be called just after the edg-fetch-crl call in the edg/sbin/edg-crl-upgrade script that should be in the edg/sbin area of your OSG VDT installation.  Example code to do so would look like:
%RED% These instructions are obsolete from osg 0.6.0 and greater because they refer to adding code to the now-obsolete edg-crl-upgrade script.  A new wn-cert-sync package is in 
preparation currently and should be released soon %ENDCOLOR%
<pre class="programlisting">
# Add section to upgrade the worker nodes:
    if [ -x $VDT_LOCATION/edg/sbin/wn-cert-sync ]; then
        $VDT_LOCATION/edg/sbin/wn-cert-sync -l $CRL_UPGRADE_PATH -q
    else
        echo "In edg-crl-upgrade: Worker node certificates not synchronized! "
    fi
</pre>

where =wn-cert-sync= is a soft link to your particular cluster's worker node certificate synchronization script, as in the example attached. (Customize one to your cluster configuration.)
   * This issue deserves further discussion and repair in the current OSG releases.

---
| *Links:* | | [[Documentation/AdminDocHub][Documentation for Resource and Service Providers]]  | |  [[Documentation/WebHome][Documentation Hub]]  | |  [[DocumentationTable#InstallOptions]["Install Optional Components" in documentation table]] |

%STOPINCLUDE%

%WHU%

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.RobGardner - 30 Nov 2005   %BR%  
-- Main.AlanSill - 02 Mar 2006   %BR%  
-- Main.FkW - 18 Mar 2006   %BR%  
-- Main.BurtHolzman - 29 Dec 2005   %BR%  
-- Main.RobQ - 01 May 2006   %BR%  
-- Main.StevenTimm 21 Feb 2007 %BR%


%META:TOPICMOVED{by="ForrestChristian" date="1166058606" from="Integration.WorkerNodeClient050" to="Integration/ITB_0_5.WorkerNodeClient"}%
