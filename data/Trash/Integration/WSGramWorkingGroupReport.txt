%META:TOPICINFO{author="KyleGross" date="1476285006" format="1.1" version="1.12"}%
%META:TOPICPARENT{name="WSGramValidation"}%
%DOC_STATUS_TABLE%
---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

---++ Introduction

This report summarizes results obtained running tests against WS GRAM services deployed on integration test sites during preparation for and post-deployment of OSG-0.8 software release.  Each of the following section describe a series of tests, their purpose, and the results of the tests.  

---++  WS GRAM Tests on ITB

The OSG integration cycle leading up to the OSG-0.8 software release included installation, configuration, and functionality testing of WS GRAM services on OSG's Validation and Trash/Integration test beds.  The purpose of this effort was to:

   * Apply a defined set of installation and configuration procedures for WS GRAM deployment on OSG, to:
      * Debug those procedures on a variety of sites
      * Document the procedures in the [[https://twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GlobusWebServicesInstall][OSG WS GRAM Installation Guide]]   
   * Develop a large suite of tests to determine WS GRAM service functionality for use in OSG
      * document these tests for general use, see [[https://twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/ValidateGramWebServices][WS GRAM Validation Procedures]]
      * have each site admin apply these test on their own sites
   * Run more targeted tests on individual ITB sites

During the installation and testing of WS GRAM services deployed on the ITB, we discovered and debugged a handful of configuration details which could cause some validation tests to fail.  These initial failures occurred when testing the service with job-submission through Condor-G and it's WS GRAM support.  A bug in the Condor-G client, for example, did not forward the client specified ephemeral port range to the WS GRAM service causing gridftp callbacks to a firewalled submission site to fail. The final OSG-0.8 software deployment incorporated fixes to those bugs and each ITB site which tested the services was able to validate it's functionality.  

Once each of the ITB sites had validated the WS GRAM service, we ran a set of simple scaling tests against the ITB. Test jobs were submitted to each of the persistent ITB sites via condor-g, at rates ranging from about 20 to 100 jobs per submission.  Except for a fraction of jobs that failed in a recoverable way (gridftp timeout on submission node discussed below), each site was able to successfully process these jobs in times comparable to pre-WS GRAM tests. 

No OSG VO used WS GRAM service during the VO validation portion of the latest ITB cycle.   Two VOs, LIGO and STAR, were contacted directly to  see if they could test the service and both participated.  LIGO was able to successfully run their workflow through WS GRAM on at least 1 site.  STAR's workflow was also migrated to WS GRAM though that work was not fully tested due to possible conflict with STAR's pre-WS GRAM testing on the ITB. 

---++  Scaling tests on ITB/VTB sites

---+++  Submission with GRAM CLI Tools

---++++ Simple job submits in loop  (Suchandra)

---++++ Bulk job submission with data transfers (Jeff)

---+++  Submission with Condor-G

---++++ Bulk job submission, data transfers via Condor-g

---++++ Comparison with GT2

---++++ Bulk job submission, data transfer via RFT

---++  VO Validation Tests


---++  Summary Comments

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = SuchandraThapa

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Trash/Integration|Operations|Tier3)
   * Local DOC_AREA       = Integration

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager|Documenter)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Knowledge
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %NO%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%

   * Local REVIEW_PASSED = %IN_PROGRESS%
   * Local TEST_PASSED = %IN_PROGRESS%

-->