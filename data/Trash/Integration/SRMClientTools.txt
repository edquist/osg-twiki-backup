%META:TOPICINFO{author="NehaSharma" date="1126816596" format="1.0" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>SRMClientTools
%TOC%
%STARTINCLUDE%

This is a readiness plan for SRM Client Tools proposed as an optional module in the OSG Cache by Rob Kennedy and the 
SRM-dCACHE team
---++SRM shell-client as an optional module in the OSG cache


1) Package, distribute and support the SRM Shell-tool Clients "SRM-cp". This toolkit provides a command line interface to the SRM  standard. The package is supported for the standard interfaces to the dCache, DRM and Castor implementations of SRM.

2). The goal is to introduce this component for testing on ITB by May 1st.

3) It is expected that for deployment the SRM V2 interface will be supported.

4) Validation and testing can be done using the LBNL SRM testing tool. We are looking at obtaining access to the LCG-2 SRM testing suites also.

5) Documentation is currently available at http://sdm.lbl.gov/srm-wg/index.html. By the time of introducing to the ITB we will have man pages and a user web page for reference.

6) Support for such a component needs a triage structure, since the SRM support group does not have the resources to support diagnosis of the end to end problems that occur in the use of an SRM client<->SRM server<->storage service (SE). Our proposal, for discussion, is the following:
	 VO support is the first level contact
	 SE resource provider is the second level contact
	 SRM client package provider is the third level contact - srm-support@fnal.gov.
	 Worker node on which srmcp is run needs to access certificates directory
	 specific files. 
*HOW TO INSTALL SRMClient Package*
	 Certificates can be installed into $VDT_LOCATION/globus/share/certificates.
  Following instructions are executed on a local OSG Compute Node (tam01.fnal.gov)  
	(which are part of VDT) are hardcoded to point to /etc/grid-security/certificates.
  To install this type:
 
  Assuming the directory in which you want to install is "srmcp-v1_19"
 
 # cd srmcp-v1_19
 
 # pacman -get iVDGL:srm-cp

Pacman [3.13.1] is available at http://physics.bu.edu/pacman/...
Do you want to add [http://hep.uchicago.edu/ivdgl/] to [trusted.caches]? (y or n): y
Package [srm-cp] found in [http://hep.uchicago.edu/ivdgl/]...
Downloading [srmclient.tar.gz] from [hep.uchicago.edu]...
			6/6 MB downloaded...
Untarring [srmclient.tar.gz]...

 # ls

o..pacman..o  setup.csh  setup.sh  srmclient  trusted.caches  vdt-install.log

 # source setup.sh
 
 # which srmcp

/ide1/testing/srmcp-v1_19/srmclient/bin/srmcp
 
 # Kindly note two important options that you should use to avoid any firewall issues on a worker node and also srm server DN :

  srmcp  --gss_expected_name=host/srm/etc --globus_tcp_port_range=min value:max value source-url dest-url

  where :
  -globus_tcp_port_range=min value:max value,

	  a range of ports open for tcp connections specified as a pair of positive integers separated by ":", not set by default
	  This takes care of compute nodes that are behind firewall.

  -gss_expected_name=gss expected name in the srm server DN default value is host. eg: If the CN of host where srm server is running is
 CN=srm/tam01.fnal.gov, then it should be "srm"
 
  Run srmcp --help for more information.
  
  Some Examples:

  srmcp -debug file://localhost//home/s1/neha/test/aaa srm://t2data2.sdsc.edu:8443/data/osgtest/1/file1
 
  srmcp  -debug=true --gss_expected_name=srm file:////bin/sh srm://dmx.lbl.gov:6253//srm/DRM/srmv1?SFN=/tmp/try1
	
  *An Open Issue*
  
  As mentioned by Leigh in her mail another issue is : 

  One quesiton is that of the certificates directory. If the
  srmcp is contacting other machines using a globus security
  will a compute node certificates directory be required.

  Reply from Timur :

  Either service certs will need to be preinstalled and maintained, or 
  they need to be copied to the worker node together with other job 
  specific files. So I would say it should be required.
---++ Backlinks
  
	 SRM client package provider is the third level contact - at the moment this is osg-int@opensciencegrid.org 
Topics that have this one as their parent:
---++ Comments
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
---++ Major Updates
*Major updates*:%BR%
-- Main.RuthPordes - 07 Apr 2005
-- Main.NehaSharma - 01 Feb 2006

%STOPINCLUDE%

-- Main.NehaSharma - 01 Feb 2006 %BR%
-- Main.ForrestChristian - 14 Nov 2006: reformatting %BR%
