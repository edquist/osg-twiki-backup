%META:TOPICINFO{author="SuchandraThapa" date="1189788126" format="1.1" reprev="1.15" version="1.15"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! <noop>%TOPIC%
%TOC%

---++ Introduction
This subcommittee has been focused on testing out WS Gram as it appears in OSG 0.6 in terms of functionality, scalability, and stability.  We have discussed a general program of testing, directly using native Globus commands or via Condor-G, of the following:
Jeff will be build up a set of job types.
   * Type I: simple submit, no I/O involved. Scale.
   * Type II: data-producing job: return data to user's submit host. Scale
   * Type III: data-producing job: transfer data to some other designated storage area. Scale.
   * Type IV: data-consuming job, transfer input data form users's submit host. Scale
   * Type V: data-consuming job, transfer input data from some other designated storage area. Scale
   * Type VI: data-consuming/data-producing job, to and from the submit host. Scale.
   * Type VII: data-consuming/data-producing job, from arbitrary endpoints. Scale. 

---++ Membership and contributions
Jeff, Suchandra, Stu, Charles, Alain, David, Alan, Ravi, Martin

---++ Meetings
   * MinutesWSGramFeb26
   * MinutesWSGramMar12
   * MinutesWSGramMar19
   * MinutesWSGramMar26
   * MinutesWSGramApril02
   * MinutesApr24
   * MinutesMay1
   * MinutesVTBAug7

---++ Configuration recommendations
   * AddendaToInstallingAndConfiguringGlobusWebServices

---++ Summary of results
 
---+++ Functional tests
   * Initial functionality tests are documented on [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/ITB_0_5/TestingGram4][WS Gram ITB Testing]] and provide a reference for the entries into the [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/SiteValidationTableITB052][SiteValidationTable]] 
   * A list of target sites for more extensive testing by interested WS GRAM user-groups was developed and maintained as [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/WsGramOsgSites][WS GRAM OSG Sites]]
      * Above page is currently updated with results of running mini-production from LIGO, nanoHIPE with Condor-G 

---+++ Scalability: native job submission (via globusrun-ws)
   * See results from Suchandra's tests at: https://twiki.grid.iu.edu/twiki/bin/view/Main/WSGramTesting

---+++ Scalability: Condor-G submission

   * Completed a suite of tests via Condor-G of Types I, II, IV, and VI above, including Scaling tests
      * Initial results are shown on [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/JeffTestPage][Jeff's test page]] for both GT4 and GT2 
         * These tests indicated some scaling problems when Condor-G was configured to not limit submission rates. 
         * Other tests have not shown this problematic scaling behavior
      * Several container-side configuration changes were implemented which improved the results:
         * number of file descriptors
         * maximum heap size 
         * maximum number of threads
      * Because results did vary for different submission hosts / server sites, we're trying to isolate the differences via:
         *  A site detail page: WSGramTestSites
         *  A targeted installation of Syslog-ng 
   * LIGO mini-production testing from David is essentially Type VII case: see [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/WsGramOsgSites][WS GRAM OSG Sites]]
   * David successfully ran ws-gram nanoHIPE  on  OSG_LIGO_PSU and TTU_ANTAEUS on 5/01/07.  GOC trouble ticket being worked by John Rosheck for UWMilwaukee. 

---++ Getting a suitable testbed plan
The plan is as follows (notes from Martin Feller):
   * UofC installs the OSG software stack on a strong machine with a larger cluster behind. Next tests will run against that machine
   * A central location for storage of client-side Condor-G and server-side GT4 logfiles will be setup by UofC. Ideally we would have 2 logfiles for each
  testrun. Ideally we would have separate client-side and server-side logfile for each testrun. I don't know if this is doable with syslog-ng.
   * In the meantime client-side Condor-G and server-side GT4 configuration settings (memory, #threads, etc) are collected on the TWIKI Jeff set up. I'm still waiting for my account for that wiki to be approved. After that  i'll enter data for osg-test[12].unl.edu
   * If the UofC machine and the logfile collection tool is up and all configuration settings are fine, tests are run against the UofC server from
      * t2dev-osg.uchicago.edu,
      * osg-itb-se.ligo.caltech.edu,
      * osp2.lbl.gov,
      * osg-test2.unl.edu.
   * In the meantim we can try to set up the OSG software stack on osg-test1.unl.edu, so that all servers are more or less the same.

Independant from that my personal findings so far are:
   * osp2.lbl.gov as client has timeout problems that have been unable to track down
   * servers osg-test1.unl.edu, osg-itb.ligo.caltech.edu, t2dev-osg.uchicago.edu run fine with the increased number of container threads.
   * we should focus on reliability first. It doesn't make sense to start with performance issues if submission is not reliable.
   * Each test, regardless if it fails or succeeds, should be mentioned  and client-side condor-g and server-side GT4 logfiles should be collected

---++ References
   * For test conditions and resource information, see WSGramTestSites 
   * Testing from Jeff, see JeffTestPage
   * Testing from Suchandra, see [[https://twiki.grid.iu.edu/twiki/bin/view/Main/WSGramTesting][WS Gram Testing]]
   * Defined job-type tests, [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/MinutesWSGramFeb26#Jeff_s_update][here]]
   * Testing in ITB 0.5.2: https://twiki.grid.iu.edu/twiki/bin/view/Integration/ITB_0_5/TestingGram4, and ITB WS-equipped WsGramOsgSites
   * Submitting jobs through web services Gram in [[http://vdt.cs.wisc.edu/releases/1.6.0/submitting_wsgram_jobs.html][VDT 1.6]].
   * Testing by CMS/Nebraska: http://t2.unl.edu/cms/ws-osg-tests/
   * Testing by John Weigand http://home.fnal.gov/~weigand/globus-ws/notes.shtml 
   * [[%ATTACHURL%/OSG_GRAM2_GRAM4_comparison.pdf][OSG_GRAM2_GRAM4_comparison.pdf]]: OSG GT2 GT4 comparison done by GridWay Team


-- Main.RobGardner - 04 Apr 2007

%META:FILEATTACHMENT{name="OSG_GRAM2_GRAM4_comparison.pdf" attachment="OSG_GRAM2_GRAM4_comparison.pdf" attr="" comment="OSG GT2 GT4 comparison done by GridWay Team" date="1189788090" path="OSG GRAM2 GRAM4 comparison.pdf" size="175541" stream="OSG GRAM2 GRAM4 comparison.pdf" user="Main.SuchandraThapa" version="1"}%
