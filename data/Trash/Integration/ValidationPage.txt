%META:TOPICINFO{author="KyleGross" date="1225985947" format="1.1" version="1.41"}%
%META:TOPICPARENT{name="ItbRel030"}%
*Deprecated* -- Main.RobGardner - 07 Aug 2007

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%

---++Introduction
This page is the starting point for all validations for the integration testbed.
   * The current validation exercise is for ITB 0.5.2. 
   * Current Validation Table: SiteValidationTableITB052
   * Previous Validation Table: SiteValidationTableITB051

---++ Daily Validation
   * [[http://www.uscms.org/SoftwareComputing/Grid/Validation/][Daily Validation project]] from USCMS.

---++ Gratia Validation

   * URL for Quick Gratia Probe Test on ITB Gratia Reporter at FNAL: http://gratia-fermi.fnal.gov:8881/gratia-reporting/index.jsp?link=viewer.jsp?__report=/data/glr/tomcat-itb/webapps/gratia-reports/JobsByProbeNoFacility.rptdesign
   * [[http://gratia-osg.fnal.gov:8881/gratia-reporting/][Gratia Reporting]] for ITB sites.  
   * [[http://gratia-osg.fnal.gov:8880/gratia-reporting/][Gratia Reporting]] for production sites.

---++For VirtualOrganizations/VOInfoRS Validation
   * Site must first register with OSG <a href="https://goc.grid.iu.edu">Grid Operations Center for !OSG Registration page </a>. NOTE: You must have a valid certificate loaded to your browser to access this page.
   * The VirtualOrganizations/VOInfoRS tool is based on information pulled from the [[http://software.grid.iu.edu/pacman/tarballs/verify/][site_verify.pl]] script via the [[http://scan.grid.iu.edu/][GridScan tool.]]
   * When site has been accepted it will be reviewed for "PASS" <FONT color='green'>green</FONT> status at the main VirtualOrganizations/VOInfoRS page located [[http://vors.grid.iu.edu][here]].


---++For !MonALISA Validation
   * Check the "Site Status page of ML. URL: http://monalisa-itb.grid.iu.edu:8080/stats?page=summary
   * Verify there are no red or orange boxes for your site and you are running  ML version 1.6.8.
   * See the MonALISA twiki web for details.
   
---++For !CEMon Validation

---+++ ReSS
CEMon validation should be done by checking the information gatherer (IG) server at osg-ress-4.fnal.gov  to see that the installation is reporting information to the server. If you have the condor client binaries, you can check the ITB IG server directly using:
<verbatim>
condor_status \
         -pool osg-ress-4.fnal.gov \
         -constraint "GlueCEInfoHostName == \"YOUR_HOST_NAME\""  \ 
         -long
</verbatim>
which should generate a lot of output.


If the above quick check with condor_status doesn't provide output, make sure that the service is operating:
   * Look at _$VDT_LOCATION/tomcat/v5/logs/glite-ce-monitor.log_ for the following entry:
<verbatim>
20 Oct 2006 13:39:58,881 org.glite.security.trustmanager.CRLFileTrustManager -
       Client CN=osg-ress-1.fnal.gov, OU=Services, DC=doegrids, DC=org accepted
</verbatim>
   * Run =ps -ef | egrep '(apache|tomcat)'= .  You should see a tomcat process and several apache processes running from _$VDT_LOCATION/apache/bin_ .  E.g. 
<verbatim>
root     10421     1  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   10422 10421  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   10423 10421  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   10424 10421  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   10425 10421  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   10426 10421  0 Nov28 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon    6915 10421  0 Nov30 ?        00:00:00 /share/itb/apache/bin/httpd -d /share/itb/apache -k start -f /share/itb/apache/conf/httpd.conf
daemon   19540     1  0 15:46 pts/1    00:00:10 /share/itb/jdk1.4/bin/java -Dorg.globus.wsrf.container.persistence.dir=/share/itb/vdt-app-data/globus/persisted -Djava.endorsed.dirs=/share/itb/tomcat/v5/common/endorsed -classpath /share/itb/jdk1.4/lib/tools.jar:/share/itb/tomcat/v5/bin/bootstrap.jar:/share/itb/tomcat/v5/bin/commons-logging-api.jar -Dcatalina.base=/share/itb/tomcat/v5 -Dcatalina.home=/share/itb/tomcat/v5 -Djava.io.tmpdir=/share/itb/tomcat/v5/temp org.apache.catalina.startup.Bootstrap start
</verbatim>

Also going to https://<host>:8443/ce-monitor/services/CEMonitor?method=GetInfo should return an xml document from CEMon. Access is disabled by the installation, services and configuration files will need setup before this will work.



---+++ CEMon LDIF Collection and ITB BDII

Service not available in OSG 0.5.2 release.


---++For !GridEx Validation
By submitting a steady stream of continuous jobs to a site, the
[[http://www.cs.wisc.edu/condor/tools/exerciser/][Grid Exerciser]]
(abbreviated _GridEx_) can be used as a site validation tool.  The
GridEx can validate site capability to:

   * receive and run jobs without errors, using OSG software, 

   * handle a light but continuous job load: currently limited to no more than 10 jobs, or the number of site CPUs.

Site validation steps:
   * Configure the site to run GridEx jobs per the [[http://osg.ivdgl.org/twiki/bin/view/Integration/GridEx][configuration notes]].

   * Ensure the site is properly configured for the [[http://osg.ivdgl.org/twiki/bin/view/Integration/ValidationPage#For_GridCat_Validation][GridCat]]. The OSG-ITB GridEx is currently configured to only submit jobs to sites that report to the OSG-ITB GridCat with:
      * a valid batch system, such as PBS, LSF,Condor, SGE, etc
      * a valid site CPU count

   * The GridEx is periodically restarted to capture changes in the GridCat.  To request a manual GridEx restart to capture a new site, send a request to the GridEx [[mailto:grid-ex@cs.wisc.edu][administrator]].

   * GridEx reports are sent once a day for the previous 24 hours of activity, typically at midnight, to the OSG-INT@OPENSCIENCEGRID.ORG list.  Monitor succeeding GridEx reports for activity information on the new site.  There is a [[http://www.cs.wisc.edu/condor/tools/exerciser/reading_report.html][guide]] for interpreting GridEx reports.  In a nutshell, the goal is to show non zero run time, and no errors for the new site.  For validation purposes, the amount of run time is not as important, but should not be zero.  If there are errors associated with a site, these will be listed at the bottom of the report.  One of the most common errors is:<br> =1840 Globus error 7: an authentication operation failed= <br> and indicates the site was not able to authenticate the GridEx credential. Ensure the site is able to map the GridEx [[http://osg.ivdgl.org/twiki/bin/view/Integration/GridEx#GEx_User_Identity][distinguished name]].  Many Globus error code explanations can be found [[http://www.cs.wisc.edu/~adesmet/status.html#globus][here]]. Other errors may be more difficult to interpret, and may warrant a message to [[mailto:grid-ex@cs.wisc.edu][administrator]].  It is often helpful to enclose appropriate server side logs of a sample GridEx job error.

   * A site can be considered validated after more than 24 hours of GridEx job activity, with no errors.



---++ Older Validation Pages
   * See validation section of the GridFTP page
   * Validations for the previous ITB release is located at SiteValidationTableITB051.


---++Application Validations

Instructions for application validations by individual VOs:

   * It is up to the VirtualOrganizations/VOInfo to determine what application would be a resonable test of the site functionality.
   * Check with the latest validation table SiteValidationTableITB052 for a list of sites participating in validation of this OSG release.
   * Before submitting your test jobs to a specific site, make sure your VirtualOrganizations/VOInfo can authenticate at this site.
   * Submit your jobs.
   * In case of success, put the success mark in the validation table SiteValidationTableITB052 for this site.
   * In case of failure, put the failure mark. Get in touch with the site administrator and try to work out a solution. CC your correspondence to application validation coordinator: [[Main.DavidMeyers][DavidM]].

-- Main.DavidMeyers - 24 Jan 2007