%META:TOPICINFO{author="BurtHolzman" date="1136912425" format="1.0" version="1.5"}%
---++ Install and Configure Srm/dCache

	For installing and configuring Srm/dCache, follow the steps below

	* Check System Requirements and follow the pre-installation steps in DCacheStorageElementPreInstallation.

	* Download the dCache bundle from the downloads page of http://www.dcache.org. You can use the "Linux/Intel rpms tar ball" that contains the dCache Server, Pnfs, Clients, SRM. 
 
	* Unpack the tarball (dcache-bundle-1.6.6-1.tgz) . This will create a directory (dcache-bundle-1.6.6-1) that contains the needed rpms.

Note: 
<b> Do not follow the instructions in the INSTALL file. Rather, go to the web page http://www.dcache.org/manuals/Book and follow the directions there. The dCache Book will be more up-to-date than the INSTALL file. However, read the rest of this page for further modifications which may not be in the dCache Book. </b>

	* Whether you need to install postgres or not, follow the link [[http://www.dcache.org/manuals/Book/cb-postgres-install.shtml][Section 1, "Installing a PostgreSQL Server"]] from the [[http://www.dcache.org/manuals/Book/in-install.shtml][Installation of a Basic dCache Instance]] page to setup the postgres configuration for the rest of the install. Also see DCacheAdditionalPostgresTips. If you need to install Postgres, see PostgresInstallRPMS.

Note: 
<b>If you are installing on Fedora Core 3, Scientific Linux 4, or any OS in which "mount" defaults to NFS version 3, see DCacheNFSversion. </b>

	* When editing the file /opt/d-cache/config/dCacheSetup, in addtion to the changes directed by the dCache Book, use the lines
<verbatim>
	portBase=22
</verbatim>
	and
<verbatim>
	gsiFtpPortNumber=2811
</verbatim>

	* In /opt/d-cache/etc/node_config, in addtion to the changes directed by the dCache Book, if you have a host certificate use these lines
<verbatim>
	GSIDCAP=yes
	GRIDFTP=yes
	SRM=yes
</verbatim>

	* You will need to add a user for each VO you will support, for example,

<verbatim>
	# useradd uscms01
	# vi /etc/group
	uscms01:x:501:
	# vi /etc/passwd
	uscms01:x:501:501::/home/uscms01:/bin/bash
</verbatim>

	* If you have set up /etc/grid-security/grid-mapfile and would like to use the script grid-mapfile2dcache-kpwd to create dcache.kpwd, here is a copy: DCacheKPWDScipt. The /opt/d-cache/etc/dcache.kpwd file should look something like:
<verbatim>
	version 2.1

	# Mappings for 'uscms01' users
	mapping "/DC=org/DC=doegrids/OU=People/CN=Gerald Holmes 899524" uscms01

	# Login for 'uscms01' users
	login uscms01 read-write 501 501 / / /
		  /DC=org/DC=doegrids/OU=People/CN=Gerald Holmes 899524
	</verbatim>

	* For firewall configuration, see DCacheFirewallSetup.

-- Main.TedHesselroth - 23 Nov 2005

