%META:TOPICINFO{author="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dScot_20Kronenfeld_20866253" date="1294353786" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebPreferences"}%
---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

%TWISTY{%TWISTY_OPTS%
showlink="Show Pacman Update Instructions"
hidelink="Hide Pacman Update Instructions"
start="hide"
}%
%STARTINCLUDE%
%INCLUDE{"Integration.ITBUpdateInstructions"}%
%STOPINCLUDE%
%ENDTWISTY%

---+++ Updating

---++++ Removing old RSV probes
After upgrading from RSV 3.2.X to RSV 3.3.X you may have both old and new RSV probes running.
After turning on all your services using vdt-control run
=condor_cron_q=.  If you see any processes that say =probe_wrapper.pl=
(as opposed to =rsv-control=) then do the following:

<pre class="screen">
# turn off new metrics
vdt-control --off osg-rsv
# clean out old metrics
condor_cron_rm -all
# verify that all the processes have been removed
condor_cron_q
# turn new metrics back on
vdt-control --on osg-rsv
</pre>

*IMPORTANT: Please tell us if you need to run these steps to remove old probe_wrapper.pl RSV jobs.*  This occurred at Scot's test site and if it occurs at other sites then he will automate it so it does not happen in production.

---++++ Running all new metrics immediately

After updating your site and turning on all services you can use the following command to immediately run all metrics.  It will take a few minutes to complete but prevents you from waiting a few hours for all the metrics to run.

=rsv-control --run --all-enabled=

---+++ Testing and Validation

---++++ Components Changed
The full list is available here: [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p24.html][http://vdt.cs.wisc.edu/releases/2.0.0/release-p24.html]]

Highlights:
   * Major new rsv update with rsv-control integrated
   * Bestman and SRM-Client-LBNL have been updated to version 2.2.1.3.18
   * Bestman2 and Bestman-Client have been updated to version 2.0.5
   * GIP has been updated to 1.1.14

---++++ Testing

Admins should try the steps outlined in the General Testing Guidelines:

%TWISTY{%TWISTY_OPTS%
showlink="Show General Testing Guidelines"
hidelink="Hide General Testing Guidelines"
start="hide"
}%
%STARTINCLUDE%
%INCLUDE{"/Integration/TestingGuidelines"}%
%STOPINCLUDE%
%ENDTWISTY%

  In addition, please try the following specific tests related to software components that we've updated:

   * If you are updating from ITB 1.1.26 or later, let us know how the new update process works.
   * In addition to making sure the probes are working correctly, please try using the new rsv features found in rsv-control
   * Verify that information reporting to bdii is working and the correct information is being reported.  Also:
      * Verify WLCG site attributes are being reported correctly
      * Verify allowed_vos work corrrectly for SEs
   * Bestman and friends have already been tested by the VDT storage team.  Feel free to update and test if desired but we do not require any more testing before the release. 

---+++ Open bugs and workarounds

---+++ How to report a bug?
Bug reports for the installation and documentation should be filed with GOC at [[https://ticket.grid.iu.edu/itb/open]].  *Please don't use the VDT support center or any other support center as the recipient since that will cause a email loop*

---+++ Testing Status

This table will be updated by Suchandra and/or Scot to help track the status of sites.  Admins, please feel free to update it if you would like.

| *Site* | *Admin* | *Status* | *Notes* |
| UC-ITB | Suchandra |  | |
| LBNL | Iwona |  |  |
| TTU | Poonam | | |
| BNL | Xin |  |  |
| FNAL | Steve Timm |  |  |
| OU | Horst / Karthik |  |  |
 
