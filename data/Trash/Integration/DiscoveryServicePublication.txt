%META:TOPICINFO{author="IwonaSakrejda" date="1270231327" format="1.1" version="1.8"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%


---++Introduction

The Discovery Service is a web service catalog for the OSG.  There are several ways to publish information into the Discovery Service.

---++ jClarens-Publisher

VDT 1.3.8 includes a new jClarens-Publisher package that provides some command line tools for publishing to and querying from any Discovery Service instance.  This is not currently a required package for the CE install, so you will have to install this package separately with the following command:

<verbatim>
    pacman -get http://vdt.cs.wisc.edu/vdt_139_cache:jClarens-Publisher
</verbatim>

   * =bin/publish-voms-admin.sh= - A script to publish a voms admin server to the discovery service.  Run with =-h= for extended usage information.  When run with no arguments it will load the VOMS and discovery service configuration from =etc/publish-voms-admin.properties=.
   * =etc/publish-voms-admin.properties= - Site-specific settings for the VOMS server at the site.  This is read by the =publish-voms-admin.sh= script.
   * =bin/vomspublisher= - An /etc/init.d script for starting the voms publisher at boot time.
   * =bin/mkgridmapconf.sh= - script to generate an edg-mkgridmap.conf file from a list of VOMS admin services registered with the Discovery Service.
   * =bin/query.sh= - A script to query for any and all services, not just VOMS, that have been published to the Discovery Service.

   1. Modify =etc/publish-voms-admin.properties= with the site-specific settings for the VOMS server.
   1. Copy =vomspublisher= to /etc/init.d and make the appropriate changes on your system to start/stop the service automatically.  RedHat and Fedora systems can use =chkconfig --add vomspublisher= followed by =chkconfig vomspublisher on= to set this up.
   1. Start the voms admin service publisher daemon using the /etc/init.d script.

---++ SRM/DRM

DRM includes support code for publishing the SRM service description to the Discovery Service.  To activate this feature, a site must add the following entries to their configuration file (dmr.rc or otherwise):

<verbatim>
wsg*ClarensURL=http://discover.gridservice.info/xmlrpc
wsg*ClarensVO=testVO
</verbatim>

Replace =testVO= with the name of the VO offering this DRM service.  Set the ClarensURL to the appropriate URL for the grid.  For example, the OSG production grid sites should use =https://osg-discovery.caltech.edu:8443/jclarens/xmlrpc=, while the OSG ITB grid sites should use =http://ultralight.caltech.edu:8080/jclarens/xmlrpc=

---++ jClarens

Any service deployed in the jClarens grid service container will automatically be published to the Discovery Service.  This includes the Discovery Service itself as well as some utility services included with jClarens.

---++ MonALISA

It is possible, though entirely not recommended, to publish directly to the Discovery Service using the ApMon client libraries provided by MonALISA.  This mechanism requires that you have detailed knowledge about how jClarens interacts with MonALISA, so it is not recommeded or even described here.

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.MichaelThomas - 30 Nov 2005

%STOPINCLUDE%



<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = MichaelThomas

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = Integration

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager|Documenter)
   * Local DOC_ROLE       = Documenter

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = HowTo
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %NO%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = 
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = 
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
############################################################################################################
-->

