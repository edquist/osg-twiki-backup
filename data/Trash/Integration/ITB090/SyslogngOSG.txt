%META:TOPICINFO{author="SuchandraThapa" date="1194546468" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

Information and background on the (optional) syslog-ng service
 
---++ Introduction
Syslog-ng provides log collection and distribution services for osg ce installations.  If it is enabled then you can use it to forward CE related logs to a centralized log collector to help with troubleshooting or debugging issues on your CE.  You can also use syslog-ng to centralize logging for your cluster to a single machine.  Syslog-ng allows admins to arbitrarily forward log messages to a collection of hosts as well as to filter log messages by matching on various criteria such as hostname or regular expressions on the log message.  Syslog-ng has been tested on the ITB testbed to provide centralized logging services as well as with logging DQ2 messages for US ATLAS systems.

---++ Installation
Syslog-ng is installed with the CE pacman package.  However, if you would like to install it separately you can install it using =pacman -get %CACHE%:Syslog-ng=.  This will download and install syslog-ng using the pacman package from the OSG hosted cache.  

----++ Configuration
If you would just like to set your CE to submit logs to the central collector, you can answer =y= when asked whether you would like to use syslog-ng when running configure-osg.sh.  

A full explanation of how to configure syslog-ng is out of the scope this documentation, however the concepts involved will be briefly described.  Syslog-ng splits it's logging configuration  into 4 different components: sources, destinations, filters, and log statements.  Sources are definitions that describe where and how log messages may be received and can include tcp ports, unix sockets, files, etc. Destinations define where messages can be sent and include tcp ports, unix sockets, files, and other destination types.  Filters define how messages can be differentiated and can include checks for source hostnames, message contents, date/time stamps, source file, etc.  Finally the log statement define how sources and destinations should be connected and what filtering if any should be done between the source and destination.

A single source can be connected to multiple destinations by using several log definitions.  Conversely a single destination can be connected to several sources by using using several log definitions.  Using these two methods, arbitrary fan ins and fan outs can be setup for messages.  This allows admins to send log messages to both a cluster specific log collector as well as to a centralized osg collector.  The logs sent to each collector can vary allowing the site specific collector to collect logs that may not be appropriate for the centralized osg collector (/var/log/messages, /var/log/secure, etc.).  

Once the configuration for syslog-ng is completed, it can be started using =$VDT_LOCATION/vdt/setup/configure_syslog_ng --server y= followed by a =vdt-control --on syslog-ng= .

---++ Known issues
   * Stunnel is provided but we don't currently configure it to provide ssl encrypted links

---++ More information
   * [[http://freshmeat.net/projects/syslog-ng/][Freshmeat syslog-ng project page]]
   * [[http://www.balabit.com/network-security/syslog-ng/][Balabit's syslog-ng page]]
   * [[http://www.balabit.com/dl/html/syslog-ng-admin-guide_en.html/index.html][Documentation for syslog-ng]]

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 23 Oct 2007 %BR%
%REVIEW%

