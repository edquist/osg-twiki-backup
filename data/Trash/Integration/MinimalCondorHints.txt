%META:TOPICINFO{author="StevenTimm" date="1172082259" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="SiteFabricBestPractices050"}%
-- Main.StevenTimm - 21 Feb 2007
---++Introduction
The goal of this document is to describe how to run the minimal Condor installation with
as few daemons as necessary and as secure as possible.

Personal Condor is installed by the VDT in three possible situations:
<ol>
<li> If you install the OSG Client package
<li> If you install the OSG Managed Fork package on top of the OSG CE and do not have an external Condor Installation defined by VDTSETUP_CONDOR_LOCATION
<li> If you install the OSG Globus-Condor-Setup package on top of the OSG CE and do not have an external Condor Installation defined by VDTSETUP_CONDOR_LOCATION.  (This is BAD--you'll wish you hadn't done this.  See CondorBatchSystemHints)
</ol>
In all three of these situations, by default the VDT condor configuration will configure your system 
to be a Personal Condor pool of one node, with daemons MASTER, STARTD, SCHEDD, COLLECTOR, and NEGOTIATOR.  Much more information is available in the [[http://www.cs.wisc.edu/condor/manuals/][Condor Manual]] but in general, the MASTER is the daemon that starts all the others, the STARTD lets you run jobs on your local node, the COLLECTOR and NEGOTIATOR are head-node like daemons that manage the condor pool, and the SCHEDD is the daemon that queues up jobs for submission, to your local node or elsewhere.

In situation 1 and 2, if you are not running a local condor batch system there is no need to be running 
a COLLECTOR, NEGOTIATOR, or STARTD.  You can change this by editing the file,
which will be (by default)  in $VDT_LOCATION/condor/local.<nodename>/condor_config.local.
Make the line DAEMON_LIST read
<pre>
DAEMON_LIST = MASTER, SCHEDD
</pre>
Then stop and restart condor.

You only need a MASTER and SCHEDD if you are submitting jobs to remote grid sites.  Also 
only need a MASTER and SCHEDD if you are just using condor to manage the ManagedFork 
job manager and nothing else.  You also only need a MASTER and SCHEDD to use the 
OSG Resource Selection service.

There is one other important setting for beginners in the condor configuration file, and this is
HOSTALLOW_READ and HOSTALLOW_WRITE.   Current versions of condor leave HOSTALLOW_WRITE 
unset and force you to edit the configuration file to set it to something.  Older versions of
condor set it to "*" which would allow any machine in the world to read and write your condor daemons.
The correct setting for this variable depends on your usage.

<ol>
<li> Submit node only, HOSTALLOW_READ and HOSTALLOW_WRITE can be set to be localhost only.
<li> ManagedFork only, HOSTALLOW_READ and HOSTALLOW_WRITE can be set to be localhost only
<li> Condor batch system--at minimum  HOSTALLOW_READ and HOSTALLOW_WRITE must include 
your head node and all the worker nodes in your condor pool.
</ol>
For the OSG Resource Selection Service it is necessary to have a wide-open HOSTALLOW_READ
and HOSTALLOW_WRITE.  It is expected that eventually this will change to use GSI authentication.

A commonly asked question is--how do I just install the Condor-G client--the answer is that you
can't. Condor-G is built into Condor and the only way to run it is to install all the condor binaries
either from the VDT or from the RPM or from the tarball.  But with the suggestions above 
you will only be running the daemons that are needed to run the client.

 
