%META:TOPICINFO{author="SuchandraThapa" date="1277226428" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebPreferences"}%
---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

---+++ Introduction
This page has the update and testing instructions for the osg 1.2.11 (osg-itb 1.1.23) update. 


---+++ Installation 
Admins can install from the new ITB cache or upgrade an ITB 1.1.22 installation.   If you have a previous installation earlier than ITB 1.1.22, you will need to reinstall the software due to a change in the cache location.  The new ITB cache location is =http://software-itb.grid.iu.edu/osg-1.2/=.  When you install the ITB software, you will need to use this url when specifying the cache, e.g. 
<pre class="screen">
pacman -get http://software-itb.grid.iu.edu/osg-1.2:ce
</pre>

Also note that when running =vdt-ca-manage=, you should specify =ITB= as the url, e.g. 
<pre class="screen">
vdt-ca-manage setupca --url itb --location &lt;local|root|PATH&gt;
</pre> 

---+++ Updating from previous ITB release 
%NOTE% This only applies to upgrades from ITB 1.1.21.

%NOTE% *There are changes to the way that !CEMon, Gratia, and resource names are configured for !CEs in this release, please see the [[#PostInstallConfiguration][post-installation configuration section]] before restarting your CE*

---++++ Preliminaries
Go to the directory where you installed your software (root directory of the Pacman installation, =VDT_LOCATION=) and source the setup script so that the following steps will work correctly.
<pre class="screen">
cd VDT_LOCATION
source setup.sh
</pre>

Make sure that your batch system binaries are in your PATH, especially if you are running SGE.

---++++ Stop VDT Services
Some packages (e.g. =client= or =wn-client=) may not be running any services, however, doing this step will not cause problems.  

<pre class="screen">
vdt-control --off
</pre>

---++++ Backup your software
<pre class="screen">
cp -a $VDT_LOCATION BACKUP_LOCATION
</pre>

---++++ Update the VDT updater script itself

Get the latest version of the vdt-updater script:
<pre class="screen">
pacman -update VDT-Updater
</pre>

Note: If you do not yet have the updater script (look for $VDT_LOCATION/vdt/update/vdt-updater), then fetch it with this command:
<pre class="screen">pacman -get %VDT_CACHE_URL%:VDT-Updater</pre>


---++++ Backup

Backup again since the vdt-updater script will request the location of your backup and verify that the backup is identical to the current contents of the install directory before updating your installation.
<pre class="screen">
cp -a $VDT_LOCATION BACKUP_LOCATION
</pre> 

---++++ Get VDT Updates
This will update VDT packages specifically.
<pre class="screen">
vdt/update/vdt-updater
</pre>

After updating, re-source the setup.sh file to load any changes in the environment:
<pre class="screen">
source setup.sh
</pre>

---++++ Get OSG Updates
The =osg-version= and =osg-config= packages must be updated on all OSG installations:
<pre class="screen">
pacman -update osg-version
cp $VDT_LOCATION/osg/etc/config.ini /tmp/config.ini-backup
pacman -update osg-config
cp /tmp/config.ini-backup $VDT_LOCATION/osg/etc/config.ini
</pre>


#PostInstallConfiguration
---++++  Post Install Configuration 
After you complete the updates of your packages, you will need to run the =vdt-post-install= script in order to complete any post-installation setups needed after your packages have been updated:

<pre class="screen">
vdt-post-install
</pre>


---++++ Restart VDT Services
This step can be omitted if you are not running any services.  If you are not certain, you can run it since services are disabled by default so the only services that will be started are ones that you have explicitly enabled.
<pre class="screen">
vdt-control --on
</pre>



---+++ Testing and Validation
All java components will need to be tested.  In particular, cemon (bdii/gip/rsv reporting), gratia reporting, and bestman/xrootd components will need testing.  The srm client tools, gums client software, pegasus, and condor will also need testing.  A full list of software that needs to be validated is [[SoftwareTeam.SEP12][available].

---++++ Components Changed
The only change in the software is an update from java 1.5 to java 1.6.  All java software has been changed to use java 1.6.   

---++++ Testing
Admins should try the steps outined at [[Integration.TestingGuidelines1211][the testing guidelines page]].  

---+++ Open bugs and workarounds

---+++ How to report a bug?
Bug reports for the installation and documentation should be filed with GOC at [[https://ticket.grid.iu.edu/itb/open]].  *Please don't use the vdt support center or any other support center as the receipient since that will cause a email loop*



-- Main.SuchandraThapa - 21 Jun 2010
