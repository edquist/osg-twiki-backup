%META:TOPICINFO{author="SuchandraThapa" date="1255471069" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
<div class="body">

<style type="text/css">
ul.vdt { font-style: italic; font-size:smaller; }
#blue-bg  { background-color: rgba(0,0,255,0.4); }
#red   { background-color: rgba(255,0,0,0.4); }
#green { background-color: rgba(0,255,0,0.4); }
#header { font-weight: bold; font-size; larger; }
</style>


<h2>Pacman caches</h2>
<table>
  <tr><th id="red" width="40%">VTB</th><th id="green" width="30%">ITB</th><th id="blue-bg" width="30%">OSG 1.2 Production</th></tr>
  <tr>
    <td id="red">
      <ul>

        <li>VDT 2.0.89 cache
        <li>Unstable - development cache for VDT.
        <li>No persistent sites will exist from this cache.
        <li>VTB testers will do a fresh install for each testing cycle.
        <li>No update testing done from this cache
      </ul>
    </td>
    <td id="green">
      <ul>
        <li>VDT 2.0.99 cache
        <li>Stable - treated similar to production
        <li>Persistent sites will exist using this cache.
        <li>Update testing will be done from this cache.
      </ul>

    </td>
    <td id="blue-bg">
      <ul>
        <li>VDT 2.0.0 cache
      </ul>
    </td>
  </tr>
</table>

<h2>Release process diagram</h2>

<p>See details below for more information on each step in this diagram.

<p><img src="%ATTACHURLPATH%/vdt-osg-release-process.jpg" alt="vdt-osg-release-process.jpg" width='1135' height='502' />    

<h2>Release process details</h2>

<p>A normal release cycle will have the following steps.  Time-sensitive security
   releases might be handled differently, with the possibility of skipping the
   VTB and/or ITB testing period.

<ul>
  <li class="vdt">Tasks in italics are VDT-internal tasks
</ul>

<ol class="loose">
  <li><p id="header">VTB testing
    <table>
      <tr><th id="red">Owner:</th><th id="red">Task:</th></tr>

      <tr><td id="red">VDT</td><td id="red">Announce pending release to VTB and the upcoming need for testing.</td></tr>
      <tr><td id="red">VTB coord.</td><td id="red">VTB coordinator prepares the VTB cache, including any changes to
          configure-osg that are necessary for the release.</td></tr>
      <tr><td id="red">VDT</td><td id="red">VDT prepares 2.0.89 cache<br>
        <ul class="vdt">
          <li>Merge all work from test branches to <em>vdt-2.0.0-dev</em>

          <li>Rebuild 2.0.89 cache
          <li>Run test suite on 2.0.89 cache for at least one night and handle any testing errors.
        </ul>
      </tr>
      <tr><td id="red">VDT & VTB coord.</td><td id="red">Confirm everything is ready for both VDT and VTB</td></tr>
      <tr><td id="red">VTB Coord.</td><td id="red">Do a simple installation to make sure nothing is obviously broken</td></tr>
      <tr><td id="red">VTB coord.</td><td id="red">Announce release to VTB mailing list, share the release notes and any special instructions.</td></tr>

      <tr><td id="red">VTB sites</td><td id="red">VTB testers make new installations of necessary packages.</td></tr>
      <tr><td id="red">VTB sites</td><td id="red">VTB testers provide feedback.</td></tr>
      <tr><td id="red">VDT and VTB coord</td><td id="red">Make necessary changes based on feedback from VTB.  Repeat process as necessary.</td></tr>
    </table>
  <li><p id="header">ITB testing
    <table>

      <tr><th id="green">Owner:</th><th id="green">Task:</th></tr>
      <tr><td id="green">VDT</td><td id="green">Prepare 2.0.99 cache
        <ul class="vdt">
          <li>Merge changes to <em>vdt-2.0.0-test</em> and compare branches.
          <li>Prepare the vdt-updater to work with the new update.
          <li>Rebuild the necessary packages + VDT-Updater
          <li>Start nightly testing the 2.0.99 cache while ITB is actively testing it
        </ul>

      </tr>
      <tr><td id="green">ITB coord.</td><td id="green">Update ITB cache with the latest OSG software</td></tr>
      <tr><td id="green">ITB coord.</td><td id="green">Do a simple installation to make sure nothing is obviously broken</td></tr>
      <tr><td id="green">ITB coord.</td><td id="green">Announce release to ITB, share the release notes and any special instructions</td></tr>
      <tr><td id="green">ITB sites</td><td id="green"><b>ITB sites make backup of their site</b> - this step is essential since this
          is our first line of update testing, and it's possible things will break.</td></tr>

      <tr><td id="green">ITB sites</td><td id="green">ITB sites use the vdt-updater script to update their sites, and run requested tests along
          with the usual set of core tests.</td></tr>
      <tr><td id="green">VDT & ITB coord.</td><td id="green">Make any necessary changes based on feedback from ITB, repeat process as necessary</td></tr>
    </table>
  <li><p id="header">Production release
    <table>
      <tr><th id="blue-bg">Owner:</th><th id="blue-bg">Task:</th></tr>

      <tr><td id="blue-bg">ITB coord.</td><td id="blue-bg">Prepare OSG release</td></tr>
      <tr><td id="blue-bg">VDT</td><td id="blue-bg">Update 2.0.0 cache
        <ul class="vdt">
          <li>Merge changes to <em>vdt-2.0.0-prod</em> and compare branches.  They should be identical.
          <li>Stop nightly testing of 2.0.99 cache
          <li>Update 2.0.0 cache
        </ul></td>
      </tr>

      <tr><td id="blue-bg">GOC</td><td id="blue-bg">OSG updates production OSG cache</td></tr>
      <tr><td id="blue-bg">VDT</td><td id="blue-bg">Announcement release to vdt-discuss and GOC</td></tr>
      <tr><td id="blue-bg">ITB coord.</td><td id="blue-bg">Update twiki with release notes</td></tr>
      <tr><td id="blue-bg">GOC</td><td id="blue-bg">Send release notes to OSG sites</td></tr>
    </table>

</ol>


</div>



-- Main.SuchandraThapa - 13 Oct 2009

%META:FILEATTACHMENT{name="vdt-osg-release-process.jpg" attachment="vdt-osg-release-process.jpg" attr="" comment="release process diagram" date="1255469391" path="vdt-osg-release-process.jpg" size="126878" stream="vdt-osg-release-process.jpg" tmpFilename="/usr/tmp/CGItemp15279" user="SuchandraThapa" version="1"}%
