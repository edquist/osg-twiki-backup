%META:TOPICINFO{author="JeffPorter" date="1225928202" format="1.1" reprev="1.28" version="1.28"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction
The Validation Testbed (VTB) is an small-scale, self-contained, service-level infrastructure for pre-Integration validation of the OSG software stack, as described in the OSG IntegrationProject plan.

---++ Software
   * The VTB software cache is located on a webserver located here: http://osg-vtb.uchicago.edu/.
   * Use pacman -get http://osg-vtb.uchicago.edu/vtb:ce to install the latest ce version from the cache
   * A site validation table can be found at http://osg-vtb.uchicago.edu/result-page.html
   * A subversion repository for the pacman files can be found at http://vtb-svn.uchicago.edu/svn/cache
   * See VTBSubversionTips to get a quick tutorial on using subversion and how it works
   * See SimpleCEandClientValidationModule for tutorial on running tests against a CE from an OSG Client 

---++ Sites and Services
   * UChicago
   * LIGO-Caltech
   * LBNL/NERSC (VtbSitesLbl)
   * Fermilab
   * GOC

---++ Release Validations
   * VTBReleaseValidationVDT190

---++ Validation Test: D-Cache (current)

   * Results of installation and testing of d-cache on VTB sites is documented on DCacheVTB page 


---++ Validation Test: Basic CE functionality
Tests:
   * run site_verify, all tests except for the VDS tests should pass
<pre class="screen">
[sthapa@uct3-edge5 ~]$ /opt/vtb/verify/site_verify.pl 
===============================================================================
Info: Site verification initiated at Fri Aug  3 19:46:02 2007 GMT.
===============================================================================
-------------------------------------------------------------------------------
-------- Begin uct3-edge5.uchicago.edu at Fri Aug  3 19:46:02 2007 GMT --------
-------------------------------------------------------------------------------
Checking prerequisites needed for testing: PASS
Checking for a valid proxy for sthapa@uct3-edge5.uchicago.edu: PASS
Checking if remote host is reachable: PASS
Checking for a running gatekeeper: YES; port 2119
Checking authentication: PASS
Checking 'Hello, World' application: PASS
Checking remote host uptime: PASS
   14:46:04 up 2 days,  2:07,  2 users,  load average: 1.70, 2.03, 2.06
Checking remote Internet network services list: PASS
Checking remote Internet servers database configuration: PASS
Checking for GLOBUS_LOCATION: /opt/vtb-1.7.1/globus
Checking expiration date of remote host certificate: Apr 25 21:04:48 2008 GMT
Checking for gatekeeper configuration file: YES
  /opt/vtb-1.7.1/globus/etc/globus-gatekeeper.conf
Checking users in grid-mapfile, if none must be using Prima: ivdgl,mfeller,sthapa
Checking for remote globus-sh-tools-vars.sh: YES
Checking configured grid services: PASS
  jobmanager,jobmanager-condor,jobmanager-fork,jobmanager-managedfork
Checking for OSG osg-attributes.conf: YES
Checking scheduler types associated with remote jobmanagers: PASS
  jobmanager is of type fork
  jobmanager-condor is of type condor
  jobmanager-fork is of type fork
  jobmanager-managedfork is of type managedfork
Checking for paths to binaries of remote schedulers: PASS
  Path to condor binaries is /opt/condor/bin
  Path to managedfork binaries is $env/gratia/var/data
Checking remote scheduler status: PASS
  condor : 7 jobs running, 0 jobs idle/pending
Checking if Globus is deployed from the VDT: YES; version 1.7.1a
Checking for OSG version: YES; version VTB-1.7.1
Checking for OSG grid3-user-vo-map.txt: YES
Checking for OSG site name: UCTier3_Condor
Checking for OSG $GRID3 definition: /opt/vtb-1.7.1
Checking for OSG $OSG_GRID definition: /opt/wn
Checking for OSG $APP definition: /tmp
Checking for OSG $DATA definition: /tmp
Checking for OSG $TMP definition: /tmp
Checking for OSG $WNTMP definition: /tmp
Checking for OSG $OSG_GRID existence: PASS
Checking for OSG $APP existence: PASS
Checking for OSG $DATA existence: PASS
Checking for OSG $TMP existence: PASS
Checking for OSG $APP writability: PASS
Checking for OSG $DATA writability: PASS
Checking for OSG $TMP writability: PASS
Checking for OSG $APP available space: 8.485 GB
Checking for OSG $DATA available space: 8.485 GB
Checking for OSG $TMP available space: 8.485 GB
Checking for OSG additional site-specific variable definitions: YES
  MountPoints
    SAMPLE_LOCATION default /SAMPLE-path
    SAMPLE_SCRATCH devel /SAMPLE-path
Checking for OSG execution jobmanager(s): uct3-edge5.uchicago.edu/jobmanager-condor
Checking for OSG utility jobmanager(s): uct3-edge5.uchicago.edu/jobmanager
Checking for OSG sponsoring VO: OSG
Checking for OSG policy expression: NONE
Checking for OSG setup.sh: YES
Checking for OSG $Monalisa_HOME definition: /opt/vtb-1.7.1/MonaLisa
Checking for MonALISA configuration: PASS
  key ml_env vars:
    FARM_NAME = UCTier3_Condor
    FARM_HOME = /opt/vtb-1.7.1/MonaLisa/Service/VDTFarm
    FARM_CONF_FILE = /opt/vtb-1.7.1/MonaLisa/Service/VDTFarm/vdtFarm.conf
    SHOULD_UPDATE = false
    URL_LIST_UPDATE = http://monalisa.cacr.caltech.edu/FARM_ML,http://monalisa.cern.ch/MONALISA/FARM_ML
  key ml_properties vars:
    lia.Monitor.group = OSG-ITB
    lia.Monitor.useIPaddress = undef
    MonaLisa.ContactEmail = sthapa@ci.uchicago.edu
Checking for a running MonALISA: PASS
  MonALISA is ALIVE (pid 3884)
  MonALISA_Version = 1.6.16-200704301348
  MonALISA_VDate = 2007-04-30
  VoModulesDir = VoModules-v0.38
  tcpServer_Port = 9002
  storeType = epgsqldb
Checking for a running GANGLIA gmond daemon: PASS (pid 3132 ...)
  /usr/sbin/gmond
  name = "part_max_used"
  owner = "unspecified"
  url = "unspecified"
Checking for a running GANGLIA gmetad daemon: NO
  gmetad does not appear to be running
Checking for a running gsiftp server: YES; port 2811
Checking gsiftp (local client, local host -> remote host): PASS
Checking gsiftp (local client, remote host -> local host): PASS
Checking that no differences exist between gsiftp'd files: PASS
Checking for VDS existence: FAIL
Checking for VDS kickstart existence: UNTESTED
Checking for VDS k.2 (OPTIONAL) existence: UNTESTED
Checking for VDS dirmanager existence: UNTESTED
Checking for VDS invoke existence: UNTESTED
Checking for VDS transfer existence: UNTESTED
Checking for VDS T2 (OPTIONAL) existence: UNTESTED
Checking for VDS seqexec existence: UNTESTED
Checking for VDS mpiexec (OPTIONAL) existence: UNTESTED
-------------------------------------------------------------------------------
--------- End uct3-edge5.uchicago.edu at Fri Aug  3 19:46:41 2007 GMT ---------
-------------------------------------------------------------------------------
===============================================================================
Info: Site verification completed at Fri Aug  3 19:46:41 2007 GMT.
</pre>
   * globusurl-copy: <tt>globus-url-copy <noautolink>file:///path/to/test/file gsiftp://host:2811/tmp/</noautolink></tt> and <tt>globus-url-copy <noautolink>gsiftp://host:2811/tmp/</noautolink> <noautolink>file:///path/to/test/file-new</noautolink></tt>
   * globus-job-run: =globus-job-run host /usr/bin/id=

---++ Validation Test: CEMon, Res Sel
   * run the following command and check to see if your Site / Gatekeeper are listed there:<br /><tt>condor_status -pool osg-ress-4.fnal.gov  -format '%s\t' !GlueSiteName -format '%s\n' !GlueCEInfoContactString | sort | uniq</tt>

---++ Validation Test: Gratia

---+++ Gratia Probe

   * Ensure the batch system for which you have installed a probe has completed jobs and at least 10 minutes has elapsed before checking with <noautolink><tt>http://gratia.opensciencegrid.org:8881/gratia-administration/monitor-status.html?sitename=my-site</tt></noautolink>.

   * If this is not successful, download [[https://twiki.grid.iu.edu/twiki/bin/viewfile/Accounting/TroubleShootingInstructions?rev=5;filename=gratia-site-diag][<tt>gratia-site-diag</tt>]] and run it to diagnose possible problems. Report same immediately.

---+++ Gratia Collector

   * Go to <noautolink><tt>http://mygratiahost.example.com/gratia-reporting/</tt> and <tt>http://mygratiahost.example.com/gratia-administration/</tt> and check <tt>$VDT_LOCATION/tomcat/v55/logs/gratia-0.log</tt> and <tt>$VDT_LOCATION/tomcat/v55/logs/catalina.out</tt></noautolink>. An "empty data set" exception and/or blank report page is OK; everything else is not. Configure a probe to send to the collector and check for receipt.


---++ Validation Test: WS Gram
Tests:
   * globusrun-ws: =globusrun-ws -submit -F host:9443 -S -s -c /bin/hostname=
   * Create condor submit file using grid universe and gt4 host and submit a test job
 
---++ Validation Test: Squid
Tests: 
   * set =HTTP_PROXY= to point to host running squid instance, use wget to download a file and check squid log files to verify that the file was cached, alternatively rerun the wget and see if the download speed improves

---++ Prior validation tests
   * ValidationTests050 - for the ITB 0.5 release series

%META:FILEATTACHMENT{name="gt-prews-tests.sh" attr="" autoattached="1" comment="GRAM2 test script" date="1169079145" path="gt-prews-tests.sh" size="1368" user="Main.RobGardner" version="1"}%
%META:FILEATTACHMENT{name="gt-ws-tests.pl.txt" attr="" autoattached="1" comment="GRAM4 test script" date="1169079173" path="gt-ws-tests.pl.txt" size="2104" user="Main.RobGardner" version="1"}%
