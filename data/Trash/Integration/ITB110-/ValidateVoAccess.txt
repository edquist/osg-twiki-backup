%META:TOPICINFO{author="JohnWeigand" date="1188574753" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="SiteValidationTable"}%
%LINKCSS%

<!-- This is the default OSG Integration template. Please modify it in the sections indicated to create your topic! --> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!! Site Validation of VO Access
%TOC%

%STARTINCLUDE%
---+!! Site Validation of VO Access

%EDITTHIS%

---++ Site Validation of VO Access
The purpose of this section is to provide the information necessary to determine if you are configured to support all VOs and users that you intend to support.  

For the ITB, your CE node should be supporting all OSG VOs.  All OSG VO members, should be capable of running a job on your CE node.

%NOTE% This is __not__ an automated or scripted process.

These are the factors that have to be evaluated to verify that all OSG VO members can access your site:
   1 You need to verify that all UNIX accounts that can  be assigned using your authorization mode have been created and are accessible by that account.
   1 You need to verify that all OSG VOs are supported.
   1 You need to verify that all the local storage areas defined for your CE node are accessible by the VO member's UNIX account.

The following sections will describe in a little more detail how to go about this verification.

There are several files in the _$VDT_LOCATION/monitoring_ directory that can aid you in this process. It is suggested you read  the  [[OsgSupportedVos][Supported VOs and Undefined UNIX Accounts document.]] to familiarize yourself with these files. 

When you are satisfied that you have met the 3 criteria above, you can mark the verification step as complete.


<!--   UNIX ACCOUNTS -->
---+++ Verifying that all UNIX accounts are created and accessible
The _$VDT_LOCATION/monitoring/osg-undefined-accounts.txt_ file shows the any UNIX accounts that do not exist.  Refer to the [[CEPreInstallationChecklist#Creation_and_setup_of_local_user][Supported VOs and Undefined UNIX Accounts document]]  for details on how this is done.  

The creation of UNIX accounts and user home areas was one of the OSG CE pre-installation items that should have been completed as described in the [[CEPreInstallationChecklist#Creation_and_setup_of_local_user][CE Pre-installation Checklist document]].

Since this file is created by either the  _edg-mkgridmap_ or _gums-host-cron_ scripts (depending on your authorization mode), be sure you have run the appropriate one before looking here.

__There should be NO UNIX accounts in this file.__

If this file is empty, then you are assured that all OSG VO members that are authorized and assigned a UNIX account will be able to at least submit a job to your batch queue manager.

__Next__, you need to verify you need to verify that the _$HOME_ directories for __all__ are read/write accessible by that user. They should have 755


<!--   VO SUPPORT -->
---+++ Verifying that all OSG VOs are supported
As a participant in the ITB, you are required to support all OSG VOs.

The _$VDT_LOCATION/monitoring/osg-supported vo-list.txt_ file shows the list of OSG VOs that your site will allow access to.  Refer to the [[OsgSupportedVos][Supported VOs and Undefined UNIX Accounts document]]  for details on how this is done.   

Since this file is created by either the  _edg-mkgridmap_ or _gums-host-cron_ scripts (depending on your authorization mode), be sure you have run the appropriate one before looking here.

You can download a copy of this [[%ATTACHURL%/osg-supported-vo-list.txt][osg-supported-vo-list.txt]] file and compare it to yours to verify that all VOs are supported.  As of 8/31/2007, this contains the complete list of OSG VOs.

If the VO names vary (or are missing), they you may not have properly configured your authorization configuration files:
   * for those in Grid3 mode: this is the _$VDT_LOCATION/edg/etc/edg-mkgridmap.conf_ file on your CE node.
   * for those in Compatibility or Full Privilege mode: this is the _$VDT_LOCATION/vdt-app-data/gums/config/gums.config_ file on your GUMS server.
%NOTE%: If you are unfamiliar with the authorization mode terms used above, see the [[OsgCEAuthorization][OSG CE Authorization document]] to get a better understanding.

If the _$VDT_LOCATION/monitoring/osg-supported vo-list.txt_ file on your CE node matches this [[%ATTACHURL%/osg-supported-vo-list.txt][osg-supported-vo-list.txt]] file, you are assured that at least one member of every OSG VO will be able to run a job on your CE node.

%IMPORTANT% If you make any changes to the _edg-mkgridmap.conf_ or _gums.config_ configuration files, you need to do the following to effect the changes:
   1 edg-mkgridmap.conf:  
      * re-run the _edg-mkgridmap_ script
   1 gums.config: 
      * have your GUMS administrator perform the _Update VO members_ action on the GUMS server GUI.
      * then rerun the _gums-host-cron_ script<p>
When this is complete, you must re-verify the _osg-undefined-accounts.txt_ and _osg-supported-vo-list.txt_ files.


<!-- DIRECTORY  PERMISSIONS -->
---+++ Verifying OSG Local Storage Access
The other factor that will affect a VO member's ability to run successfully on your site is the accessibility to the OSG defined local storage.

You answered several questions related to these storage areas when you ran the _configure_osg.sh_ script during the installation process as described in the [[ConfigureOSGAttributes][Configuring OSG Attributes document]] of the CE Installation Guide.

You should review the [[LocalStorageRequirements][Local Storage Requirements document]] again to verify that you are configured correctly with specific emphasis on the directory permissions for these areas.


%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.JohnWeigand - 16 Aug 2007%BR%
-- Main.JohnWeigand - 31 Aug 2007 - updated in attempt to further clarify the validation.%BR%




%META:FILEATTACHMENT{name="osg-supported-vo-list.txt" attachment="osg-supported-vo-list.txt" attr="" comment="osg-supported-vo-list.txt" date="1188567181" path="osg-supported-vo-list.txt" size="231" stream="osg-supported-vo-list.txt" user="Main.JohnWeigand" version="1"}%
