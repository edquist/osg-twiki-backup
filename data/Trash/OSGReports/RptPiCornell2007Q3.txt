%META:TOPICINFO{author="KyleGross" date="1497450632" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="CreateNewReport"}%
<!-- Complete the template. You can either use TWiki style, copy in plain text, or put in HTML. -->
<!-- IF COPYING IN HTML: Please only include the sections between your BODY tags. -->

---+!! 2007Q3 PI Quarterly Report 

%STARTINCLUDE%

---++  <nop> Cornell University
%EDITTHIS%
<!-- EDIT BELOW THIS LINE ONLY! -->

Cornell 3rd quarter &#8216;07

Since most of the milestones in the original SOW were satisfied in advance by reformulation of the billing data capture project as a GRATIA probe, Greg Sharp at Cornell has been addressing a number of issues outside the SOW in consultation with Ruth Pordes, Frank Würthwein and Ted Hesselroth.

1) Gratia: Modified the Gratia dCache probe to use the local Gratia server, uncovering and reporting a few minor bugs in the Gratia Probe and in the Gratia server install scripts (in otherwise well-designed code!). Tested a new version of Gratia.py. This introduces a handshake between the probe and the gratia server so that the server can tell the difference between "the probe has nothing to report" and "the probe isn't running". The new code seems to work, and resolves the reconnect problem in the previous release. If the handshake finds its connection is gone, it attempts to reconnect. So by the time the dCache probe wants to send data, the connection has already been reestablished.

2) Sharp has been establishing an OSG VDT on a test farm at Cornell using Sun Grid Engine as the globus job manager.  Continued to debug the installation scripts with the CDT and finally established a working SE.  Found a security issue in that the postgres database account for dCache metadata has an obvious password which is stored in at least 5-6 config files.  When a new local server became available, Sharp tried to install an initial dCache release from the vdt-dcache 1.1.9 release, but it didn't work. He tried the 1.2.0 version when it came out, and it didn't work. Debugged the installation scripts and gave suggested fixes to Neha Sharma. The problem is that the changes to the install scripts caused Postgres to be installed with full security enabled, instead of all security disabled. Established, after considerable effort, that dCache can't run unless ALL Postgres database security is turned off. (He tried various levels of restriction, but something was always broken if there was any access restriction.) So right now, anyone who knows about dCache can connect to any host with a dCache Postgres database and drop all the tables, or tweak the PNFS directory permissions.  As a result, Hesselroth reverted to releasing vdt-dcache 1.1.8, since that did install properly and slated security issues for future improvements.

3) Preparations for adding garbage collection to the SRM v2.2 space reservation system.  Sharp studied the dCache code, especially the SRM code, reporting a few bad cut and paste errors along the way. Parsing the code slow since the comments in the SRM code are frequently wrong (copied from some other function), and distinguishing between SRMv1 and SRMv2 code is difficult.  With help from Timur in resolving existing code, Sharp wrote two extra administration functions in the dCache space reservation manager that provided the core functionality required for the garbage collector, which appear to work. Sharp modified the dCache Space Reservation manager to support features needed for garbage collection. The current plan is to build python tools that connect to the dCache admin server and let selected administrators play with them to get some idea of what the garbage collection policies should look like. Later those policies can be automated within the Space Reservation Manager.
%STOPINCLUDE%



%META:TOPICMOVED{by="ForrestChristian" date="1173993132" from="Sandbox.WebTopicTemplateTesting" to="OSGReports.TemplateForReports"}%
