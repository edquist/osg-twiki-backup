%META:TOPICINFO{author="PoHsiangChiu" date="1190837147" format="1.1" reprev="1.8" version="1.8"}%
%META:TOPICPARENT{name="OSGIndividualEffortReports"}%
---+!! Effort reports from Barnett Chiu

%TOC%

<!-- * Set NAVY = <font color="#6666CC"> -->
---++ %NAVY%Period: November 2006%ENDCOLOR% <br>

---+++ Task Description
   * Visited Condor research team for the first time and studied and investigated how some of the Condor internal works and 
      how Condor system can be applied to address scalablity issues faced by current Pilot scheme(s). 
   * Tested Condor-G, Condor glidein mechanims within ATLAS sites. 

---+++ Notes

---++++ General Tasks 
   * Investigated and test various Condor daemons and Condor system as a whole and study how they can integrate with    
      Panda system employed by ATLAS. 

---++++ Supportive Study
   * More familarity with Python and Linux in generral 


---++ %NAVY%Period: December 2006%ENDCOLOR% <br>

---+++ Documents 

   1. The initial _PilotFactory_ proposal is located    
       [[http://www.usatlas.bnl.gov/twiki/bin/view/AtlasSoftware/PilotFactoryPlan][here]].
   1. Descriptions on _schedd-based glidein_ is [[http://www.usatlas.bnl.gov/twiki/bin/view/AtlasSoftware/ScheddGlidein][here]].   
   
   Note that these pages above are subject to frequent updates.  

---+++ Task Description

   * Proposal for _PilotFactory_ implementation. 
   * Proposal for _schedd-based_ glidein targeted to increase Pilot submission rate.
   * Proposal for a new Pilot scheme, combining current Pilot with Condor     
     [[http://www.cs.wisc.edu/condor/manual/v6.8/3_1Introduction.html][startd]]; the new Pilot scheme is targeted for 
     increasing Pilot execution. 
   * OSG Work Load Management meeting at UTA. For more information, please visit [[http://www.uta.edu/physics/meetings/hep/osg/12072006/index.html][OSG WMS Workshop]]

---+++ Notes

---++++ Supportive Study
   * More familiarity with Perl, shell scripts, XML, web Technologies, and Linux in general. 

---++ %NAVY%Period: January 2007%ENDCOLOR% <br>

---+++ Task Description 

   * Implemented and tested _schedd-based glidein_ mechanism within ATLAS sites. 
      * Sample [[http://www.cs.wisc.edu/~pleiades/][schedd-related binaries]] are available on the server at University of 
         Wisconsin at Madison; note that these binaries are currently for temporary use and therefore are subject to updates. 
   * Configured _glidein_ tarball server for the use within ATLAS sites. 
   

---+++ Notes



---++ %NAVY%Period: Feburary 2007%ENDCOLOR% <br>

   * Modified schedd-based glidein code to allow for the user to customize the glideins. 
   * Developed tools (programs in shell scripts) for general testing and debugging on glideins. 

---+++ Notes

---++++ Supportive Study

   * Condor schedd-related configurations, startd policies, match-making algorithms and other features.  
   * Globus Toolkit

---++ %NAVY%Period: March 2007%ENDCOLOR% <br>

   * OSG Work Load Management meeting at UCSD. Please visit: [[http://twiki.grid.iu.edu/twiki/bin/view/VO/OSGWorkloadManagementUCSD20070308][OSG WMS Meeting Page]] 
   * Modified scheduler glidein code to support multiple schedulers with single glidein request
   * Started working on integration of [[http://svn.tjweb.org/TestPilot][TestPilot]] module and schedd-glidein. [note]: !TestPilot is a program for pilot submissions, scheduling, monitoring and so on. 
   * Started reading and testing [[http://home.fnal.gov/~sfiligoi/glideinWMS/][glideinWMS]] codes. 

---+++ Notes

---++++ Supportive Study

   * System programming in Python 
   * Condor startd policy and security features. 


---++ %NAVY%Period: April 2007%ENDCOLOR% <br>

   * Condor scheduler glidein testing and updates. 
   * Applied AutoPilot (pilot submission and monitoring modules) to scheduler glidein
   * Tested on administrative issues of Condor system, especially those related to feasibility of Condor scheduler glidein scheme. 
   * Worked on programs that facilitate Condor job submissions. 

---++ %NAVY%Period: May 2007%ENDCOLOR% <br>

   * Start implementing PilotFactory by combining Condor scheduler glidein with autopilot; prototype done.

---+++ Notes  
   
   * Generic PilotFactory consists of a general program launcher (logic based on condor_glidein command in Condor) and 
      several modules in Autopilot responsible for submissions.  

---++++ Supportive Study 

   * System programming in Python

---++ %NAVY%Period: June 2007%ENDCOLOR% <br>

   * Tested and enhanced !PilotFactory prototype 
   * Tested Condor-C pilot job submissions with scheduler glidein. 

---+++ Notes

   1. That a script works in shell environment does not guarantee the same script will work perfectly well in a Condor scheduler. Condor's scheduler works directly with OS's kernel, which is less lenient on script's format. In other words, if a job is submitted via Condor-C and remotely executed in Condor's Scheduler Universe, the script syntax and format needs to conform to what the kernel on the remote machine would expect. For example, *#!/bin/sh* must be located on the first line of the script being submitted as a Condor-C job; otherwise, user will only see the job being put to idle state indefinitely without further reasons given by Condor. 

---++ %NAVY%Period: July 2007%ENDCOLOR% <br>
  
   * Tested and enhance [[http://www.usatlas.bnl.gov/twiki/bin/view/AtlasSoftware/PilotFactoryPlan][PilotFactory]] modules. 
   * Document and rewrite portions of the !AutoPilot codes to facilitate testing and maintenance. 
   * Tested Condor-C with two major test cases: 
      i.   Submit scheduler and target scheduler are on the same FS. 
      i.   Submit scheduler and target scheduler are not on the same FS 

   
---++ %NAVY%Period: August 2007%ENDCOLOR% <br>
  
   * Modified schedd-based gldiein code to avoid creations of unlimited job directories on gatekeeper (see note 1). 
   * Set up a cron job with a program that submits test Panda jobs to be picked up by pilots submitted from !PilotFactory.  
   * Modified !PilotFactory codes for a better user interface.  
   * Updated documentation on [[http://www.usatlas.bnl.gov/twiki/bin/view/AtlasSoftware/ScheddGlidein][scheduler glidein]]. 

---+++ Notes

   1. In older version of Condor, when schedd fails to run a job (as a result of errors in the executable) in local universe, it will create another directory and retry it again. Recurring of this process would create indefinite amount of unnecessary directories. This problem has been resolved in v6.9.  

---++ %NAVY%Period: September 2007%ENDCOLOR% <br>
   
   * Tested pilot submissions with [[http://home.fnal.gov/~sfiligoi/glideinWMS/][glideinWMS]], a structured startd-based glidein submission software developing in Fermi Lab.
   * Tested Condor-PBS job submission interface (i.e. Condor's GAHP wrapper on PBS) in order for scheduler glideins to submit jobs to nodes managed by PBS. 
   
   * More ... 

-- Main.PoHsiangChiu - 28 Jan 2007

