%META:TOPICINFO{author="GregorySharp" date="1169559942" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="GregSharp"}%
*dCache release*: 1.7

*Symptom*:

All FTP read requests record "&lt;undefined&gt;" in the initiator field of the dCache billinginfo database.

*Diagnosis*:

The error is in =modules/dCache/diskCacheV111/doors/AbstractFTPDoorV1.java=.<br>
The =setInitiator()= method of the billing information message is made only in the private method =askForFile()=. This is called by =ac_stor()= but not by =ac_retr()= (which implements the FTP retrieve/get command).

*Proposed Resolution*:

The method =ac_retr()= must call the =setInitiator()= method of the billing record at an appropriate place.


-- Main.GregorySharp - 23 Jan 2007
