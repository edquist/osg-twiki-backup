%META:TOPICINFO{author="NehaSharma" date="1279653341" format="1.1" version="1.9"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%DOC_STATUS_TABLE%
%TOC{depth="2"}%

---++ Preparation
SRM Fermi Clients are packaged in to VDT and should be available on any node that has the VDT CE or WN software installed.
To run the clients, you need to 
   * login to proper node
   * source [VDT-INSTALL]/setup.sh
   * generate your voms credentials
   * make sure you have clients in your [PATH] by running example command such as
<pre class="screen">
which srmcp
</pre>

---++ Execution

---++++ dccp - Perform data transfers to/from SE
*Syntax*
<pre class="screen">
dccp [options] source-srm-url destination-srm-url
options can be listed using: 
dccp --help</pre>
*Example* <br></br>
Copy a file from local filesystem to remote storage location
<pre class="screen">dccp /home/s1/neha/dcache-test/test-file gsidcap://fapl035.fnal.gov:22128/pnfs/fnal.gov/data/osg/dcache-test/dccp-test </pre>
Copy a file from remote storage location to local filesystem
<pre class="screen">dccp gsidcap://fapl035.fnal.gov:22128/pnfs/fnal.gov/data/osg/dcache-test/dccp-test /home/s1/neha/dcache-test/dccp-test </pre>

---++++srmping - Ping the SE to see if it is accepting client requests
*Syntax*
<pre class="screen">
srmping [options] -debug=true srm-url
options can be listed using: 
srmping --help</pre>
*Example* <br></br>
Ping a SE
<pre class="screen">srmping -debug=true srm://gwdca04.fnal.gov:8443/srm/managerv2</pre>

---++++ srmcp - Perform data transfers to/from/between SE
*Syntax*
<pre class="screen">
srmcp [options] source-srm-url destination-srm-url
options can be listed using:
srmcp --help</pre>
*Example* <br></br>
Copy a file from local filesystem to remote storage location using srm protocol
<pre class="screen">srmcp -srm_protocol_version=2 file:////home/neha/test1 srm://fapl033.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/neha/test1</pre>
Copy a file from local filesystem to remote storage location using gsiftp protocol
<pre class="screen">srmcp file:////home/neha/test1 gsiftp://fapl035.fnal.gov:2811/test2</pre>
Copy a file from remote storage location to local filesystem using srm protocol
<pre class="screen">srmcp -srm_protocol_version=2 srm://fapl033.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/neha/test1 file:////home/neha/test3</pre>
Copy a file from local filesystem to remote storage location using gsiftp protocol
<pre class="screen">srmcp gsiftp://fapl035.fnal.gov:2811/test1 file:////home/neha/test4</pre>
Copy file using the space token<br></br>
Note: This command should be run after you have run the srm-reserve-space command and obtained a space token.
<pre class="screen">srmcp -srm_protocol_version=2 -space_token=??? -retention_policy=REPLICA -access_latency=ONLINE file:////home/s1/neha/dcache-test/test-file srm://fapl033.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/public/srmcp-space-token</pre>

---++++ srmls - List contents of a directory 
*Syntax*
<pre class="screen">
srmls [options] srm-url
options can be listed using: 
srmls --help</pre>
*Example* <br></br>
List the contents of a directory
<pre class="screen">srmls -2 srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/</pre>

---++++ srmmv - Move directory from one location to another
*Syntax*
<pre class="screen">
srmmv [options] source-srm-url destination-srm-url
options can be listed using:
srmmv --help</pre>
*Example* <br></br>
Move the directory from one location to another
<pre class="screen">srmmv -2 srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/old srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/new/old</pre>

---++++ srmrm - Remove an existing file
*Syntax*
<pre class="screen">
srmrm [options] srm-url 
options can be listed using:
srmrm --help</pre>
*Example* <br></br>
Remove an existing file
<pre class="screen">srmrm -2 srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/testfile</pre>

---++++ srmmkdir - Create a new directory 
*Syntax*
<pre class="screen">
srmmkdir [options] srm-url
options can be listed using:
srmmkdir --help</pre>
*Example* <br></br>
Create a new directory
<pre class="screen">srmmkdir -2 srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/newdir</pre>

---++++ srmrmdir - Delete an existing directory 
*Syntax*
srmrmdir [options] srm-url
options can be listed using:
srmrmdir --help</pre>
*Example* <br></br>
Delete an existing directory
<pre class="screen">srmrmdir -2 srm://gwdca04.fnal.gov:8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/newdir</pre>

---++++ srm-reserve-space - Reserve space in advance for the upcoming requests

Note: This function will only work if Space Reservation is enabled, configured correctly and your VO is authorized to reserve space.<br></br>
*Syntax*
<pre class="screen">srm-reserve-space [options] srm-url
options can be listed using:
srm-reserve-space --help</pre>
*Example* <br></br>
Reserve space
<pre class="screen">srm-reserve-space -2 --retention_policy=REPLICA --access_latency=ONLINE -lifetime=7776000 -desired_size=500000000000 -guaranteed_size=500000000000 -space_desc=public-token srm://gwdca04.fnal.gov:8443</pre>

---++++ srm-release-space - Release an occupied space

Note: This function will only work if you previously reserved space using srm-reserve-space command.<br></br>
*Syntax*
<pre class="screen">srm-release-space [options] srm-url
options can be listed using: 
srm-release-space --help</pre>
*Example* <br></br>
Release space
<pre class="screen">srm-release-space -space_token=168041 srm://gwdca04.fnal.gov:8443</pre>
where "168041" is the space token received upon successful execution of srm-reserve-space command(mentioned in the example above)

Note: After this command is successful, try to copy file in to the reserved area using same space token (using srmcp ofcourse). This time the transfer should fail.

%STOPINCLUDE%

---++ *Comments*
| I have updated/fixed this document and its ready for review | Main.NehaSharma | 20 July 2010 - 10:13|
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = NehaSharma

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = Storage

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = EndUser

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = HowTo
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = TanyaLevshina
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %NO%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         =  TedHesselroth
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %NO%
############################################################################################################
-->
