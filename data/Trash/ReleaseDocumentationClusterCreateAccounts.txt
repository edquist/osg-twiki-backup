%META:TOPICINFO{author="RobGardner" date="1256662746" format="1.1" version="1.6"}%
%META:TOPICPARENT{name="GridColombiaWorkshop2009"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction
Here we describe creation of the needed accounts for the tutorial.   Note what we are describing here is the simplest method to setup accounts across a test cluster using password files.  Accounts on clusters are usually managed with a service such as NIS or LDAP.

---++ Controlling password lookups
The =/etc/nsswitch.conf= file controls both host lookups and password lookups.
   * Here is a snippet for options that will work for this tutorial (note simplification):<pre>
#passwd: db files ldap nis
passwd:     files
shadow:     files
group:      files

#hosts:     db files nisplus nis dns
hosts:      files dns</pre>

---++ Accounts creation
Since all hosts in the cluster share the user home directories, the user and group IDs must be consistent. 

Make sure that system (existing) accounts/groups have IDs < 500.

User accounts/groups or accounts/groups used for the OSG grid software (*rsvuser*) will have IDs >= 500.

To ease consistency accounts and groups are created on one host, e.g. =gc1-ce= and replicated to the other hosts in the cluster.
 
   * Home directories must be mounted
   * Accounts are created with =useradd= utility
   * Accounts to be created:
      * =condor= used by the condor scheduler
      * =gsadmin= (privileged no root user)
      * =gsuser= (a normal interactive user)
      * Other accounts as needed, for example the VO group accounts such as *osgedu* 
   * By default, the =useradd= utility creates a separate group for each user.  We may want to define two groups:
      * users - for local, interactive user accounts
      * gridvo - for group accounts for grid users from VOs  
   * Creation of ¨addon¨ files extracting groups/accounts with IDs > 500 (to append to other hosts):
      * =group._addon.gc1= 
      * =passwd._addon.gc1=  
      * =shadow._addon.gc1= (note that shadow is write protected)
   * Push the files to each of the hosts in the cluster, appending them to the corresponding files as appropriate.
   * Check the files manually to verify that they were updated correctly.



%BR%
%COMPLETE1% %BR%
%RESPONSIBLE% Main.RobGardner - 23 Oct 2009 %BR%
%REVIEW%

---++ *Comments*
%COMMENT{type="tableappend"}%


<!--
   * Set USERSTYLEURL = https://twiki.grid.iu.edu/twiki/pub/ReleaseDocumentation/GridColombiaWorkshop2009/centerpageborder.css
-->