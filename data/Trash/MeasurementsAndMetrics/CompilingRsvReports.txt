%META:TOPICINFO{author="BrianBockelman" date="1222707752" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="RsvReportsOverview"}%
---+ Compiling the RSV Reports 

The RSV Reporting system is python-based and uses the built-in distutils module to create binary tarballs and RPMs of the reports.

First, make sure that you have a working system python and have the current pre-requisites installed for the RSV reports (this amounts to the MySQL bindings and setuptools currently).

Next, check out the code from subversion using the following command
<verbatim> svn co svn://t2.unl.edu/brian/rsvreports</verbatim>

(You may have to run 'yum install subversion' if the svn client is not already on your system).

If you make any edits, make sure to
   * Update the version number in setup.py (currently, on line 5)
   * Update the release number in setup.cfg for the RPM (in the section [bdist_rpm])
      * If you add an RPM dependency, make sure it is listed in setup.cfg

Next, run the python build scripts:
<verbatim>python setup.py bdist_rpm</verbatim>

This should produce an RPM in the dist/ directory named
<verbatim>RSV-Reports-<version string>-<release number>.noarch.rpm
RSV-Reports-<version string>-<release number>.src.rpm</verbatim>

Copy the *.noarch.rpm into the yum repository of your choice, and run "createrepo ." to re-generate the repository metadata.

 If you are installing this on the T2 server at UNL, the location of the repository is:
   * SL4/32-bit: /var/www/html/rpms/SL4/i686
   * SL4/64-bit: /var/www/html/rpms/SL4/x86_64
   * SL5/32-bit: /var/www/html/rpms/SL5/i686
   * SL5/64-bit: /var/www/html/rpms/SL5/x86_64
We encourage all changes to be submitted upstream; contact Brian directly with a patch, or ask for a Subversion login.

-- Main.BrianBockelman - 29 Sep 2008