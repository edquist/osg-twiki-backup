%META:TOPICINFO{author="AdamCaprez" date="1330357879" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
This page describes the general procedure to update the OIM database of CPU benchmark scores.

The relevant links are:

[[https://oim.grid.iu.edu/oim/cpuinfo]]:   This is the main page that must be updated with CPU descriptions and scores.  There are two entry fields – “Normalization Constant” and “HEPSPEC Normalization Constant”.  HEPSPEC is the newer and preferred metric to use.  Non-HEPSPEC should only be used if HEP-SPEC06 data isn’t available for a particular CPU.   You will need appropriate permissions to edit entries on this page.  Open a ticket with the Grid Operations Center ([[https://ticket.grid.iu.edu/goc/open]]) to request access.  

[[http://hepix.caspur.it/benchmarks/doku.php]]:  Contains HEP-SPEC06 information 
and benchmark results for several different processor models.

[[http://www.usatlas.bnl.gov/twiki/bin/view/Admins/HepSpecBenchmarks.html]]:  A table of HEP-SPEC06 benchmark results maintained by USATLAS.

[[http://www.spec.org/cgi-bin/osgresults?conf=cpu2006]]:  Search form for online results from SPEC benchmark.  This is used if HEP-SPEC06 scores aren’t available for a particular CPU or close enough model.
    ---- The average of the "CINT2006" results are what you want.
    ---- Normalization constant = avg. CINT2006 number * 180/1000

The general procedure is:

1) Open the OIM CPU page: [[https://oim.grid.iu.edu/oim/cpuinfo]].

2) Log in to t2.unl.edu via SSH.

3) Run "gip_subcluster_record" by hand

4) If this outputs an error, it will tell you precisely what CPU model is missing from the CPU Info page.  

5) It’s possible an entry already exists with for that CPU with a slightly different format for the name/description/etc.  If that’s the case, add an entry with the exact string the “gip_subcluster_record” output provides and note that it’s a duplicate entry.

6) If an entry exists for a CPU in the same family, but different clock speed, scale the score by the ratio of the clock speeds and add an entry with a note that it was scaled from another entry.

7)  If no similar entry already exists, try to find a HEP-SPEC06 score for the CPU (or a similar one) using the links above.  

8)  If no HEP-SPEC06 information is available, look up the CPU on spec.org and calculate the average of the CINT2006 results.  This average multiplied by (180/1000) may be used as non-HEPSPEC “Normalization Constant” entry.

9)  Add the information by using the "Add New CPU Info record" button” on the OIM page.  Make sure to use the exact string given by the output of “gip_subcluster_record”.  Make a note on where you got each number (whether it was a duplicate, was scaled, in the table, etc.).

10)  Rerun “gip_subcluster_record” on t2.unl.edu and verify it completes without further error. 


-- Main.AdamCaprez - 27 Feb 2012
