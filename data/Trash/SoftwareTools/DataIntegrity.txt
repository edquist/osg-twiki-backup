%META:TOPICINFO{author="RuthPordes" date="1266518585" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="NEESFileTransfer"}%

---++ Enstore Data Integrity processes (Draft description)

Custodial governance of data on tape:

By default, enstore assumes the retention of data on tape to be permanent. Enstore has numerous features built in to maintain the integrity of data on tape, and the Storage Services Administration group have procedures to maintain the integrity:

   1. Enstore uses end to end checksuming to ensure the data of each file has remained unchanged. This checksum is generated at the user's end by encp, calculated at the tape mover (or dCache)  receiving end before being written to tape, is stored in the file's metadata,  and is calculated on every read from tape, as it goes out over the network, and on the user receiving end of encp. This assures that the data written to enstore is exactly the same as retrieved from enstore.
   1. When a tape gets filled, it will be ejected and have it's write protection tab physically locked to protect against accidental erasure. Jobs to write lock batches of filled tapes are generated automatically when enough filled tapes have accumulated, or a week has passed, whichever comes first.
   1. Tapes are randomly sampled and the first, last and a random middle file on the selected tapes are read (and implicitly their checksum verified).
   1. The number of mounts for each tape Tape is maintained in a database and alarmed if a threshold is crossed. The Storage Services Administration group "clones" the data to a new tape in response to these alarms. This protects against data loss due to tape wear.
   1. Data is refreshed on an approximately 6 year cycle by migrating to new, denser,  media
   1. Since tapes and tape drives are mechanical devices, (very) infrequently tape drives can damage tapes, a tape cartridge can fail mechanically,  or a portion of the media can be damaged from wear. In these cases it usually requires vendor intervention to read past the bad spots on the tape to recover the data. The Storage Services Administration group sends damaged tapes to data recovery vendors to recover what they can from the tape and restore the recovered data to new tape.
   1. There are tape libraries at the GRID Computing Center and the  Feynman Computing Center which are separated by about a mile. Users can maintain two geographically separated copies at these two centers. They can do this on their own, or use an enstore feature to do this.
   1. We are just starting to monitor tapes at the level of soft errors (recovered reads or writes) and will be determining if we might use this information to proactively detect tape integrity issues.




-- Main.RuthPordes - 18 Feb 2010
