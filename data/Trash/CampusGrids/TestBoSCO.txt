%META:TOPICINFO{author="MarcoMambelli" date="1353365006" format="1.1" version="1.4"}%
<!-- conventions used in this document
   * Local UCL_HOST = %URLPARAM{"INPUT_HOST" encode="quote" default="bosco"}%
   * Local UCL_USER = %URLPARAM{"INPUT_USER" encode="quote" default="user"}%
   * Local UCL_DOMAIN = %URLPARAM{"INPUT_DOMAIN" encode="quote" default="opensciencegrid.org"}%
   * Set TWISTY_OPTS_DETAILED = mode="div" showlink="Show Detailed Output" hidelink="Hide" showimgleft="/twiki/pub/TWiki/TWikiDocGraphics/toggleopen-small.gif" hideimgleft="/twiki/pub/TWiki/TWikiDocGraphics/toggleclose-small.gif" remember="on" start="hide" 
   * Set TOC2 =<div style="float:right; margin-right:-1.015em; padding:0.5em; background-color:white;">%TOC%<p class="twikiClear" /></div>
-->

---+!! BOSCO
%DOC_STATUS_TABLE%
%TOC{depth="3"}%



---# Introduction 
This document describes a standard test of BOSCO. It is for BOSCO developers and testers. It requires some knowledge of BOSCO and Condor.

 <img src="https://twiki.grid.iu.edu/twiki/pub/CampusGrids/BoSCOv1p1/bosco-submit_and_resource.jpg" alt="bosco-submit_and_resource.jpg" width='378' height='399' />    

The BOSCO submit node is the host where BOSCO is installed and where user/s login to submit jobs via BOSCO.
The multiple clusters added to BOSCO (i.e. where the user/s can submit jobs via BOSCO) are referred as BOSCO resources.

---## Known Issues

   * [[https://jira.opensciencegrid.org/browse/CAMPUS-39][39]] Flocking fails 
   * [[https://jira.opensciencegrid.org/browse/CAMPUS-40][40]],  [[https://jira.opensciencegrid.org/browse/CAMPUS-41][41]] BLAHP fails when running on clusters with *VERY* new Condor installed. 
   * [[https://jira.opensciencegrid.org/browse/CAMPUS-38][38]] Depreciation warning on cluster add.  


---# Performing basic tests

Always:
   * Note the BOSCO/Condor version, output of =condor_version=
   * Note the platform of the BOSCO submit node (OS, version, 32/64 bit)
   * Note the platform of each BOSCO resource and its queue manager (if you have any resource added)

---## Install test
Perform the installation as described in BoscoInstall or BoscoMultiUser 
then start BOSCO with =bosco_start=.
Verify that condor_q is working.

Report which platform was installed and if there is any error.

Verify that =condor_cluster --list= and =findplatform= work correctly.

---## Add clusters
Add the BOSCO resource as described in BoscoInstall or BoscoMultiUser
then test the resource with =bosco_cluster --test NAME=.

Report the output of =bosco_cluster --list=, the NAME of the resource, jobmanager type, if the job completed successfully, the stdout of the test, the username used, if it was single pr multi user condor and important notes.

---## Run BOSCO Grid Jobs
Run jobs as the =bosco= user. Submit using the Condor "grid" universe for the specific cluster you added (PBS, Condor, SGE, ...)

Report if it ran correctly and on which resource it ran.

If you have multiple resources, verify that the jobs run on all of them, one at the time.


---# BOSCO Advanced (or Multi) user tests
These tests verify BOSCO with more than one cluster when the Campus Factory is in use.


---## Run BOSCO Vanilla Jobs
Run Condor "vanilla" jobs as the =bosco= user for single user BOSCO, as a user different from =bosco= or =root= for multi user bosco.

Report if it ran correctly and on which resource it ran.

If you have multiple resources, verify that the jobs run on all of them.


---# BOSCO multi user tests
On top of the basic tests in the multi user environment, there are some tests specific for the multi user environment (not as important for BOSCO single user)

---## Flocking to BOSCO
Verify that other submit hosts can flock to the BOSCO submit host by following the instructions in BoscoMultiUser

---## Querying BOSCO from a monitoring host
Check that a monitoring hosts can run commands like =condor_q= or =condor_status= against the BOSCO submit host


---# Test policies
Before a release we should test all the functionalities above for all the supported queue managers, possibly on all the platforms (at least both Mac and Linux).

---# Test results

Each person performing a test can copy the template. Then update the summary for the version
---## BOSCO 1.1 alpha
Summary:
| *Test* | *Result* | *Date* | *Notes* |
| *Install* | %Y% | 11/8 | Marco |
| *Condor add/test* | %Y% | 11/8 | Marco |
| *LSF add/test* |  |  |  |
| *PBS add/test* |  |  |  |
| *SGE add/test* |  |  |  |
| *SLURM add/test* |  |  |  |
| *Jobs* |  |  |  |
| *Flocking* |  |  |  |
| *Querying* |  |  |  |


---### Individual tests

Test by Marco Mambelli:
   * BOSCO version: $CondorVersion: 7.9.2 Nov 06 2012 BuildID: 76336 PRE-RELEASE-UWCS $, $CondorPlatform: x86_64_RedHat5 $
   * Single/Multi user: multi
   * Platform: RH5
   * Hosts: uc3-bosco
| *Test* | *Result* | *Date* | *Notes* |
| *Install* | %Y% |  |  |
| *Condor add/test* | %Y% |  |  |
| *LSF add/test* |  |  |  |
| *PBS add/test* | %X% |  | Jobs go on hold |
| *SGE add/test* | %X% |  | Jobs go on hold |
| *SLURM add/test* |  |  |  |
| *Jobs* |  |  |  |
| *Flocking* | %X% |  | CF crashing [[https://jira.opensciencegrid.org/browse/CAMPUS-39][39]] |
| *Querying* |  |  |  |

Notes:
   * Have still to test Derek's 11/9 patch

<!-- ####################### START TEMPLATE ##################### 
-->

---## Template

Test by NAME:
   * BOSCO version:
   * Single/Multi user:
   * Platform: 
   * Hosts: 
| *Test* | *Result* | *Date* | *Notes* |
| *Version* |  |  |  |
| *Single/Multi* |  |  |  |
| *Platform* |  |  |  |
| *Tester* |  |  |  |
| *Install* |  |  |  |
| *Condor add/test* |  |  |  |
| *LSF add/test* |  |  |  |
| *PBS add/test* |  |  |  |
| *SGE add/test* |  |  |  |
| *SLURM add/test* |  |  |  |
| *Grid Jobs* |  |  |  |
| *Vanilla Jobs* |  |  |  |
| *Flocking* |  |  |  |
| *Querying* |  |  |  |

Notes:
   *
<!-- ####################### END TEMPLATE ##################### 
-->

%INCLUDE{"BoscoInstall" section="BoscoReferences"}%

-- Main.MarcoMambelli - 08 Nov 2012
