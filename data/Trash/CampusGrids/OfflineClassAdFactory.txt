%META:TOPICINFO{author="DerekWeitzel" date="1288717525" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="CampusGridTechnology"}%
---+ Offline !ClassAd Matching 

---++ About this page
This page describes the offline classad matching that the factory can use.

---++ About Offline Ads
Offline ads are designed to be used for power management.  When a node hasn't been matched for a configurable amount of time, the machine can be turned off to save power.  When the machine is preparing to turn off, it sends an offline ad to the collector that describes the machine.  When the offline ad describing the machine is matched to a job, a second process, the Condor Rooster, wakes the powered off node to run the job.

The collector maintains the offline ads for a configurable amount of time using the configuration variable [[http://www.cs.wisc.edu/condor/manual/v7.4/3_3Configuration.html#param:OfflineExpireAdsAfter][OFFLINE_EXPIRE_ADS_AFTER]].  During this time, the condor negotiator will treat the offline ad just as it would a real ad and match it to idle jobs.  Since the Negotiator sees no difference between running and offline ads, the offline ads will be matched even when flocking from another condor pool.

When an offline ad is matched to an idle job, the negotiator updates the MachineLastMatchTime of the matched classad to the current time.  Another process can look at this attribute and take action.

---++ How the Campus Factory handles Offline !ClassAds


-- Main.DerekWeitzel - 02 Nov 2010
