%META:TOPICINFO{author="AnwarMamat" date="1277500831" format="1.1" reprev="1.3" version="1.3"}%
-- Main.AnwarMamat - 16 Jun 2010
---+ Linux Condor Pool on Windows Lab Machines
Project Description

Installation


   * structure: <br />
     <img src="%ATTACHURLPATH%/Condor_head.png" alt="Condor_head.png" width='797' height='529' />    

---++ Installing the Head Node

Read the “Installation” section in Condor Manual before starting installation. 

Check if the Head Node host name is correct in  “/etc/sysconfig/network” as:
<pre class="screen">
HOSTNAME=condor.unl.edu
</pre>
Also, set the correct hostname:
<pre class="screen">
hostname condor.unl.edu
</pre>

Check the Condor yum repository at http://cs.wisc.edu/condor/yum for supported platforms. If your platform (here it is RHEL5), follow the yum install instructions:

Example - Redhat 5: Install latest Condor's release 
<pre class="screen">
cd /etc/yum.repos.d
wget http://www.cs.wisc.edu/condor/yum/repo.d/condor-stable-rhel5.repo
</pre>
Install Condor as root:
> 
<pre class="screen">
su -
</pre>
Add condor user. 
> 
<pre class="screen">
adduser condor
</pre>
The Condor package will automatically add a 'condor' user/group if it does not exist already. Sites with a specific security policy should add the 'condor' user/group manually before performing the installation. 

Install Condor RPM 
<pre class="screen">
yum install condor
</pre>
Condor will be install in:
The following table shows path layout compare to original Condor's binary package. 
Orignal Location Current Location
bin /usr/bin
etc /etc/condor/
etc/examples /usr/share/doc/condor-{version}/etc/examples
examples /usr/share/doc/condor-{version}/examples
include /usr/include/condor
lib
/usr/lib/condor | /usr/lib64/condor
libexec
/usr/libexec/condor
local/condor_config.local
/etc/condor/
local/execute
/var/lib/condor/execute
local/spool
/var/lib/condor/spool
man
/usr/share/man
sbin
/usr/sbin
sql
/usr/share/condor/sql
src
/usr/src
INIT
/etc/init.d/condor
PID
/var/run/condor
LOGS
/var/log/condor
LOCK
/var/lock/condor

After Condor is installed, check the environment variables:
<pre class="screen">
condor_config_val FULL_HOSTNAME
	condor.unl.edu
condor_config_val CONDOR_HOST
	condor.unl.edu
</pre>
Next step, edit Condor's configuration file which locates at /etc/condor/condor_config.local
<pre class="screen">
CONDOR_HOST = $(FULL_HOSTNAME)
DAEMON_LIST = COLLECTOR, MASTER, NEGOTIATOR, SCHEDD, STARTD
</pre>
If the head node does not execute jobs, then “STARTD” can be removed from the daemon list.

Edit Condor's configuration file which locates at /etc/condor/condor_config
<pre class="screen">
ALLOW_WRITE=*
</pre>
Now, condor head node is ready to use and should be able to submit and execute jobs.
Start Condor (as root):
<pre class="screen">
service condor start
</pre>
Check if condor is running:
<pre class="screen">
ps -ef |grep condor
</pre>
You see the condor daemons:
<pre class="screen">
condor_master
condor_collector
condor_sched
condor_startd
condor_procd
</pre>
To stop condor:
<pre class="screen">
service condor stop
</pre>


---++ Installing the worker Node

Worker node has VMPlayer  installed and CentOS5.5 is installed as the guest OS.

Now, we install the Condor on the guest OS.

Set the worker node host name in /etc/sysconfig/network
<pre class="screen">
HOSTNAME=v-node
</pre>

Install Condor as root:
<pre class="screen">
su -
</pre>
Add condor user. 
<pre class="screen">
adduser condor
</pre>
Change the password of user condor
<pre class="screen">
passwd condor xxxxx
</pre>


Obtain the Condor RPM
<pre class="screen">
cd /etc/yum.repos.d
wget http://www.cs.wisc.edu/condor/yum/repo.d/condor-stable-rhel5.repo
</pre>
The Condor package will automatically add a 'condor' user/group if it does not exist already. Sites with a specific security policy should add the 'condor' user/group manually before performing the installation. 

Install Condor RPM 
<pre class="screen">
yum install condor
</pre>

Edit/Add the condor configuration file at /etc/condor/condor_config.local
<pre class="screen">
CONDOR_HOST= condor.unl.edu
DAEMONLIST=MASTER,STARTD
ALLOW_WRITE=$(CONDOR_HOST)
ALLOW_NEGOTIATPOR=$(CONDOR_HOST)
COLLECTOR_HOST=$(CONDOR_HOST)
CCB_ADDRESS=$(CONDOR_HOST)
</pre>
<pre class="screen">
condor_reconfig
</pre>
After Condor is installed, check the environment variables:

<pre class="screen">
condor_config_val FULL_HOSTNAME
	v-node
</pre>
<pre class="screen">
condor_config_val CONDOR_HOST
	condor.unl.edu
</pre>


%META:FILEATTACHMENT{name="Condor_head.png" attachment="Condor_head.png" attr="" comment="structure" date="1277309936" path="Condor_head.png" size="31191" stream="Condor_head.png" tmpFilename="/usr/tmp/CGItemp24606" user="AnwarMamat" version="1"}%
