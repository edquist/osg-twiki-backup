%META:TOPICINFO{author="DerekWeitzel" date="1358189823" format="1.1" version="1.10"}%
%META:TOPICPARENT{name="BoSCOv1p1"}%
---+!! Bosco 1.1 Release Notes

Released on Jan. 7 2013.

---++!! Abstract

This document describes the major differences between BOSCO versions 1.0 and BOSCO 1.1.

---+++!! Quick Links
   * [[https://twiki.grid.iu.edu/bin/view/CampusGrids/BoscoInstall][Installation]]
   * [[https://twiki.grid.iu.edu/bin/view/CampusGrids/BoSCO][Using Bosco]]
   * [[https://twiki.grid.iu.edu/bin/view/CampusGrids/Bosco1p1ReleaseNotes][1.1 Release Notes]]


---+++!! Table of Contents

%TOC%

---++ Welcome to Bosco 1.1
The Bosco team is proud to announce the release of 1.1 Beta.

---+++ Basic  Benefits
---++++ Easier High Throughput Computing
Bosco is designed to manage high throughput computing jobs where hundreds to thousands of jobs run simultaneously on remote clusters. Previously, it was the responsibility of the researcher to manage these jobs by hand to ensure satisfactory job completion. With Bosco, the effort is reduced since the researcher submits these jobs on her own workstation and Bosco manages all the remote aspects of running the jobs and collecting the data.

---++++ Submit Locally (from your workstation)
In Bosco, researchers submit jobs to computational clusters directly from their workstations thereby replacing  the conventional method of remotely logging into a cluster to manage job submissions and data. A user drops Bosco onto their desktop and the jobs and data flow directly to/from their desktop.  Bosco fulfills the researchers requirement to submit  jobs locally but run them on a remote cluster.

---++++ One Submit Model for Different Cluster Types
Bosco's enables researchers to write job submission scripts in one language (based on HTCondor) and then run these jobs on clusters that may have different interfaces such as LSF, PBS, or SGE.  This is a huge improvement. There is no longer a need for the researcher to learn separate languages for each job manager.
Bosco automatically takes care of the error prone, and repetitive work that researchers have previously had to cope with in managing their jobs and workflows by hand. All Bosco needs is a user account and password on the remote cluster and it does the rest. For example it automatically identifies  the maximum number of jobs that can be submitted to each cluster, and throttles the jobs accordingly.

---+++ Bosco Power User benefits
If you are a power user that is exceeding the resource you are currently running on, there are some advanced methods of utilizing Bosco that can facilitate bringing additional resources to your fingertips. 

---++++ Simultaneous job submission to multiple clusters
Bosco enables researchers to distribute jobs using a single script to multiple clusters, and let Bosco decide the best one to run your job fastest.
On a typical campus, the each department may have its' own cluster (e.g. Physics may have a cluster, Computer Science has one, and Chemistry may have another.)  Or a computing center may have multiple clusters reflecting multiple generations of hardware.  In either of these cases, researchers are required to pick which cluster to submit jobs to, rather than submitting to which ever has the most free cores. Additionally, these clusters may have completely different job schedulers that require the researcher to learn multiple submission scripting techniques. 
BOSCO makes the clusters appear uniform by overlaying each cluster with a job submission translator. In this manner the researcher only learns one submission methodology (based on HTCondor). Jobs submitted via BOSCO will then be run at whichever cluster has the first free cores for you to run on.  Bosco does the cluster level load balancing for you.
To best take advantage of this method, researchers should run Bosco on workstation class systems with steady networks. Certain ports must be open on these networks as well.

---++++ Access to National Cyber-Infrastructure Resources
Bosco supports access to large pools of resources available in the National Cyber-infrastructure such as the Open Science Grid (OSG) for academic researchers. To accomplish this, Bosco researchers can request accounts on OSG "gateway" systems. Jobs that are sent to one of these "gateway" systems are transparently resubmitted to the OSG. 

---++++ Multi user capabilities
Teams of researchers can submit jobs from the same host. In this case, Bosco is installed on a server by a sysadmin sysadmin who is responsible for adding multiple clusters. 


---++ Upgrading from Bosco 1.0

Upgrading instructions can be found on the bosco [[https://twiki.grid.iu.edu/bin/view/CampusGrids/BoscoInstall#4_6_How_to_Update_BOSCO][installation documents]].  The upgrade should be trivial from 1.0, just replacing the Bosco install, and re-adding the clusters.

Bosco clusters added with 1.0 are not compatible with 1.1 clusters.  You will need to re-add all of the configured clusters from 1.0.


---++ Changes to Bosco for Users

---+++ Multi-OS Support
The Multi-OS feature is intended to allow users to submit to clusters that may not be the same operating system as the submit host.  This is especially useful when users are running a submit host on their personal computer that is running Debian, while the supercomputer in the next building is running Red Hat 6, a common occurrence.

The Multi-OS components follow a basic process in order to operate:
   1. Detect the remote operating system with the findplatform script.
   1. Download (from the cloud?) the appropriate Bosco version for the platform.
   1. Transfer the files needed on the remote cluster.  This includes grabbing the libraries and binaries for the campus factory's glideins.  The glidein creation takes the most time of this process as it needs to compress the libraries and binaries before transferring.
   1. When Bosco detects jobs idle on the submit host, it will start glideins appropriate for the platform to service the jobs.

The Multi-OS support required modification of the cluster addition and adding both a findplatform script and a glidein_creation script.  


---+++ SSH File Transfer

SSH File Transfer feature improves the method of staging input and output files to the remote cluster.  In 1.0, files are transferred by starting a daemon on the remote cluster that connects back to the submit host over a random port.  This required a lot of open ports on the submit host.  

The new SSH File Transfer will limit the number of ports required on the submit host.  Bosco will now transfer files over a port that is forwarded over the SSH connection that Bosco maintains with the remote cluster.  The transfers are inherently secure as they are over the SSH connection, as well as they are authenticated by the Condor daemons on either end of the connection (remote cluster and submit host).   



---+++ !MacOSX Support

Bosco now supports the !MacOSX 10.7+ operating system as a submit host.  Bosco does not support !MacOSX for a cluster (+execution host).

---++ Changes to Bosco for System Administrators

---+++ Single Port Usage
In 1.0 of Bosco, the submit host needed a lot of ports open for connections originating from the remote clusters.  This was caused by 2 mechanisms:
   1. File transfer from the Bosco submit host to the cluster login node before issuing the local submit call (qsub, condor_submit...).  This opens ports on the submit host because the cluster would call out to the submit host to initiate transfers.
   1. Connections for control, status, and workflow management between the cluster worker nodes and Bosco submit host.  This is the Campus Factory, which gives Bosco the traditional Condor look and feel.

In order for Bosco to function, the submit host needs a large swath of ports in order to operate correctly.  Also, as you scale, you will need even more ports open.

The file transfers from the submit host to the login node are now being transferred using SSH, see my previous post.

With the new feature of single port usage, all control, status, and workflow management connections are routed through HTCondor's share_port_daemon on port 11000 (which is hardcoded, but is picked at random).


---+++ Multi-User Bosco

What Is Multi-Cluster?

In Bosco, Multi-Cluster is the feature that allows for submission to multiple clusters with a single submit file.  A user can submit a regular file, such as: <pre class="file">
universe = vanilla
output = stdout.out
error = stderr.err
Executable = /bin/echo
arguments = hello
log = job.log
should_transfer_files = YES
when_to_transfer_output = ON_EXIT
queue 1
</pre>

When the job is submitted, Bosco will submit glideins to each of the clusters that are configured in Bosco.  The glideins will start on the worker nodes of the remote clusters and join the local pool at the submission host, creating an on-demand Condor pool.  The jobs will then run on the remote worker nodes through the glideins. 


---++ Known Issues

   * [[https://jira.opensciencegrid.org/browse/CAMPUS-65][65]]: Executable is transferred with same permissions bits as on submit host.  Therefore, if executable on submit host does not have executable bits set, they will not be set on the remote host.


---++ Bosco Team
   * Derek Weitzel
   * Dan Fraser
   * Marco Mambelli
   * Jaime Frey
   * Brooklin Gore
   * Miha Ahronovitz