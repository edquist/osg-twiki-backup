%META:TOPICINFO{author="DanFraser" date="1330016526" format="1.1" reprev="1.7" version="1.7"}%
%META:TOPICPARENT{name="WebHome"}%
---+Campus Infrastructure Workplan
Last update: 23-Feb-2012, BG+DF
This project is part of the OSG Production Area

---++ Overview

There are two main goals for this project:
   1 Integrate technology components into an OSG job submission capability that makes it easy for researchers to distribute and manage ensembles of jobs across multiple batch systems from their desktop, using their campus login credentials. The development name for this capability is BOSCO.
   1 Engage with and help researchers become more productive in their science by utilizing this capability.


---++Researcher value proposition:

   * Enable researchers to dramatically extend computational capability to improve their science by
      1  harnessing resources on campus
      1 harnessing resources on collaborating campuses
      1 harnessing resources on the national cyber infrastructure.
   * Universal front-end makes it easy to manage multiple job submissions 
   * Enables jobs to be submitted independent of remote batch queue size
   * We will help a researcher take a submit file that currently submits to the PBS batch system and turn it into a Bosco submit file. Help will be in the form of documentation with sample files (e.g. maybe how to run R jobs or other common applications such as GROMACS) as well as hands on support when needed.

---++Project Team

| *Role* | *Who* | *%Effort Feb 14 - Mar 21*|
| Project Lead | Dan Fraser (OSG-Prod) | 20% |
| Project Mgr | Brooklin Gore (Morgridge) | 10% |
| External Support | Jaime Frey (Condor) | 20% |
| Contributor | Marco Mambelli (OSG-Prod) | 40% |
| External Support | Todd Tannenbaum (Condor) | 0% |
| Developer | Derek Weitzel (OSG-CI) | 30% |
| SW Integration and Usability Testing | Alain Roy (OSG-SW) | 10% |

---++Reporting

Brooklin to add items to the Production notes every Monday.

---++Approach and Timeline

Bosco will be developed in multiple phases as follows:

   * *Integration Part I (Bosco V0) March 2012* - Release to demonstrate baseline capability and for internal testing with control group
   * *Integration Part II (Bosco V1) June 2012* - Production Release that supports job submission to multiple back ends and agreed upon interfaces to the fabric of services. To be used as a replacement for existing Campus Infrastructures at VT, UFlorida. See below for additional details.
   * *Integration Part III (Bosco V2) TBD* - Additional functionality and ease of use enhancements and bug fixes for previous releases.

   * *Engagement (Mar - Sep) 2012* - Develop a plan to identify and engage researchers
      * Document -- What do we have to offer Campuses (Technology, Environments, App Experience, Know how)?
      * Transition -- Existing grids transition to BOSCO
      * Identify/contact -- One or two campus researchers to work with (identify quickly which researchers will not work)
         * Meetings: AHM, Condor Week, ...
         * Existing mailing lists
         * Campus Visits / presentations
         * One on one (e.g. Doug B.)
      * Work with researchers
         * Get their code running in an independent lab
         * Help with designing their scripts
         * Help them get running at scale
      * Track our experience with success / rejections on a wiki page
      * Register campus end points as they come online into OIM (some devel effort)
         * Register UW, VT, Engage, Glow, HCC, Purdue, UCSD, RENCI, XSEDE

---
---+ Integration Part I

---++V0 Goal:

Provide a management tool for researchers to manage large numbers of job submissions onto their local cluster. Design goal is to manage 1000 jobs against a batch system that can only support 100 jobs running at a time. Additionally,

   * Release the V0 version of Bosco by Mar 21, 2012.
   * Dan Fraser will provide updates at the area update meetings.
   * V0 support will be provided via email to the unmoderated bosco-discuss@opensciencegrid.org email list. 

---++ Bosco v0 prototype release

---+++Features

   * Simple installation and configuration via separate package and bosco_* command wrappers.
   * The installation can be on a user’s desktop or on another machine that they log into.
   * The package physically resides in the OSG VDT
   * Installs in user’s home directory
   * Does not require root access for installation or configuration
   * Submit node job queue size independent from remote batch queue size
   * Rebooting submit machine will not impact queued jobs
   * User can obtain some information about job positions in the batch queue
   * Package available as simple web-based download

---+++ Known limitations

   * Bosco package must be staged on submit node before installing
   * Submit node and cluster head node must be same HW/OS architecture and version.
   * No file I/O is provided between submit node and cluster head node – executable and data must be staged in and out manually
   * No OSG accounting support

---+++ User requirements

   * Submit-node: Any PBS and Condor supported Linux platform
   * Cluster head-node: Any PBS and Condor supported Linux platform
   * Condor version: 7.7.6+
   * PBS flavors: Torque and PBSPro

---++ Bosco v0 architecture overview

<img src="%ATTACHURLPATH%/bosco-v0-arch.png" alt="bosco-v0-arch.png" width='50%' height='50%' />    

---++ Bosco v0 sample user session

| *Step* | *Action* | *Arguments* | *Input* | *Output* |
| Download | Manually stage the bosco tar ball on the submit machine. ||||
| Install | =bosco_install= | None | None | Success/Fail |
|^| =source bosco_setenv.[csh,sh]= | None | None | None |
|^| =bosco_start= | None | None | Success/Fail |
|^| =bosco_cluster= | -add Hostname… | None | Success/Fail, entry in head node table |
|^| =bosco_cluster= | -list | Head-node table | List of –add’d head nodes and their status |
|^| =bosco_cluster= | -test [jobcnt] | Submit file | Status of submitted jobs |
| Stage Data In | Manually transfer all executables and input data to batch system.  ||||
| Run | =condor-*= | Various | Various | Various |
| Stage Data Out | Manually transfer output data from batch system. ||||
| Optional Uninstall | >bosco_cluster | -remove Hostname | None | Success/Fail, head node table with Hostname removed, delete if empty |
|^| =bosco_stop= | None | None | Success/Failure |
|^| =bosco_uninstall= | None | None | Success/Failure |

---++ Bosco v0 workplan and schedule

| *Due* | *Owner* | *Status* | *Task* |
| 13-Feb | Gore/Fraser | %GREEN%Complete | Complete draft work plan for team comments |
|^| Frey/Weitzel | %GREEN%Complete | Complete functional versions of =bosco_*= commands |
|^| Roy/Weitzel | In Progress | Develop test plan |
| 20-Feb | Gore/Fraser | %RED% *Behind* | Approve test plan |
|^| Fraser/Gore | In progress | Identify two-three usability and beta testers (Doug Benjamin (Atlas Argon), Suchandra, Joey Kahl (Condor Madison), others needed…) |
| 23-Feb | Gore/Fraser | In Progress | Workplan approved by OSG ET and reviewed by other area coordinators |
| 27-Feb | Mambelli/Fraser | In Progress | Web site up with Bosco overview, documentation and package download button |
|^| Fraser/Gore | Not Started | Bosco v0 provided to beta users to validate install and functionality |
|^| Gore | In progress | Get workplan on OSG web for review/status tracking |
|^| Frey/Mambelli | In Progress | Report on ability track job state from cluster |
| 5-Mar | Entire Team | Not Started | Review user feedback and identify development requirements |
|^| Roy | Not Started | Begin usability testing |
| 12-Mar | Fraser/Gore | Not Started | Second round of beta testing |
| 19-Mar | Fraser | Not Started | Bosco v0 complete |
| 21-Mar | Fraser | Not Started | Bosco presentation at OSG All Hands meeting |
| 22-Mar | Fraser | Not Started | Presentation of accomplishments, lessons learned and next steps to the ET and other area coordinators |

---
<del>---+ integration (BOSCO v1)  Part II
</del><ins>---+ integration Part II
</ins>
<del>*This plan is still in progress and not yet locked in.*
</del><ins>In progress
</ins>
---++ Bosco v1production release

---+++Features

   * All v0 features, plus
   * Support for multiple backend clusters (which ones TBD, candidates SGE, LSF)
   * Some accounting features (to understand if Bosco is being used successfully)
   * Support for Macintosh as submit node
   * Need to enumerate others...

---+++ Known limitations

   * TBD

---+++ User requirements

   * Submit-node: Mac OSX 10.7 (Lion) or Any PBS and Condor supported Linux platform
   * Cluster head-node: Any PBS, ___, or ___ and Condor supported Linux platform
   * Condor version: 7.7.6+
   * PBS flavors: Torque and PBSPro

---+ Engagement Part I

In Progress

---++ Bosco v1 sample user session

| *Step* | *Action* | *Arguments* | *Input* | *Output* |
|Download | Go to OSG/Bosco web page |||
|^|Click DOWNLOAD | N/A | N/A | File in home directory |
|The rest of the user session is the same as for v0 |||||

---
---+ Integration Part III

To be completed

---
---+ Parking Lot

---+++ These are items to be addressed above and are 'parked' here from ealier discussions

Finalize deliverables
•	Functionality
•	Target users (general and named) and use cases
o	Dan, potentials are: Belarmine

Test environment functional in Madison
•	Condor submit node
•	PBS environment

Documentation

Test plans
   * What are we testing in v0 vs v1
   * When/where
   * Usability, functional/regression, scalability
   * 1000 jobs -> 100 (PBS) slots
   * Understand latency (add’l overhead) introduced by Bosco. Can I run 20 minute jobs? 10 minute jobs?
   * Handles disconnect of submit host while jobs are running
   * Does not support changing IP address on submit node while jobs are running (v2 feature)
   * Easy to use by researcher
   * What happens if I submit to a cluster I haven’t bosco_cluster –add (etc.)
   * Do the submit daemons start up after a submit node reboot?

How do we distribute via the VDT (or OSG web page)

Determine if/when to support SGE and LSF
 

%META:FILEATTACHMENT{name="bosco-v0-arch.png" attachment="bosco-v0-arch.png" attr="" comment="Bosco v0 Architecture" date="1329934067" path="bosco-v0-arch.png" size="200048" stream="bosco-v0-arch.png" tmpFilename="/usr/tmp/CGItemp33885" user="BrooklinGore" version="2"}%
