%META:TOPICINFO{author="MarcoMambelli" date="1310426716" format="1.1" version="1.15"}%
%META:TOPICPARENT{name="VomrsInstallGuide"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ hosts file considerations
The =/etc/hosts= file should be set up to list the external FQAN of the vom(r)s server separately from the localhost line, for example:
<pre class="file">
127.0.0.1 localhost.localdomain localhost
123.45.67.89 myvoms.example.edu myvoms
</pre>
Placing the FQAN in the localhost line will cause the installation to fail.

---++ Installation user
Must be done as _root_ user.

---++ Prerequisites
The gcc compiler must be present on the system for VOMRS to install correctly.

You should get a http service certificate and put it in =/etc/grid-security/http/httpcert.pem=, =/etc/grid-security/http/httpkey.pem=
It can be obtained later if necessary.

---++ Installation package
After installing pacman:

<pre class="screen">
# <b>cd <i>PACMAN_DIR</i></b>
# <b>source setup.sh</b>
</pre>

---++ Installation location
Create an empty directory for the installation and change into it. For simplicity in this document we'll call it =/opt/vomrs=.

<pre class="rootscreen">
%UCL_PROMPT_ROOT% mkdir /opt/vomrs
</pre>

%WARNING% You can install VOMRS in any arbitrary directory. Please don't directly use a system directory like =/opt= or =/usr= here. The installation routine will create many sub-directories in the install directory chosen.

---++ Installation Cache
<pre class="rootscreen">
%UCL_PROMPT_ROOT% cd /opt/vomrs
%UCL_PROMPT_ROOT% pacman -get  %CACHE%:vomrs  
</pre>

---++ Installation output/questions
%NOTE% Some of the questions related to 'trusted caches' and 'unrecognized platforms' may not appear depending on your host and any _pacman_ variables already set in your environment.

<pre class="rootscreen">
%UCL_PROMPT_ROOT% pacman -get http://software.grid.iu.edu/osg-1.2:vomrs
Do you want to add [http://software.grid.iu.edu/osg-1.2] to [trusted.caches]? (y/n/yall): y
Do you want to add [http://vdt.cs.wisc.edu/vdt_200_cache] to [trusted.caches]? (y/n/yall): y
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check... 

All prerequisite checks are satisfied.
                                                                          


========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.
</pre>


---++ Verify the  installation completed successfully
To verify  the pacman installation was successful, there should be a setup.(c)sh in the VDT_LOCATION.   If present, source it.

<pre class="rootscreen">
%UCL_PROMPT_ROOT% cd /opt/vomrs</b>
%UCL_PROMPT_ROOT% source setup.sh</b>
</pre>

%IMPORTANT% This does not necessarily indicated that everything was installed and configured successfully.  It just verifies that the pacman installation completed successfully.  There is a lot of other magic that occurs during the process that should be validated.

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.TanyaLevshina - 25 Oct 2007 %BR%
%REVIEW%