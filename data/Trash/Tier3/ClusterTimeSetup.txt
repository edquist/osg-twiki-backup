%META:TOPICINFO{author="MarcoMambelli" date="1273264065" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction
Time synchronization is essential to Grid services and other secure services. Without a correct time and date you'll incur in authentication errors. NTP is a service that synchronizes hosts using the network. Probably the OS installation will take care of it. 

=ntpd= daemon can run on a host and take care of maintaining it synchronized.
*If the time on your system is too far from the one of the synchronization server the daemon will fail*: you must force a manual synchronization before starting the deamon.

---++ Service Configuration/Startup/Shutdown
ntpd configuration is in =/etc/ntp.conf=. Make sure that some NTP servers are listed, e.g.:<pre class="file">
# Red Hat servers at ntp.org
server 0.rhel.pool.ntp.org
server 1.rhel.pool.ntp.org
server 2.rhel.pool.ntp.org
# generic pool
server pool.ntp.org
</pre>

To restart ntpd automatically after a reboot:<pre class="screen">chkconfig --level 35 ntpd on
</pre>

To start (stop) NTP daemon:<pre class="screen">/etc/init.d/ntpd start
/etc/init.d/ntpd stop</pre>

---++ Manual synchronization 
To force a manual synchronization you must have some server configured in your =/etc/ntp.conf= file, stop ntpd daemon, then synchronize, then restart the daemon: <pre class="screen">
service ntpd stop
ntpd -q -g
service ntpd start
</pre>
The option =-g= forces the synchronization also if the local clock is very far from the one on the synchronization server.

On some servers you may still have =ntpdate=, being replaced by =ntpd -q=, that allows to specify the server on the command line: <pre class="screen">ntpdate -u 0.rhel.pool.ntp.org
</pre>

---++ Validation 
To verify if your server is synchronized you can use:<pre class="screen">/usr/sbin/ntpdate -u -q 0.rhel.pool.ntp.org
</pre>
To verify if ntpd is running use:<pre class="screen">service ntpd status
</pre>

Note that the two above are independent. You can be synchronized also if ntpd is not running. You can be not synchronized also if ntpd is running.

---++ References
   * How to configure a LAN with a NTP server and some NTP clients: http://www.cyberciti.biz/faq/rhel-fedora-centos-configure-ntp-client-server/
   * Description of NTP: http://www.akadia.com/services/ntp_synchronize.html
   * ntp.org: Home of the Network Time Protocol: http://www.ntp.org/

%BR%

---++ *Comments*
%COMMENT{type="tableappend"}%

%COMPLETE2% %BR%
%RESPONSIBLE% Main.MarcoMambelli - 22 Apr 2010 %BR%
%REVIEW%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################ 
   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = MarcoMambelli

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       =  Tier3

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager|Documenter)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %NO%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = 
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = 
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
############################################################################################################ 
-->
