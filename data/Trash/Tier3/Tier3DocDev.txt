%META:TOPICINFO{author="MarcoMambelli" date="1258418868" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+ ! Tier 3 Documentation WIP 
%TOC% 

---++ Getting started

---+++ Site planning
*ToDo:* Prepare a shorter version of the Site Planning, as first instance rely on the one from OSG Release documentation.

The [[ReleaseDocumentation.SitePlanning][OSG SitePlanning]] document helps understanding OSG components and presents information on possible configurations.  

---++++ Base systems
Hosts are supposed to have an operating system.
The reference OS used in this document is Scientific Linux 5.4, a linux distribution based on RHEL 5.4.
Anyway these instructions and examples should work for any RHEL based OS (e.g. RHEL, SL variants, !CentOS, ...) with little or no variation.
The OS installation is not covered by this document.

[[https://www.scientificlinux.org/news/sl54][Here]] you can find more information about SL and [[https://www.scientificlinux.org/download][download]] the distribution.

There are several methods to install the OS:
   * Starting from installation media
   * Using a kickstart file
   * Using a cluster management system
   * ...

Here are some contributed examples:
   * By the US-ATLAS Tier 3 effort:
      * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/UsbKeysetup
      * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/BNLKickStart
   * By the Mariland Tier 3 of CMS:
      * http://hep-t3.physics.umd.edu/HowToForAdmins.html#rocks                                                                                                                                                                                    
   * By Rocks:
      * http://www.rocksclusters.org/roll-documentation/base/5.2/

Links:
   * virtualized http://twiki.mwt2.org/bin/view/Admins/VMwareServerLaptop

---++++ Customization of the base system
To ease the following installation steps and to have a common base here I'm establishing some conventions and customizations of the base OS, like user accounts, a shared file system and others.

File system structure:
<pre>
/exports - root of the NFSv4 pseudo filesystem
/nfs/ - collects the directories shared using NFS
/
</pre>

Some 

Links:
   * ReleaseDocumentation.ClusterGettingStarted
   * ReleaseDocumentation.ClusterNetworkConfiguration
   * Setup SSH public key infrastructure: ReleaseDocumentation.ClusterConfigureSSH
   * Setup an NFS server: ReleaseDocumentation.ClusterNFSServer
   * Creating user accounts: ReleaseDocumentation.ClusterCreateAccounts
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/Setupnfsv4Servermachine
      * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/KickstartFilenfsv4Servermachine
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/GetHostCertificate
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/UseraccountManagement
   * http://wiki.archlinux.org/index.php/NFSv4
   * http://dag.wieers.com/blog/tunneling-nfs4-over-ssh
   * http://nfsv4.bullopensource.org/doc/NFS3_NFS4_migration.pdf
   * http://www.ietf.org/rfc/rfc3010.txt
   * Filesystem Hierarchy Standard:
      * http://www.pathname.com/fhs/
   * http://www.pathname.com/fhs/pub/fhs-2.3.html


---+++ Distributed file system 
xrootd

Links:
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/XrootdStandAlone
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/GridFTPXrootd
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/XrootdGridftpports

---+++ Quick Guide for setting up a Condor Cluster
Condor 7.4

Condor on shared FS using TAR file distribution

Condor via RPMs installed locally on the hosts (Condor RPMs or Rocks)

Adding a service job slot, e.g. for software installation 

Hawkeye monitoring 

Quill for job monitoring

Interesting notes about file staging

Links:
   * Install Condor job management system: ReleaseDocumentation.ClusterCondorInstall
   * http://hep-t3.physics.umd.edu/HowToForAdmins.html#rocks
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/CondorInstallation
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/CondorHawkeye
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/ThroughputCleanup

---+++ Cluster monitoring

Ganglia -notes. In theory distributed as RPM. The x86_64 is dated 4/2006 (Orville), the most recent RPM is 9/2008 (Wien)

Links:
   * http://ganglia.sourceforge.net/

---+++ User client

Links:
   * SiteCoordination.GridClientTutorial
   * ReleaseDocumentation.GridCertificateRequestTutorial
   * ReleaseDocumentation.RequestVOMembershipTutorial
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/SoftwareInstallation

---+++ Worker node client

Links:
   * https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/WorkerNodeClient

---+++ Grid users authentication
There are 3 options:
   * use a gridmap file
   * rely on an external GUMS server
   * install a GUMS server

Links:
   * ReleaseDocumentation.GUMSHandsOn
   * ReleaseDocumentation.InstallConfigureAndManageGUMS
   * ReleaseDocumentation.GridColombiaInstallGUMS

---+++ Installing a CE
Installing the OSG CE

Links:
   * ReleaseDocumentation.InstallCETutorial

---+++ Installing a SE
Installing GridFTP

Installing BeStMan SRM Gateway

Links:
   * ReleaseDocumentation.BestmanGateway
   * ReleaseDocumentation.InstallSETutorial
   * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/SetupSE
      * https://atlaswww.hep.anl.gov/twiki/bin/view/Tier3Setup/ThroughputCleanup

---+++ Installing RSV
 
---+++ Squid Web proxy

---+++ Network performance

Links:
   * ReleaseDocumentation.NetworkPerformanceToolkit
   * ReleaseDocumentation.NetworkPerformanceTutorial




-- Main.MarcoMambelli - 12 Nov 2009
