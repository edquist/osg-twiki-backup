%META:TOPICINFO{author="MarcoMambelli" date="1265665760" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="ClusterNetworkSetup"}%
---+!! *<nop>%SPACEOUT{%TOPIC%}%* 
%TOC%
%NOTE% The following sections are intended to be a super set for an Install Document.  Particular sections may not apply to all documents, but use all the sections that make sense for the installation you are documenting.
%NOTE% Items in common with many installs should have their own page and be pointed to by or included in the Installation document.
 Create a new Install document for any version requiring more than a few changes to the procedure.

---++ Introduction
Brief description of function of software and how it fits into the overall system.

This document presents some notes about the installation of a Firewall or a Router: it is a box that may provide IP level 3 routing, IP masquerading (NAT), a DNS server and a DHCP server. 
The firewall described could be used to separate the intranet of a Tier 3 from the extranet, as the NAT server described in the "Topology with intranet and extranet" of ClusterNetwork. 
Or it could be the Firewall separating the extranet from the Internet as in the second example of Figure 3 in ClusterNetwork.

The router/firewall chosen is [[http://www.vyatta.com/index.php][vyatta]] because it is available both as hardware device or software implementation, has both a command line interface similar to other commercial routers and a Web GUI, its community edition is available free of charge.

This document covers the configuration of a Vyatta router. The router can be deployed as:
   * LiveCD
   * Persistent Device
   * Virtual machine
Check the [[http://www.vyatta.com/downloads/documentation/VC5.0.2/Vyatta_InstallationAndUpgrade_VC5_v01.pdf][Installation guide from Vyatta.org]] for information about the deployment.

%NOTE% *NOTE - DISCLAIMER:*
   * The configuration described here is meant only to be suggestive for a *small* environment.   Network configurations for clusters vary greatly depending on the local environment, the scale of the facility, and conventions used by and preferences of systems administrators.   You should get into contact with your local network administrator to find out more information about your campus' network infrastructure and services.  

---+++!! Applicable Versions
This software is not part of OSG or VDT. 

The instruction apply to Vyatta community edition VC5 

---+++!!Engineering Considerations
It is recommended to install the router/firewall on it own host.

---+++!!Help!
If a problem occurs during installation or verification of the service, see [[#DebugInfo][Debugging Information]].
%BR%
If you cannot resolve the problem, the best way to get help is by following this InstallHelpProcedure.

---++ Checklist
An in-line numbered list of items assumed to have been already performed
E.g.:
   1. Installs that must be done before this one
   1. Security environment in place
   1. batch system in place
   1. stop existing service
   1. ports required

---++ First Time Install
A link to document containing information and install steps that only need to be performed if this a first time install.

---++ Installation Procedure
The description of the steps of this Install procedure (including the commands and options required) that will have to be performed each time this is installed.

Each step that requires commands should show the commands in a green box using 
<verbatim><pre class="screen">
command parameters
</pre></verbatim> tag which will look like this.
<pre class="screen">
command parameters
</pre>
%BR%
%NOTE% Standard variables (such as $VDT_LOCATION) should be used where they exist
%NOTE% The terminal interaction must be verbatim with no extra characters so that a user can copy and paste the command lines.

This procedure covers the success legs only 

---++ Service Configuration/Startup/Shutdown
Description of the steps (including the commands/options) to startup and shutdown the service.
This often requires, the reader to edit lines in a config file.
If this is necessary, put the lines in a screen box with a yellow background 
(to distinguish from entering commands (green box).
<pre class="screen"  style="background-color:#FFFFCC">
Config file line a
Config file line b
</pre>

---++ Validation of Service Operation
Commands to be used to verify the service is working correctly.  This can be combined with the previous section if they are both short.

#DebugInfo
---++ Debugging Information
---+++!!File Locations
Locations of configuration files, input/output files, log files, etc. that are important for an administrator to know about if something doesn't work.  

---+++!!Debugging Procedure
What are the first things to check, step-by-step instructions to determine source of problem for this service

---+++!!Caveats/Known Issues
Restrictions and/or work around for known issues 

---+++!!References
Vyatta.org provides a clear and comprehensive documentation: http://www.vyatta.org/documentation (intro guides are public, reference documents require registration but are free)

Vyatta can be downloaded as virtual appliance from: http://www.vyatta.com/downloads/vc5.0.2/vyatta-virtual-appliance-vc5.0.2.zip

---+++!!Screen Dump of the Complete Install Process
%TWISTY{
mode="div"
showlink="Show..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
complete screen dump of the install procedure
</pre>
%ENDTWISTY%

---++ *Comments*
%COMMENT{type="tableappend"}%

%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.JamesWeichel %BR%
%REVIEW% Main.RobertEngel - 29 Sep 2009 %BR%
%REVCOM%  Under Review %BR%
%REVFLAG%  %X%  %BR%




-- Main.MarcoMambelli - 08 Feb 2010