%META:TOPICINFO{author="MarcoMambelli" date="1261172931" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="CondorRPMInstall"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Setup
Executing <pre>source /opt/condor/condor.sh</pre> will add the condor commands to your path and set the =CONDOR_LOCATION= variable.
If you copied the =condor.sh= and =condor.csh= files in =/etc/profile.d/= as described above, Condor will be in the environment of every user automatically, no need to source any file.


---++ Testing the installation
You can see the resources in your Condor cluster using =condor_status=. Here is the output on =gc1-ce.mwt2.org= (the Condor headnode in gc1):
<pre>
> condor_status

Name               OpSys      Arch   State     Activity LoadAv Mem   ActvtyTime

gc1-c001.mwt2.org  LINUX      INTEL  Owner     Idle     0.000   503  0+00:10:10
gc1-c002.mwt2.org  LINUX      INTEL  Owner     Idle     0.000   503  0+00:05:10

                     Total Owner Claimed Unclaimed Matched Preempting Backfill

         INTEL/LINUX     2     2       0         0       0          0        0

               Total     2     2       0         0       0          0        0
</pre>
If there are no resources advertising their presence, =condor_status= will quit without printing any message. This does not mean that Condor is not installed correctly. Try =condor_status -negotiator= if you are on the headnode. If Condor collector and negotiator are running on the headnode Condor starter is running on worker nodes but they are not reporting to the headnode, there may be a network problem (check the firewall) or they may be part of a different domain (check the =DOMAIN_NAME= in the configuration file).


To test condor you have to create  a submit file (=mytest.submit=) and submit a job.
   * submit file:<pre>
#  A test Condor submission file - mytest.submit
executable = /bin/hostname
universe = vanilla
log = test.log
output = test.out
error = test.err
queue
</pre>
   * Submit with:<pre>
condor_submit mytest.submit
</pre>
   * Check the jobs:<pre>
condor_q
</pre>
   * Inspect the files test.log/out/err. You can submit more than one test job. A different test can have =transfer_executable=true=.

---+++ A CPU intensive test
Here is a condor test to submit 20 CPU intensive jobs.
   * submit file (save it as =mytestcpu.sub=):<pre>
########################
# Submit description file for CPU test program
########################
Executable     = /home/gsadmin/use-processor.pl
# should_transfer_files  can be YES NO IF_NEEDED
should_transfer_files = YES
# when_to_transfer_output  can be ON_EXIT ON_EXIT_OR_EVICT 
when_to_transfer_output = ON_EXIT
Universe       = vanilla 
Output         = cputest.$(Process).out
Error          = cputest.$(Process).err
Log            = cputest.$(Process).log 
Queue 20
</pre>
   * Download the attached file [[%ATTACHURL%/use-processor.pl.txt][use-processor.pl]] and save it in =/home/gsadmin/= and make it executable, e.g. if you have wget: <pre>
wget --no-check-certificate https://twiki.grid.iu.edu/twiki/pub/ReleaseDocumentation/ClusterCondorInstall/use-processor.pl.txt
cp use-processor.pl.txt /home/gsadmin/use-processor.pl
chmod a+x /home/gsadmin/use-processor.pl
</pre>
   * Submit with:<pre>
condor_submit mytestcpu.sub
</pre>
   * Check the jobs:<pre>
condor_q
</pre>
   * Inspect the files =cputest.XX.log/out/err=, where XX is a number from 1 to 20. 

---++ More information
   * Examples running Condor jobs: http://www.cs.wisc.edu/condor/quick-start.html


%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.MarcoMambelli - 24 Nov 2009 %BR%
%REVIEW%

---++ *Comments*
| &#34;If you copied the condor.sh and condor.csh files in /etc/profile.d/ as described above, Condor will be in the environment of every user automatically, no need to source any file. &#34;   is not described above. | Main.JamesWeichel | 01 Dec 2009 - 22:33 |
%COMMENT{type="tableappend"}%
   * [[%ATTACHURL%/use-processor.pl.txt][use-processor.pl.txt]]: perl script to stress CPU

%META:FILEATTACHMENT{name="use-processor.pl.txt" attachment="use-processor.pl.txt" attr="" comment="perl script to stress CPU" date="1259090903" path="use-processor.pl" size="508" stream="use-processor.pl" tmpFilename="/usr/tmp/CGItemp13124" user="MarcoMambelli" version="1"}%
