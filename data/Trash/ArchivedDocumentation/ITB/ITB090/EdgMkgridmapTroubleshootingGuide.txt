%META:TOPICINFO{author="KyleGross" date="1328026172" format="1.1" version="1.16"}%
%META:TOPICPARENT{name="Trash/TroubleshootingComputeElement"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ Introduction
This document is intended to provide assistance in troubleshooting problems  related to use of the =edg-mkgridmap= script used to maintain the CE host grid-mapfile, if this mode of authorization is used (so-called "Local" and "Compatibility" modes).  Note that =edg-mkgridmap= only polls VOMS servers. 

---++ Error code 64
This type of error generally occurs when the VOMS server cannot find the requested group or subgroup.  Contact with the VOMS server was made and it is really a 'not found' type error.  It is caused by a bad entry in the =edg-mkgridmap.conf= file.

The example below is attempting to access all members of  the uscms VO belonging to the /uscms/production group.

Configuration file =VDT_LOCATION/edg/etc/edg-mkgridmap.conf= entry:<br>
<pre class="programlisting">
 group vomss://voms.fnal.gov:8443/voms/uscms/production uscms01
</pre>

Command run on CE node:
<pre class="screen">
 > <b>source $VDT_LOCATION/setup.(c)sh </b>
 > <b>cd $VDT_LOCATION/edg/sbin </b>
 > <b>./edg-mkgridmap </b>
   <i>... output....
  voms search(https://voms.fnal.gov:8443/voms/uscms/production/services/VOMSAdmin?method=listMembers): /voms/uscms/production/services/VOMSAdmin

   Exit with error(s) (code=64)</i>
</pre>

On the VOMS host you are attempting to access, the following error can be seen in the =TOMCAT_LOCATION/logs/voms-admin.VO_NAME.log=

<pre class="programlisting">
2005-05-26 15:51:04,003 INFO  [Ajp13Processor[8892][1]]  Connection from "131.225.82.73" by 
        /DC=org/DC=doegrids/OU=Services/CN=ce_host (serial 4511) -  service.InitSecurityContext
2005-05-26 15:51:04,004 INFO  [Ajp13Processor[8892][1]]  listMembers ("/uscms/production") -  admin.VOMSAdminSoapBindingImpl
2005-05-26 15:51:04,013 ERROR [Ajp13Processor[8892][1]]  org.edg.security.voms.service.NotInDatabase: 
       Not in database: group "/uscms/production" -  connection.Database
 </pre>

---++ Useful Options for edg-mkgridmap troubleshooting
   
   * [--help] 
   * [--version] 
   * [--conf=config_file]  Default configuration file is at $VDT_LOCATION/edg/etc/edg-mkgridmap.conf
   * [--output[=output_file]] 
   * [--verbose]


%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.RobQ - 18 Oct 2007 %BR%
%REVIEW% Main.RobQ - 13 Jun 2008

%REVFLAG% %Y% %BR%

<!-- Main.JohnWeigand - 26 May 2005 %BR%
Main.JohnWeigand - 13 Jan 2006  %BR%
 Main.RobQ - 01 May 2006  %BR%
-->

%META:TOPICMOVED{by="ForrestChristian" date="1166047098" from="Integration.EdgMkgridmapTroubleshootingGuide050" to="Integration/ITB_0_5.EdgMkgridmapTroubleshootingGuide"}%
