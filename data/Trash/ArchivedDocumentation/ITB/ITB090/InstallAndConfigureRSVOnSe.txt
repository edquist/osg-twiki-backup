%META:TOPICINFO{author="RobGardner" date="1213130873" format="1.1" version="1.6"}%
---+ Install and Configure RSV on OSG SEs
%TOC%

%STARTINCLUDE%
%BR%
---+ Install and Configure RSV on OSG SEs
%EDITTHIS%
%BR%


---++ RSV background

<p> The OSG-RSV package, by default, is installed along with the OSG CE but not fully configured. However, it does not come by default with any of the OSG Storage element packages. You'll have to install it separately, preferably in a directory different from the SE itself (if you got it via VDT using pacman). You can check by running =vdt-version= command, and looking for =OSG-RSV=.

Starting with VDT 1.10.0 (OSG CE 0.9.0 and above), unless VDTSETUP_NO_CONDOR_CRON is set to 1, RSV will always include a minimal Condor package called condor-cron that is used to schedule RSV probes and such. 

---++ Get !RSV package if you don't have it on your SE probes:

<p> If you !SE runs on a node that is also an OSG-CE then you likely have the OSG-RSV package. if so, skip along to the next section.

<p>If you don't have !RSV, then get it using pacman.

<pre class="screen"> . /path/to/pacman-3.20-or-greater/
 export=RSV_LOCATION=/new/path/rsv/different/from/other/VDT/installations
 mkdir ${RSV_LOCATION}
 cd ${RSV_LOCATION}
 pacman -get http://vdt.cs.wisc.edu/vdt_1100_cache:OSG-RSV
 . ${RSV_LOCATION}/setup.sh</pre>

<p> Once downloaded, additional configuration steps are necessary as documented below.


%INCLUDE{"MonitoringInformation/ShouldIUserServiceCert"}%

---++ RSV configuration steps

%INCLUDE{"MonitoringInformation/PreConfigCheckListRsv"}%

---+++ !RSV running on a storage element door that runs on an OSG-CE node 

<p> If your storage element door runs on an OSG-CE node, then you can configure !RSV using the OSG wide =configure_osg.py= script, and its associated =config.ini= file. If that is *not* the case, then skip along to the next section.

If that is indeed the case, then you can  edit the [RSV] section in the =config.ini= -- the section is self-explanatory; each option is commented upon in detail. Or you can also refer to the [[https://twiki.grid.iu.edu/twiki/bin/view/Integration/ITB090/ConfigurationFileHelp#Introduction_to_RSV_Section][[RSV section of the !ConfigureFileHelp twiki page]].

<pre class="screen">[RSV]
 . . . 
enabled = True
 . . . 
rsv-user = rsvuser
 . . . </pre>

---+++ !RSV running on a storage element door that is independent of an OSG-CE node 
%INCLUDE{"MonitoringInformation/ConfigureRsvV2AdvSeSrmServcertNogums"}%

%INCLUDE{"MonitoringInformation/ConfigureRsvV2AdvSeBestmanServcertNogums"}%

<p> If you're running your storage element door on an OSG CE node, then you can mix the above switches with other CE based switches like =--ce-probes=, etc. 
%INCLUDE{"MonitoringInformation/StartRsvV2"}%

%INCLUDE{"MonitoringInformation/ValidateRsvV2Configuration"}%

---++ If you already have an Apache server running on your the machine you install !RSV on 
 <p> If you already have an Apache server running on your the machine you install !RSV on, then certain tweaks are necessary to use that to serve !RSV local result web pages. 
 <p> Create an alias inside your httpd.conf to point to =$RSV_LOCATION/osg-rsv/output/html= if that happens to be the case, and restart your Apache. 
 <p> Also do not forget to disable the additional Apache service that comes with the !OSG-RSV package by doing: <tt> . ${RSV_LOCATION}/setup.sh; vdt-control --off apache; vdt-control --disable apache</tt>.

<p> Comment from Arvind: I'll add more precise information on this after May 19th when I return from vacation. Thanks for your patience.

<!--      More information on this  is [[http://rsv.grid.iu.edu/documentation/vdt-1.10.1-package.html#start_rsv][available here]]. -->

<p><br>


%STOPINCLUDE%
%BR%
%COMPLETE2% %BR%
%RESPONSIBLE%  Main.ArvindGopu - 09 May 2008 %BR%
%REVIEW% Main.XinZhao, Main.WeiYang  -  30 May 2008 %BR%
%REVCOM% Xin, Wei: can you review please?


