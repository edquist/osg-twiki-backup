%META:TOPICINFO{author="KyleGross" date="1229444353" format="1.1" version="1.6"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ OSG storage models
There are four storage models that a compute element can follow in order to provide storage that have various levels of complexity.  The models are listed below in order of increasing complexity.  

   1. Grid3 Model
   2. Modified Grid3 Model
   3. LCG Model
   4. !dCache Model

All of these models require that directories be shared between the CE and compute nodes using NFS or an equivalent file system.  

---++ Grid3 model
%WARNING% This model should not be used for production CEs.

The Grid3 model is the simplest model.  It is intended for a CE that has a few compute nodes that will be used for testing purposes.  This model requires four directories to be visible to the CE  and worker nodes.  These directories are
   * [[StorageParameterOsgGrid][$OSG_GRID]]
   * [[StorageParameterOsgApp][$OSG_APP]]
   * [[StorageParameterOsgData][$OSG_DATA]]
   * [[StorageParameterOsgWnTmp][$OSG_WN_TMP]]
A site admin can point =$OSG_DATA= and =$OSG_WN_TMP= to the same directory and use a single shared disk, we don't recommend them to do so.  

---++ Modified Grid3 model
This model takes the Grid3 model and splits the [[StorageParameterOsgData][$OSG_DATA]] into [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] directories.
   * [[StorageParameterOsgGrid][$OSG_GRID]]
   * [[StorageParameterOsgApp][$OSG_APP]]
   * [[StorageParameterOsgSiteRead][$OSG_SITE_READ]]
   * [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]]
   * [[StorageParameterOsgWnTmp][$OSG_WN_TMP]]
Please note that in this model the [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] and  [[StorageParameterOsgSiteRead][$OSG_SITE_READ]], provide write access and read access to the same logical file system.  The separation is made in order that different access methods optimized for write or read access can be used for each operation.

A dataflow example may be:
   * Site administrator's intervention or external transfer 
   * =srmcp=: $OSG_SITE_READ  &rarr;  $OSG_WN_TMP 
   * Job execution 
   * =dccp=: $OSG_WN_TMP  &rarr;  $OSG_SITE_WRITE 
   * External stage-out

---++ LCG Model
The LCG Model follows the LHC Computing Grid's (see further reading below) standard model for storage.  It associates a default storage element (SE) with the CE that can be used to stage data in and out of the CE.  This model replaces the [[StorageParameterOsgData][$OSG_DATA]] or  [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] directories with a [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]].    However, since many VO applications don't support or understand how to use a SE to stage data in or out of a site, those directories should be provided as well if your site will provide support for more than a few VOs.  The required areas in this model are
   * [[StorageParameterOsgGrid][$OSG_GRID]]
   * [[StorageParameterOsgApp][$OSG_APP]]
   * [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]]
   * [[StorageParameterOsgWnTmp][$OSG_WN_TMP]]

However, you should also provide [[StorageParameterOsgData][$OSG_DATA]] as well in order to support VO applications.

A dataflow example may be: 
   * Site admin intervention or external transfer 
   * =srmcp=: $OSG_DEFAULT_SE &rarr; $OSG_WN_TMP
   * Job execution
   * =srmcp=: $OSG_WN_TMP &rarr; $OSG_DEFAULT_SE
   * External stage-out

---++ SRM/dCache Model
The SRM/dCache model is a superset of the LCG model.  This model associates a SRM/dCache SE with the CE and provides read and write access to the SE using the srm and dcap protocols respectively.

The current SRM implemenation in !dCache doesn't allow overwriting of logical files. This guarantees that all physical file replicas of the same logical file remain the same. 

Like the LCG model, [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]] replaces the [[StorageParameterOsgData][$OSG_DATA]] or  [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] directories.  In order to support the greatest number of VOs, these directories should be provided even if they aren't in the model.  The required areas in this model are
   * [[StorageParameterOsgGrid][$OSG_GRID]]
   * [[StorageParameterOsgApp][$OSG_APP]]
   * [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]]
   * [[StorageParameterOsgWnTmp][$OSG_WN_TMP]]

However, you should also provide [[StorageParameterOsgData][$OSG_DATA]] as well in order to support VO applications.  In addition, you can provide [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] by using the srm and dcap urls to your SRM/dCache SE.

A dataflow example may be: 
   * Site administrator's intervention or external transfer 
   * Job execution (open/seek/read from $OSG_SITE_READ using dcap)
   * =srmcp=: $OSG_WN_TMP &rarr; $OSG_DEFAULT_SE
   * External stage-out

---++ Further reading
   * [[http://lcg.web.cern.ch/LCG/][LHC Computing Grid]]

%STOPINCLUDE%
%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 19 Oct 2007 %BR%
%REVIEW%

%META:TOPICMOVED{by="SuchandraThapa" date="1192824750" from="Integration/ITB_0_7.StorageModel" to="Integration/ITB_0_7.StorageModels"}%
