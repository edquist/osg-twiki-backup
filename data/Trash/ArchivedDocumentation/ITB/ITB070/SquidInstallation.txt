%META:TOPICINFO{author="BrianBockelman" date="1486495293" format="1.1" version="1.20"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

A guide to installing squid from the %CACHE% cache.

---++ Introduction

The OSG and ITB caches both provide squid pacman packages.  Squid is a web caching service that speeds up downloads from http servers by locally caching files and serving the cached files rather than retrieving the files over the internet.  Due to the disk and memory requirements for squid, the typical use case would be for squid to be installed on a single server on a cluster with CE nodes using that server to proxy http and https requests.  Tests that were done in the ITB with Squid server on the same node as the CE led to rapid crash of the CE, therefore it is strongly recommended to install the Squid server on a different node from the gatekeeper.

Squid will need to be installed as the root user and should have 2 or more gigabytes of disk space dedicated to it for caching purposes and at least 512MB of memory (1 GB or more of memory is preferable).
 

---++ Download and installation
There are several options for installing squid.  It may be available as part of your linux distribution; you may install it using vdt; or you may install it with your CE.   We will cover installing squid using vdt or as part of your CE in this documentation.  Both of these options will install squid via pacman; first [[Trash.ReleaseDocumentationPacmanInstall][install pacman]], if you have not done so already.

Install squid using the following command either in an empty directory if you are installing squid on a standalone machine or in the directory with your CE installation if you are installing it on your CE.

<pre class="screen">
# <b>pacman -get %CACHE%:squid </b>
</pre>

---++ Configuration on a standalone host

If you are installing squid on a standalone machine, you can configure and enable it by using the following commands in the directory where squid was installed.
<pre class="screen">
# <b>source setup.sh</b>
# <b>./vdt/setup/configure_squid -server y --mem-cache-size 512 --disk-cache-size 1024</b>
# <b>vdt-control --on squid</b>
</pre>

When you run =configure-osg.sh= on your CE, you should answer =y= when it asks you if squid is available and give the hostname of the host that has squid running on it.

---++ Configuration on a CE 

%IMPORTANT% This configuration is not recommended for a CE that gets more than a small amount of use.  

If you are installing squid in the same directory as your CE then, you can run =configure-osg.sh= and indicate that you have squid installed on the localhost.  The script will then ask you for the  size of the memory and disk caches and configure squid using the values that you give to the script.


%BR%
%COMPLETE1% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 18 Oct 2007 %BR%
%REVIEW% Main.AlainRoy 

%META:TOPICMOVED{by="AnneHeavey" date="1192741358" from="Integration/ITB_0_7.CESquidInstallation" to="Integration/ITB_0_7.SquidInstallation"}%
