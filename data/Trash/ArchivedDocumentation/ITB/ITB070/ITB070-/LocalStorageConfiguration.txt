%META:TOPICINFO{author="ForrestChristian" date="1189623264" format="1.1" reprev="1.19" version="1.19"}%
%META:TOPICPARENT{name="DocumentationTable"}%
%LINKCSS%

---+!! Configuring Local Storage
%TOC{ depth="3"}%

%STARTINCLUDE%
%EDITTHIS%

This document describes how a CE administrator can configure the OSG attributes, including ones referencing "CE storage", during the installation and afterwards (if he needs to change the layout of his CE). 

[[LocalStorageRequirements][Local Storage Requirements]] specifies the minimum requirements for CE local storage areas to be OSG-compliant. It is not mandatory to provide all the CE storages.  The [[http://infnforge.cnaf.infn.it/glueinfomodel/index.php/Spec/V12][GLUE documentation]] has further information, also. New resource administrators may want to read that information carefully and determine how to map those elements onto their Resource before proceeding. 


%NOTE% This document is for administrators. Users will find UsingLocalStorage more useful.


---++ Configuring the OSG Attributes
This section covers the configuration of information about your CE storage areas that you must make known to OSG. These will be published as pat of the GLUE schema using the GIP and used by other OSG applications and users submitting jobs. 

At the core is =$VDT_LOCATION/monitoring/osg-attributes.conf=, a standard configuration file that can be edited or reviewed directly. The configuration script =$VDT_LOCATION/monitoring/configure-osg.sh=  automates much of the configuration.


---+++ Gather configuration information
OSG strives to make resources available with minimal requirements; however, the grid requires certain information about files and filesystem mount points to provide a basic execution environment.  For applications to be installed and to be executed correctly, filesystem sharing and the filesystem mount points available for a cluster must be specifically coordinated. Administrators must define special directory hierarchies (mount points) and define them in the OSG environment. Many of these mount points should be available on the head / gatekeeper node and, using the exact path, on each of the worker nodes. Generally, they do _not_ have to be made available in form of a shared filesystem across the whole cluster. 

Read-only spaces can generally be provisioned with or without a shared filesystem as long as you provide consistent paths.


%STARTSECTION{ "parameters" }%



---+++ Execute the configuration script
Run the following script as root to execute the configuration script.

<pre class="screen">
$ <userinput>cd VDT_LOCATION/monitoring</userinput>
$ <userinput>./configure-osg.sh</userinput>
</pre>


---+++ Sample Output
Sample output from the =configure-osg.sh= script:  

%STARTMore%
%INCLUDE{"SampleOutputFromConfigureOsgSh" }%
%ENDMore%

=configure-osg.sh= creates =$VDT_LOCATION/monitoring/osg-attributes.conf=, and =grid3-info.conf= which is a link to it.  The script also creates =$VDT_LOCATION/monitoring/osg-job-environment.conf= which duplicates some of the attributes from =$VDT_LOCATION/monitoring/osg-attributes.conf= so that they can be palced in the job environment as well as in  =$VDT_LOCATION/monitoring/osg-local-job-environment.conf=. This file allows site administrators to set site-specific environment variables that should be present for jobs that are running on the cluster. It is also used by several monitoring services and applications to obtain basic information about your resource configuration. 

%IMPORTANT% =$VDT_LOCATION/monitoring/osg-local-job-environment.conf= is *required* to be readable from that location for OSG CEs.

You can choose the information service(s) to advertise this information. Configuring some of the more popular information services is described below.


---++ Reconfiguring an Existing OSG Site
Reconfigure you previously installed OSG site by editing =osg-attributes.conf=, or by rerunning the =configure-osg= script.


---++ Local CE Storage Areas 
The following sections describe the different storage areas that may be declared local to a CE. Each section includes:

   * Description
   * Use cases (informal)
   * Notes 

---+++ $OSG_LOCATION
%INCLUDE{ "AboutStorageAreaOsgLocation" }%


---+++ $OSG_GRID
%INCLUDE{ "AboutStorageAreaOsgGrid" }%


---+++ $OSG_APP
%INCLUDE{ "AboutStorageAreaOsgApp" }%


---+++ Data Directories ( =OSG_DATA= __or__ =OSG_SITE_READ= & =OSG_SITE_WRITE=)
%INCLUDE{ "AboutStorageAreaDataDirectories" }%

---+++ $OSG_DATA
%INCLUDE{ "AboutStorageAreaOsgData" }%


---+++ $OSG_SITE_READ
%INCLUDE{ "AboutStorageAreaOsgSiteRead" }%

---+++ $OSG_SITE_WRITE
%INCLUDE{ "AboutStorageAreaOsgSiteWrite" }%

---+++ $OSG_WN_TMP
%INCLUDE{ "AboutStorageAreaOsgWnTmp" }%

---+++ $OSG_DEFAULT_SE
%INCLUDE{ "AboutStorageAreaOsgDefaultSe" }%

%ENDSECTION{ "parameters"}%


---++Examples
These examples make assumptions about relationships between what is visible to the jobs running inside the CE and what is available from the outside (e.g., through a Storage Element or !GridFTP server) for staging operations. Your configuration may differ considerably.

   * [[InstallingCompleteOSGSiteOnSingleComputer][Installing a Complete OSG Site on a Single Computer]]
   * [[InstallingOSGInMinimalSuggestedConfiguration][Installing OSG in the Suggested Minimal Configuration]]
   * [[InstallingOSGOnSingleHeadnodeCluster][Installing OSG on a Single Headnode Cluster]]
   * [[InstallingOSGWithSRMbasedCE][Installing OSG with an SRM-based CE]]


---++ Configuring the Generic Information Provider (GIP)
See [[GenericInformationProviders][Generic Information Providers]].

%STOPINCLUDE%

%BOTTOMMATTER%
-- Main.MarcoMambelli - 11 Nov 2005 %BR%
-- Main.FkW - 25 Apr 2006 %BR%
-- Main.RobQ - 01 May 2006 %BR%
-- Main.ForrestChristian - 06 Nov 2006 (editing only) %BR%
-- Main.ForrestChristian - 10 Nov 2006  %BR%
 %BR%
 %BR%

%META:TOPICMOVED{by="ForrestChristian" date="1164649583" from="Integration/ITB_0_5.ConfiguringLocalStorage" to="Integration/ITB_0_5.LocalStorageConfiguration"}%
