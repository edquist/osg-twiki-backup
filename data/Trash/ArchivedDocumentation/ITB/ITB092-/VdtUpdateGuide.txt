%META:TOPICINFO{author="SuchandraThapa" date="1201753892" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction
This guide provides information on updating an existing OSG install to a new vdt letter releases (1.8.1a, 1.6.1q).

---++ Scope 
This page is intended to cover letter releases within an existing OSG/VDT release.  E.g. an update from OSG 0.8.0/VDT 1.8.1 to OSG 0.8.0/VDT 1.8.1a .  These updates are made periodically to fix security issues, bugs, and update configuration information in an existing OSG release.

---++ Update Procedure
The following directions should be done before every update:
    * =cd $VDT_LOCATION=
    * =. setup.sh=
    * =vdt-control --off= -- To turn off active services
    * =cp -pr $VDT_LOCATION BACKUP_LOCATION=, replace =BACKUP_LOCATION= with an directory to store a backup of your existing installation

Then pacman should be used to update each package in the update.  %RED%*Note: do not run a =pacman -update= since this may leave your install in a non-functional state*%ENDCOLOR%.   You will need to read the update notice to find out the which packages in the update is applicable and then issue a =pacman -update PACKAGE= (e.g. =pacman -update GUMS=) for each applicable package.  %RED%*You may need to take additional steps as outlined in the update notice to complete the update*%ENDCOLOR%


---++ Recovering from a failed update
If the update fails or the update causes problems, you can revert back to the pre-update state by first running =vdt-control --off= to shut down the services.  Then copy the files from =BACKUP_LOCATION= to =$VDT_LOCATION= and then doing a =. $VDT_LOCATION/setup.sh= followed by a =vdt-control -off=.  This should get you back to the pre-update state.
       
---++ Known Problems
Due to a limitation in the way that pacman works, the current version returned by =vdt-version= after an update is run will be the latest update version (e.g. VDT 1.8.1h) regardless of whether packages from that version have been updated.  E.g. if VDT 1.8.1a only updated squid and VDT 1.8.1b only updated GUMS, then after running =pacman -update squid=, =vdt-version= will return VDT 1.8.1b.

%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 18 Oct 2007 %BR%
%REVIEW% Main.AlainRoy - 20 Nov 2007

