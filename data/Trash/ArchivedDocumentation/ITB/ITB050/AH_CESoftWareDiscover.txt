%META:TOPICINFO{author="AnneHeavey" date="1177710926" format="1.1" version="1.1"}%
%LINKCSS%


---++ Discover which version of the OSG Software Stack you've installed.
<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>./osg-version </b>
OSG 0.6.0
</pre>

---+++ Discovering exactly what software has been installed
<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>vdt-version </b>
You have installed a subset of VDT version 1.6.1a:
    Apache HTTPD 2.2.3
    gLite CEMon Server (INFN release from 2006-05-19, plus RAW dialect) 1.7.1
    CA Certificates v21 (includes IGTF 1.11 CAs)
    EDG Make Gridmap 2.8.1
    Fetch CRL 2.6.2
    Generic Information Provider 1.0.15 (Iowa 15-Feb-2006)
    Globus Toolkit, pre web-services, client 4.0.3
    Globus Toolkit, pre web-services, server 4.0.3
    Globus Toolkit, web-services, client 4.0.3
    Globus Toolkit, web-services, server 4.0.3
    GLUE Schema 1.2 draft 7
    GPT 3.2
    Gratia Condor Probe 0.12i-1
    Java SDK 1.4.2_12
    KX509 20031111
    Logrotate 3.7
    MonALISA 1.6.8
    MyProxy 3.6
    MySQL 4.1.21
    MySQL JDBC Driver 5.0.4
    PPDG Cert Scripts 2.1
    PRIMA Authorization Module 0.5
    PRIMA Authorization Module For GT4 Web Services 0.1.2
    RLS, client 3.0.041021
    Apache Tomcat 5.0.28
    UberFTP 1.22
    VDS Worker Package 1.4.7
    Wget 1.10.2
</pre>


---+++ Finding all services that are part of your install

You can use the =vdt-control= command to see all services that are installed as part of the install, and whether or not they are enabled or disabled. For example:

<pre class="programlisting">
> <b>vdt-control --list </b>
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
gris               | init   | do not enable
globus-gatekeeper  | inetd  | enable
gsiftp             | inetd  | enable
mysql              | init   | enable
globus-ws          | init   | enable
edg-mkgridmap      | cron   | do not enable
gums-host-cron     | cron   | enable
MLD                | init   | enable
apache             | init   | enable
tomcat-5           | init   | enable
condor             | init   | enable
gratia-condor      | cron   | enable
</pre>

For debugging purposes _only_, you can look at =$VDT_LOCATION/vdt/services/state=. This file is automatically generated and should _not_ be edited by hand. It contains all the information used by vdt-control to start and stop services in the VDT. 

Below we break down the services that you can expect to be on your system. All of these are listed by =vdt-control=: they are broken down here in order to give you more information.

---+++ The xinetd services that are included
Two services are run via xinetd:
| *Service* | *Description* |
| gsiftp | !GridFTP |
| globus-gatekeeper | The GRAM 2 (pre-web services) interface |

---+++ /etc/services
Two entries have been appended to your =/etc/services= file:
| *Service* | *Port* |
| gsiftp | 2881/tcp | 
| globus-gatekeeper | 2119/tcp |

---+++ The init.d services that are included
| *Service* | *Description* |
| globus-ws | Globus web services |
| mysql     | used by globus-ws |
| condor    | setup optionally by ManagedFork |
| MLD       | MonALISA - setup optionally by configure-osg.sh |
| tomcat-5  |  used by CEMon and BDII and optionally globus-ws |
| apache    | In front of Tomcat |


---+++ Cron jobs
Some cron jobs are installed with random times. Look at =crontab -l= to see which ones you have. Likely candidates are:

| *Cron Job* | *Description* |
| fetch-crl | Update the certificate authority revocation lists. Verify importation for security purposes |
| vdt-rotate-logs | Rotate log files periodically, to keep them from growing too large |
| gums-host-cron | If you use GUMS, generate the osg-user-vo-map.txt file | 
| gratia-condor | Report accounting data from Condor | 
| gratia-pbs-lsf | Report accounting data from PBS or LSF |

An example crontab file:
<i>root</i> cron
<pre class="programlisting">
36 4 * * * /storage/local/data1/osg-ce/fetch-crl/share/doc/fetch-crl-2.6.2/fetch-crl.cron
0 0 * * * /storage/local/data1/osg-ce/vdt/bin/vdt-rotate-logs
27 4,10,16,22 * * * /storage/local/data1/osg-ce/gums/bin/gums-host-cron
6,16,26,36,46,56 * * * * /storage/local/data1/osg-ce/gratia/probe/condor/condor_meter.cron.sh &gt; /storage/local/data1/osg-ce/gratia/var/logs/gratia-probe-condor.log 2&gt;&1
</pre>

---+++ Log file rotation
The following are the log files that are configured for rotation with the installation in 
=$VDT_LOCATION/vdt/etc/vdt.logrotate=:

<pre class="programlisting">
# Rotate daily
daily
# Keep a week's worth
rotate 7
# Compress old files
compress
compressoptions -9f
# Truncate, instead of moving, files to avoid problems with apps
copytruncate
# Just ignore it if they're not there
missingok
# Rotate these files
/storage/local/data1/osg-ce/globus/var/grid-info-system.log {}
/storage/local/data1/osg-ce/globus/var/accounting.log {}
/storage/local/data1/osg-ce/globus/var/globus-gatekeeper.log {}
/storage/local/data1/osg-ce/globus/var/log/gridftp.log {}
/storage/local/data1/osg-ce/globus/var/log/gridftp-auth.log {}
/storage/local/data1/osg-ce/apache/logs/access_log {}
/storage/local/data1/osg-ce/apache/logs/error_log {}
/storage/local/data1/osg-ce/apache/logs/mod_jk.log {}
/storage/local/data1/osg-ce/apache/logs/ssl_request_log {}
/storage/local/data1/osg-ce/tomcat/v5/logs/catalina.out {}
</pre>

%STOPINCLUDE%
%BOTTOMMATTER%
%BOTTOMMATTER%

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
- Main.RobQ - 01 May 2006<br>
- Main.JohnWeigand - 05 Sep 2006 - updated for OSG 0.5.0 <br>
- Main.JohnWeigand - 05 Oct 2006 - updated for OSG 0.5.1 <br>
- Main.JohnWeigand - 22 Jan 2007 - updated for OSG 0.5.2 <br>
- Main.JeffPorter - 06 Jan 2007 -  minor text updates <br>
- Main.AlainRoy - 22 Feb 2007 - lots of text updated for clarity %BR%

-- Main.AnneHeavey - 27 Apr 2007
