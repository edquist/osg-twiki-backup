%META:TOPICINFO{author="KyleGross" date="1225985924" format="1.1" version="1.6"}%
%META:TOPICPARENT{name="VomsWhatToDo"}%
%LINKCSS%

---+!!<nop>OSG VirtualOrganizations/VOInfoMS  Installed Software
%TOC%
%STARTINCLUDE%

---++ VirtualOrganizations/VOInfoMS Installed Software
%EDITTHIS%

When you install the VirtualOrganizations/VOInfoMS node, it comes with quite a bit of software. It includes:

   * Globus, which includes:
      * GPT
   * Tomcat & Apache
   * Fetch CRL
   * Java
   * CA certificates
   * !MySql (for VirtualOrganizations/VOInfoMS)
   * VirtualOrganizations/VOInfoMS 

The rest of this section will help you learn how to find out the details for yourself.

---+++ Discovering which version of the OSG Software Stack you've installed.
<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>./osg-voms-version </b>
VOMS 1.6.16.10 deployed with OSG 0.5.2
</pre>

---+++ Discovering exactly what software has been installed
<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>vdt-version </b>
You have installed a subset of VDT version 1.6.1a:
    Apache HTTPD 2.2.3
    CA Certificates v21 (includes IGTF 1.11 CAs)
    Fetch CRL 2.6.2
    GPT 3.2
    Java SDK 1.4.2_12
    Logrotate 3.7
    MySQL 4.1.21
    Apache Tomcat 5.0.28
    VOMS 1.6.16.10
    VOMS Admin (client 1.2.13, interface 1.0.3, server 1.2.15) 1.2.15-0
</pre>

---+++ Finding all services that are part of your install
You can use the =vdt-control= command to see all services that are installed as part of the install, and whether or not they are enabled or disabled. For example:

<pre class="screen">
> vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
mysql              | init   | enable
vdt-rotate-logs    | cron   | enable
apache             | init   | enable
tomcat-5           | init   | enable
voms               | init   | enable
</pre>

For debugging purposes _only_, you can look at =$VDT_LOCATION/vdt/services/state=. This file is automatically generated and should _not_ be edited by hand. It contains all the information used by vdt-control to start and stop services in the VDT. 

Below we break down the services that you can expect to be on your system. All of these are listed by =vdt-control=: they are broken down here in order to give you more information.

---+++ The init.d services that are included
The services installed and enabled are:
| *Service* | *Description* |
| apache | In front of tomcat |
| tomcat-5 | used by VirtualOrganizations/VOInfoMS WEB UI |
| mysql | Used by VirtualOrganizations/VOInfoMS |
| voms |  this is the voms server that services =voms-proxy-init= requests |

In addition, during the installation, a test VirtualOrganizations/VOInfo called =VDT= will be created  if  your host certificate is available before you install.  If the host certificate is not available, configuration of the =VDT= VirtualOrganizations/VOInfo will have to be performed separately.

---+++ Cron jobs
Some cron jobs are installed with random times. Look at =crontab -l= to see which ones you have. Likely candidates are:

| *Cron Job* | *Description* |
| fetch-crl | Update the certificate authority revocation lists. Verify importation for security purposes |
| vdt-rotate-logs | Rotate log files periodically, to keep them from growing too large |

An example crontab file:
<i>root</i> cron
<pre class="programlisting">
41 0 * * * /usr/local/osg-voms/fetch-crl/share/doc/fetch-crl-2.6.2/fetch-crl.cron
0 0 * * * /usr/local/osg-voms/vdt/bin/vdt-rotate-logs
</pre>

---+++ Log file rotation
The following are the log files that are configured for rotation with the installation in 
=$VDT_LOCATION/vdt/etc/vdt.logrotate=:

<pre class="programlisting">
# Rotate daily
daily
# Keep a week's worth
rotate 7
# Compress old files
compress
compressoptions -9f
# Truncate, instead of moving, files to avoid problems with apps
copytruncate
# Just ignore it if they're not there
missingok
# Rotate these files
/usr/local/osg-voms/apache/logs/access_log {}
/usr/local/osg-voms/apache/logs/error_log {}
/usr/local/osg-voms/apache/logs/mod_jk.log {}
/usr/local/osg-voms/apache/logs/ssl_request_log {}
/usr/local/osg-voms/tomcat/v5/logs/catalina.out {}
<i>*** there will be one of the followoing for each VO you configure ***</i>
/usr/local/osg-voms/glite/log/voms.VDT ()
/usr/local/osg-voms/tomcat/v5/logs/voms-admin.VDT.log {}
</pre>



%STOPINCLUDE%

%BOTTOMMATTER%
-- Main.JohnWeigand - 16 Feb 2007 - new INCLUDE%BR%
-- Main.JohnWeigand - 27 Feb 2007 - made consistent with the CE version