%META:TOPICINFO{author="KyleGross" date="1225985924" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="VomsWhatToDo"}%
%LINKCSS%


---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

%STARTINCLUDE%
---++ VirtualOrganizations/VOInfoMS Shutdown Guide
%EDITTHIS%

In VDT 1.6.1 and later, all services (=/etc/init.d=, =/etc/xinetd.d=, =cron=) should be turned on/off using the =$VDT_LOCATION/vdt/sbin/vdt-control= script.  This section will provide just a general overview. There is a <i>man</i> page available for the script, just type =man vdt-control=. You can also <a href="http://vdt.cs.wisc.edu/releases/1.6.1/man/vdt-control.html"> read the man page online</a>.

To view all services controlled by <i>vdt-control</i>:
<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>vdt-control --list </b>
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
mysql              | init   | enable
vdt-rotate-logs    | cron   | enable
apache             | init   | enable
tomcat-5           | init   | enable
voms               | init   | enable
</pre>

To shutdown <em>all</em> services:

<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>vdt-control --off </b>
</pre>

To shutdown <b>individual</b> services:

<pre class="screen">
&gt; <b>source $VDT_LOCATION/setup.sh </b>
&gt; <b>vdt-control --off  Service </b>
</pre>

To shutdown the VirtualOrganizations/VOInfoMS server for an individual VirtualOrganizations/VOInfo and leave others up, you will need to use the =/etc/init.d= service directly.  The =vdt-control= script starts/stops =ALL= VirtualOrganizations/VOInfo servers.
<pre class="screen">
> <b>service voms stop VO_NAME</b>
</pre>


---+++/etc/init.d services
For =/etc/init.d= services, the script will be removed from the directory and the service will be stopped.

---+++crontabs
For =root= cron entries, the entry will be removed from the crontab.

---+++ VDT 1.6.0 and earlier

Earlier versions of the VDT did not contain the ==vdt-control== script.  For these earlier versions of the VDT, it is necessary to stop the services by manually running the ==/etc/init.d== control scripts.  Some or all of the following will need to be run depending on what was installed on the system:

<pre class="screen">
> <b>service tomcat-5 stop </b>
> <b>service apache stop </b>
> <b>service voms stop </b>
> <b>service mysql stop </b>
> <b>service edg-crl-upgraded stop </b>
</pre>





%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.JohnWeigand - 27 Feb 2007