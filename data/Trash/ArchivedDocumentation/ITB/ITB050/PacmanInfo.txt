%META:TOPICINFO{author="KyleGross" date="1329928728" format="1.1" version="1.21"}%
%LINKCSS%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->


%TOC%
%STARTINCLUDE%
---++ General Pacman Guide for OSG

---+++Installing and Setting Up Pacman
%EDITTHIS%

[[http://physics.bu.edu/pacman/][Pacman]] is a package management tool that allows you to define, install, and configure software. Different versions of OSG require different versions of Pacman: the newer the OSG software version, the newer the release of Pacman required.

| *OSG/ITB release* | *Pacman version* |
| OSG 0.6.0 | 3.19 |
| OSG 0.5.2 | 3.19 |
| OSG 0.4.1 | 3.16.1 |

---++++ Download pacman tarball
1. =cd= to an install directory.

2. Get the pacman tarball:
<pre class="screen">
 > <b>wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-3.19.tar.gz</b>
</pre>

---++++ Unpack and Setup
3. Unpack the tarball:
<pre class="screen">
 > <b>tar --no-same-owner -xzvf pacman-3.19.tar.gz</b>
</pre>

4. Setup your environment:
<pre class="screen">
 > <b>cd pacman-3.19</b>
</pre>

For =sh= and =bash= shells:
<pre class="screen">
 $ <b>source setup.sh</b>
</pre>

For =csh= and =tcsh= shells:
<pre class="screen">
 % <b>source setup.csh</b>
</pre>

---+++ Installing OSG software using Pacman
These are general instructions for installing software from a Pacman cache.
<pre class="screen">
 > <b>mkdir INSTALLATION_DIRECTORY</b>  <em># e.g. /usr/local/osg</em>
 > <b>cd INSTALLATION_DIRECTORY</b>
 > <b>pacman -get ITB:PACKAGE_NAME</b>  <em># e.g. ce (for ITB)</em> 
 > <b>pacman -get OSG:PACKAGE_NAME</b>  <em># (for production)</em> 
</pre>

Note that you can skip the questions on whether to trust the various pacman caches by saying
<pre class="screen">
 > <b>pacman -trust-all-caches ....</b>
</pre>

---+++ Troubleshooting pacman

---++++ During installation
As you install, monitor the $VDT_LOCATION/vdt-install.log.  

   * If pacman tries to retrieve something from a website that's having problems, you'll get an error message that's unrelated to the real problem because pacman can't recognize 404 errors when downloading tarballs.  For example, when the PRIMA download site was down, it told us the file wasn't in the correct format:
<pre>
vdt-untar is untarring prima-0.3.x86_rh_9.tar.gz
gzip: stdin: not in gzip format 
</pre>

---++++ Unsupported Platforms
If you get an error message indicating ".....is not yet supported", you may need to specify the pacman command with the following argument:
<pre class="screen">
 > <b>pacman -pretend-platform:<em>[PLATFORM]</em> -get ITB:ce</b>
</pre>

%RED%Siddhartha said the colon in previous command didn't work; command ok without colon%ENDCOLOR%
where =<em>[PLATFORM]</em>= is your platform (e.g., =RHEL-3=).

To see a list of the defined pacman platforms (not all of which are yet supported), execute:

<pre class="screen">
 > <b>pacman -platforms</b>
</pre>


---++++ setup.sh issues
Pacman normally removes =setup.sh= at the start of an installation and, if successful, restores the file. The VDT grid middleware will fail to work if the setup.sh script is unavailable.

*To allow out of date setup scripts to remain during installation or updates:*

<pre class="screen">
 > <b>pacman -allow save-setup</b>
</pre>

*To attempt recovery of the setup.sh file:*
<pre class="screen">
 > <b>pacman -setup</b>
</pre>

 
---++++ Removing packages with pacman
If you installed a package that you may later have deemed unnecessary, you can remove it by issuing the pacman command with the remove option.

<pre class="screen">
 > <b>pacman -remove <em>package_name</em></b>
</pre>

For details on these commands, see the [[http://physics.bu.edu/pacman][Pacman home page]].

%STOPINCLUDE%

<hr/>
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.ForrestChristian - 30 Jan 2007: copyedits<br>
-- Main.AlainRoy- 22 Feb 2007: Minor edits

<!-- This INCLUDE produces a WHU cross-reference for this topic -->
%WHU%

%META:TOPICMOVED{by="ForrestChristian" date="1166056473" from="Integration.PacmanInfo050" to="Integration/ITB_0_5.PacmanInfo"}%
