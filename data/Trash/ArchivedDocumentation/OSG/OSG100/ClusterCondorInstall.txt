%META:TOPICINFO{author="RobGardner" date="1256359874" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="GridColombiaWorkshop2009"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction

We will use the stable release of Condor (7.2.4).  It will be installed on the node which will serve as the Condor *master*, and *the installation will be shared to all other nodes using the tar file*.  (*what does this mean?*)

Some useful links:

   * http://www.cs.wisc.edu/condor/downloads-v2/download.pl
   * http://www.cs.wisc.edu/condor/manual/v7.2/3_2Installation.html

---++ Installation
From the host which will be the master, in this tutorial it will be *tg1-ce*, the same host as the compute element.  Here are the steps:
   * copy the tar file: condor 7.2.4 for RHEL 5 i386, dynamic libraries 
   * extract in /tmp/condor-src
   * install
   * configure
   * Detailed steps: <pre>cd /tmp/
mkdir condor-src
cd condor-src
tar xvzf ~/condor-7.2.4-linux-x86-rhel5-dynamic.tar.gz 
mkdir /nfs/condor/condor-7.2.4
ln -s /nfs/condor/condor-7.2.4 /nfs/condor/condor
# install condor in /opt/condor, local dir /scratch/condor, shared ~condor
./condor_install --prefix=/opt/condor --local-dir=/scratch/condor --type=manager
ls /scratch/condor/
vi /opt/condor/etc/condor_config (point to the right, moved, local config, set domain to mwt2.org)
cp /scratch/condor/condor_config.local /opt/condor/etc/
ln -s /opt/condor/etc/condor_config ~condor/condor_config
/opt/condor/sbin/condor_master
/opt/condor/sbin/condor_master_off
</pre>
   * Configure the cluster installation (local setups for all the hosts). I chose this setup because it facilitates central management. It was one of the options presented by Alain.<pre>
cd /opt/condor/etc/
cp condor_config.local condor_config.gs1-ce
cp condor_config.gs1-ce condor_config.gs1-cXXX
ln -s condor_config.gs1-cXXX condor_config.gs1-c001
ln -s condor_config.gs1-cXXX condor_config.gs1-c002
ln -s condor_config.gs1-cXXX condor_config.gs1-c003
cp condor_config.gs1-ce condor_config.gs1-cli
vi condor_config.gs1-cli  (set master, schedd)
vi condor_config.gs1-cXXX  (set master, startd)
ls /scratch/condor/
cd /scratch/condor/
mv condor_config.local was.condor_config.local </pre>

   * Create the dirs in /scratch/condor on all the nodes (making sure that execute has the right permissions =a+rwx +t=) <pre>
ls -l /scratch/condor/
total 12
drwxrwxrwt 2 condor root 4096 Oct 15 04:07 execute
drwxr-xr-x 2 condor root 4096 Oct 15 04:15 log
drwxr-xr-x 2 condor root 4096 Oct 15 04:02 spool</pre>

   * Automatic startup<pre>
vi /opt/condor/etc/examples/condor.boot  (to set the correct path of condor_master)
cp /opt/condor/etc/examples/condor.boot /etc/init.d/condor
for in in 2 3 5; do ln -s /etc/init.d/condor /etc/rc$i.d/S99condor </pre>
   * The last 2 lines above need to be executed on all the nodes.


---++ Testing the installation




%BR%
%COMPLETE1% %BR%
%RESPONSIBLE% Main.RobGardner - 23 Oct 2009 %BR%
%REVIEW%

---++ *Comments*
%COMMENT{type="tableappend"}%


<!--
   * Set USERSTYLEURL = https://twiki.grid.iu.edu/twiki/pub/ReleaseDocumentation/GridColombiaWorkshop2009/centerpageborder.css
-->