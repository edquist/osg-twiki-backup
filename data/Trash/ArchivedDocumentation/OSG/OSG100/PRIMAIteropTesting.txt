%META:TOPICINFO{author="IgorSfiligoi" date="1227034971" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="ITBTestingInstructions"}%
---+!! *<nop>%SPACEOUT{ "PRIMA interface testing" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "PRIMA interface testing" }%_
PRIMA interoprability interface tests.

%EDITTHIS%
%BR%

---++ Introduction

Starting with this version of VDT, GUMS and PRIMA can use two different ways to communicate with each other  
   * the old PRIMA legacy protocol, based on SAML v1
   * the new XACML2 protocol defined by the OSG-EGEE interoperability group

The old PRIMA legacy protocol works with all versions of GUMS, while the new XACML2 protocol works with GUMS v1.3.0 or later, and  with EGEE SCAS server.

These tests aim at verifying that both interfaces work as expected.

---++ Test PRIMA with the old GUMS

*IF* you are already running an old GUMS server ( < v1.3.0 ), perform the tests in this section to verify that  the new PRIMA module can talk to the old GUMS.
Else, skip to the next section.

Set up a compute element by following the instructions in ComputeElementInstall.
In the [[ComputeElementInstall#Configure_Globus_to_use_the_PRIM][Configure Globus to use the PRIMA callout]] section, follow the instructions for the default PRIMA interface configuration (gsi-authz.conf and prima-authz.conf).

Perform the following tests:
   * Submit a job to the gt2 gatekeeper and check the results, as explained in the [[ValidatingComputeElement#CE_GUMS_client][CE GUMS-client]] section.
   * Transfer a file and check the results, as explained in the [[ValidatingComputeElement#Simple_Test_Of_GSIFTP_Services][Simple Test Of GSIFTP Services]] section.

---++ Test PRIMA with the new GUMS

Install the new GUMS server ( >= v1.3.0 ) by following instructions at InstallConfigureAndManageGUMS. 

---+++ Test the CE using the old legacy PRIMA interface

If needed, set up a compute element by following instructions in ComputeElementInstall.
In the [[ComputeElementInstall#Configure_Globus_to_use_the_PRIM][Configure Globus to use the PRIMA callout]] section, follow the instructions for the the default PRIMA interface configuration (gsi-authz.conf and prima-authz.conf).

Perform the following tests:
   * Submit a job to the gt2 gatekeeper and check the results, as explained in the [[ValidatingComputeElement#CE_GUMS_client][CE GUMS-client]] section.
   * Transfer a file and check the results, as explained in the [[ValidatingComputeElement#Simple_Test_Of_GSIFTP_Services][Simple Test Of GSIFTP Services]] section.

---+++ Test the CE using the new XACML2 interface

Change the configuration on the Compute Element, as explained in the [[ComputeElementInstall#Using_the_new_XACML2_GUMS_interf][Using the new XACML2 GUMS interface ]] and repeat the tests:
   * Submit a job to the gt2 gatekeeper and check the results, as explained in the [[ValidatingComputeElement#CE_GUMS_client][CE GUMS-client]] section.
   * Transfer a file and check the results, as explained in the [[ValidatingComputeElement#Simple_Test_Of_GSIFTP_Services][Simple Test Of GSIFTP Services]] section.

PS: These tests should work only against the new GUMS (>= v1.3.0) server.

%STOPINCLUDE%
%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.IgorSfiligoi - 17 Nov 2008 %BR%
%REVIEW%