%META:TOPICINFO{author="JamesWeichel" date="1253907079" format="1.1" reprev="1.5" version="1.5"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<nop>%SPACEOUT{%TOPIC% Server Installation}%*
%TOC%

---++ Introduction


---++Applicable Software Versions
osg-version - %OSG_VERSION% 

vdt-version - %VDT_VERSION%( or higher); components listed below:
   * vdt-ca-manage 1.0 
   * vdt-update-certs 2.5 
   * CA Certificates 1.9 (includes IGTF 1.31 CAs)             -                   
   * EDG Make Gridmap 3.0.0
   * Fetch CRL 2.6.6
   * GPT 3.2-4.0.8p1 
   * Gratia !GridFTP Probe 1.04.4d-1
   * Grid User Management System (GUMS) Client 1.3.16
   * Java 5 SDK 1.5.0_20 
   * Logrotate 3.7 
   * PRIMA Authorization Module 0.8.4 
   * pyOpenSSL module 0.9 
   * VOMS Client 1.8.8-2p1 
   * Wget 1.11.4 
---++Engineering Considerations

---++First Time Install
---++Fresh Install Procedure
---++Update Procedure
---++Checklist
   * pacman %PACMAN_VERSION% installed at $PACMAN%PACMAN_VERSION%
   * host certificate installed in =/etc/grid-security/=
   * storage filesystem mounted on the server
   * check (and open) ports

---++ Installation Procedure
Set up pacman environment:
<pre class="screen">
source $PACMAN%PACMAN_VERSION%/setup.sh
</pre>
Set The GUMS server location if you are planning to use GUMS for authentication.
<pre class="screen"><verbatim>
export VDT_GUMS_HOST=osp3.lbl.gov
</verbatim></pre>
Create a directory where the software will be located and download it there:
<pre class="screen">
mkdir /opt/osg/osg-%OSG_VERSION%-gsiftp/
cd /opt/osg/osg-%OSG_VERSION%-gsiftp/
pacman -get %CACHE%:GridFTP
</pre>

Configure newly downloaded environment, check downloaded versions and compare with the listing above:
<pre class="screen">
source setup.sh
vdt-post-install
vdt-control --list
vdt-version
</pre>

Set up CA certificates:
<pre class="screen">
$VDT_LOCATION/vdt/bin/vdt-ca-manage setupca --location local -url osg
</pre>

Set up GUMS authorization:
<pre class="screen">
cp $VDT_LOCATION/post-install/prima-authz.conf /etc/grid-security
cp $VDT_LOCATION/post-install/gsi-authz.conf /etc/grid-security
</pre>

Enter opened portis in :
<pre class="screen">
$VDT_LOCATION/vdt/etc/vdt-local-setup.sh
</pre>

---++ Service Startup and Validation
Enable and start services:
<pre class="screen">
vdt-control --enable fetch-crl vdt-rotate-logs vdt-update-certs gsiftp gratia-gridftp-transfer gums-host-cron  
vdt-control --on
</pre>

Run =gums-host-cron= to create account-to-vo mapping and verify it looks ok:
<pre class="screen">
$VDT_LOCATION/gums/scripts/gums-host-cron --gumsdebug
ls -l /opt/osg/osg-1.2-gsiftp/osg/etc/osg-user-vo-map.txt 
</pre>
---++ Caveates/Known Issues

---++ Comments
%COMMENT{type="tableappend"}%

%STOPINCLUDE%
%BR%
%COMPLETE1% %BR%
%RESPONSIBLE% Main.IwonaSakrejda - 17 Sep 2009 %BR%
%REVIEW%
