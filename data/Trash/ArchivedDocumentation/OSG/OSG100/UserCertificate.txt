%META:TOPICINFO{author="AnneHeavey" date="1188585985" format="1.1" reprev="1.1" version="1.1"}%
%LINKCSS%

<!-- This is the default OSG Integration template. Please modify it in the sections indicated to create your topic! --> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

%STARTINCLUDE%
%EDITTHIS%
---+ Getting a PKI user certificate and preparing it for use with OSG

There are many different Certificate Authorities that OSG sites can choose to recognize.  We recommend DOEGrids, as most OSG users are eligible for this.  This is the only CA for which we document the process.  For information on others, contact your [[http://www.grid.iu.edu/osg-includes/sc.php][VO Support Center]]. 

<!-- cOr follow the instructions in [[CEConfigurePKI#Get_a_Personal_Grid_Certificate][Configuring Public Key Infrastructure]]. -->

See [[Documentation/CertificateGet][How do I get or renew a DOEGrids Digital PKI/X509 Personal Certificate?]] for instructions on obtaining one and exporting it from your browser.  When you export it, it will be in what's called "p12" format. After you export it, you'll need to copy it to your =$HOME/.globus= directory on the host on which you'll be doing OSG work.

Next, convert it to the right format for grid work. To convert it, run (replacing ={cert}= with the filename of your p12 cert file): 

<pre class="screen">
> cd $HOME/.globus
> openssl pkcs12 -in ${cert} -clcerts -nokeys -out usercert.pem
> openssl pkcs12 -in ${cert} -nocerts -out userkey.pem
</pre>
Then delete the p12 file (store it somewhere else, on a different machine for security reasons). Set permissions as follows:
<pre class="screen">
chmod go-w  usercert.pem
chmod go-rw userkey.pem
</pre>
In =$HOME/.globus= you should end up with:
<pre class="screen">
-rw-r--r--  1 root    root   1440 Aug 30 14:33 usercert.pem
-r--------  1 root    root   1176 Aug 30 14:32 userkey.pem
</pre>
---

| *Links:* | | [[Documentation/AdminDocHub][Documentation for Resource and Service Providers]]  | |  [[Documentation/WebHome][Documentation Hub]]  | |  [[DocumentationTable][Release Documentation table]] |

%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.AnneHeavey - 31 Aug 2007
