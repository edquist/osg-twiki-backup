%META:TOPICINFO{author="SuchandraThapa" date="1249428142" format="1.1" version="1.6"}%
%META:TOPICPARENT{name="Trash.ReleaseDocumentationSiteAdminsWorkshopAug09Sessions"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%


---++Introduction
This is a tutorial to demonstrate how to install and setup a basic CE installation.  It will guide users through a basic CE installation step by step.  At the completion of this guide, you should have a simple CE available.

---++Requirements
You'll need a server with the following:
   * Using a rhel 4/5 based distribution or debian 4/5
   * root access
   * ~5 GB of free space
   * internet access 
   * Server, http, and rsv certificates

You'll also need the follow:
   * Personal grid certificate

---+++ Preliminaries
---++++ Installing pacman
   * Download pacman from bu site
<pre class="screen">
[root@uct3-edge5 opt]# wget http://atlas.bu.edu/~youssef/pacman/sample_cache/tarballs/pacman-latest.tar.gz
</pre>
   *  Untar and source pacman setup
<pre class="screen">
[root@uct3-edge5 opt]# tar xzf pacman-latest.tar.gz 
[root@uct3-edge5 opt]# cd pacman-3.29/
[root@uct3-edge5 pacman-3.29]# source setup.sh
</pre>
---+++ Installing CE software
   * Create osg directory
<pre class="screen">
[root@uct3-edge5 opt]# mkdir osg-1.2
[root@uct3-edge5 opt]# cd osg-1.2/
</pre>
   * Install CE stack
<pre class="screen">
[root@uct3-edge5 osg-1.2]# pacman -allow trust-all-caches -get http://software.grid.iu.edu/osg-1.2:ce
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check...       

All prerequisite checks are satisfied.
                                                          


========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.



                                                                              
Pacman Installation of OSG-1.2.0 Complete
</pre>
   * Install managed fork
<pre class="screen">
[root@uct3-edge5 osg-1.2]# pacman -allow trust-all-caches -get http://software.grid.iu.edu/osg-1.2:ManagedFork
</pre>
   * Install jobmanager setup package
<pre class="screen">
[root@uct3-edge5 osg-1.2]# pacman -allow trust-all-caches -get http://software.grid.iu.edu/osg-1.2:Globus-Condor-Setup
</pre>

---+++ Configure CE
   * Run post-install script
<pre class="screen">
[root@uct3-edge5 osg-1.2]# vdt-post-install 
Starting...
Configuring PRIMA... Done.
Configuring EDG-Make-Gridmap... Done.
Configuring PRIMA-GT4... Done.
Completed all configuration.
</pre>
   * Setup CA certificates
<pre class="screen">
[root@uct3-edge5 osg-1.2]# vdt-ca-manage setupca --location local --url osgSetting CA Certificates for VDT installation at '/opt/osg-1.2'

Setup completed successfully.
</pre>
---++++ Modify config.ini
   * Edit =osg/etc/config.ini=
   * In =[Default]= section
      * Set =localhost= to the correct dns name for your CE (e.g. localhost = your.domain)
      * Set =admin_email= to your email address
   * In the =[Site Information]= section
      * Set =group= to OSG
      * Set =site_name= to your site's name
      * =sponsor= For this workshop, use 'osg'
      * =site_policy= A url to your site's usage policy. Example: http://www.mwt2.org/policy.html
      * =contact=, set this to your email address
      * =city=
      * =country=
      * =latitude= You can set this to 0 if you do not know your lattitude
      * =longitude= Like latitude
   * In the =[Condor]= section
      * =enabled= , change the =%(unavailable)s= to =%(enable)s=
      * =home=, set this to =/opt/osg-1.2/condor=
      * =wsgram= , change the =%(unavailable)s= to =%(enable)s=
   * In the =[ManagedFork]= section
      * =enabled= , change the =%(unavailable)s= to =%(enable)s=
      * =condor_location= , change the =%(unavailable)s= to =/opt/osg-1.2/condor=
   * In the =[Misc Services]= section
      * =use_cert_updater= , change the =%(unavailable)s= to =%(enable)s=
   * In the =[Storage]= section
      * =grid_dir= , change the =%(unavailable)s= to =/opt/wn-client=
      * =app_dir= , change the =%(unavailable)s= to =/opt/share/app=
      * =data_dir= , change the =%(unavailable)s= to =/opt/share/data=
      * =worker_node_temp= , change the =%(unavailable)s= to =/tmp=
      * =site_read= , change the =%(unavailable)s= to =/opt/share/data=
      * =site_write= , change the =%(unavailable)s= to =/opt/share/data=
   * In the  =[GIP]= section
      * Remove the =%(unavailable)s= and replace it with the correct values for the variables listed below
      * =batch= , change the =%(unavailable)s= to =condor=
   * In the  =[Subcluster CHANGEME]= section
      * Change name to =[Subcluster Main]=
      * =name=, change to =Main=
      * =node_count= , change the =NUMBER_OF_NODE= to the number of worker nodes your cluster has. For this tutorial, enter =1=
      * =ram_mb= , change the =MB_OF_RAM= to the ram that your cluster has in MB (hint: =cat /proc/meminfo=)
      * =cpu_module= , change the =CPU_MODEL_FROM_/proc/cpuinfo= to the model of your  cluster's cpus (hint: =cat /proc/cpuinfo=)
      * =cpu_vendor= , change the =VENDOR_AMD_OR_INTEL= to the vendor of your  cluster's cpus (e.g. =Intel=, =AMD=)
      * =cpu_speed_mhz= , change the =CLOCK_SPEED_MHZ= to the clock speed of your  cluster's cpus in MHz. For example, a 2.83GHz cpue runs at 2830 MHz.
      * =cpus_per_node=, change =#_PHYSICAL_CHIPS_PER_NODE= to number of chips per node (e.g. =1=)
      * =cores_per_node=, change =#_CORES_PER_NODE= to number of cores total in the node (e.g. =8= for a dual socket, quad core node)
   * In the =[RSV]= section
      * =enabled= , change the =%(unavailable)s= to =%(enable)s=
      * =rsv_user= , change the =%(unavailable)s= to name of the account that has been created for rsv ( rsv_user)
      * =enable_ce_probes= , change the =%(unavailable)s= to =%(enable)s=
      * =ce_hosts= , change the =%(unavailable)s= to =%(localhost)s=
      * =enable_gridftp_probes= , change the =%(unavailable)s= to =%(enable)s=
      * =gridftp_hosts= , change the =%(unavailable)s= to =%(localhost)s=
      * =use_service_cert= , change the =%(unavailable)s= to =%(enable)s=
      * =rsv_cert_file= , change the =%(unavailable)s= to =/etc/grid-security/rsv/rsvcert.pem=
      * =rsv_key_file= , change the =%(unavailable)s= to =/etc/grid-security/rsv/rsvkey.pem=

---++++ Run configure-osg
   * Verify configuration
<pre class="screen">

</pre>
   * Configure system
<pre class="screen">

</pre>
----+++ Turn on software
   * Run vdt-control
<pre class="screen">

</pre>

----+++ Verification
   * Run site_verify
<pre class="screen">

</pre>
   * Check rsv status
      * Go to http://your.host:8443/rsv/

---++Presentation


---++References

   1 [[WebMain][Release Documentation]]

%BR%

<!--
   * Set USERSTYLEURL = https://twiki.grid.iu.edu/twiki/pub/ReleaseDocumentation/HandsOn/centerpageborder.css
-->

%STOPINCLUDE%
%BR%
%COMPLETE1% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 22 Jul 2009 %BR%
%REVIEW% Main.RobertEngel - 24 Jul 2009 %BR%
%REVFLAG% %S%  %BR%


---++ *Comments*
%COMMENT{type="tableappend"}%