%META:TOPICINFO{author="BrianBockelman" date="1486493930" format="1.1" reprev="1.24" version="1.24"}%
%META:TOPICPARENT{name="Trash.ReleaseDocumentationComputeElementInstall"}%
---+!! *<nop>%SPACEOUT{ "Enabling Full Privilege Authentication" }%*
%TOC%

%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "Enabling Full Privilege Authentication" }%_
Enabling Full Privilege Authentication for CE Install

%BR%
%STARTINCLUDE%
---++ Enabling Full Privilege Authentication
%EDITTHIS%
*WARNING*: If any of the terms "Authorization", "Authentication", "GUMS", "grid-mapfile", or "VOMS" do not mean much to you, we highly recommend reading the [[Trash.ReleaseDocumentationAboutAuthorizationForCE][authorization for a CE]] document.  This will help you understand this critical section on security.

It is necessary to enable some mode of authentication before you can successfully run the OSG configuration script.  There is no mode of authentication that is enabled by default.  This document focuses on enabling the recommended Full Privilege Authorization mode using a GUMS server.  All OSG sites are strongly encouraged to use this mode.  There is more 
background information about the other privilege modes  at Trash.ReleaseDocumentationAboutAuthorizationForCE.   If you wish to enable a different mode, please consult [[Trash.ReleaseDocumentationCompatibilityAuthPreConfig][Compatibility authorization page]] or [[LocalAuthPreConfig][Local authorization page]].

<!--
*Meta note from Brian B*: if they don't understand this authorization mode before reading this paragraph, it is unlikely they will understand it after this paragraph.
-->
In Full Privilege mode,  the PRIMA authorization module with a GUMS service is used for all authorizations and does not use a grid-mapfile.  The Globus gatekeeper and WS-GRAM  use a callout to PRIMA such that upon receipt of each request, PRIMA forwards the request to a GUMS service which performs the dynamic mapping of the user's certificate to a local Unix account. PRIMA and GUMS can process VOMS FQAN (Fully Qualified Attribute Names), thus enabling mappings based on VO groups and roles as defined in a VOMS server.   This removes the need for maintaining a =grid-mapfile= on each gatekeeper and/or gridftp server.   

Obviously, your site must run a GUMS server in order to run in Full Privilege mode. 

*WARNING*: This section has changed significantly from OSG 1.0 to OSG 1.2.4.  In the latest version, the effort required from the sysadmin has been greatly reduced.  For brevity, the OSG 1.0 version of this documentation has been [[Trash.ReleaseDocumentationFullPrivPreConfigOsg10][factored out into a separate page]].

In OSG 1.2.4, authorization is configured in the =[Misc Services]= section of the config.ini.  There are two relevant attributes:
   * *authorization_method*: Set to the string _gridmap_, _prima_, or _xacml_.  For this authorization mode, use _prima_ or _xacml_; _xacml_ can be used for GUMS 1.3 and above; _prima_ must be used for GUMS 1.2 and below.  For the [[LocalAuthPreConfig][grid-mapfile mode]], use _gridmap_.
   * *gums_host*: Set this to the hostname of the GUMS server you use _if_ you answered _prima_ or _xacml_ above.

%STOPINCLUDE%
%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.StevenTimm - 20 May 2008 %BR%
%REVIEW% Main.JohnWeigand - 20 Jul 2009 %BR%
%REVFLAG% %S% %BR%

---++ *Comments*
| A large portion of this has become obsolete and is handled by the configure-osg script and by entries in the config.ini file... including the use of the xacml. | Main.JohnWeigand | 21 Jul 2009 - 20:01 |
%COMMENT{type="tableappend"}%
