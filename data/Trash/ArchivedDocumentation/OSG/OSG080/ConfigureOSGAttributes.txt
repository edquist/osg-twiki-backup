%META:TOPICINFO{author="KyleGross" date="1225985931" format="1.1" version="1.29"}%
%META:TOPICPARENT{name="ComputeElementInstall"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ OSG attributes
At this point, there are several OSG attributes (environmental variables) that need to be established for required and optional CE services to run effectively.   For those sites who plan to publish SRM information using their GIP, and use GUMS to do authentication, it is essential that =vdt-control --on= is run *before* the =configure-osg.sh= script is invoked, and also that the =gums-host-cron= script (see GumsHostCron) is once invoked manually.  Otherwise the =configure-osg.sh= script will error out.

---++ Setting attributes
The attributes are set by executing the =$VDT_LOCATION/monitoring/configure-osg.sh= script. This script functions in "question and answer" mode and does the following:
   * If the =OLD_VDT_LOCATION= environment variable is set and points to a previous installation of the OSG CE software stack, the =configure-osg.sh= script will attempt to get the settings from the =osg-attributes.conf= file from that installation.
   * Collects all the information described in the [[PrepareForComputeElementConfigure][CE Site Administrator Overview]]. 
   * It configures the optional <nop>MonALISA service using the <i>$VDT_LOCATION/vdt/setup/configure_monalisa</i> script.  
   * If you asked for <nop>MonALISA to be activated, an <i>/etc/init.d/MLD</i> will be added to your systems rc.d services and started.  If you did not wish <nop>MonALISA to be activated, it will still run the <i>configure_monalisa</i> script but without the option to activate it.  
   * On the first execution only, it will copy the =./monitoring/locations/grid3-locations.txt= to =$OSG_APP/etc= with  666 permissions.
   *  If you are running Squid on the same node as the CE (not recommended) it will configure squid using the configure_squid script.
   *  It will configure whatever Gratia probes have been installed.
   * It will configure WSGram if this is enabled.
   * It configures the Generic Information Providers (GIP) using the =$VDT_LOCATION/monitoring/configure-osg-gip.sh= script.  More instructions on the correct inputs to the =configure_gip= script can be found on the GenericInformationProviders page.  Note that if you add support for VirtualOrganizations/VOInfo's other than the default VirtualOrganizations/VOInfo's later, you will have to reconfigure the generic information providers at that time with the =configure-osg-gip.sh= script.

---++ Usage
The script is located in =$VDT_LOCATION/monitoring/configure-osg.sh=.

| =./configure-osg.sh= | Executes the script in question and answer mode |
| =./configure-osg.sh  --help= | Steps through the set of information to be collected |
| =./configure-osg.sh  --display= | Displays the current osg-attributes.conf attributes |
              

With each successful execution of the =configure-osg.sh= script:
   * the =osg-attributes.conf= file is updated
   * a backup of your previous =osg-attributes.conf= is saved as =osg-attributes.conf.osgsave.[n]= 

%NOTE% You can rerun the configure-osg.sh script at a later time to reconfigure your settings or if the initial configuration did not complete successfully.

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.StevenTimm - 25 Oct 2007 %BR%
%REVIEW% Main.HorstSeverini - 08 Nov 2007

%META:TOPICMOVED{by="ForrestChristian" date="1166046785" from="Integration.ConfigureOSGAttributes050" to="Integration/ITB_0_5.ConfigureOSGAttributes"}%
