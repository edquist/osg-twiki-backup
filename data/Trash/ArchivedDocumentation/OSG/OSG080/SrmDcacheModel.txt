%META:TOPICINFO{author="KyleGross" date="1225985932" format="1.1" version="1.13"}%
----+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
An explanation of the SRM/dCache model.

%EDITTHIS%
%BR%

---++ SRM/dCache Model
The SRM/dCache model is a superset of the LCG model.  This model associates a SRM/dCache SE with the CE and provides read and write access to the SE using the srm and dcap protocols respectively.

The current SRM implemenation in !dCache doesn't allow overwriting of logical files. This guarantees that all physical file replicas of the same logical file remain the same. 

Like the LCG model, [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]] replaces the [[StorageParameterOsgData][$OSG_DATA]] or  [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] directories.  In order to support the greatest number of VOs, these directories should be provided even if they aren't in the model.  The required areas in this model are
   * [[StorageParameterOsgGrid][$OSG_GRID]]
   * [[StorageParameterOsgApp][$OSG_APP]]
   * [[StorageParameterOsgDefaultSe][$OSG_DEFAULT_SE]]
   * [[StorageParameterOsgWnTmp][$OSG_WN_TMP]]

However, you should also provide [[StorageParameterOsgData][$OSG_DATA]] as well in order to support VirtualOrganizations/VOInfo applications.  In addition, you can provide [[StorageParameterOsgSiteRead][$OSG_SITE_READ]] and [[StorageParameterOsgSiteWrite][$OSG_SITE_WRITE]] by using the srm and dcap urls to your SRM/dCache SE.

A dataflow example may be: 
   * Site administrator's intervention or external transfer 
   * Job execution (open/seek/read from $OSG_SITE_READ using dcap)
   * =srmcp=: $OSG_WN_TMP &rarr; $OSG_DEFAULT_SE
   * External stage-out

---++ Example Setup
Here's an example of a typical configuration, the OSG_DATA is optional but is strongly recommended.  Likewise, the OSG_SITE_READ and OSG_SITE_WRITE should be defined as well since some VOs (e.g. CMS) check this information.
   * OSG_GRID = /share/wn 
   * OSG_APP = /share/osg/app
   * OSG_DEFAULT_SE = dcache-server.site.edu
   * OSG_WN_TMP = /scratch
   * OSG_DATA = /share/osg/data
   * OSG_SITE_READ = dcap://dcache-server.site.edu:24125//pnfs/site.edu/usr/
   * OSG_SITE_WRITE = srm://dcache-server.site.edu:8443/

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 08 Nov 2007 %BR%
%REVIEW% 
