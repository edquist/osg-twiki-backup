%META:TOPICINFO{author="KyleGross" date="1225985932" format="1.1" version="1.26"}%
%META:TOPICPARENT{name="ComputeElementInstall"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ Overview of starting services
First, you'll need to check to see if the services that you'll be turning on require certificates to operate.  If you are starting a CE, you'll need a host certificate and a http certificate.  Likewise, other services may require one or more certificates (e.g. host/http certificates for GUMS or VirtualOrganizations/VOInfoMS, etc.).  If you don't have the necessary certificates, please obtain them before you start the services.

Starting and stopping services is done via the =vdt-control= script.  This is a general description of the =vdt-control= functionality.  

---++ Starting services
When you do an installation, nothing will be running at the 
conclusion of the install. Source the =$VDT_LOCATION/setup.sh|csh= script. Then you have to run the following command as root to start things up:

<pre class="screen">
# vdt-control --on
</pre>

This will:
   * Copy files into /etc/init.d
   * Configure xinetd
   * Setup cron
   * Start up processes

If vdt-startup finds conflicts (perhaps from an old VDT install) it might decline to do some of the setup. For example, if you already have a voms service in xinetd from an old installation, it would be considered a conflict. You can force it to do the setup with:

<pre class="screen">
# vdt-control --on --force 
</pre>

Or, if there's one service, e.g., mysql, that fails, try:
<pre class="screen">
# vdt-control --off --force mysql
# vdt-control --on mysql
</pre>

---++ Shutting services off

There are several times when you might want to shut down all the services installed on your CE host.  For example, you should shut down (=vdt-control --off=) before doing a =pacman -update=:

<pre class="screen">
# <b>vdt-control --off </b>
</pre>

---++ Listing services
You can list all services with the =--list= option:

For CE  host (example configuration):
<pre>
# vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
gris               | init   | do not enable
globus-gatekeeper  | inetd  | enable
gsiftp             | inetd  | enable
mysql              | init   | enable
globus-ws          | init   | enable
edg-mkgridmap      | cron   | do not enable
gums-host-cron     | cron   | do not enable
MLD                | init   | do not enable
vdt-update-certs   | cron   | do not enable
condor-devel       | init   | enable
apache             | init   | enable
osg-rsv            | init   | do not enable
tomcat-5           | init   | enable
syslog-ng          | init   | enable
gratia-condor      | cron   | enable
</pre>

Or, for a VirtualOrganizations/VOInfoMS/VirtualOrganizations/VOInfoMRS host:

<pre class="screen">
# vdt-control --list 
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
mysql              | init   | enable
vdt-rotate-logs    | cron   | enable
apache             | init   | enable
tomcat-55          | init   | enable
tomcat-5           | init   | enable
voms               | init   | enable
vomrs              | init   | enable
</pre>

---++ =man= page

For additional information, consult the man pages for [[%VDT_DOCS_URL%/man/vdt-control.html][vdt-control]] and [[%VDT_DOCS_URL%/man/vdt-register-service.html][vdt-register-service]]. Note that you can view these commands from the command line using the man command:

<pre class="screen">
# man vdt-control 

VDT-CONTROL(8)                 VDT Documentation                VDT-CONTROL(8)
NAME
       vdt-control - Enable and disable VDT services
SYNOPSIS
           vdt-control [options] [service-name(s)]
                       --on
                       --off
                       --force
                       --no-start
                       --list
                       --hel
           Note: The optional service name(s) only apply to --on and --off.
...etc...
</pre>

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 25 Oct 2007 %BR%
%REVIEW% Main.HorstSeverini - 08 Nov 2007 %BR%
%REVCOM% Is this general in nature or CE specific?  If general, why the host cert reference. Main.JohnWeigand%BR%

<!--
Main.John Weigand - 14 Nov 2007
-->