%META:TOPICINFO{author="KyleGross" date="1225985920" format="1.1" version="1.5"}%
<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%


<!--  * Set ALLOWTOPICCHANGE = Main.DocEditGroup !-->

---++ Installation of ATLAS application software on OSG sites

---+++ Introduction

US ATLAS VirtualOrganizations/VOInfo has a small group of software installers, who are responsible for installing, maintaining and updating ATLAS software releases and other needed software packages on OSG sites, for ATLAS production and user analysis jobs to use. The installation is done using pacman and globus middleware tools.

---+++ Installation area and space, and installers' credentials

The location where the software is installed follows the OSG local storage policy, i.e. it uses $OSG_APP, which is visible to all the worker nodes. The concrete path to ATLAS software on OSG sites are in $OSG_APP/atlas_app directory. Currently we maintain multiple ATLAS releases on each OSG site, each ATLAS release takes 4~5 GB space, so we require >20 GB space available on $OSG_APP for USATLAS VO.

ATLAS VirtualOrganizations/VOInfo has a special "software" role set up in VirtualOrganizations/VOInfoMS server, which is assigned to the software installers (and software developers). When an atlas software installer's job comes to an OSG site gatekeeper, with the "software" role, local site Documentation.GUMS is required to map it to a special account ("usatlas2"), which is then given higher priority on the local batch job system over other usatlas user accounts. Also the ATLAS software installed on OSG sites is owned by "usatlas2" account, and can not be overritten by other normal users.

---+++ Installation Procedure

Basically the installation commands is put in a job, and sent to the remote gatekeeper fork jobmanager.

   * query OSG information system to find where $OSG_APP is on the remote site. The information is available from several OSG components, like GridCat, GIP/BDII and jobmanager-mis. OSG 0.4.1 simplifies this, now it's possible for the installation job to figure out $OSG_APP on the fly, directly from its runtime environment variable.
   * install and set up pacman in $OSG_APP area (which is writable by VirtualOrganizations/VOInfo installers), if not yet available
   * create all the necessary subdirectories below $OSG_APP/atlas_app, and do a pacman install, like "pacman -get GCL:JobTransforms". The pacman installation usually takes 2~5 hours to finish.
   * once it's done, it will publish/update the information in the local file $OSG_APP/etc/grid3-locations.txt, which is read and can be queried through MDS information provider. A webpage is also updated automatically.

---+++ ATLAS software installation status on OSG

It can be found on this URL: http://grid.uchicago.edu/caches/ace-installation/install-report.html




-- Main.XinZhao - 09 Jun 2006


%META:TOPICMOVED{by="AnneHeavey" date="1160518336" from="Documentation.GridAppInstallGuide" to="VO.AtlasApp"}%
