%META:TOPICINFO{author="KyleGross" date="1225985921" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="LIGO"}%
---+Sites withNFS Deployed
|Site|Verified with Support Center|
|!UCSanDiegoPG|Yes| 
|CIT_HEP| No|
|CIT_CMS_T2| No|
|CIT_ITB_1|No|
|USCMS-FNAL-WC1-CE| Yes|

---+Sites NOT Using NSF
|Site|Verified with Support Center|
|MIT_CMS| Yes |


---+  Area of Concern:

    Traditional shared filesystem technology is unable to handle
    the load placed upon it using a standard deployment of the
    OSG compute element. 

---++  Background:

    The OSG Compute Element is required to use shared filesystems
    to allow compute jobs to execute correctly. The setup of these
    shared filesystems can include, a user home directory, 
    the entire compute node directory, the application directory and 
    an application data directory.
 
    It is proven that traditional Network Filesystem (NFS) technology
    can be overwhelmed with activity under certain conditions, especially
    with large clusters (greater than 500 worker nodes) and when executing 
    a large number of data intensive applications.

    It is the case that some "parallel file systems" are able to meet
    or exceed the remote I/O capacities, (gpfs, pvfs, lustre) however
    these technologies have not been widely deployed in OSG.
    
---++  NFS-Lite Proposed:

    A solution which was discussed at the August 2005 OSG Consortium meeting
    was to reduce the number of shared filesystems and thus reduce the I/O
    demands, by uncoupling the Compute Element (gatekeeper) software from
    the worker nodes thus creating a "NFS-Lite" fabric  configuration
    for deployment of the OSG Compute Element.  

    In the OSG paper updated April 23, 2006 The NFS lite CE Installation
    on OSG" describes the details of a configuration when using condor 
    and condor-g.

    In early September the LIGO VirtualOrganizations/VOInfo investigated problems and issues
    with a site which deployed "NFS-Lite" on it's production deployment.
    An issue was discovered which prevented LiGO applications from 
    completing correctly on this site.

    The issue is that NFS-Lite installations which are deployed with
    Condor do not honor the condor grid parameter Remote_InitialDir. 

    By setting Remote_InitialDir the condor globus submission interacts with 
    the CE jobmanager to set condors InitialDir parameter for the job script 
    submitted to the cluster. Unfortunately InitialDir is only honored by 
    condor for certain universes if the cluster is using a shared file system. 
    NFS Lite explicitly disables shared disk mode in condor which results in 
    the local condor cluster ignoring the InitialDir parameter.

    So while none of the jobmanager modifications with NFS Lite explicitly
    disabled support of the Remote_InitialDir parameter NFS Lite does 
    explicitly disabled shared file systems and therefore Remote_InitialDir 
    is ignored.

---++  Next Steps:

  1)  Review Storage requirements placed upon OSG sites and clusters; 
      develop alternatives deployment strategies which are fully tested and
      that comply with local compute storage model and current application 
      base.

  2)  Develop site and fabric validation which will verify the local
      compute element storage capabilities.




-- Main.RobQ - 05 Sep 2006
-- Main.LeighGrund - 12 Oct 2006