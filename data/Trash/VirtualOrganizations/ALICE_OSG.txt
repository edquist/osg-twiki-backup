%META:TOPICINFO{author="AbhishekSinghRana" date="1229509849" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *Joint ALICE-OSG Taskforce* <br>to enable ALICE on Open Science Grid<br>

---++ Key Expertise

*Iwona Sakrejda* and *Shreyas Cholia* - NERSC. Technical expertise on (ALICE)-OSG operations.<br>
*Pablo Saiz* - EU ALICE. Technical expertise on ALICE-(OSG) operations.<br>
*Federico Carminati* and *Latchezar Betev* - EU ALICE.<br>
*Ron Soltz* and *Jason Newby* - US ALICE. And, LLNL.<br>
*Alain Roy* - OSG Software.<br>
*Burt Holzman* - OSG Interoperability.<br>
*Mine Altunay* - OSG Security.<br>
*Ruth Pordes* and *Miron Livny* - OSG. <br>

---++ Strategy and Goals

   * Understand more clearly the actual operational interaction of VO-Box/AliEn model with OSG model.
   * Understand the high-end hardware requirements for a VO-Box to get a view of usage limits and of scalability, considering average to full-scale heavy-duty 'job volume' by ALICE users.
   * Deploy VO-Box stack on top of OSG 1.0 stack, at NERSC, running ALICE jobs, then evaluate software stack commonalities and any issues from real operational experience.
   * Discuss expansion plan to more OSG sites, and corroborate on resolving any known severe technological barriers.
   * Expand to LLNL as the second ALICE OSG site.
   * Look at more sites if all has gone well. 

---++ VO-Box Security Policy Specification

Please see [[%ATTACHURL%/VO-Box-security-policy_v05.doc][VO-Box-security-policy_v05.doc]].

---++ Phase-1 Operational Summary (Pablo, Iwona)

To sum up the exercises, we managed to run ALICE jobs using the OSG software. We did it in two ways: first submitting from NERSC to the worker nodes using =condor_submit= and requesting to go to *pdsfgrid.nersc.gov/jobmanager-sge*. 

When that worked, we tried also sending to other sites, such as *osp1.lbl.gov/jobmanager-pbs* and *osg-edu.cs.wisc.edu/jobmanager-condor*. After landing on the worker nodes, a script installed !AliEn (if it had not been installed before) and start a !JobAgent that requested ALICE jobs. This second scenario also worked.

This is the updated list of issues (in order of importance):

Case 1: If we want to run only at NERSC:

   * If we want to run this on production mode, we will need either some kind of proxy renewal or a service certificate without passphrase that can be used to create proxies on the fly.

   * There were some problems because the jobagents landed in worker nodes with the wrong platform. We fixed it by creating a =$HOME/.sge_request= file, specifying the SGE queue and requirements. There was some discussion about passing the arguments from condor to SGE.  I'm not sure if there was any conclusion, though.

   * X509_CER_DIR. The VO-Box needs to authenticate both to the ALICE servers and to the OSG servers. Therefore, this environment variable has to point to a directory that contains all of the CA. At the moment, =/chos/common/lx_local/pkg/OSG-1.0.0/globus/TRUSTED_CA= doesn't contain the !AliEn CA, so we setup such that variable to point to the CAs distributed with !AliEn (ALICE distributeS some of the CA of OSG, but not all). For the time being it works, but if OSG can decided to include a new CA - for e.g., in =/chos/common/lx_local/pkg/OSG-1.0.0/globus/TRUSTED_CA=, ALICE will have to put it also in the CA distributed by !AliEn.

Case 2: If we want to run also on other sites:

   * The high ports on pdsfvo.nersc.gov are not visible from other sites. We would need to have them open. We need at least ports 1094,8082,8084,8085 and 9991.

   * When Pablo submits to *osg-edu.cs.wisc.edu*, mapping is received to a generic user (osgedu.users). [Ques. <i>I see that there is a lot of stuff installed by other people mapped to the same generic user. I haven't tried, but it looks like I have the right to delete their things. Does it mean that any of these users could also delete whatever I install?</I>]

All the other issues have been solved. 

---++ !JobAgents, Site Proxy, Central Task Queue

ALICE uses generic pilots (!JobAgents), which fetch the payload 
from the ALICE central task queue. The Site Proxy (SP) service running 
on the VO-box, forwards the job agent request to the central task 
queue.

The job agent communicates with the SP, and the SP is the one that communicates with the central task queue. 

---++


-- Main.AbhishekSinghRana - 12 Nov 2008

%META:FILEATTACHMENT{name="VO-Box-security-policy_v05.doc" attachment="VO-Box-security-policy_v05.doc" attr="h" comment="" date="1229509319" path="VO-Box-security-policy_v05.doc" size="240640" stream="VO-Box-security-policy_v05.doc" tmpFilename="/usr/tmp/CGItemp8273" user="AbhishekSinghRana" version="1"}%
