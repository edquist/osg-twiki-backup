%META:TOPICINFO{author="AbhishekSinghRana" date="1229512923" format="1.1" version="1.9"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *Joint ALICE-OSG Taskforce* <br>to enable ALICE on Open Science Grid<br>
%TOC%
---++ Key Expertise

*Iwona Sakrejda* and *Shreyas Cholia* - NERSC. Technical expertise on (ALICE)-OSG operations.<br>
*Pablo Saiz* - EU ALICE. Technical expertise on ALICE-(OSG) operations.<br>
*Federico Carminati* and *Latchezar Betev* - EU ALICE.<br>
*Ron Soltz* and *Jason Newby* - US ALICE. And, LLNL.<br>
*Alain Roy* - OSG Software.<br>
*Burt Holzman* - OSG Interoperability.<br>
*Mine Altunay* - OSG Security.<br>
*David Skinner* - NERSC. <br>
*Ruth Pordes* and *Miron Livny* - OSG. <br>

---++ Strategy and Goals

   * Understand more clearly the actual operational interaction of VO-Box/AliEn model with OSG model.
   * %RED%Understand the high-end hardware requirements for a VO-Box to get a view of usage limits and of scalability, considering average to full-scale heavy-duty 'job volume' by ALICE users.%ENDCOLOR%
   * Deploy VO-Box stack on top of OSG 1.0 stack, at NERSC, running ALICE jobs, then evaluate software stack commonalities and any issues from real operational experience.
   * Discuss expansion plan to more OSG sites, and corroborate on resolving any known severe technological barriers.
   * Expand to LLNL as the second ALICE OSG site.
   * Look at more sites if all has gone well. 

---++ VO-Box Security Policy Specification

Please see [[%ATTACHURL%/VO-Box-security-policy_v05.doc][VO-Box-security-policy_v05.doc]].

---++ !JobAgents, Site Proxy, Central Task Queue

ALICE uses generic pilots (!JobAgents), which fetch the payload 
from the ALICE central task queue. The Site Proxy (SP) service running 
on the VO-box, forwards the !JobAgent request to the central Task 
Queue (TQ).

In sum, the !JobAgent communicates with the SP, and the SP is the one that communicates with the central TQ. 

---++ Phase-1 Operational Summary (Pablo, Iwona)

To sum up the exercise, we managed to run ALICE jobs using the OSG software. We did it in two ways: first submitting from NERSC to the worker nodes using =condor_submit= and requesting to submit to *pdsfgrid.nersc.gov/jobmanager-sge*. 

When that worked, we tried also sending to other sites, such as *osp1.lbl.gov/jobmanager-pbs* and *osg-edu.cs.wisc.edu/jobmanager-condor*. After landing on the worker nodes, a script installed !AliEn (if it had not been installed before) and start a !JobAgent that requested ALICE jobs. This second scenario also worked.

This is the updated list of issues in order of importance:

Case 1: If we want to run only at NERSC:

   * %RED%If we want to run this on production mode, we will need either some kind of proxy renewal or a service certificate without passphrase that can be used to create proxies on the fly.%ENDCOLOR%

   * There were some problems because the jobagents landed in worker nodes with the wrong platform. We fixed it by creating a =$HOME/.sge_request= file, specifying the SGE queue and requirements. %RED%There was some discussion about passing the arguments from condor to SGE.  It is not clear if there was any conclusion, though. %ENDCOLOR%

   * X509_CER_DIR. %RED%The VO-Box needs to authenticate both to the ALICE servers and to the OSG servers%ENDCOLOR%. Therefore, this environment variable has to point to a directory that contains all of the CAs. At the moment, =/chos/common/lx_local/pkg/OSG-1.0.0/globus/TRUSTED_CA= doesn't contain the !AliEn CA, so we setup the variable to point to the CAs distributed with !AliEn (ALICE distributes some of the CA of OSG, but not all). %RED%For the time being it works, but if OSG can decide to include a new CA%ENDCOLOR% - for e.g., in =/chos/common/lx_local/pkg/OSG-1.0.0/globus/TRUSTED_CA=, ALICE will have to put it also in the CA distributed by !AliEn.

Case 2: If we want to run also on other sites:

   * The high ports on *pdsfvo.nersc.gov* are not visible from other sites. ALICE will need to have these open. %RED%We need to open at least ports 1094,8082,8084,8085 and 9991%ENDCOLOR%.

   * When Pablo submits to *osg-edu.cs.wisc.edu*, mapping is received to a generic user (osgedu.users). [Question from Pablo: There is a lot of software installed by other users mapped to the same generic user. Pablo hasn't tried, but it looks like he have the right to delete other software. Does it mean that any of these users can also delete Pablo's installs? Answer from Alain: Yes indeed. If you have a real need to run at the site (I thought it was just for testing), we can map you to a unique user. We have almost no resources at the site though--it's really only good for testing purposes.]

All the other known issues have been solved. 

---++ Items Open for Discussion

   * Site Authorization: %RED%ALICE VOMS server needs to be known to OSG sites%ENDCOLOR%.
   * VO Accounting: %RED%ALICE FQANs and related particulars need to be discussed%ENDCOLOR%.
   * Job Accounting: %RED%How best to do accounting of ALICE "jobs"%ENDCOLOR%?
   * Security Risk: %RED%ALICE VOMS server and related user banning policies in event of a security breach in CERN%ENDCOLOR%.

---++

---++ ALICE-OSG Meeting on Dec. 17 2008 

*Agenda*

%BLUE%
1. Proof of concept at LBNL, discussion of "operational" work accomplished, remaining "concerns". <br>
2. "Security" and Policy related topics. <br>
3. "Expansion" plan to add LLNL, and 1-2 more ALICE sites. <br>
4. "Changes needed" in !AliEn software stack, if any. <br>
5. "Changes needed" in OSG software stack, if any. <br>
6. "Planning" discussion to draw out a plan for future production-level ALICE operations on OSG. <br>
%ENDCOLOR%
 
*Coordinates*

%BLUE%
Wednesday, Dec. 17 <br>

7:30-8:30am Pacific / 9:30-10:30am Central / 4:30-5:30pm CERN time.  <br>

US Phone: 866-914-3976, Access ID: 923489# <br>
International Phone: +1-925-423-8104,  Access ID: 923489# <br>
%ENDCOLOR%

---++


-- Main.AbhishekSinghRana - 12 Nov 2008

%META:FILEATTACHMENT{name="VO-Box-security-policy_v05.doc" attachment="VO-Box-security-policy_v05.doc" attr="h" comment="" date="1229509319" path="VO-Box-security-policy_v05.doc" size="240640" stream="VO-Box-security-policy_v05.doc" tmpFilename="/usr/tmp/CGItemp8273" user="AbhishekSinghRana" version="1"}%
