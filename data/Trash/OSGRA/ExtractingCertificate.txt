%META:TOPICINFO{author="KyleGross" date="1190902973" format="1.1" reprev="1.1" version="1.1"}%
<H2>Extracting your Certificate for use with Globus Tools</H2>

<P>
When you have exported your DOEGrids certificate and private key from your browser into a single file. The next step is to extract your certificate and private key to seperate files and convert them to the form needed to use by Globus.
</P>

<OL TYPE="1">
	<LI>Make sure that the GLOBUS_LOCATION environment variable is defined properly.</LI>

	<LI>To extract and convert your certificate to the appropriate form enter

<P>
<CODE>	$ /bin/openssl pkcs12 -in YourCert.p12 -clcerts -nokeys -out /.globus/usercert.pem</CODE>

</P>
      where <nolink>YourCert</nolink>.pfx is the file you saved your exported certificate. When prompted enter the pass phrase that you used to encrypt your certificate and key.</LI>

<LI>To extract and convert your private key to the appropriate form run enter
<P>
 	<CODE>$ /bin/openssl pkcs12 -in YourCert.p12 -nocerts -out /.globus/userkey.pem</CODE>
</P>
      You will be prompted for the pass phrase that you used to encrypt your certificate.</LI>

<LI>Next you will be prompted for a new pass phrase to use to encrypt your private key that you are extracting and saving. This will be the pass phrase that you must enter whenever you authenticate to use Globus tools. When prompted enter the pass phrase again for verification.</LI>

<LI>Globus GSI tools such as require that the file containing your private key have the correct UNIX permissions set. To set the permissions correctly enter
<P>
	<CODE>$ chmod 400 /.globus/userkey.pem</CODE>
</P>
</LI>
</OL>


-- Main.KyleGross - 27 Sep 2007
