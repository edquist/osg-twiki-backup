%META:TOPICINFO{author="BurtHolzman" date="1144440704" format="1.0" version="1.4"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>The Managed Fork Queue
%TOC%
%STARTINCLUDE%


---++The Managed Fork Queue
With OSG 0.4.1 we are introducing the option for sites to deploy a fork queue that is managed.

Unlike the standard fork jobmanager that simply forks off jobs on demand, the managed fork jobmanager submits local universe jobs to a Condor queue. Jobs still run on the headnode, but this gives site administrators the power to do things like limit the number of jobs running at a time or grant preferential treatment to one group or another.

By using the "local universe" fork jobs are not actually subject to scheduling delays, unless the total number of allowed fork jobs of a given type is exceeded.

To install:

=source $VDT_LOCATION/setup.sh= <br>
=pacman -get OSG:ManagedFork=

This will install managed fork as jobmanager-managedfork.  If you wish to replace the default fork jobmanager with managedfork,

=source $VDT_LOCATION/setup.sh= <br>
=$VDT_LOCATION/vdt/setup/configure_globus_gatekeeper --managed-fork y=

To put back the unmanaged fork jobmanager:

=source $VDT_LOCATION/setup.sh= <br>
=$VDT_LOCATION/vdt/setup/configure_globus_gatekeeper --managed-fork n=

For more details on setup and configuration we refer to the VDT 1.3.10 release notes on 
<a href="http://vdt.cs.wisc.edu/releases/1.3.10/notes/Globus-ManagedFork-Setup.html">managed fork</a>.

Everything you'd want to know is described there.
In particular, we strongly recommend to use the following setting to make sure 
the Condor grid monitor is not adversely affected by managed fork.

<pre> 
START_LOCAL_UNIVERSE = TotalLocalJobsRunning < 20 || GridMonitorJob == TRUE 
</pre>


<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.FkW - 18 Mar 2006

%STOPINCLUDE%

