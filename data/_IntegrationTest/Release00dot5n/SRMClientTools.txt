%META:TOPICINFO{author="NehaSharma" date="1127253326" format="1.0" version="1.5"}%
%META:TOPICPARENT{name="WebHome"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>SRMClientTools
%TOC%
%STARTINCLUDE%

The SRM Client Tools are  an optional module in the OSG Cache.
They are supported by the SRM-dCACHE team. For the short term requests for information and support should go to osg-int@opensciencegrid.org

---++SRM shell-client as an optional module in the OSG cache


1)  The SRM Shell-tool Clients "SRM-cp" provide a command line interface to the SRM V1.1  standard. The package is supported for the standard interfaces to the dCache, DRM and Castor implementations of SRM.


2) Documentation is currently available at 
http://www.fnal.gov/docs/products/enstore/usingdcache.html#56262 and
http://computing.fnal.gov/ccf/projects/SRM/f-srmcp-1.17/README

and the SRM interface is defined  at http://sdm.lbl.gov/srm-wg/index.html.


3) Support for such a component needs a triage structure, since the SRM support group does not have the resources to support diagnosis of the end to end problems that occur in the use of an SRM client<->SRM server<->storage service (SE). Our proposal, for discussion, is the following:

	 VO support is the first level contact

	 SE resource provider is the second level contact

	 SRM client package provider is the third level contact - at the moment this is osg-int@opensciencegrid.org


*HOW TO INSTALL SRMClient Package*

  Following instructions are executed on a local OSG Compute Element node: 

  To install this package in $VDT_LOCATION :

  *Step1)* <tam01.fnal.gov> cd $VDT_LOCATION

			  <tam01.fnal.gov> ls

cert-scripts  globus  licenses	 o..pacman..o				 prima			  vdt					 verify
condor		  gpt	  logrotate	OSGv0.1.6-release.notes  setup.csh		 vdt-app-data		 voms
edg			  gums	 MIS-CI		osg-version				  setup.sh		  vdt-install.log
expat			jdk1.4  MonaLisa	 perl							trusted.caches  vdt-questions.csh
ftsh			 lcg	  monitoring  post-install				 vds				 vdt-questions.sh


  *Step 2)* <tam01.fnal.gov> pacman -get iVDGL:srm-cp

Do you want to add [http://hep.uchicago.edu/ivdgl/] to [trusted.caches]? (y or n): y
Package [srm-cp] found in [http://hep.uchicago.edu/ivdgl/]...
Downloading [srmclient.tar.gz] from [hep.uchicago.edu]...
			6/6 MB downloaded...
Untarring [srmclient.tar.gz]...

  # This adds a directory srmclient to your $VDT_LOCATION

  # Also adds few lines in the $VDT_LOCATION/setup.sh and $VDT_LOCATION/setup.csh scripts to include srmclient binaries in $PATH


 *Step 3)* <tam01.fnal.gov> ls

cert-scripts  gpt		  MIS-CI						 perl			 trusted.caches	  vdt-questions.sh
condor		  gums		 MonaLisa					  post-install  vds					 verify
edg			  jdk1.4	  monitoring					prima			vdt					 voms
expat			lcg		  o..pacman..o				 setup.csh	  vdt-app-data
ftsh			 licenses	OSGv0.1.6-release.notes  setup.sh		vdt-install.log
globus		  logrotate  osg-version				  srmclient	  vdt-questions.csh

 *Step 4)* <tam01.fnal.gov> source setup.sh

 *Step 5)* <tam01.fnal.gov> which srmcp

/gfs0/osg/osg-software/srmclient/bin/srmcp

<tam01.fnal.gov>

 # Kindly note two important options. One is used to avoid any firewall issues on a worker node and another to resolve srmclient issue regarding  the various kinds of srm server DN:

  *srmcp  --gss_expected_name=host/srm/etc --globus_tcp_port_range=min value:max value source-url dest-url*

  where :
  *-globus_tcp_port_range*=min value:max value,

	  a range of ports open for tcp connections specified as a pair of positive integers separated by ":", not set by default
	  This takes care of compute nodes that are behind firewall.

  *-gss_expected_name*=gss expected name in the srm server DN default value is host. eg: If the CN of host where srm server is running is
 CN=srm/tam01.fnal.gov, then it should be "srm"
 
  Run srmcp --help for more information.
  
  *Some Examples:*

  srmcp -debug file://localhost//home/s1/neha/test/aaa srm://t2data2.sdsc.edu:8443/data/osgtest/1/file1
 
  srmcp  -debug=true --gss_expected_name=srm file:////bin/sh srm://dmx.lbl.gov:6253//srm/DRM/srmv1?SFN=/tmp/try1
	
  * Certificate access by the WN where SRM-CP is run 
  
  The machine where SRM-CP is running needs access to a certificates directory.

  Either service certs will need to be preinstalled and maintained, or 
  they need to be copied to the worker node together with other job 
  specific files. 

Certificates can be installed into $VDT_LOCATION/globus/share/certificates.

The CRL must then be maintained by hand as  the edg-crl-upgrade scripts (which are part of VDT) are hardcoded to point to /etc/grid-security/certificates.


<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.RuthPordes - 07 Apr 2005

%STOPINCLUDE%

