%META:TOPICINFO{author="DougOlson" date="1112397017" format="1.0" version="1.1"}%
%META:TOPICPARENT{name="OSGCoreInstallGuide"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>cert-scripts package & installing CA certificates
%TOC%
%STARTINCLUDE%


---++Introduction

The cert-scripts package ($VDT_LOCATION/cert-scripts) provides several useful
scripts for interacting with CA's and the cert-check-time script is helpful
in setting up and monitoring the CA certificates and CRL's that get
installed in your trusted certificates directory.

---++Checking CA certificates

There are numerous CA certificates installed with VDT and you may not want to
allow all of them on your site.  A helpful command for reviewing them is
<tt><b><pre>
$VDT_LOCATION/cert-scripts/bin/cert-check-time -cR
</pre></b>
</tt>
CertCheckTimeSampleOutput

For each CA certificate this displays the remaining lifetime of the CA certificate,
the human readable name of the CA and the location of the actual certificate file.

In addition, at the bottom of the listing it points out which CA's do not have a CRL.
This is useful AFTER the edg-crl-upgraded script has run at least once because then
it shows those CA's which have not published a certificate revocation list.
There is at least one CA (e1fce4e9.0, /DC=gov/DC=fnal/O=Fermilab/OU=Certificate Authorities/CN=Kerberized CA)
that does not need to publish a CRL since it does not generate any long-lived certificates, only short-lived
proxies.  For other CA's that are missing CRL's you want to consider very carefully if you want
to rely on them.  To not use that CA just delete the certificate file or move it out of the trusted certificates directory.

---++Checking CRL's

Certificate revocation lists contain the list of certificates (by serial number) that have
been issued by a CA but then revoked, meaning you should not accept them.
CRL's are updated frequently and typically have a lifetime limited to a month or less.
Once a CRL has expired but the CRL file till exists in the trusted certificates directory
globus will fail all authentication attempts for any certificate issued by the corresponding CA.
For this reason, and others, it is important that CRL files are current and not expired.
Another variation of the cert-check-time script will list the remaining lifetime of CRL's in
the trusted certificates directory.
<tt><b><pre>
$VDT_LOCATION/cert-scripts/bin/cert-check-time -r
</pre></b></tt>
SampleCertCheckTimeCRLs

For each CRL, this shows the remaining lifetime, the name of the CA that issued the CRL
and the actual CRL file.
Site administrators may find it useful to run this command in a daily cron job following the edg-crl-upgraded
script as a way to monitor the status of the CRL's.

---++Additional Information

For additional information on the functionality of the cert-check-time script execute it with the <tt>-h</tt> option.

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.DougOlson - 01 Apr 2005

%STOPINCLUDE%

