%META:TOPICINFO{author="MarkGreen" date="1113575283" format="1.0" version="1.8"}%
%META:TOPICPARENT{name="MinutesMarch24"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%

This is a lightweight proposal for a  [[http://osg.ivdgl.org/twiki/bin/view/Integration/ItbVo][VO registration procedure]] for VO participants in the ITB. All OSG VOs need to have a VOMS service for their VO and will need a VO administrator to manage their service. The registration process serves two purposes – to let the operations team know some basic contact information for the service, and to transmit certain information to the OSG ITB software intergration team to allow VO connection information to be distributed.
VoServiceOverview? leads you through the wonderful world of VOMS and its friends

VomsWhatToDo? is an overview of how to setup a VOMS service and various choices to be made

VO administrators, what to do: PrivilegeVOWhatToDo.

Current VOs are:

  | *VO Name* | *VO Administrator* |  *VOMS URL* |  *VDT VERSION* |
  | iVDGL	  | Leigh Grundhoefer  | https://grid03.uits.indiana.edu:8443/edg-voms-admin/vos | VDT 1.3.5 |
  | OSG		 | Leigh Grundhoefer		| https://grid03.uits.indiana.edu:8443/edg-voms-admin/vos | VDT 1.3.5 |
  | fMRI		| Leigh Grundhoefer	 |  https://grid03.uits.indiana.edu:8443/edg-voms-admin/vos | VDT 1.3.5 |		
  | Atlas	  | Gabriele Carcassi | https://vo.racf.bnl.gov:8443/edg-voms-admin/atlas| ? |
  | CDF		 | Subir Sarkar | https://testbed008.cnaf.infn.it:8443/edg-voms-admin/cdf | ? |	 
  | SDSS		| Neha Sharma	| | |
			 | GADU		| Vijay Sekhri  | | |
			 | US CMS	 | Vijay Sekhri | | |
  | GRASE | Mark L. Green | https://dylan.ccr.buffalo.edu:8443/edg-voms-admin/GRASE/ | VDT 1.3.5 |




---++Introduction
As VO administrators you will need to setup the various VO specific services. 
The only *required* VO specific service for OSG is a VOMS (Virtual Organization Membership Service).
Confusingly, the VOMS consist of 3 elements (VOMS-Admin, VOMS Server, and VOMS client tools) and several related products. For a full description, including descriptions of the various configuration modes, see VoServices and PrivilegeOSG. However, if you are starting a VO from scratch and just want to get on with it,
you can follow the default recipe below.

---+++Install VOMS-Admin

The current (4/14/2005) installation is tested working with the pre-release of VDT 1.3.5.  Please note: the edg-mkgridmap client in previous releases of VDT (1.3.2 and below) and in Grid3 is incompatible with the VDT-installed VOMS in VDT 1.3.3 and beyond.  If this is of concern to you, you will have to run both an older and a newer VOMS to retain compatibility with the older versions of edg-mkgridmap.

This is a lightweight proposal for a [[ItbVo][VO registration procedure]] for VO participants in the ITB.  

All OSG VOs need to have a VOMS service for their VO and will need a VO administrator to manage their service.

The registration process serves two purposes – to let the operations team know some basic contact information for the service, and to transmit certain information to the OSG ITB software intergration team to allow VO connection information
to be distributed.
	* VoServiceOverview leads you through the wonderful world of VOMS and its friends
	* VomsWhatToDo is an overview of how to setup a VOMS service and various choices to be made
	* VO administrators, what to do: PrivilegeVOWhatToDo.
---++++For pacman installation: 

	* Download and install Pacman (if not already available)
	* Request and install a host certificate for your system
	* Request and install a http certificate for your system
	* Use pacman to install VOMS ( both Admin and Server )
 <verbatim>

	# cd /usr/grid
	# pacman -get http://www.cs.wisc.edu/vdt/vdt_135_cache:VOMS

</verbatim>
	* After this completes the EDG-VOMS-Admin should be running
	  <p> You can create an alternate VO (the default "VDT" is created )
	 with the configure_voms script.
</p>

<pre>
	 $VDT_LOCATION/vdt/setup/configure_voms --vo IUBITB --mail-from leighg at indiana.edu --smtp-host itb-zero.uits.indiana.edu
</pre>
	* Add yourself and any other to be the VO-Admin

<pre>
	 $VDT_LOCATION/voms/sbin/edg-voms-admin-local VDT --add-admin ~myadmin/usercert.pem
</pre>


	* Connect with your certificate enabled browser to the new EDG-VOMS service
  URL:  https://your.host.name:8443/edg-voms-admin/VDT

---++++Global ACL for list access to each Group

Make sure that you allow any valid certificate to query the server:
	* Go to the web UI (with a browser with the certificate you use as admin)
	* Select "Global ACL" from the left panel
	* Press "Edit this ACL"
	* Select "Allow" "list" "Anyone who presents a certificate issued by a known CA"
	* Press "Add new entry"

Note that this will allow the advantage of allowing newly added services to provide access to members of your VO without you specifically adding them to the list of machines allowed to access your list of users.  To gain access to the member list, such a machine or service (or person) will have to present a valid grid certificate.  At present, there is no way to prevent harvesting of such a list of users for a potential spoofing attack that would use such a list of users to present a false service on the grid.  To create such an exploit, someone with a valid grid certificate would have to pretend to offer a service that would imitate one that would be discovered by an automatic discovery service.  By having a list of valid users, such a theoretical imitation service could accept jobs and divert them to other purposes.  VO's that are sensitive to the possibility of such a "discovery service" attack and who do not have methods of validating the list of offered services for users should not set the Global ACL as above, and will therefore have to fall back to entering each machine or service on the grid manually that they want to allow access to their list of users.

---++++Add groups, users, and roles to your specification

	As needed.

---+++Give the VO information to the Operations for deployment to Sites

Go to https://[voms.server.host]:8443/edg-voms-admin/[vo]/siblings/

You'll see something like:

<verbatim>
/opt/edg/etc/vomses/atlas-vo.racf.bnl.gov contents and ~/.edg/vomses entry:

"atlas" "vo.racf.bnl.gov" "15003" "/DC=org/DC=doegrids/OU=Services/CN=vo.racf.bnl.gov" "atlas"

Example configuration line for /opt/edg/etc/edg-mkgridmap.conf:

	  group vomss://vo.racf.bnl.gov:8443/edg-voms-admin/atlas  .atlas
</verbatim>

Forward that to Operations.

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.RobGardner - 23 Mar 2005
-- Main.LeighGrund - 05 Apr 2005
-- Main.DaneSkow - 12 Apr 2005

%STOPINCLUDE%

