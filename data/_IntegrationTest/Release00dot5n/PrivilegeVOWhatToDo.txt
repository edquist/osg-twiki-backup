%META:TOPICINFO{author="LeighGrund" date="1112731765" format="1.0" version="1.5"}%
%META:TOPICPARENT{name="SiteAdmins"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%


---++Figure out what to do

<verbatim>
				 |
				 |
  --------------------------						----------------------
  | Do you have VOMS-Admin |			NO!		| Install VOMS-Admin |
  | v0.7.6?					 |----------------->| from the VDT		 |
  --------------------------						----------------------
			YES |														 |
				 |--------------------------------------------
				 |
  -----------------------------					-----------------------
  | Is your VO interested in  |	  YES!		| Install VOMS-Server |
  | role based authorization? |-------------->| from the VDT		  |
  -----------------------------					-----------------------
			 NO |														 |
				 |--------------------------------------------
				 |
  -----------------------
  | Give Leigh the VO	|
  | server information  |
  -----------------------
</verbatim>


---++Do it!

---+++Install VOMS-Admin

The current (4/5/2005) installation is tested working with the pre-release of VDT 1.3.4.

---++++For pacman installation: 

	* Download and install Pacman.
	* Request and install a host certificate for your system
	* Request and install a http certificate for your system
	* Use pacman to install VOMS ( both Admin and Server )
 <verbatim>

	# cd /usr/grid
	# pacman -get http://www.cs.wisc.edu/vdt/vdt_134_cache/VOMS

</verbatim>
	* After this completes the EDG-VOMS-Admin should be running
	* Add yourself and any other to be the VO-Admin
<verbatim>

	# cd /usr/grid/voms/sbin
	# ./edg-voms-admin-local VDT ~yourhomedir/.globus/usercert.pem
 
</verbatim>

	* Connect with your certificate enabled browser to the new EDG-VOMS service
  URL:  https://your.host.name:8443/edg-voms-admin/VDT

---++++Global ACL for list access to each Group

Make sure that you allow any valid certificate to query the server:
	* Go to the web UI (with a browser with the certificate you use as admin)
	* Select "Global ACL" from the left panel
	* Press "Edit this ACL"
	* Select "Allow" "list" "Anyone who presents a certificate issued by a known CA"
	* Press "Add new entry"

---++++Add groups, users, and roles to your specification

	As needed.

---+++Give the VO information to the Operations for deployment to Sites

Go to https://[voms.server.host]:8443/edg-voms-admin/[vo]/siblings/

You'll see something like:

<verbatim>
/opt/edg/etc/vomses/atlas-vo.racf.bnl.gov contents and ~/.edg/vomses entry:

"atlas" "vo.racf.bnl.gov" "15003" "/DC=org/DC=doegrids/OU=Services/CN=vo.racf.bnl.gov" "atlas"

Example configuration line for /opt/edg/etc/edg-mkgridmap.conf:

	  group vomss://vo.racf.bnl.gov:8443/edg-voms-admin/atlas  .atlas
</verbatim>

Forward that to Operations.

---++ Further information
Refer to the PrivilegeOSG page.

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.GabrieleCarcassi - 25 Mar 2005
-- Main.LeighGrund = 05 Apr 2005

%STOPINCLUDE%

