%META:TOPICINFO{author="AnneHeavey" date="1116443085" format="1.0" version="1.1"}%
%META:TOPICPARENT{name="VomsWhatToDo"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!Things that happen when creating a new VO for use in VOMS
%TOC%
%STARTINCLUDE%

---++Introduction
When you create a new VO for a VOMS installation, there are things that happen that you need to know about.  We list them here.  In the following, $VO is used to represent your VO name:

---++Mysql Database
A mysql database named voms_$VO is created.
	  Four voms_$VO mysql users are created ($VO_adm, $VO_que, $VO_seq and $VO_upd)
		 
---++Files for processing voms-proxy-init requests
To support the VOMS server used to process voms-proxy-init requests for this VO, 
	  the following file are created:
%BR%
<verbatim>
		$EDG_LOCATION/etc/voms/$VO
		-rw-r----- 1 root daemon 176 May 10 11:50 voms.conf
</verbatim>
			 contains the command line arguments for the /etc/init.d/voms script.
			 used to start the server.
<verbatim>
			-rw-r----- 1 root daemon  12 May 10 11:50 voms.pass 
</verbatim>
contains the database password for the voms server.

---++Files for the VOMS-Admin Web interface
To support the maintenance of the VO in the database running under Tomcat4, 
	  the VOMS UI (a.k.a, edg-voms-admin) uses the following files that are created:
%BR%
<verbatim>
		  $EDG_LOCATION/var/etc/edg-voms-admin/$VO
		  -rw-r-----  1 root root	287 May 10 10:40 install-voms-1-mysql-as-root.sql
</verbatim>
			contains the sql ddl to create the voms database and set some privileges
<verbatim>
		  -rw-r--r--  1 root root 10425 May 10 10:40 install-voms-2-mysql-as-root.sql
</verbatim>
			 contains the sql ddl for creating the voms tables.
<verbatim>
		  -rw-r-----  1 root root  3016 May 10 10:40 install-voms-3-mysql-as-root.sql
</verbatim>
			 contains the sql ddl for setting privileges in the voms users for the VO
<verbatim>
		  -rw-r--r--  1 root root  2163 May 10 10:40 install-voms-4-mysql-as-root.sql
</verbatim>
			 contains the initial set of CAs into the VOMS database based on the
			 certificates specified by the '--certdir' argument of the install command
<verbatim>
		  -rw-r--r--  1 root root	619 May 10 10:40 edg-voms-admin-$VO.xml
</verbatim>
			  This is the tomcat 'Context' element necessary for web access.  It specifies the location of the war file and necessary configuration files.
<verbatim>
		  -rw-r--r--  1 root root  1281 May 10 10:40 voms.database.properties 
</verbatim>
			 This properties file is the configuration file for the Tomcat4 services containing database users and passwords.
<verbatim>
		  -rw-r--r--  1 root root  7696 May 10 10:40 voms.service.properties 
</verbatim>
			 This properties file is the configuration file for the Tomcat4 service non-database related.  The file
			 pretty much documents itself.
<verbatim>
		  drwxr-xr-x  2 root root  4096 May 10 10:40 notification
</verbatim>			 
This is the directory containing the customizable email notification messages that are 
			 generated by VOMS.  
			 Refer to the README file in this directory for usage and customization.

---++Files for Client
To support the client side voms-proxy-init, the following are created:
		$EDG_LOCATION/var/etc/edg-voms-admin/$VO
<verbatim>
		  -rw-r--r--  1 root root	108 May 10 10:40 vomses
</verbatim>
			 contains the configuration file for accessing this VOMS VO for
			 proxy generation using voms-proxy-init.



<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.AnneHeavey - 18 May 2005

%STOPINCLUDE%

