%META:TOPICINFO{author="RobGardner" date="1145558632" format="1.0" version="1.1"}%
%META:TOPICPARENT{name="MinutesApr20"}%

---++ Mail from VDT

In VDT 1.3.8, we changed the VOMS server to run as the 'daemon' user instead of 'root'. At the time, I couldn't figure out how to make the VOMS server use an HTTP service certificate, so I switched to using a copy of the host certificate and its key (the vomscert.pem and vomskey.pem files in /etc/grid-security).

Recently, this change caused some justified concern in OSG: It may be a security risk to reuse the host certificate, and it causes a maintenance problem when the original host certificate expires. However, people seem to have accepted the situation for the most part.

For the upcoming VDT 1.3.11, I have upgraded VOMS and VOMS Admin and have improved substantially our VOMS configuration process. I revisited the VOMS certificate usage problem and finally figured out how to run VOMS using an HTTP service certificate. But before I just switch things back, I wanted to make sure it's the right move for the OSG community.

So, I propose to stop copying the host certificate for VOMS and instead configure VOMS Admin and VOMS to use the HTTP service certificate. VOMS Admin uses the certificate to create the vomses file entry that references the VOMS server with the correct DN. When using the service certificate, the service type 'http/' is prepended to the hostname component of the DN, so you get a DN like this:

	 /DC=org/DC=doegrids/OU=Services/CN=http/vdt-rhas4-ia32.cs.wisc.edu

CRITICAL ISSUE: If an existing VOMS server is replaced with one installed from VDT 1.3.11 with the proposed change, the vomses entry by which the server is known to the rest of the grid will change. The new vomses entry would have to be propagated to clients before those clients will be able to contact the new VOMS server. Is this acceptable?

Generating the new, correct entry will be part of the installation, so getting it is easy. And I think OSG has a mechanism to propagate vomses entries, but I'm not sure how it works. We'd really like to get away from using a copy of the host certificate, but if the pain of using service certificates is too great, then we will reconsider.

Finally, what will the VDT do if there is no HTTP service certificate at installation time? We'd try to follow the pattern we use elsewhere: Configure VOMS as best as we can and put messages in the post-install/README file explaining that the service certificate must be in place before the VOMS server will run.

Send us your comments, concerns, and questions, and we'll try to address them here.






*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.RobGardner - 20 Apr 2006

%STOPINCLUDE%

