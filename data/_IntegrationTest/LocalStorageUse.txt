%META:TOPICINFO{author="RobQ" date="1140818024" format="1.0" version="1.7"}%
%META:TOPICPARENT{name="LocalStorageRequirements"}%
<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%


---++Introduction

This document provides some very basic descriptions of the local storage paths on a CE and how to use them.

---++Possibilities

A definition of the concepts used in this document can be found in LocalStorageRequirements, including a [[LocalStorageRequirements#Minimum_requirements][section]] describing minimal requirements and some sample configurations.

You will always be provided a =$OSG_WN_TMP= area where you will put your current working directory (possibly in a unique subdirectory to avoid conflicts with other jobs running on the same host). 

The path and URL of CE storage is provided in different ways:

---+++Environment Variables

Environment variables contain much of the necessary path information and are automatically propagated into
the worker node environment of a freshly-created job.  The
variables are found in =$VDT_LOCATION/monitoring/osg-attributes.conf=.
An excerpt is provided below from FNAL_GPFARM_TEST. 
See the InstallInstructions and LocalStorageConfiguration for more information.

<verbatim>
OSG_SITE_NAME="FNAL_TEST_033"
OSG_LOCATION="/export/osg/grid"
OSG_GRID="/usr/local/osg"
OSG_APP="/app"
OSG_DATA="/data"
OSG_SITE_READ="dcap://fndca.fnal.gov:24525//pnfs/fnal.gov/usr"
OSG_SITE_WRITE="dcap://fndca.fnal.gov:24525//pnfs/fnal.gov/usr"
OSG_WN_TMP="$_CONDOR_SCRATCH_DIR"
OSG_DEFAULT_SE="UNAVAILABLE"
OSG_SITE_INFO="http://fermigrid.fnal.gov/gpfarm/FNAL_GPFARM_POLICY.html"
</verbatim>

Here is output from a test run of a job with the scripts configured correctly:
<verbatim>
[timm@fnpcg ~]$ globus-job-run fnpcg/jobmanager-fork /usr/bin/printenv
OSG_DATA=/data
hostname=fnpcg.fnal.gov
GRID3_TMP_WN_DIR=/local/stage1
OSG_LOCATION=/export/osg/grid
OSG_JOB_CONTACT=fnpcg.fnal.gov/jobmanager-condor
GRID3_SITE_NAME=FNAL_GPFARM_TEST
OSG_SITE_INFO=http://fermigrid.fnal.gov/gpfarm/FNAL_GPFARM_POLICY.html
GRID3_DATA_DIR=/data
OSG_DEFAULT_SE=UNAVAILABLE
OSG_GRID=/usr/local/grid
LOGNAME=fnalgrid
OSG_SITE_NAME=FNAL_GPFARM_TEST
GRID3_JOB_CONTACT=fnpcg.fnal.gov/jobmanager-condor
GRID3_USER_VO_MAP=/export/osg/grid/monitoring/grid3-user-vo-map.txt
OSG_USER_VO_MAP=/export/osg/grid/monitoring/grid3-user-vo-map.txt
OSG_WN_TMP=/local/stage1
GRID3_GRIDFTP_LOG=/export/osg/grid/globus/var/gridftp.log
OSG_UTIL_CONTACT=fnpcg.fnal.gov/jobmanager
OSG_SITE_READ=dcap://fndca.fnal.gov:24525//pnfs/usr
GRID3_SITE_INFO=http://fermigrid.fnal.gov/gpfarm/FNAL_GPFARM_POLICY.html
HOME=/home/fnalgrid
LD_LIBRARY_PATH=/export/osg/grid/MonaLisa/Service/VDTFarm/pgsql/lib:/export/osg/grid/voms/lib:/export/osg/grid/prima/lib:/export/osg/grid/expat/lib:/export/osg/grid/globus/lib:/export/osg/grid/expat/lib:/export/osg/grid/MonaLisa/Service/VDTFarm/pgsql/lib:/export/osg/grid/voms/lib:/export/osg/grid/prima/lib:/export/osg/grid/expat/lib:/export/osg/grid/MonaLisa/Service/VDTFarm/pgsql/lib:/export/osg/grid/voms/lib:/export/osg/grid/prima/lib:/export/osg/grid/expat/lib:
GRID3_TMP_DIR=/data
OSG_GRIDFTP_LOG=/export/osg/grid/globus/var/gridftp.log
OSG_APP=/app
GRID3_BASE_DIR=/export/osg/grid
GLOBUS_GRAM_JOB_CONTACT=https://fnpcg.fnal.gov:51487/10121/1134169575/
GLOBUS_LOCATION=/export/osg/grid/globus
OSG_SPONSOR=fermilab
GLOBUS_GRAM_MYJOB_CONTACT=URLx-nexus://fnpcg.fnal.gov:51488/
OSG_SITE_WRITE=srm://fndca.fnal.gov:8443//pnfs/usr
GRID3_APP_DIR=/app
GRID3_SPONSOR=fermilab
GRID3_UTIL_CONTACT=fnpcg.fnal.gov/jobmanager
X509_USER_PROXY=/home/fnalgrid/.globus/job/fnpcg.fnal.gov/10121.1134169575/x509_up
</verbatim>

---+++Information Providers (GIP/BDII) 

		Path or URLs consistent across the CE (headnodes and WN), published using an information system (e.g. GIP and BDII).  
At the moment, the only directories published are
!GlueCEInfoApplicationDir (corresponding to =$OSG_APP=) and !GlueCEInfoDataDir (corresponding to =$OSG_DATA=).

---++Examples

Future documentation will include examples from various user applications.

%STOPINCLUDE%

