%META:TOPICINFO{author="AnneHeavey" date="1115844224" format="1.0" version="1.1"}%
%META:TOPICPARENT{name="VoAdmins"}%
<!-- This is the default OSG Integration template. 
Please modify it in the sections indicated to create your topic!
If you have any comments/complaints about this template, then please email me:
rwg@hep.uchicago.edu.  (Adapted from Atlas wiki template, Ed Moyse)
--> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!!<nop>%TOPIC%
%TOC%
%STARTINCLUDE%
---++Introduction
Here we describe how to install VOMS on your linux machine, and how to create your VO to use with it.


---++What to expect and what you need to know
During the VOMS installation the following things occur:

	1 A mysql database named voms_$VO is created (where $VO is a variable set to the VO name).
	  Four voms mysql users are created ($VO_adm, $VO_que, $VO_seq and $VO_upd)
		 
	1 To support the VOMS server used to process voms-proxy-init requests, 
	  the following file are created:
%BR%
<verbatim>
		$EDG_LOCATION//etc/voms/$VO
		-rw-r----- 1 root daemon 176 May 10 11:50 voms.conf
</verbatim>
			 contains the command line arguments for the /etc/init.d/voms script.
			 used to start the server.
<verbatim>
			-rw-r----- 1 root daemon  12 May 10 11:50 voms.pass 
</verbatim>
contains the database password for the voms server.

	1 To support the maintenance of the VO in the database running under Tomcat4, 
	  the VOMS UI (a.k.a, edg-voms-admin) uses the following files that are created:
%BR%
<verbatim>
		  $EDG_LOCATION/var/etc/edg-voms-admin/$VO
		  -rw-r-----  1 root root	287 May 10 10:40 install-voms-1-mysql-as-root.sql
</verbatim>
			contains the sql ddl to create the voms database and set some privileges
<verbatim>
		  -rw-r--r--  1 root root 10425 May 10 10:40 install-voms-2-mysql-as-root.sql
</verbatim>
			 contains the sql ddl for creating the voms tables.
<verbatim>
		  -rw-r-----  1 root root  3016 May 10 10:40 install-voms-3-mysql-as-root.sql
</verbatim>
			 contains the sql ddl for setting privileges in the voms users for the VO
<verbatim>
		  -rw-r--r--  1 root root  2163 May 10 10:40 install-voms-4-mysql-as-root.sql
</verbatim>
			 contains the initial set of CAs into the VOMS database based on the
			 certificates specified by the '--certdir' argument of the install command
<verbatim>
		  -rw-r--r--  1 root root	619 May 10 10:40 edg-voms-admin-$VO.xml
</verbatim>
			  This is the tomcat 'Context' element necessary for web access.  It specifies the location of the war file and necessary configuration files.
<verbatim>
		  -rw-r--r--  1 root root  1281 May 10 10:40 voms.database.properties 
</verbatim>
			 This properties file is the configuration file for the Tomcat4 services containing database users and passwords.
<verbatim>
		  -rw-r--r--  1 root root  7696 May 10 10:40 voms.service.properties 
</verbatim>
			 This properties file is the configuration file for the Tomcat4 service non-database related.  The file
			 pretty much documents itself.
<verbatim>
		  drwxr-xr-x  2 root root  4096 May 10 10:40 notification
</verbatim>			 
This is the directory containing the customizable email notification messages that are 
			 generated by VOMS.  
			 Refer to the README file in this directory for usage and customization.

	1 To support the client side voms-proxy-init, the following are created:
		$EDG_LOCATION/var/etc/edg-voms-admin/$VO
<verbatim>
		  -rw-r--r--  1 root root	108 May 10 10:40 vomses
</verbatim>
			 contains the configuration file for accessing this VOMS VO for
			 proxy generation using voms-proxy-init.

---++Before starting the installation

Here is a minimal set of information needed to get started.  It represents the arguments used on the install command.

Note: the syntax used for defining this data is a Bourne shell format for setting
		variables and if these variables are set, you can just cut/paste a lot of these
		commands during the installation process.  You, naturally, can do your own
		variable substitution anywhere the varaible is noted. 
		
	 VO=Test		  
		The name of your VO.  Mixed case is permissable. 
		This will also be the top level (root) group for the VO.

	 PORT=15007	
		Port number the voms server listens on for voms-proxy-init requests.
		Each VO has a unique instance of the voms server running and listening on a port.

	 SMTP_HOST=smtp.fnal.gov  
		The hostname of the SMTP delivery service at the site of this VOMS server.
		The host must accept emails for delivery.

	 MAIL_FROM=weigand@fnal.gov 
		The sender email address for the notification messages sent by this VOMS service.
		This should be a read address otherwise the failure notifications will end up in 
		/dev/null.

	 PASSWORD=XVKJUILKJLJK 
		The password of this VO's voms database users (the 4 of them mentioned earlier).
		Please change ffomr what is shown above.

	 VOMS_GROUP=daemon
		The Unix group name of the user the VOMS server runs under. 
		The default with VDT installations is 'daemon'.  

	 TOMCAT_GROUP=daemon
		The Unix group name of the user that tomcat4 runs under. 
		The default with VDT installations is 'daemon'.  

	 CERTDIR=/data/osg-itb-015/globus/TRUSTED_CA
		Not sure if this has any affect as it does not appear to be picking up
		all the CAs in this directory.  Actually, this is a link and this may
		be the problem.


<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
-- Main.AnneHeavey - 11 May 2005
-- Main.John Weigand - 11 May 2005

%STOPINCLUDE%

