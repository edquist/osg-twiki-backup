%META:TOPICINFO{author="BalamuruganDesinghu" date="1437668330" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="UserSchool15Materials"}%
<style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>

---+ Submit node to worker node

First we work on ==namd-ct-local example==.
<pre class="screen">
%UCL_PROMPT_SHORT% <strong>cd namd-condor/namd-ct-local </strong>
%UCL_PROMPT_SHORT% <strong>ls </strong>
</pre>

<pre class="file">
namd_run.sh    # Job wrapper script to execute namd job
namd_run.submit    # Condor job description file
par_all27_prot_lipid.inp  #  Parameter file: required by NAMD
ubq_gbis_eq.conf    # NAMD input configuration file
ubq.pdb    # Protein structure file: required by NAMD
ubq.psf     # Protein topology file: required by NAMD
</pre>

We want tell condor to transfer ==par_all27_prot_lipid.inp==, ==ubq_gbis_eq.conf, ==ubq.pdb, ==ubq.psf== to remote host and run the NAMD simulation.&#8901;&#8901;

Now take a look at the condor submit file ==namd_run.submit==

<pre class="file">
Universe = vanilla
Executable = namd_run.sh
arguments = $(Process)

transfer_input_files = ubq_gbis_eq.conf, ubq.pdb, ubq.psf, par_all27_prot_lipid.inp
should_transfer_files=Yes
when_to_transfer_output = ON_EXIT

output        = job.out.$(Process)
error         = job.error.$(Process)
log           = job.log.$(Process)

requirements = (HAS_CVMFS_oasis_opensciencegrid_org =?= TRUE)
Queue 1
</pre>
the files required by NAMD are listed under the key word ==transfer_input_files==  We could also create such a list
for transfering output files via the key word ==tranfer_output_files==. The default option for vanilla universe job is
to transfer all the output files.

Now submit the job
<pre class="screen">
%UCL_PROMPT_SHORT% <strong>condor_submit namd_run.submit </strong>
</pre>

Once the job finished (may take 3-5 minutus run time) you will see bunch of output files (trajectory, log file with energy, velocity and so on)




-- Main.BalamuruganDesinghu - 23 Jul 2015
