%META:TOPICINFO{author="TanyaLevshina" date="1278704277" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="MaterialsOSS2010"}%
---+!!Data Management Exercises (Part I) 
%TOC{depth="2"}%

---++ Introduction
The goals of these exercises are...
---++ Exercises 
---+++ Prerequisite 
   * Login on submission node 
<pre class="screen">
<verbatim>
ssh <username>@vdt-itb.cs.wisc.edu
</verbatim>
</pre>
   * Setup grid enviroment
<pre class="screen">
 . /opt/osg-client/setup.sh
</pre>
   * Obtain proxy certificate
<pre class="screen">
voms-proxy-init -voms osgedu:/osgedu
Enter GRID pass phrase: 
</pre>

---+++ Classic Storage
Classic Storage is represented by a stand-alone gridftp server installed  on Compute Element. It allows access to several specific data directories available on all OSG sites.    The storage space allocated under ==OSG_DATA== directory is intended as the space for applications to write input and output relatively small data files with persistency that must exceed the lifetime of the job which created it.

In order to upload data to ==OSG_DATA== you will need to use ==globus-url-copy== command. The basic syntax for globus-url-copy is:

==globus-url-copy [optional command line switches] Source_URL Destination_URL==

You will need to use the following URL prefixes to specify local file and file on the remote node:
   * file:// (on a local machine only)
   * gsiftp://
More details could be found at ....

   * What is the path to OSG_DATA?
<pre class="screen">
globus-job-run osg-edu.cs.wisc.edu:/jobmanager-fork /usr/bin/env|grep OSG_DATA
OSG_DATA=/nfs/osg-data
</pre>
   * Let's create your directory there
<pre class="screen">
globus-job-run osg-edu.cs.wisc.edu:/jobmanager-fork /bin/mkdir /nfs/osg-data/osgedu/${USER}
</pre>
   * Now,  we are ready to upload ==swissport== blast database to the your local CE and verify that the database is actually there:
<pre class="screen">
globus-url-copy file:///home/tanya/swissport gsiftp://osg-edu.cs.wisc.edu:2811/nfs/osg-data/osgedu/${USER}/swissport
globus-job-run osg-edu.cs.wisc.edu:/jobmanager-fork /bin/ls -l /nfs/osg-data/${USER}
total 224384
-rw-r--r--  1 osgedu users 229536762 Jul  9 10:09 swissport
</pre>
   * Run condor-g job that access data from the worker node

---+++ Storage Element 
What you have to know before you start:
---++++ First steps
   * Verify that you can access storage
   * Verify that you can upload file
---+++ Running job on the Grid with SE







-- Main.TanyaLevshina - 09 Jul 2010