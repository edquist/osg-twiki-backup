%META:TOPICINFO{author="IgorSfiligoi" date="1309223343" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="OSGSS2011Materials"}%
---+ OSG Exercises - Direct submission

This exercise will give you some experience submitting directly into OSG.

%TOC%

---++ Environment

We will use the usual Condor submit host:<br>
=vdt-itb.cs.wisc.edu=

There will be no shared file system between the submit and the execute hosts, so you will should plan on transferring all the needed files with you.

---++ Exercise 1 - Basic job submission

Try submitting a simple "who am I" job, as explained the the exercise [[OSGSS2011TueDHTCEx1#Exercise_2_Condor_G][ we did this morning]].

Try jobmanager-fork.

Try using directly the [[GlobusToolsOss2010][Globus tools]].

Check where your job runs and which user are you running under.

---++ Exercise 2 - Find other sites

As said during the lecture, OSG provides an  information system called [[http://is.grid.iu.edu/documentation.html][BDII]]. 

The tool to talk to the BDII is [[http://www.centos.org/docs/5/html/CDS/ag/8.0/Finding_Directory_Entries-Using_ldapsearch.html][ldapsearch]]. The complete command to talk to the OSG BDII is:
<pre style="margin-left:4em" class="screen">
/opt/osg-client/openldap/bin/ldapsearch -h is.grid.iu.edu -p2170
</pre>

To find out all the sites that claim to support our OSGEDU VO, you sould use the following search expression:
<pre style="margin-left:4em" class="screen">
-b 'mds-vo-name=local,o=grid' 'GlueCEAccessControlBaseRule=VO:osgedu'
</pre>

What do you see?

%TWISTY{
showlink="Show follow up"
hidelink="Hide"
start="hide"
mode="div"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
The attributes you are looking for are:
   * =GlueCEInfoContactString= - This is the logical URL to the CE.
   * =GlueCEHostingCluster= - This is the IP name of the CE.
   * =GlueCEInfoJobManager= - This is the jobmanager to use.
   * =GlueCEInfoGatekeeperPort= - This is the port used by the CE. You usually don't need to specify it, unless the site has configured the Globus Gatekeeper to use a non-standard port.

%ENDTWISTY% 

Select one (or more) sites that claim to support us and submit 10 or so jobs.<br>
Did they start? How long did it take?

%TWISTY{
showlink="Show more tips"
hidelink="Hide"
start="hide"
mode="div"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
You can look at a specific CE, by using
<pre style="margin-left:4em" class="screen">
-b 'mds-vo-name=local,o=grid' 'GlueCEHostingCluster=&lt;node name&gt;'
</pre>

%ENDTWISTY% 

---++ Exercise 3 - Some errors

I wish I could create exercises that will hit all the possible error conditions, but errors typically jump out when you don't want them, not the way around!

So, let's just do a simple authorization error exercise.<br>
Try to submit to =cmsosgce2.fnal.gov=.

Use all you have learned above. Try both Globus and Condor-G commands.