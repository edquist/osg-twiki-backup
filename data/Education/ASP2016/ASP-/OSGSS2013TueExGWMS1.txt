%META:TOPICINFO{author="TimCartwright" date="1372172419" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="UserSchool13Materials"}%
---+ 2013 OSG User School - Getting to know glideinWMS

Time to spend on this: 15 minutes (i.e. finish by 10am)<br>
You may want to refer back to it while doing the next set of exercises.

Reminder: All exercises are run on the [[OSGSS2013TueGlideinSetup][school infrastructure]].

From a user point of view, a [[http://tinyurl.com/glideinWMS][glideinWMS]] instance 
is very similar to a standard [[http://research.cs.wisc.edu/htcondor/][HTCondor]] instance;
the same commands are avaialble (e.g. condor_submit, condor_q, condor_rm and condor_status).

Feel free to submit a couple of HTCondor jobs, just like you have done yesterday, and monitor their progress.<br>
(but see the description below, too)

One thing that is different is the fact that the number of execute slots is not fixed.
Indeed, you may find that there are no execute slots (with condor_status) when you log in.
As explained in [[https://www.opensciencegrid.org/twiki/pub/Education/UserSchool13Materials/day2_01_dhtc.pdf][the lecture]],
the glideinWMS services act as lease managers. And they will lease resources from remote clusters
only if there are jobs needing them. So the pool seen by the user will grow and shrink very dynamically.

The other difference is that you *should never define job requirements*; one should use the attributes defined in the 
[[http://engage-fe.t2.ucsd.edu/vofrontend/policy.html][glideinWMS policy Web page]] instead.
The two basic parameters of our setup are:
   * Job lifetime (which can be set with +JOB_Max_Mins)
   * The list of Grid sites we are willing to use (controlled by +DEFINED_Sites)

The two attributes will directly influence the number of resources you have access to. 
The shorter the job, the better. The lest picky you are about the sites, the better.

Site selection is particularly important. 
As mentioned in [[https://www.opensciencegrid.org/twiki/pub/Education/UserSchool13Materials/day2_01_dhtc.pdf][the lecture]],
network can be a problem, when the execute resources are far away from the submit node.
The default is thus to only run at UCSD.

You can see what sites are available by running:
<pre class="screen">
condor_status -any -const 'MyType=="glideresource"' -format '%s\n' GLIDEIN_Site |sort |uniq
</pre>

Example attribute to add to your jobs is:
<pre class="screen">
+DESIRED_Sites="UCSD,Nebraska,Purdue"
</pre>

If you are not picky at all, just use:
<pre class="screen">
+DESIRED_Sites="any"
</pre>


-- Main.IgorSfiligoi - 18 Jun 2013