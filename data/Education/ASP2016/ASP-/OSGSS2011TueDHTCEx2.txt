%META:TOPICINFO{author="IgorSfiligoi" date="1309202273" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="OSGSS2011Materials"}%
---+ DHTC Exercises - Using many resource pools

This exercise will give you some experience using multiple resources pools

%TOC%

---++ Environment

We will use the usual Condor submit host:<br>
=vdt-itb.cs.wisc.edu=

There may be no shared file system between the submit and the execute hosts, so you will should plan on transferring all the needed files with you.

---++ Exercise 1 - Mandelbrot

We will re-run the Mandelbrot examples Alain [[OSGSS2011CondorComplexDAG][explained you yesterday]], just splitting the problem in 81 tiles, and merging together at two levels. <br>
<img src="%ATTACHURLPATH%/OSGSS2011Tue81.png" alt="OSGSS2011Tue81.png" width='212' height='159' />    

We will create a DAG and run it across the local Condor pool, the UCSD Condor pool, UNL Grid pool and Chicago Grid pool. (See [[OSGSS2011TueDHTCEx1][previous exercise]] for details , but don't forget the local Condor pool).

Given that we now have 4 resources, we need to partition the jobs between them.<br>
How are we going to do this?<br>
Students, please provide suggestions.

We will select 3 proposals, and form (multiples of) 3 groups.
Each group will prepare the appropriate submit files (with the correct partitioning) and then we will submit all jobs at the same time, one per group.

Let's see which one finishes first!

In case of errors, recover the DAG, make any changes as needed, and resubmit.

Discuss the experience.

---++ Exercise 2 - Many users

Now that you have had the chance to try out the system, let's see how good are you at doing your own partition.

Let's do a very simple job... a simple 1 minute sleep:
<pre style="margin-left:4em" class="screen">
#!/bin/bash
date
uname -a
id
sleep 60
date
</pre>

Your goal is to get 50 of them finished as soon as possible.

Create your submit files, *keeping your partitioning policy hidden from the others*. In real life, you will have to compete with many other users who you do not even know they exist, so making sure you do not exchange information during this phase is very important.

Once everybody is ready, you will all submit at the same time.

Let's see who is the first to finish.<br>
And how late will the last one be.

Discuss the experience.



%META:FILEATTACHMENT{name="OSGSS2011Tue81.png" attachment="OSGSS2011Tue81.png" attr="h" comment="" date="1308851830" path="OSGSS2011Tue81.png" size="738" stream="OSGSS2011Tue81.png" tmpFilename="/usr/tmp/CGItemp37707" user="IgorSfiligoi" version="1"}%
