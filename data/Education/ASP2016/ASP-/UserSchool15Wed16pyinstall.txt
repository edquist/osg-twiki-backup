%META:TOPICINFO{author="ChristinaKoch" date="1437672022" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="UserSchool15Materials"}%
<style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>

---+ Wednesday Exercise 1.6: Python Installation

In this exercise, you will write a wrapper script that installs Python and then use it to run jobs. This exercise should take about 10 minutes.

---++ Background

In the previous exercise, we used a method that pre-built Python and then used that pre-built package to run Python scripts.  In this 
exercise, we will write a wrapper script that installs Python with every job.  

---++ Source Code

Each job will need to transfer the Python source code, so it should be downloaded to the submit node.  

   1. While on =osg-ss-submit.chtc.wisc.edu=, run: \
<pre class="screen">
%UCL_PROMPT_SHORT% <strong>wget https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz</strong>
</pre>

---++ Wrapper script

Our wrapper script 

   1. Based on the previous exercise, what are the steps we need to install Python?  What file can we use for reference?  
   1. Put the installation steps into a script called =run_py.sh=
   2. Check your script against the file below \
<pre class="file">
#!/bin/bash

#make directory for installation
mkdir python
# extract source
tar xzf Python-2.7.10.tgz
# cd into directory
cd Python-2.7.10
# run installation steps, with prefix!  
./configure --prefix=$(pwd)/../python
make
make install
# return to working directory
cd ..
</pre>\

   1. We also need to run our =fibonacci.py= script.  We can do so by adding our installation location to the =PATH=, or by referencing the installation directly: 
     <pre class="file"> export PATH=$(pwd)/python/bin:$PATH
python fibonacci.py 5</pre>\
     or\
      <pre class="file"> python/bin/python fibonacci.py 5</pre> \
   Choose whichever method you prefer, and add it to your =run_fib.sh= script, using it to run the =fibonacci.py= code.  

---++ Submit file

The submit file for this exercise can be very similar to the [[UserSchool15Wed15pybuilt][last one]].  

   1. Make a copy of the submit file from the last exercise.  What lines need to change?  
   2. Only thing: name of executable (wrapper script) and name of Python source tarball.  
   1. Submit the job using =condor_submit=.

---++ Bonus: Passing Arguments Through the Wrapper Script

---++ Background

So far, the exercises from this morning have focused on software portability methods that are applicable to DHTC.  We have mostly been running single jobs.  However, the end goal would be to run many jobs that use these software portability techniques.  

---++ Submitting Multiple Fibonacci Jobs

Make a copy of =run_fib.sh= called =run_fib.sh=


%META:TOPICMOVED{by="ChristinaKoch" date="1437162470" from="Education.UserSchool15Wed15pyinstall" to="Education.UserSchool15Wed16pyinstall"}%
