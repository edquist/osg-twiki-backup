%META:TOPICINFO{author="BenClifford" date="1150721890" format="1.0" version="1.3"}%
%META:TOPICPARENT{name="SummerGridSyllabus2006"}%
Summer Grid Workshop Lab 2:

- SDSC Certificate already installed in default location
- CA installed for SDSC certificates
- Differentiate things that need to be done on local machine and those
on login machine.
- set GLOBUS_LOCATION=

1) What is in a certificate

grid-cert-info

2) Use certificates to transfer file

X509_USER_CERT = cert
X509_USER_KEY = key
globus-url-copy 

Will fail since the private key is encrypted. Will need passphrase
decrypt private key.

3) Create Proxy Certificate	  

grid-proxy-init

4) What is in a proxy

grid-proxy-info

5) Use proxy to transfer file

Since proxy is in default location, no need to set environment
variable.

globus-url-copy

6) Proxy lifetime

grid-proxy-init -valid 10

7) Use expired proxy

Wait for proxy to expire. Check by using grid-proxy-info

globus-url-copy 

Will fail because of expired proxy
Generate proxy and transfer file.

8) Obtaining a certificate

Introduction to Globus Certificate Service

grid-cert-request

Copy request and paste in web form on local machine

save signed certificate to local machine

scp that to login machine

9) Use GCS credentials to submit job to remote server

globusrun-ws whoami

Fails because CA is not trusted

10) Use GCS credentials to submit job to local server

globusrun-ws whoami

Authorization error, since not present in gridmap file.

11) Use gx-gridmap to add yourself to gridmap

gx-grimap

12) Use trusted GCS credentials to subject job to local server

globusrun-ws whoami

14) Sumbit job to run g-u-c on remote machine

globusrun-ws g-u-c 

Will fail because credentials were not delegated

15) Sumbit job to run g-u-c on remote machine and delegate

globusrun-ws -delegate g-u-c 

16) MyProxy - load proxy

myproxy-init

17) Get copy to local machine

18) delete localcopy

19) run client that uses my proxy to get credential and submits job

20) swap machine with a friend and test 
		  a) you can run job client that uses myproxy (whoami, to see it
		  is your login)
		  b) run without myproxy (whoami, friend's login).

21) delete from my proxy

22) do (19) on your machine to see it fail.

