%META:TOPICINFO{author="LaurenMichael" date="1438055500" format="1.1" reprev="1.6" version="1.6"}%
%META:TOPICPARENT{name="UserSchool15Materials"}%
<style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>

---+ Friday Exercise 1.3: Execute a Production Workflow

In this Exercise, you will:
   * finish testing workflow steps, 
   * write the DAG for the workflow you planned, and 
   * submit this workflow on osg-ss-submit.chtc.wisc.edu. 
There are bonus tasks in Exercise 1.4, if you get through this part quickly, including eventually running the workflow on the Open Science Grid.

---++ Steps to Take

1) Modify the _permutation_ submit file for each trait according to the optimal number of _job processes_, _permutations-per-process_, and requests for memory and disk. Submit one of these newly modified _permutation_ submit files in preparation for an optimized QTL test. If your estimate of the necessary permutations per process (for a ~30-minute run time) was not close enough, modify and test the _permutation_ jobs again.

2) To prepare an optimized QTL step, use =tarit.sh= to package the output from the test _permutation_ step just above. As above, you will only need to submit one of the QTL submit files to confirm the approximate memory and disk needed. Make sure all of the desired output files for the QTL step are created to confirm success.

3) Don't forget to test taritall.sh after a successful QTL job, to make sure it works as expected. After the optimized _permutation_ and _QTL_ tests, copy all output, error, and log files to a new directory to prepare for the production workflow.

4) Re-draw your workflow, now with more details and 'boxes' for _each job process_ within the _permutation_ step of each trait. Indicate the optimized number of processes, the number of permutations per process, and the approximate disk, memory, and run time requirements for each process.

5) Write a single DAG file for the workflow, including:
   * =JOB= lines for each submit file
   * =PARENT x CHILD y= lines as necessary
   * =SCRIPT PRE= and/or =SCRIPT POST= lines for the tar steps
*Note:* You may need to think about how each =tar= step works for deciding on "PRE" or "POST" scripts for each.

6) Run your full-scale DAG and determine the total wait time from submission to completion. If you have any issues, consult the log and out files for the DAG and jobs, and modify your approach at any of the previous steps. While the full-scale DAG is running, you may wish to further detail your drawn workflow, including information about the names and sizes of input and output files. Share all submit and DAG files with one another so everyone has a copy.

If you have time, move on to the Bonus Tasks in [[https://www.opensciencegrid.org/bin/view/Education/UserSchool15Fri14BonusFlow][Exercise 1.4]]



-- Main.LaurenMichael - 26 Jul 2015

%META:TOPICMOVED{by="LaurenMichael" date="1438008149" from="Education.UserSchool15Fri12ExecFlow" to="Education.UserSchool15Fri13ExecFlow"}%
