%META:TOPICINFO{author="IanRoss" date="1469046944" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="UserSchool16Materials"}%
<style type="text/css">
pre em { font-style: normal; background-color: yellow; }
pre strong { font-style: normal; font-weight: bold; color: #008; }
</style>

---+ Monday Exercise 2.5: Submit With "queue matching"

The goal of this exercise is to submit many jobs with a single submit file by using HTCondor's =queue ... matching= syntax. As mentioned in the lecture, there are many ways to approach this goal, and we'll explore another option in the next exercise.

---++ Alternatives to queue N

In last example, used =queue N= and numerical values (using =$(Process)=) to submit multiple \
jobs at once. However, this is only useful when our files/arguments are all numbered. Often this is not true, \
so we need to use an alternative approach.

---++ Counting Words in Files

Suppose you have a small collection of books, and you're interested in how the usage of words varies \
from book to book or author to author. As mentioned in the lecture, there are many ways that you \
could do this in HTCondor. You could create a separate submit file for each book, and submit them one by one. \
You could be a bit more clever and create one submit file for all of them:

<pre class="file">
universe                = vanilla
executable              = freq.py
request_memory = 20
should_transfer_files   = YES
when_to_transfer_output = ON_EXIT

arguments = "AAiW.txt"
output                  = AAiW.out
error                   = AAiW.err
log                     = AAiW.log
transfer_input_files = AAiW.txt

arguments = "PandP.txt"
output                  = PandP.out
error                   = PandP.err
log                     = PandP.log
transfer_input_files = PandP.txt

arguments = "TAoSH.txt"
output                  = TAoSH.out
error                   = TAoSH.err
log                     = TAoSH.log
transfer_input_files = TAoSH.txt
</pre>

..but as you can see, this results in a long, repetitive submit file. Additionally, if you \
get an additional collection of books to analyze, you'd need to edit the submit file, \
adding many lines for each new file. As a result, this is not the recommended approach to \
submitting multiple jobs within one submit file. Luckily, HTCondor has many =queue= features \
to make this kind of job submission process easy!

---++ Queue Jobs Matching Filenames

Let's start by downloading a few books, which we've stored locally (from Project Gutenberg):
<pre class="file">
wget http://proxy.chtc.wisc.edu/SQUID/osgschool16/books.zip
unzip books.zip
</pre>

Submit file and queue syntax
