%META:TOPICINFO{author="RobQ" date="1343398350" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="AfricaGridSchool12Materials"}%
---+ Our glideinWMS setup

<!-- ASP 2012 Defaults
   * Local UCL_HOST = %URLPARAM{"INPUT_HOST" encode="quote" default="osg-ss-glidein"}%
   * Local UCL_USER = %URLPARAM{"INPUT_USER" encode="quote" default="user"}%
   * Local UCL_DOMAIN = %URLPARAM{"INPUT_DOMAIN" encode="quote" default="chtc.wisc.edu"}%
   * Local UCL_CWD= %URLPARAM{"INPUT_CWD" encode="quote" default="~/osg_school/glideins"}%
   * Local UCL_SITES = %URLPARAM{"INPUT_SITES" encode="quote" default="Wisconsin,UNL,UCSD,Oklahoma,Chicago"}%
-->

---+ Submission node

The submission node is %UCL_HOST%.

Login with <pre class="screen">
ssh %UCL_USER%@%UCL_HOST%.%UCL_DOMAIN%
</pre>

It shares most of the relevant directories with osg-ss-submit, so you should be able to run most of the Monday's exercises from here as well.

Suggestion:<br>
Make a directory for this exercise in%UCL_CWD%.
<pre class="screen">
mkdir -p %UCL_CWD%
</pre>

---+ The glideinWMS system policy

As explained in the lecture, the matchmaking policy in glideinWMS is defined by the system administrators. For this School, the matchmaking policy is as follows:
   * Jobs without any additional attributes will run on OSG site, but not locally.
   * If a job defines <pre>
+OFFSITE_ONLY = False
</pre>it will run on all OSG resources, including the local cluster here in Wisconsin.
   * The job can further restrict which sites it is willing to run, by defining <pre>
+DESIRED_SITES = "&lt;list of sites&gt;"
</pre>with the available sites being %UCL_SITES%<br>e.g. <pre class="screen">
+DESIRED_SITES = "UCSD,UNL"
</pre>

%TWISTY{
mode="div"
showlink="Other knobs"
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
Other knobs:
   * Not all sites have BLAST installed. If you want to restrict your jobs to only sites with BLAST pre-installed, set<pre>
+REQUIRE_BLAST = True
</pre>
%ENDTWISTY%

All attributes are case sensitive.

---+ A Condor submit system

Remember, glideinWMS is based on Condor.
So the system looks like pretty much like any other Condor system.

You will use the standard Condor commands:
<pre class="screen">
condor_q
condor_status
condor_history
condor_rm
</pre>

The glideinWMS specific details will be described during the exercises.

---+ Customize this Document

%ICON{"warning"}% %RED% Please change your user name and click on the Customize button!%ENDCOLOR%
<form action="%SCRIPTURLPATH{"view"}%/%WEB%/%TOPIC%">
<table>
  <tr>
    <td>
      Login Name
    </td>
    <td>
      <input size=100 type="text" name="INPUT_USER" value="%UCL_USER%"/>
    </td>
  </tr>
  <tr>
    <td>
      Host Name
    </td>
    <td>
      <input size=100 type="text" name="INPUT_HOST" value="%UCL_HOST%"/>
    </td>
  </tr>
  <tr>
    <td>
      Domain Name
    </td>
    <td>
      <input size=100 type="text" name="INPUT_DOMAIN" value="%UCL_DOMAIN%"/>
    </td>
  </tr>
  <tr>
    <td>
      Exercise Path
    </td>
    <td>
      <input size=100 type="text" name="INPUT_CWD" value="%UCL_CWD%"/>
    </td>
  </tr>
  <tr>
    <td>
     &nbsp;
     <input type="submit" class="twikiSubmit" value="Customize" />
    </td>
  </tr>
</table>
</form>

-- Main.RobQ - 27 Jul 2012
