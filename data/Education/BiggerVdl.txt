%META:TOPICINFO{author="ForrestChristian" date="1172614613" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="LectureEightTutorial"}%
%LINKCSS%

---+!! Bigger VDL
%STARTINCLUDE%
%EDITTHIS%

In this exercise, you will expand the VDL used in the "Simple VDL" exercise to include everything necessary to run the whole problem code (as seen in the PROBINTRO exercise).

We introduce several more transformations, and make derivations to process the raw input data into a graph.

<pre class="screen">
<span class="out">$</span> <span class="in">cp -av /opt/vdltut/BIGGERVDL ~</span>
<span class="out">$</span> <span class="in">cd ~/BIGGERVDL</span>
<span class="out">$</span> <span class="in">ls</span>
<span class="out">derivations.vdl     transformations.vdl</span>
<span class="out">$</span> <span class="in">less transformations.vdl</span>
[...observe the new transformations...]
<span class="out">$</span> <span class="in">vdlc derivations.vdl transformations.vdl</span>
<span class="out">20060610T111452.577: [app] using label "derivations"
20060610T111452.578: [app] using output file "derivations.dax"</span>
<span class="out">$</span> <span class="in">vds-plan --pegasus -g QuarkCode --option pools=local --option output=local --option force derivations.dax --base ./dags</span>
[...]
<span class="out">I have concretized your abstract workflow. The workflow has been entered
into the workflow database with a state of "planned". The next step is 
to start or execute your workflow. The invocation required is

vds-run  /home/train99/BIGGERVDL/dags/QuarkCode/derivations/run0004
</span>

<span class="out">$</span> <span class="in">vds-run  /home/train99/BIGGERVDL/dags/QuarkCode/derivations/run0004</span>
<span class="out">
I have started your workflow, committed it to DAGMan, and updated its
state in the work database. A separate daemon was started to collect
information about the progress of the workflow. The job state will soon
be visible. Your workflow runs in base directory

cd /home/train99/BIGGERVDL/dags/QuarkCode/derivations/run0004
</span>
<span class="out">$</span> <span class="in">cd /nfs/home/vdsuser-2/BIGGERVDL/dags/QuarkCode/derivations/run0004</span>
<span class="out">$</span> <span class="in">tail -f tailstatd.log</span>
[...wait...]
<span class="out">20060611T200900.583 [500]: DAGMan finished with exit code 0
20060611T200900.583 [501]: processed chunk of 1095 byte
# updated state in workman
20060611T200900.585 [501]: skipping plots
20060611T200900.585 [501]: finishing, exit with 0
20060611T200900.588 [501]: copied common log to /nfs/home/vdsuser-2/BIGGERVDL/dags/QuarkCode/derivations/run0004

$</span> <span class="in">cd /nfs/scratch01/train02/QuarkCode/vdsuser-2/derivations/run0004</span></pre>

Now, on your local laptop, run:

<pre class="screen"
<span class="out">$</span> <span class="in">scp gridlab1:/nfs/scratch01/train02/QuarkCode/vdsuser-2/derivations/run0004/bigger.png .</span>
<span class="out">$</span> <span class="in">open bigger.png</span>
</pre>

%STOPINCLUDE%

%BOTTOMMATTER%
-- Main.ForrestChristian - 27 Feb 2007
