%META:TOPICINFO{author="BrianLin" date="1468017428" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="UserSchool16Materials"}%
---+ Tuesday Exercise 1.2: Log in to the OSG Submit Machine

The goal of this exercise is to log on to a different submit host so that you can start submitting jobs into the OSG instead of the local cluster here at UW-Madison. Additionally, you will learn about the =tar= and =scp= commands, which will allow you to efficiently copy files between the two submit nodes.

If you have trouble getting =ssh= access to the submit machine, ask the instructors right away! Gaining access is critical for all remaining exercises.

---++ Log in to the OSG submit machine

For some of the remaining exercises today, you will be using a machine named =osg-ss-glidein-submit.chtc.wisc.edu=. The username and password are listed on your 'Accounts' paper that you received yesterday. If you no longer have it, please ask the instructors for help.

Once you have your account details, =ssh= in to the machine and take a look around. Leave this session window up as you will need it later in the exercise.

---++ Preparing files for transfer

When transferring files between computers, it's best to limit the number of files as well as their size. Smaller files transfer more quickly and if your network connection drops, restarting the transfer is less painful than it would be if you were transferring large files.

Archiving tools (!WinZip, 7zip, Archive Utility, etc.) can compress the size of your files and place them into a single, smaller archive file. The =tar= command is a ubiquitous archive tool that you will be using to transfer files between =learn.chtc.wisc.edu= and the OSG submit machine, =osg-ss-glidein-submit.chtc.wisc.edu=. =tar= is a one-stop shop for creating, extracting, and viewing the contents of =tar= files (called tarballs) whose usage is as follows:

   * To *create* a tarball named =&lt;archive filename&gt;= containing =&lt;archive contents&gt;=, use the following command: \
<pre class="screen">%UCL_PROMPT% tar -czvf &lt;archive filename&gt; &lt;archive contents&gt;</pre> \
<p> =&lt;archive contents&gt;= can be a list of any number of files and/or folders, separated by spaces.</p>
   * To *extract* the files from a tarball: \
<pre class="screen">%UCL_PROMPT% tar -xzvf &lt;archive filename&gt;</pre>
   * To *list* the files within a tarball: \
<pre class="screen">%UCL_PROMPT% tar -tzvf &lt;archive filename&gt;</pre>

Using the above knowledge, log into =learn.chtc.wisc.edu=, create a tarball that contains Monday's exercise 2.4, and verify that it contains all the proper files.

---+++ Extra challenge: Comparing compressed sizes

You can adjust the level of compression of =tar= by prepending your command with =GZIP=-<span style="background-color: #FFCCFF;">&lt;LEVEL&gt;</span>=, where =<span style="background-color: #FFCCFF;">&lt;LEVEL&gt;</span>= is a number between 1 and 9 (9 meaning the most compression, 1 meaning the least). On =learn.chtc.wisc.edu=, there is a large file located at =path to file=: use =tar= on it to create a table with tarball file sizes vs compression level.

---++ Transferring files

---+++ Using secure copy

[[https://en.wikipedia.org/wiki/Secure_copy][Secure copy]] (=scp=) is a command based on =SSH= that lets you securely copy files between two different hosts. It takes similar arguments to the =cp= command that you are familiar with but takes additional host information:

<pre class="screen">
%UCL_PROMPT_SHORT% scp &lt;source 1&gt; &lt;source 2&gt;...&lt;source N&gt; &lt;destination&gt; 
</pre>

For example, if I were logged in to =osg-ss-glidein-submit= and wanted to grab the file =/home/blin/foo= on =osg-ss-submit= and copy it to my current directory, the command would look like this:

<pre class="screen">
%UCL_PROMPT_SHORT% scp osg-ss-submit:foo .
</pre>

Additionally, I could also push files to =osg-ss-submit= from =osg-ss-glidein-submit=. The following command copies =bar= from my current directory on =osg-ss-glidein-submit= to my home directory on =osg-ss-submit=:

<pre class="screen">
%UCL_PROMPT_SHORT% scp bar osg-ss-submit:
</pre>

You can also copy folders between hosts using the =-r= option. If I kept all my files from Monday's exercise 1.3 in a folder named =monday-1.3= on =osg-ss-submit=, I could use the following command to copy them to my home directory on =osg-ss-glidein-submit=:

<pre class="screen">
%UCL_PROMPT_SHORT% scp -r osg-ss-submit:monday-1.3 ~
</pre>

Try copying over some of your files and folders from =osg-ss-submit= onto the new submit host.

---+++ Extra challenge: Using rsync