%META:TOPICINFO{author="JamesBarlow" date="1267807100" format="1.1" reprev="1.31" version="1.31"}%
---+ How do I get a DOEGrids PKI/X509 Personal Certificate?

%TOC%

%NOTE% For instructions for getting DOEGrids *service* and *host* certificates, *you're in the wrong place*. See [[ReleaseDocumentation/GetGridCertificates][Get Host Certificates]].

---++ Introduction

If you don't know what a X509 certificate is or what it is used for, see [[CertificateWhatIs][What is a certificate?]].

This document describes how to get and set up a *personal* certificate (also called a grid user certificate), from DOEGrids, a U.S. government certificate authority (CA). DOEGrids is recognized by all OSG resources. Other CAs may be used; if your virtual organization (VO) requires that you get a certificate from a different CA, [[http://www.opensciencegrid.org/?pid=1000187][contact your VO Support Center]] for instructions.
---++ Know Your Responsibilities

When you request a certificate your provide some public personal information about yourself; _name, email address, phone number_, and which Registration Authority ( _RA_) affiliation you have (usually OSG), and which _VO_ (virtual organization) you belong to. If any of this information changes after you have your certificate you should notify your RA (and probably VO) of the changes. For the OSG RA send email to osg-ra at opensciencegrid dot org.

Your *name* and *email* address are encoded into the signed certificate and *if either of those change* (usually email address) then you should *request a new certificate* with the correct information and *revoke the old certificate*.

The DOEGrids CA send out notices warning of certificate about to expire starting 30 days before expiration, using the email address provided when you requested the certificate. If you change your working email address then you will not receive the notices and your certificate will probably expire without your knowledge and you will have to request a new certificate instead of being able to use the self service replacement interface to get a new certificate immediately before the old one expires.

If the *information* in the certificate *becomes invalid*, like *email address change*, *name change*, or *private key lost*, then the *certificate should be revoked*. The CA and RA will make some attempt to contact the certificate owner before revoking the certificate but if the email address is bad then it is likely the certificate gets revoked without your knowledge.

---++ Getting your certificate

There are two different ways to obtain your certificate, either via a command line interface, or through a web browser.  The links below will guide you through whichever method you choose.  The browser method is a bit easier since using the commands may require extra setup and package installation.

[[CertificateGetCmd][Getting a certificate with command line interface.]]<BR>
[[CertificateGetWeb][Getting a certificate using web browser.]]

---++ Renew your DOEGrids personal certificate
If for any reason you are unable to renew your certificate (for example, because it has already expired), please 
request a new certificate according to the instructions above, and in the "Additional Comments" field, 
write "Please issue a certificate with the same DN as my previous certificate."

To renew a certificate, follow these steps:
   1 Go to the [[https://pki1.doegrids.org/][DOEgrids Subscriber Enrollment]] page . 
   1 Select "Replacement Certificate". 
   1 Read the page carefully. 
   1 Select the "High Grade" key length.<!-- appropriate Cryptographic Provider:
      * Linux or other Unix Mozilla/Firefox/Netscape users: Select 2048(High grade) 
      * Windows Mozilla/Firefox/Netscape users: Select Strong Cryptographic Provider. 
      * Windows Internet Explorer users: Select Microsoft Enhanced Cryptographic Provider. --> 
   1 When you submit the form, it will say "Your cert has been imported into the browser!" <!-- prompt you: "This website is requesting a new certificate on your behalf. You should allow only trusted websites to request a certificate for you. Do you want to request a certificate now?" *Click Yes*. 
   1 It will prompt you to "choose a certificate". Your old DOEGrids certificate should be displayed; *select it*.
   1 Then it will prompt: "This website is adding one or more certificates to your computer. Allowing an untrusted website to update your certificates is a security risk. The website could install certificates you do not trust which could allow programs you do not trust to run on this computer and gain access to your data. Do you want this program to add the certificates now? Click Yes if you trust this web site. Otherwise, click No." *Click Yes*.
   1 Then you will see a message that your certificate has been successfully imported. *Click OK*.
   1 It will display your certificate in base 64 encoded format.
   1 Check your email. You should have received a message from DOEGrids.
   1 Assuming you saw and responded to the set of prompts as listed above, your new certificate is already imported. The way you check for it depends on your browser. If it hasn't been imported, follow the link to the URL given in the email message and click the _Import_ button, as directed in the email message.
   1 If you are an OSG RA Agent or Grid Admin, you will need to send email signed by your new certificate to renew your Agent or Grid Admin role. See Security.OsgRaOperations for details.

---++ Revoke your certificate if compromised
 If the security of your certificate or private key has been compromised, you have a responsibility to revoke the certificate. Using the web browser where your certificate and private key are installed, go to the [[http://www.doegrids.org/][DOEGrids site]], choose "Certificate Revocation", and follow the instructions. You can get a new one afterwards.

%COMPLETE2% %BR% 
%RESPONSIBLE% Main.Anne Heavey, Main.DougOlson %BR% 
%REVIEW% Main.AnneHeavey - 04 Dec 2007%BR% 
%REVCOM% reconcile w Security web
