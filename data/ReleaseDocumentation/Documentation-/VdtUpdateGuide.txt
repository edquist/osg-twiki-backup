%META:TOPICINFO{author="AnneHeavey" date="1201805584" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---++ Introduction
This guide provides information on updating an existing OSG install to a new vdt letter releases (1.8.1a, 1.6.1q).

---++ Scope 

%BLUE%A given OSG release goes with a given VDT release, and only lettered updates to the VDT will work with a given OSG version.%ENDCOLOR%

This page is intended to cover letter releases within an existing OSG/VDT release.  E.g. an update from OSG 0.8.0/VDT 1.8.1 to OSG 0.8.0/VDT 1.8.1a .  These updates are made periodically to fix security issues, bugs, and update configuration information in an existing OSG release.

---++ Update Procedure
%NOTE% Do NOT run =pacman -update= since this may leave your install in a NON-FUNCTIONAL state.   

Before updating the VDT, run the following commands:
<verbatim>
cd $VDT_LOCATION=
. setup.sh=
vdt-control --off
</verbatim>
This turns off active services. 

Next replace =BACKUP_LOCATION= with a directory to store a backup of your existing installation: %RED%This isn't clear -- does the backup location exist already? Aren't you just replacing its contents? The phrase " replace with a directory" is throwing me off. Please clarify. %ENDCOLOR%
<verbatim>
cp -pr $VDT_LOCATION BACKUP_LOCATION
</verbatim>

Then use pacman to update each package in the update.  


You will need to read the update notice %RED%Where will they find this?%ENDCOLOR% to find out which packages in the update are applicable. Then issue a:
<verbatim>
pacman -update PACKAGE
</verbatim>
for each applicable package (e.g. =pacman -update GUMS=) .  

%NOTE% You may need to take additional steps, as outlined in the update notice, to complete the update.


---++ Recovering from a failed update
If the update fails or the update causes problems, you can revert back to the pre-update state. First shut down the services: 
<verbatim>
cd $VDT_LOCATION=
. setup.sh=
vdt-control --off
</verbatim>
Then copy the files from =BACKUP_LOCATION= to =$VDT_LOCATION=. Then run:
<verbatim>
cd $VDT_LOCATION=
. setup.sh=
vdt-control --off
</verbatim>
%RED%Not vdt-control --on?%ENDCOLOR%
       
---++ Known Problems
Due to a limitation in the way that pacman works, the current version returned by =vdt-version= after an update will be the latest update version (e.g. VDT 1.8.1h) regardless of whether packages from that version have been updated.  E.g. if VDT 1.8.1a only updated squid and VDT 1.8.1b only updated GUMS, then after running =pacman -update squid=, =vdt-version= will return VDT 1.8.1b.

%BR%
%COMPLETE2% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 18 Oct 2007 %BR%
%REVIEW% Main.AlainRoy - 20 Nov 2007