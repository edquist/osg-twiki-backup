%META:TOPICINFO{author="RobQ" date="1277143929" format="1.1" version="1.20"}%
%META:TOPICPARENT{name="TroubleshootingComputeElement"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%DOC_STATUS_TABLE%
%TOC{depth="2"}%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

---++ Introduction
This document is intended to provide assistance in troubleshooting problems  related to use of the =edg-mkgridmap= script used to maintain the CE host grid-mapfile, if this mode of authorization is used (so-called "Local" and "Compatibility" modes).  Note that =edg-mkgridmap= only polls VOMS servers. 

---++ Error code 64
This type of error generally occurs when the VOMS server cannot find the requested group or subgroup.  Contact with the VOMS server was made and it is really a 'not found' type error.  It is caused by a bad entry in the =edg-mkgridmap.conf= file.

The example below is attempting to access all members of  the uscms VO belonging to the /uscms/production group.

Configuration file =VDT_LOCATION/edg/etc/edg-mkgridmap.conf= entry:<br>
<pre class="programlisting">
 group vomss://voms.fnal.gov:8443/voms/uscms/production uscms01
</pre>

Command run on CE node:
<pre class="screen">
 > <b>source $VDT_LOCATION/setup.(c)sh </b>
 > <b>cd $VDT_LOCATION/edg/sbin </b>
 > <b>./edg-mkgridmap </b>
   <i>... output....
  voms search(https://voms.fnal.gov:8443/voms/uscms/production/services/VOMSAdmin?method=listMembers): /voms/uscms/production/services/VOMSAdmin

   Exit with error(s) (code=64)</i>
</pre>

On the VOMS host you are attempting to access, the following error can be seen in the =TOMCAT_LOCATION/logs/voms-admin.VO_NAME.log=

<pre class="programlisting">
2005-05-26 15:51:04,003 INFO  [Ajp13Processor[8892][1]]  Connection from "131.225.82.73" by 
        /DC=org/DC=doegrids/OU=Services/CN=ce_host (serial 4511) -  service.InitSecurityContext
2005-05-26 15:51:04,004 INFO  [Ajp13Processor[8892][1]]  listMembers ("/uscms/production") -  admin.VOMSAdminSoapBindingImpl
2005-05-26 15:51:04,013 ERROR [Ajp13Processor[8892][1]]  org.edg.security.voms.service.NotInDatabase: 
       Not in database: group "/uscms/production" -  connection.Database
 </pre>

---++ Useful Options for edg-mkgridmap troubleshooting
   
   * [--help] 
   * [--version] 
   * [--conf=config_file]  Default configuration file is at $VDT_LOCATION/edg/etc/edg-mkgridmap.conf
   * [--output[=output_file]] 
   * [--verbose]


%STOPINCLUDE%
%BR%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = IwonaSajrejda

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Troubleshooting
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%


 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = ElizabethChism
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


############################################################################################################
-->



%META:TOPICMOVED{by="ForrestChristian" date="1166047098" from="Integration.EdgMkgridmapTroubleshootingGuide050" to="Integration/ITB_0_5.EdgMkgridmapTroubleshootingGuide"}%
