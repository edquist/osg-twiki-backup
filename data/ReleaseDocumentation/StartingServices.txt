%META:TOPICINFO{author="RobertEngel" date="1284062758" format="1.1" version="1.39"}%
%META:TOPICPARENT{name="ComputeElementInstall"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%DOC_STATUS_TABLE%
%TOC%

%STARTINCLUDE%
%BR%
---+ %SPACEOUT{ "%TOPIC%" }%
%EDITTHIS%
%BR%

---++ Overview of starting services
Starting and stopping services is done via the =vdt-control= script.  This is a general description of the =vdt-control= functionality.  For additional information, consult the man pages available at %VDT_DOCS_URL%/man/vdt-control.html  and also available from the command line using the =man= command. 

*Note*: Beginning with OSG 0.9.0 (VDT 1.10.0), you no longer need to use the =vdt-register-service= command to enable/disable a service.  The =vdt-control= command now contains =--enable/--disable= arguments to perform those functions.

---++ Starting services
When you do an installation, nothing will be running at the 
conclusion of the install. Source the =$VDT_LOCATION/setup.sh|csh= script. Then you have to run the following command as root to start things up:

<pre class="screen">
vdt-control --on
</pre>

This will:
   * Copy files into /etc/init.d
   * Configure xinetd
   * Setup cron
   * Start up processes

If vdt-startup finds conflicts (perhaps from an old VDT install) it might decline to do some of the setup. For example, if you already have a voms service in xinetd from an old installation, it would be considered a conflict. You can force it to do the setup with:

<pre class="screen">
vdt-control --on --force 
</pre>

Or, if there's one service, e.g., mysql, that fails, try:
<pre class="screen">
vdt-control --off --force mysql
vdt-control --on mysql
</pre>

---++ Shutting services off

There are several times when you might want to shut down all the services installed on your CE host.  For example, you should shut down (=vdt-control --off=) before doing a =pacman -update=:

<pre class="screen">
<b>vdt-control --off </b>
</pre>

---++ Listing services
You can list all services with the =--list= option:

For CE  host (example configuration):%TWISTY{
mode="div"
showlink="Show..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
# vdt-control --list
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
gris               | init   | do not enable
globus-gatekeeper  | inetd  | enable
gsiftp             | inetd  | enable
mysql              | init   | enable
globus-ws          | init   | enable
edg-mkgridmap      | cron   | do not enable
gums-host-cron     | cron   | do not enable
MLD                | init   | do not enable
vdt-update-certs   | cron   | do not enable
condor-devel       | init   | enable
apache             | init   | enable
osg-rsv            | init   | do not enable
tomcat-5           | init   | enable
syslog-ng          | init   | enable
gratia-condor      | cron   | enable
</pre>
%ENDTWISTY%

Or, for a VOMS/VOMRS host:
%TWISTY{
mode="div"
showlink="Show..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
# vdt-control --list 
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
vdt-update-certs   | cron   | enable
mysql5             | init   | enable
mysql              | init   | enable
apache             | init   | enable
tomcat-55          | init   | enable
voms               | init   | enable
vomrs              | init   | enable
</pre>
%ENDTWISTY%
---++ =man= page
The =man= pages are available at %VDT_DOCS_URL%/man/vdt-control.html  and also available from the command line using the =man= command. 


%STOPINCLUDE%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = RobertEngel

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager|Documenter)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = HowTo
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = HorstSeverini
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = IwonaSakrejda
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
############################################################################################################
-->