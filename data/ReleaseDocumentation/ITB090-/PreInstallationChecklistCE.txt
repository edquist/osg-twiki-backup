%META:TOPICINFO{author="AnneHeavey" date="1187297004" format="1.1" reprev="1.25" version="1.25"}%
%META:TOPICPARENT{name="CEInstallGuide"}%
%LINKCSS%

---+!!<nop>OSG CE - Pre-installation Checklist
%TOC%
%STARTINCLUDE%


---++ CE Pre-installation Checklist
%EDITTHIS%

---+++ How to set up a cluster
We don't document this fully, but some information is in or available via links on [[SiteFabricBestPractices]].

---+++ Your batch system
It is assumed that your hardware is already running one of the [[OperatingSystems][supported operating systems]]. If your system is a cluster, you may have a batch queuing system installed and configured.

   * If a batch system is installed and it's one of [[http://www.cs.wisc.edu/condor/][Condor]], LSF, PBS or SGE, you can use it directly with the CE software.  If it's Condor, we give instructions here how to use your preinstalled batch system.  For the others, some info is in [[SiteFabricBestPractices]].  
   * If your existing batch system is not one of these four, Condor can be installed to run parasitically on other batch systems.  However it's best to just convert to Condor.
   * If you don't yet have a batch system installed, choose an OSG-supported one: Condor, LSF, PBS or SGE. All except Condor involve some tricky post-installation steps (see [[SiteFabricBestPractices]]).

---+++ If you're using the Condor job manager
Some items are mentioned in the [[CEInstallAssumptions][Assumptions]]. First, refer there.  Next, if you haven't yet installed [[http://www.cs.wisc.edu/condor/][Condor]], do so now. It can be installed with pacman from the VDT cache before the CE software.

%NOTE% The CE software comes with a Condor installation in which the machine runs all the daemons (master, collector, negotiator, schedd, startd).  We advise you to install Condor separately.  %RED%This is described after the CE installation. ???%ENDCOLOR%

   * If you're reinstalling it, first [[OSGShutdownGuide][shut down]] the previous version, then remove it.
   * Pick an install directory different from where you're going to install the OSG CE software, and =cd= to it. 
   * See Integration.CondorBatchSystemHints and Integration.MinimalCondorHints for more information.
   * Use pacman to install Condor (shown for VDT 1.8.0):
<pre class="screen">
# pacman -get http://www.cs.wisc.edu/vdt/vdt_180_cache:Condor
</pre>
      * Answer =y= when asked about trusting the caches and agreeing to license. 
      * Condor has to run under owner _daemon_. %RED%True? Or user "condor" if it exists?%ENDCOLOR% Make sure _daemon_ can write to the installation area.
      * Answer =y= to Condor running automatically.
      * Respond =r= when asked where to install the CA files.
      * See [[CondorBatchSystemHints]].  
   * Define and export the variable VDTSETUP_CONDOR_LOCATION to point to your Condor installation (i.e., the directory directly above bin, etc, lib, and so on): 
<pre class="screen">
# export VDTSETUP_CONDOR_LOCATION=<i>/my/condor/location/</i>
</pre>
   * Define and export the variable VDTSETUP_CONDOR_CONFIG to point to your Condor config file (i.e., =$VDTSETUP_CONDOR_LOCATION/etc/condor_config=):
<pre class="screen">
# export VDTSETUP_CONDOR_CONFIG=$VDTSETUP_CONDOR_LOCATION/etc/condor_config
</pre>

---+++ If you're using fine-grained authorization with !GUMS
To save yourself some steps later on in the privilege (authorization) configuration, set the variable VDT_GUMS_HOST to your GUMS host now.  For example:
<pre class="screen">
# export VDT_GUMS_HOST=<i>mygumshost.domain</i>
</pre>

---+++ If you plan to use Squid for web caching
If you plan to use Squid, a web caching service that speeds up downloads from http servers, install it on a separate host from the OSG CE software. Install it *before* you proceed with the CE installation. To install Squid run:
<pre class="screen">
<i> Remember, on separate machine! </i>
# cd <i> your/squid/install/dir </i>
# pacman -get OSG:squid
</pre>
To learn more, see [[CESquidInstallation]].

<!-- content prior to 8/16/07
If you have installed Condor as your batch queuing system, you are required to set two environment variables so the Condor path is correctly configured. 

   * *VDTSETUP_CONDOR_LOCATION* - the location of your Condor installation  (e.g. =/opt/condor=). The Condor =bin/=, =bin=, =etc/=, =lib/=... directories should be directly under this location.
   * *VDTSETUP_CONDOR_CONFIG* (optional): The location of your Condor configuration file (if non-standard). Default is =$VDTSETUP_CONDOR_LOCATION/etc/condor_config=.

This will result in:
   * VDT middleware services pointing to appropriate locations in your external Condor installation.

For example, if you wish to preserve a Condor installed in the standard location,

<pre class="screen">
$ <b>export VDTSETUP_CONDOR_LOCATION=$CONDOR_ROOT </b>
</pre>

will suffice (provided $CONDOR_ROOT is set, per the usual Condor config).
-->
---+++ Compilers
From OSG 0.5.1 and greater no compilers are required to install the CE. Previous VDT installations presumed that you have a working C and C++ compiler as part of the install.  The gcc and g++ that come as rpms with most Linux distributions are fine.  

---+++ Network setup
It is assumed that your hardware has a working network connection through which packages may be retrieved and from which services may contact your system. The full OSG CE package is ~850 MB.

---++++!! Firewall
If your installation is inside a site firewall, has a host firewall (ipchains/iptables), or is using TCP wrappers (=/etc/hosts.{allow,deny}=), you'll need to review the [[CEFireWalls][Firewall Document]] of this guide and arrange for appropriate Internet access.

---++++!! Time synchronization (NTP) 
Each system should be setup to support network time protocol. Lack of synchronization generally complicates troubleshooting and can cause problems with the security infrastructures evaluation of e.g. proxy lifetimes. 

---++++!! Reverse name lookups (DNS)
For the middleware to correctly function both the forward and reverse lookups as configured through a local DNS service are required for the IP address of the system.


---+++ Previous OSG or Grid3 Installations
If there is a _previous installation_ of the OSG or Grid3 environment or other Globus middleware, please _stop the processes_ which are currently running. This includes the Globus Resource Information Service (GRIS), !Integration.MonALISA and other services configured to start upon initialization on your system. Also, if you've sourced the =$VDT_LOCATION/setup.[c]sh= on your previous VDT install, just log out and log back in to clear out your environment.

More information is provided in the current [[OSGShutdownGuide][OSG Shutdown Guide]] or the Shutdown Guide for the version being upgraded.

---+++ Creation and setup of local user accounts for VOs for OSG 
UNIX user accounts need to be created by the system administrator for the VOs. You will need to create at least one local user account (with the appropriate configuration) for each VO to which you wish to provide resources.  The uid and name of the account can be locally determined. You will be asked to provide a mapping from local accounts to VOs later in the installation, the following default accounts are assumed for examples in this document.  VO's are frequently added to the OSG, any new VO's not mentioned here will appear in =$VDT_LOCATION/monitoring/grid3-user-vo-map.txt=.

The accounts are: 
<table style="vertical-align: top"><tr><td style="vertical-align: top">
   * cdf 
   * fermilab 
   * fmri 
   * gadu 
   * grase 
   * ivdgl 
   * mis 
   * sdss 
</td><td style="vertical-align: top">
   * star 
   * usatlas1 
   * uscms01 
   * ligo 
   * sam 
   * samgrid 
   * dosar 
   * des 
</td><td style="vertical-align: top">
   * glow 
   * grow 
   * gridex 
   * nanohub 
   * geant4 
   * i2u2 
   * mariachi 
   * osg 
</td><td style="vertical-align: top">
   * osgedu 
   * nwicg 
   * ops 
   * gugrid
   * gpn
   * compbiogrid
   * engage
</td></tr></table>

If there is already a "globus" user on the system, the Web Services container will run as globus, else it will run as "daemon"

---+++ Do you have a user certificate?
You will need a personal grid certificate to run validation tests.  If you don't have a personal certificate, or don't know how to generate a grid proxy (grid-proxy-init, etc), contact your [[http://www.grid.iu.edu/osg-includes/sc.php][VO Support Center]]. Or follow the instructions in [[CEInstallGuide#Get_a_personal_grid_certificate][Configuring Public Key Infrastructure]].

%STOPINCLUDE%


%WHU%

<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
<!--Future editors should add their signatures beneath yours!-->

---++!! Major Updates
-- Main.RobQ - 01 May 2006 %BR% 
-- Main.MarciaTeckenbrock - 12 Sep 2006  %BR% 
-- Main.ForrestChristian - 30 Jan 2007 (copyedits) %BR%

%META:TOPICMOVED{by="ForrestChristian" date="1166041461" from="Integration.CEPreInstallationChecklist050" to="Integration/ITB_0_5.CEPreInstallationChecklist"}%
