%META:TOPICINFO{author="TedHesselroth" date="1266263477" format="1.1" reprev="1.7" version="1.7"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! *<noop>%SPACEOUT{ "Storage for the Site Administrator" }%*
%TOC{depth="2"}%


---++Planning and Configuration

For descriptions of the specific software discussed below, please see the [[Storage.WebHome][parent topic]] of this page.

---+++Choosing the storage software

Each site may chose what storage software to deploy. If you can anticipate usage patterns, you can more effectively plan your system. To see a summary of data movement patterns, see [[Storage.WebHome#IntroStorageEndUser][Storage for the End User]]. Based on expected job runtime and data movement profiles, the following are rules of thumb for addressing this issue. Further information and installation instructions are provided in succeeding sections. 

   * *Shared file system.* If the jobs running on your site need less than a few terabytes of storage and have lightweight, local data transfer requirements, a NFS filesystem shared among worker nodes would be sufficient. In further documentation, this option is covered in the "Local Storage" section, since it must be configured along with additional required storage that resides on the worker node itself.

   * *gridftp server.* If access to authorized off-site entities is required and storage size and data-handling capacities are moderate, a gridFTP server should be deployed. Since Storage Elements also include bundled gripFTP servers, consider the cost/benefit of installing a Storage Element in this case. A Storage Element may be somewhat more complex to set up, but offers benefits in throughput and expandability.

   * *xrootd.* This storage software would be installed if it is known that user applications require it. Some Storage Element implementations are compatible with xrootd; Bestman-Gateway can use xrootd as the file system, and dCache supports the protocol that xrootd uses for file transfer.

   * *Storage Element.* If your site will provide storage for many terabytes of data, or will provide extensive storage access to off-site entities, you will need to install a Storage Element. There are choices among Storage Element implementations that present a range of complexity and capability; see the following sections.

Sites often employ some combination of the above, for example, allowing jobs with light storage requirements to use a shared file system, but making a Storage Element available for greater storage needs. In some cases the Storage Element and the shared file system may use the same underlying distributed file system, providing local access from the worker nodes and external access through the gsiftp protocol, or the SRM specification.

---+++ Other Required Software

In addition to the above, to operate on the Open Science Grid other software for grid-wide monitoring and accounting of storage must be installed.

   * *Gratia*

   * *GIP*
[[InformationServices/DcacheGip]]
   * *RSV*


---+++Hardware Requirements

For a storage size of from several to a few tens of terabytes, a disk array is recommended. If data redundancy through RAID5 is desired, the usable storage will be about half of the installed disk space.  It is recommended that any Storage Element be installed on at least one dedicated server, several if higher performance is needed, up to dozens if a large distributed storage system is employed. For very high transfer rates, 10 Gbs network connections are used if available through the campus network infrastructure. Except for the largest sites, processor requirements are not more severe than for computational nodes, though namespace nodes for systems storing a large number for files may need 8 GB memory. 


---++Installation

Installation of the software listed above is provided in the ReleaseDocumentation. Specific links are shown below.

---+++Shared file system

OSG does not provide instructions for creating a shared NFS file system.  Assuming such has be set up, instructions for configuring OSG software to make use of it and other needed storage types are found in [[ReleaseDocumentation.LocalStorageConfiguration]] Some Storage Elements allow sharing of files through mount points. See the documentation for each storage element to determine its local access capability.

---+++gridftp server

A stand-along gridftp server was once called a storage element, and so is still sometimes referred to as a "classic SE". Installation of a gridftp server is included in the OSG distribution, see [[ReleaseDocumentation.GsiFtpStandAlone]]. Configuration of worker nodes to use a gridftp server is explained in [[ReleaseDocumentation.StorageElementAdmins]]. For an overview of the general features and use of gridftp, please see https://twiki.grid.iu.edu/bin/view/Documentation/StorageGridFTP.

---+++xrootd

xrootd provides posix-like file access in the context of physics analysis programs written with "root". It is included in the OSG distribution. For installation instructions, see [[ReleaseDocumentation.XrootdStandAlone]].

---+++Storage Element

All Storage Element implementations in the Open Science Grid support the gsiftp protocol and the SRM specification (with the exception of the Bestman gateway, which supports key elements of the SRM specification, not including space reservation). Implementations vary in other features, such as the choice of underlying distributed storage, support for additional file transfer protocols, and support for a tape-archival backend. Because it allows for a choice among various distributed storage implementations, there are several flavors of Bestman in particular.

---++++Bestman-filesystem
[[ReleaseDocumentation.BestmanGateway]]

[[ReleaseDocumentation.Bestman]]

[[ReleaseDocumentation.BestmanOnCE]]

---++++Bestman-xrootd
[[ReleaseDocumentation.BestmanGatewayXrootd]]

---++++Bestman-hadoop
[[Storage.Hadoop]]

---++++dCache
[[Storage/OpportunisticStorageSetup]]

[[Storage/SpaceResServerSetup]]

[[Storage/OpportunisticStorageUse]]

---+++Gratia

---+++GIP
[[InformationServices/DcacheGip]]
---+++RSV
---++Validation

[[ReleaseDocumentation.ValidateDcacheGratia]]

[[Integration/ITB090/InstallationITBStorageElement]]

[[ReleaseDocumentation/GPlazmaInteropTesting]]

[[Storage.OpportunisticStorageForSCEC]]
---++Tuning
---++Troubleshooting
---+++OSG Support Process
---++Tools
---+++ OSG Storage Operations Toolkit
 [[http://datagrid.ucsd.edu/toolkit/][OSG Storage Operations Toolkit ]] 
-- Main.TedHesselroth - 13 Jan 2010
