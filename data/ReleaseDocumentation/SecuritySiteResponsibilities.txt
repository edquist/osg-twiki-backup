%META:TOPICINFO{author="AnandPadmanabhan" date="1250265918" format="1.1" reprev="1.16" version="1.16"}%
%META:TOPICPARENT{name="Security.WebHome"}%
%LINKCSS%

<!-- This is the default OSG documentation template. Please modify it in -->
<!-- the sections indicated to create your topic.                        --> 

<!-- By default the title is the WikiWord used to create this topic. If  -->
<!-- you want to modify it to something more meaningful, just replace    -->
<!-- %TOPIC% below with i.e "My Topic".                                  -->

---+!! Site Responsibilities for Security
%TOC%

This describes the expectations and actions that a site administrator handles regarding security issues
as a participant in OSG.

---++ But first, our (OSG security team) responsibilities for sites
Our goal is to minimize disruptions caused by attacks or security problems so that your work is more effective and
the computational resources are more productive.
We recognize that participating in and operating grid resources and infrastructure is a learning experience
for ALL OF US.
In addition to keeping up with vulnerabilities discovered with the grid middleware and having a security process
intended to reduce the likelihood that security problems cause a significant disruption to the productive use of the resources,
we strive to provide helpful information and assistance to site administrators (and other grid participants).
We are sure that the information provided to site administrators and grid users is incomplete and could be greatly improved.
We hope (and would like) that site administrators (and others) that have questions will ask. And, one of the main reasons that
documentation is maintained on the TWIKI is so that everyone can be a participant in improving the information.

---+++ We are happy to answer questions
Recognizing the inherent limitations in the documented information about OSG, and because we enjoy
getting to know the other people in our grid community, we expect to get questions, and are happy to answer them
(if we know the answer). And if we don't know the answer we probably have an idea about where to find the
answer.  But we can't answer questions unless you ask, so please ask.  Remember, there are no stupid questions,
only stupid answers.

If your question is about a suspicious behavior, possibly an incident, then email us at security@opensciencegrid.org. This is a 24*7 alert list that we immediately respond to. 

---+++ How can we help you more effectively?
Don't hesitate to tell us how we can be more effective or to ask a question.
You can email security@opensciencegrid.org or contract one of the security [[Security.SecurityTeamMembers][team members]]
individually.

   
---++ Background
It is expected that the administrative and security contacts for a resource registered with OSG (in OIM)
are capable of dealing with the normal system administration and security practices of running
a cluster of machines for scientific computing.  The security materials provided on the OSG twiki
occasionally mention examples of how basic computer security features could be handled
but that is not a replacement for formal in-depth training on unix system administration.

Having said that we know that some small site admins (e.g. Tier-3s) may not have much experience in system level security. We have started collecting some examples in a Security.BestPractices page (which you are welcome to contribute to). If there are particular issues that you would like to learn more about (e.g. firewall configuration, linux updates), we can gladly point you to more specific resources. We may not have the effort to train you on basic security topics, but we will try our best to give you resources and put you in the right direction. Let us know!  

---++ Site Registration
This is normally a one time occurrence and is handled by filling out the registration form
at the [[http://www.grid.iu.edu/][OSG Grid Operations Center]] and attending one of the
[[Operations.ProductionMeetingMinutes][weekly Operations meetings]] to introduce yourself and your site.

It is important to provide accurate and reliable contact information with the registration.
At large sites, with active involvement with OSG, there are multiple individuals dedicated for operations and security. At some small sites it is likely that the operations contact
and the security contact are the same person.  

The important aspect of the security contact
is to be someone who will read and understand the security notices from OSG, keep his/her eyes open over his/her site and ask questions when something is confusing.  
If the professional computer & network security staff at your site need to be reminded of
what OSG is every time you ask them something, then the security contact for OSG should be
the person responsible for the general system administration of the grid resource. (That person is likely to be the reader of this page, what are you meaning here?)
 
---++ Know who your institutional cyber security officer is
Most institutions have someone responsible for cyber security at the institution, usually
reporting to the CIO (Chief Information Officer) of the institution.  The person responsible
may have the title of Cyber Security Officer, or Computer Protection Program Manager,
or some other title. They are typically responsible for security of the central IT systems,
network security, and security awareness training for the users at that institution.
You should know who that person is. If you don't know who that is,
consider the following scenario.

%BLUE%Suppose someone has posted bootleg copies of licensed software
on one of your computers and it is available for download via a file sharing network
(bit torrent, gnutella, etc.) and it is discovered by the network security staff.
Who is going to come see you to investigate?
*Answer:* Someone from the cyber security officer's team.%ENDCOLOR%

You should introduce yourself to the cyber security officer and discuss any
institutional requirements for the operation of your grid site. Remember your local security team is always the primary party responsible for the security of your site. They may want to understand what your participation in OSG means. E.g. see [[https://twiki.grid.iu.edu/bin/view/Security/SecurityRisksCE][Cyber Security Risks of Grid Resources]] If your local team has specific questions, let us know.  

---++ Maintenance of Contact Info in OIM
You can update your contact information in the [[https://oim.grid.iu.edu/][OSG Information Management (OIM)]] system
by clicking the Profile link.
You need a [[Documentation.CertificateGet][personal X.509 certificate]] in your web browser in order to register with OIM and to
access it to update your information.  OSG will do a periodic assessment of the contact information to encourage its
being accurate (twice a year),  but it is expected that people will keep their own information current.

Please also update OIM and notify the GOC whenever the operations or security contacts for your site change.

%RED% Maintaining valid contact information is 50% of being a GREAT site admin! Seriously. We will send you security patches, updates, instructions for risk mitigation, and so on. Without valid contact information, you are out in the cold. Also, if you become unresponsive to all of our connection attempts, we will start thinking you left OSG. %ENDCOLOR%  

---++ Communicate Securely - working familiarity with X.509 (SSL) and PGP (!GnuPG)
There is an [[Documentation.OsgFaq#Security_and_Certificates][FAQ on Security and Certificates]] that answers several
questions about using certificates in OSG.
In particular, note the question "My web browser does not trust the DOEGrids CA?" and answer
at the bottom of that page.
Web browsers are putting up more informative (scarier?) messages these days when you try to access
a web site that uses an SSL certificate from a CA which is not trusted by your browser.
Most of the grid CAs, including the DOEGrids CA used extensively by OSG,
are not automatically trusted in your web browser.  It is helpful to follow the instructions in the FAQ answer
and install the ESnet Root CA & DOEGrids CA certificates into your browser from the trusted
repository https://www.tacar.org/repos.

In addition to trusting server certificates, there are uses for having your personal certificate (and private key)
installed in your web browser so it can be used to authenticate to web sites, such as [[https://oim.grid.iu.edu/oim/home][OIM]] mentioned above.
If you need a personal certificate you can follow the [[Documentation.CertificateGet][instructions at this link]].

---++ Read Security Notifications from OSG
OSG sends out security notifications to all security contacts when important events occur,
like a vulnerability notice requiring a software update.  If you receive a notice you are expected to read it
and read the detailed information linked to a ticket at the GOC.
The notice looks similar to:
<verbatim>

-------- Original Message --------
Subject: OSG-SEC-NOTIFY-2009-06-20
Date: Sat, 20 Jun 2009 00:22:49 +0000 (UTC)
From: goc@OPENSCIENCEGRID.ORG
To: goc@OPENSCIENCEGRID.ORG


A new security notification has been posted.

You are receiving this message because you are listed as a security contact for an OSG resource 
or VO or support center. Assuming you are registered on OIM, and are authorized to view 
security tickets, please open the following URL for further information:
https://ticket.grid.iu.edu/goc/viewer?id=XXXXX

Please contact security@opensciencegrid.org if you have any questions or concerns.

This message is digitally signed. We encourage you to verify the digital signatures on 
OSG security announcements according to:
https://twiki.grid.iu.edu/bin/view/Security/SecureEmail

Sincerely,
OSG Security Team
</verbatim>

Any subsequent correspondence you have about a particular notice should include the
OSG-SEC-NOTIFY tag in the subject line <br/>(<tt>OSG-SEC-NOTIFY-2009-06-20</tt> in the example above).

As indicated, the notice should be digitally signed either as S/MIME with an X.509 certificate,
or using PGP key for security@opensciencegrid.org. Do not know how to verify signed emails, go to [[Security.SecureEmail][Secure Email]] and we will explain step-by-step how to do this. 

Using PGP for these messages rather than SMIME based on grid certificates is useful for several reasons. The PGP trust is separate from the X.509 PKI trust basis and can still be used
if something compromises the PKI trust used for all grid computational transactions. Also,  PGP keys do not expire in a year so you can always read old emails. You do not need to understand all these details, although you are welcome to ask questions if you wish to learn. We just expect you to be able to verify PGP encrypted or X.509 encrypted emails.  OSG security team uses PGP keys in email communications because they are easier to work with. You will certainly need to verify X.509 encrypted emails because whole grid software is built on X.509 certificates. 

You will need your personal certificate that is registered with OIM in your browser in order to read the details of the notice in the ticket.



---++ Apply security updates of VDT/OSG software
There are frequent updates to the grid software for security and functional improvements,
just like any other software.  The update will tell you how severe the patch is and how quickly you should apply it. We very highly recommend following the update. It is ultimately your decision as the site admin when to apply a patch but anything
longer than a few days delay should have a good reason.
One example notice of an update message is:
<verbatim>

-------- Original Message --------
Subject: Security updates: VDT 1.10.1x and 2.0.0p2
Date: Mon, 08 Jun 2009 20:51:23 +0000 (UTC)
From: goc@OPENSCIENCEGRID.ORG
To: goc@OPENSCIENCEGRID.ORG

The VDT team announces the immediate availability of VDT 1.10.1x and 2.0.0p2, which contain an 
important security update to Glexec.  You can read about the VDT updates and the security advisory 
on these pages:

http://vdt.cs.wisc.edu/releases/1.10.1/release-x.html
http://vdt.cs.wisc.edu/releases/2.0.0/release-p2.html
http://vdt.cs.wisc.edu/advisories/glexec-0.5.36.html

We recommend updating installations of VDT 1.10.1 and 2.0.0 right away.
Please submit problems, requests, and questions at:
https://oim.grid.iu.edu/gocticket/

Thank You,
OSG Grid Operations Center (GOC)
Submit a GOC ticket: https://oim.grid.iu.edu/gocticket
Email/Phone: goc@opensciencegrid.org, 317-278-9699
GOC Homepage: http://www.opensciencegrid.org/ops
RSS Feed: http://osggoc.blogspot.com
</verbatim>

The notice above is for a security update to the Glexec software and should be considered urgent
for sites running Glexec. If a site is not running Glexec then it is not urgent. 
If you are not sure if you run a specific component or not, there are a few things you can do. Use vdt-control --list command. This will give you a list of running grid services. Or Go to [[http://vdt.cs.wisc.edu/documentation.html][VDT Documentation]] web site to find out which components are included in a particular version.  

Another example notice is shown below, which is a more general software update
but includes a security update for Java.  Most sites use Java in one form or another
and so it should be considered important for all sites but since it was not identified
specifically as a Security Update it is not critical for security purposes. However, it may be critical for proper functioning of your services .
<verbatim>

-------- Original Message --------
Subject: VDT 1.10.1y released
Date: Thu, 18 Jun 2009 15:22:38 +0000 (UTC)
From: goc@OPENSCIENCEGRID.ORG
To: goc@OPENSCIENCEGRID.ORG

Hi,

The release instructions follow:

The VDT team has released an update to VDT 1.10.1.

This release includes:
- a security update for Java

Show More

- bug fix updates for Bestman, the SRM Fermi client, the Generic
Information Provider (GIP), and RSV.
- an update to the PPDG cert scripts

Further details and instructions to update the affected VDT packages
are located here:
http://vdt.cs.wisc.edu/releases/1.10.1/release-y.html

Once again, the new VDT Updater can be used to update your software.
See the URL above for more information.

After updating the VDT packages on your installation, you will need to
run:

pacman -update osg-version

in order to update your osg-version number.

Please submit problems, requests, and questions at:
https://ticket.grid.iu.edu/goc

Thank You,
OSG Grid Operations Center (GOC)
Email/Phone: goc@opensciencegrid.org, 317-278-9699
GOC Homepage: http://www.opensciencegrid.org/ops
RSS Feed: http://osggoc.blogspot.com

</verbatim>

---+++ History of VDT Advisory Notices
http://vdt.cs.wisc.edu/advisories/index.html

---++ Maintain up-to-date Trusted CA information
The Trusted CA (certificate authority) certificates and their associated Certificate Revocation Lists (CRL) are used
for every transaction on a resource that establishes an authenticated network
connection based on end user's certificate. In order for the authentication
to succeed, the user's certificate must have been issued
by one of the CAs in the Trusted CA directory, and the user's certificate
must not be listed in the CRL for that CA. CRLs can be thought of as a black list of certificates. CAs are the trust authorities, similar to DMV that issues you the driving license. (Another way of thinking CRLs is the do-not-fly lists at the airports. if your certificate shows up in CRLs, you are not allowed access.) This is handled at the certificate
validation stage even before the authorization check (which will provide the mapping
of an authenticated user to a local account UID/GID). So you do not need to do worry about it; the grid software will do this for you. However, you should worry about whether your site have a fresh list of Trusted CAs. There are multiple trust authorities in OSG (think of it as a different DMV for each state). If you do not have a up-to-date list of CAs, it is possible that
all transactions with your site will start to fail.

There are two services that should be running in order to keep the CA certificate
information current, *vdt-update-certs* and *fetch-crl*. There is a tool called *vdt-ca-manage* which can turn on these processes and has many other useful features, such as specifying where the Trusted CA certificates are to be stored on your machine. A complete documentation of vdt-ca-manage command can be found [[https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/VDTCAManage][here]].

The example below shows the use of *vdt-ca-manage* and turning on the
*vdt-update-certs* and *fetch-crl* services for an installation of the OSG 1.2 client
package. 

<verbatim>
OSG Client 1.2 install

# cd /opt/pacman
# wget http://physics.bu.edu/pacman/sample_cache/tarballs/pacman-3.28.tar.gz

# tar --no-same-owner -xzvf pacman-3.28.tar.gz

# cd pacman-3.28
# . ./setup.sh
# cd /opt
# mkdir osg-client-1.2
# cd osg-client-1.2/

# pacman -get http://software.grid.iu.edu/osg-1.2:client
Do you want to add [http://software.grid.iu.edu/osg-1.2] to [trusted.caches]? (y/n/yall): y
Do you want to add [http://vdt.cs.wisc.edu/vdt_200_cache] to [trusted.caches]? (y/n/yall): y
Beginning VDT prerequisite checking script vdt-common/vdt-prereq-check...

All prerequisite checks are satisfied.



========== IMPORTANT ==========
Most of the software installed by the VDT *will not work* until you install
certificates.  To complete your CA certificate installation, see the notes
in the post-install/README file.


The VDT version 2.0.0 has been installed.


The OSG Client package OSG version 1.2.0 has been installed.

# . ./setup.sh

# vdt-ca-manage --help setupca
vdt-ca-manage setupca --location [root|local|<PATH>] --url [vdt|osg|<URL>]
  Location:
    root  - install into /etc/grid-security
    local - install into $VDT_LOCATION/globus/share
    PATH  - install into PATH (e.g. /nfs/certificates)

  URL:
    vdt - use the VDT convenience distribution
    osg - use the OSG GOC distribution
    URL - use the distribution at URL (e.g. http://your.site.edu/ca-certificates-manifest-file)


# vdt-ca-manage setupca --location local --url osg
Setting CA Certificates for VDT installation at '/opt/osg-client-1.2'

Setup completed successfully.


# vdt-control --enable vdt-update-certs
running 'vdt-register-service --name vdt-update-certs --enable'... ok
# vdt-control --on vdt-update-certs
enabling cron service vdt-update-certs... ok

## Edit vdt/etc/vdt.logrotate to change rotation frequency and retention period
## from daily - 1 week to monthly - 1 year
# diff vdt/etc/vdt.logrotate vdt/etc/vdt.logrotate.orig
2,3c2
< # daily
< monthly
---
> daily
6,8c5
< # rotate 7
< # Keep a year's worth
< rotate 12
---
> rotate 7

# vdt-control --enable vdt-rotate-logs
running 'vdt-register-service --name vdt-rotate-logs --enable'... ok
# vdt-control --on vdt-rotate-logs
enabling cron service vdt-rotate-logs... ok


# vdt-control --enable fetch-crl
running 'vdt-register-service --name fetch-crl --enable'... ok
# vdt-control --on fetch-crl
enabling cron service fetch-crl... ok

# vdt-control --list
Service                 | Type   | Desired State
------------------------+--------+--------------
fetch-crl               | cron   | enable
vdt-rotate-logs         | cron   | enable
vdt-update-certs        | cron   | enable
condor                  | init   | do not enable
globus-ws               | init   | do not enable

# crontab -l
55 * * * * /opt/osg-client-1.2/vdt/sbin/vdt-update-certs-wrapper --vdt-install /opt/osg-client-1.2 --called-from-cron
0 0 * * * /opt/osg-client-1.2/vdt/bin/vdt-rotate-logs
11 0,6,12,18 * * * /opt/osg-client-1.2/fetch-crl/share/doc/fetch-crl-2.6.6/fetch-crl.cron

# cat vdt/var/ca-certs-version
1.9
</verbatim>

Notice that the example ends with displaying the current version of the CA certificate package. You can compare
this version with the distribution point at http://software.grid.iu.edu/pacman/cadist/ to see if they are the same,
in which case you have the most recent version.

%RED%Also add example of showing log info on the fetch-crl status.%ENDCOLOR%


---++ Maintain up-to-date VO and user access information

Each VO on OSG keeps a up-to-date list of their members. These are the users that should be given access to sites on behalf of the VOs. It is important to keep these lists up to date so that when VO removes a user for whatever reason, your site would also stop providing access to the particular user. 

OSG software is already configured to keep a valid VO membership list, so you do not need to worry about this except for configuring the service initially. 

There are two services: [[ReleaseDocumentation.InstallConfigureAndManageGUMS][GUMS]] and [[ReleaseDocumentation.LocalAuthPreConfig][edg-mkgridmap tool]]. They both keep the list of VO members on your site. When a user make an access request, s/he is first authenticated, then s/he is is sent to either GUMS or edg-mkgridmap tool. If one of the tools find the user name listed in a VO member list, user is granted access. 
 
GUMS is a Java-based service running in Tomcat. If you have multiple gatekeepers, storage elements, grid services, they can all connect to GUMS for authorization information. If you choose to use GUMS, all of the services you install at your site which require authentication and authorization
for outside users should be configured to [[ReleaseDocumentation.FullPrivPreConfig][use this GUMS server]] as the source for authorization. You need to carefully check the documentation for each service you install (CE, SE, VOMS, ...) to make sure that
it is configured to use your GUMS server.


edg-mkgridmap tool runs via cron to get updated VO membership information (VO membership is kept in VOMS servers) and generates a grid-mapfile. The grid-map file is a simple text file listing the names of VO members. If you have grid services installed on more than one node, then you will need to have multiple
copies of this grid-mapfile on each node. This can lead to confusion, opportunities for errors and reduced reliability. 

You have two responsibilities regarding authorization: 1) is to keep VO membership lists up-to-date at your site. When you configure GUMS or edg-mkgridmap tool correctly, this will happen automatically. So all you need to do to check your log files every so often to ensure everything works as expected. 
OSG provides default configuration templates for both tools. So you should make sure that you get the right configuration template, which is your second responsibility. 

2) When OSG makes a change to teh configuration file, the GOC (Grid Operations Center) sends out an email to you. You should fetch the new configuration template and install it. At this time (August 2009) there is not an automatic update of the GUMS configuration or edg-mkgridmap so you must take some manual action. However, we are working on an automated configuration mechanism which will eliminate any of the manual intervention. So until then you should watch out for these emails from GOC.

---++ Respond to requests from the OSG Security Officer
In many ways, the most important security requirement for running a site is that you communicate
with the OSG Security Officer and the Security Team. These people are listed [[Security.SecurityTeamMembers][here]].
When issues come up or incidents occur there is usually some manual intervention
required and this means reading email from the OSG security team or taking phone calls (in the most urgent cases).
In order to be sure that OSG can communicate with the site administrator responsible for security of a site
there is the periodic update of contact information in OIM (as described above).

If you have confidential information to provide to the OSG security team, it can be sent via encrypted email
(see description below) or submitted as a [[https://ticket.grid.iu.edu/goc/security][security ticket to the GOC]]
(requires a registered X509 certificate in your browser). Of course, you can always use the telephone as well
for secure communications (call the [[http://www.grid.iu.edu/][GOC]]
or [[Security.SecurityTeamMembers][individual security team members]]). 

%BLUE%Anything you tell OSG security team in confidentiality will be kept confidential. We will not share it with any other parties, including other sites, VOs, and OSG management. Of course if the preservation of the information presents an imminent threat against the security of OSG, we may share it with other parties. BUT before doing that we inform you first and decide how much to disclose and how to disclose.%ENDCOLOR%  



---+++ Incident Response Drills
OSG occasionally conducts security drills (think fire drill) with some or all of the OSG sites.
Since we (thankfully, knock wood) don't have many actual incidents, it is important that the
communications and response patterns needed for a real incident are exercised to make sure
they actually function. There was a rather detailed drill conducted with the Tier1 centers (BNL, FNAL)
and an expectation that there will be a drill including Tier2 centers in the future.
There is not currently (July 2009) a drill being planned including the Tier3 centers (beyond the OIM contact information update)
but it is likely some type of drill will be planned in the future.
When such a drill occurs, we inform you about it several days before and the emails are very clearly marked as indicating a drill rather than
a real incident. So there will be a lot of communication before such a drill is conducted with Tier3s. No worries. 

The drills are not to embarrass sites, or grade them, but to teach ourselves what needs to be done in a real security emergency. So do not treat drills as quizzes but as learning opportunities. 

---++ Responding to an Incident
We have not had a serious grid incident so far. But this does not mean we will not have one. Incidents and attacks are a regular part of computer security lifecycle and they are expected to happen. So there is no need to be ashamed or overly panicked when they happen.  

First step is to realize that something out of ordinary is happening, a new user launching thousands of jobs, or new ports opening up, etc. If you cannot decide whether it is a security incident or not, err on the side of being cautious. Email us anytime at security@opensciengrid.org. If it turns out to be a non-issue, great. We do not even open a ticket and close the issue. If it turns out to be a local security issue, not related to grid software, again, we will close the issue silently. You can go back to your local team. Our goal is not to judge your abilities as a site admin or police your actions, but to help all of us being secure. If your suspicions turns out to be a real issue, we will work with you at every step. We will inform you before making any announcements, show you how much we disclose and keep you in the loop. 

the details of Incident response process is listed at [[Security.IncidentDiscoveryReporting][Incident discovery reporting process]] 

---++ When to report a security incident to OSG
The goal of the OSG security team in incident handling is first to contain the incident
to prevent it from spreading, and to help the site administrators to diagnose the cause or vulnerability of the incident,
and then to learn from the incident and improve the infrastructure accordingly.
Because we are participating in a world wide infrastructure, OSG will %RED%confidentially%ENDCOLOR% share
information about incidents that is relevant to our partners in other countries. This means that we will keep you in the loop before we disclose any information about your site. When you first contact us, we will work with you and your local security team to decide what information we can share with other communities. We will not endanger your site's public reputation. We will share information when we believe other grid sites also subject to the same attack.   

Any circumstance that causes the grid credentials (X.509 certificate private key or proxy certificate)
to be compromised should be reported to OSG. What does compromised mean? It means the
private key of an X.509 certificate, or a proxy certificate file, is accessible to someone or some process
which is not the owner of the credential (not counting the root account). Also, if the root account is
hacked on any system which stores X.509 private keys or proxy certificate files then all those
credentials are compromised.  If you have evidence that the compromised credentials are actually
used by the intruder that should be reported as well. Note that these credentials can be either
for a person or for a host or service.  If it is an X.509 certificate private key that is compromised
that should also be reported to the issuing Certificate Authority so that certificate can be revoked.

If any system which runs grid services, hosts grid software or runs grid batch jobs has
its root account hacked then that incident should be reported to OSG.

When an incident is confidentially reported to OSG then someone from the OSG security team
will follow-up with the site and proceed according to the circumstances.


---++ Be familiar with the OSG Security web site
Information regarding incident handling, security best practices, awareness training, procedures, etc.
is linked from the main [[Security.WebHome][OSG Security twiki page]].  You should familiarize yourself with
this information and browse through it *before* you have a security incident.  Especially the sections
marked *URGENT* and *Security Awareness for OSG Participants*.
If you have any questions about any of the material *ASK*.


---++ Search log files
The two primary log files which show authentication to the gatekeeper and gridftp servers are
<tt>$VDT_LOCATION/globus/var/globus-gatekeeper.log</tt>
and
<tt>$VDT_LOCATION/globus/var/log/gridftp-auth.log</tt>.
An excerpt from a gatekeeper log below shows an rsv probe authenticating and starting to run.
<verbatim>
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 6: /opt/osg-itb-1.0/globus/sbin/globus-gatekeeper pid=7531 starting at
Wed Jul 29 00:14:01 2009

TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 0: GATEKEEPER_ACCT_FD=4 (/opt/osg-itb-1.0/globus/var/accounting.log)
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 6: Got connection 131.243.2.182 at Wed Jul 29 00:14:01 2009

TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 5: Authenticated globus user: /DC=org/DC=doegrids/OU=Services/CN=rsv/gr
olsch.lbl.gov
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 0: GATEKEEPER_JM_ID 2009-07-29.00:14:01.0000007531.0000000000 for /DC=o
rg/DC=doegrids/OU=Services/CN=rsv/grolsch.lbl.gov on 131.243.2.182
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 5: Requested service: jobmanager [PING ONLY]
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 5: Authorized as local user: rsvuser
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 5: Authorized as local uid: 778877
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Notice: 5:           and local gid: 778877
Failure: ping successful
TIME: Wed Jul 29 00:14:01 2009
 PID: 7531 -- Failure: ping successful
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 6: /opt/osg-itb-1.0/globus/sbin/globus-gatekeeper pid=7614 starting at
Wed Jul 29 00:14:01 2009

TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: GATEKEEPER_ACCT_FD=4 (/opt/osg-itb-1.0/globus/var/accounting.log)
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 6: Got connection 131.243.2.182 at Wed Jul 29 00:14:01 2009

TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 5: Authenticated globus user: /DC=org/DC=doegrids/OU=Services/CN=rsv/gr
olsch.lbl.gov
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: GATEKEEPER_JM_ID 2009-07-29.00:14:01.0000007614.0000000000 for /DC=o
rg/DC=doegrids/OU=Services/CN=rsv/grolsch.lbl.gov on 131.243.2.182
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: GRID_SECURITY_HTTP_BODY_FD=7
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 5: Requested service: jobmanager-fork
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 5: Authorized as local user: rsvuser
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 5: Authorized as local uid: 778877
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 5:           and local gid: 778877
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: executing /opt/osg-itb-1.0/globus/libexec/globus-job-manager
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: GRID_SECURITY_CONTEXT_FD=10
TIME: Wed Jul 29 00:14:01 2009
 PID: 7614 -- Notice: 0: Child 7656 started
</verbatim>
In this case you can see the <tt>globus user</tt> authenticates (an rsv probe)
and the gatekeeper starts up the fork jobmanager to run the rsv probe job.

The example below is an excerpt from the gridftp-auth.log file.
<verbatim>
[32500] Wed Jul 29 02:08:00 2009 :: Server started in inetd mode.
[32500] Wed Jul 29 02:08:00 2009 :: Configuration read from /opt/osg-itb-1.0/globus/etc/gridf
tp.conf
[32500] Wed Jul 29 02:08:00 2009 :: New connection from: grolsch.lbl.gov:41305
[32500] Wed Jul 29 02:08:00 2009 :: DN /DC=org/DC=doegrids/OU=Services/CN=rsv/grolsch.lbl.gov
 successfully authorized.
[32500] Wed Jul 29 02:08:00 2009 :: User rsvuser successfully authorized.
[32500] Wed Jul 29 02:08:00 2009 :: Starting to transfer "//tmp/1248858480-gridftp-probe-test
-file-remote.32470".
[32500] Wed Jul 29 02:08:00 2009 :: Finished transferring "//tmp/1248858480-gridftp-probe-tes
t-file-remote.32470".
[32500] Wed Jul 29 02:08:01 2009 :: Closed connection from grolsch.lbl.gov:41305
</verbatim>
In this example you again see an rsv probe authenticating and transfering a test file.

A (nearly?) complete list of log files shown on [[ReleaseDocumentation.ComputeElementLogFiles][this page]] is mostly useful for
diagnosing operational problems but can also be useful for forensics of a security incident.



<!-- %BOTTOMMATTER% -->

-- Main.DougOlson - 07 Jul 2009
