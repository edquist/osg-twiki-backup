%META:TOPICINFO{author="MuraliRamsunder" date="1171907330" format="1.1" version="1.9"}%
%META:TOPICPARENT{name="ProbeInstallation"}%
---+OSG Gratia probe configuration: PBS-LSF
<OL>
<LI />[[ProbeInstallation#DownloadTable][Install]] the software. Notes:
<OL>
#ProbeNode<LI />The probe should have access to:
<UL>
<LI />The batch manager log area (required); and
<LI /> the reverse gridmap file, =grid3-user-vo-map.txt= (optional, but preferred).
</UL>
The PBS/LSF probe can in fact run on any node provided the above requirements are satisfied and =ProbeConfig= is configured correctly.
<LI />The [[ProbeInstallation#ProbeDownloadPbsLsf][official binary RPMs]] were build on a FSL4 system: to install on a system with a different C++ compiler (eg RHEL3 and derivatives), [[ProbeSrpmNotes][recompile from SRPM]].
</OL>

#ProbeConfig<LI>Customize the Gratia =ProbeConfig= file. The following variables (at least)
should have appropriate values:

| *Gratia Configuration Variable=&quot;Default&quot;* | *Set value information* |
| !MeterName = &quot;generic&quot; | This value will be entered in the database to indicate where the record came from.<br />We recommend a =batchsystem:FQDN= such as "condor:fermigrid1.fnal.gov". |
| !SiteName = &quot;Generic Site&quot; | This value is used in the report to refer to the site/farm/cluster to which the head node gives access. |
| !VDTSetupFile = &quot;<tt>MAGIC_VDT_LOCATION<tt>/setup.sh&quot; |Path to the VDT =setup.sh= file. Please expand =MAGIC_VDT_LOCATION=. |
| !UserVOMapFile = &quot;<tt>MAGIC_VDT_LOCATION<tt>/monitoring/grid3-user-vo-map.txt&quot; |Path to the VDT =grid3-user-vo-map.txt= file. Please expand =MAGIC_VDT_LOCATION=. |

#UrCollectorConf<LI>Customize the =urCollector.conf= file. The following variables (at least) should have appropriate values:

| *Gratia Configuration Variable=&quot;Default&quot;* | *Set value information* |
| !lrmsType = &quot;pbs&quot; | Set to &quot;pbs&quot; or &quot;lsf&quot; as appropriate. |
| !pbsAcctLogDir = &quot;&lt;path&gt;&quot; | Set to appropriate path for log files. |
| !lsfAcctLogDir = &quot;&lt;path&gt;&quot; | Set to appropriate path for log files. |
| !useCEJobMap = &quot;no&quot; | Set to yes if using a CE job map (see below). |
| !ceJobMapLog = &quot;&quot; | This is the location of the CE's grid user/grid job -> local job ID map. It has to be specified _either_ as a directory (containing file names such as "20050307" or "2005-03-07") _or_ as a file name prefix (including path). |

<LI>The RPM install procedure makes appropriate entries in root's crontab
for uploading accounting information to gratia at the appropriate
time. The time is appropriately randomized.

<LI>The SOAPHost has been preconfigured to use the official OSG Gratia
collector (or the official ITB Gratia if you installed the ITB RPMs).

<LI>This product includes software developed by [[http://cern.ch/eu-egee/][The EU EGEE Project]].
</OL>

-- Main.ChrisGreen - 22 Dec 2006
