%META:TOPICINFO{author="DerekWeitzel" date="1306364431" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="ProbeInstallation"}%
---+ !GlideinWMS Probe Configuration

   1. Install the Gratia Common and Gratia Condor RPM.  See link from [[ProbeInstallation][Gratia page]].
   1. Edit the ProbeConfig located in =/opt/vdt/gratia/probe/condor/ProbeConfig=.  First, edit the =SiteName= to be a unique identifier for your GlideinWMS Submit host.
   <pre class="file">
SiteName="HCC Glidein"   </pre>
   Next, turn the probe on by editing the =EnableProbe=:
   <pre class="file">
EnableProbe="1"   </pre>
   1. Add to condor_config (or condor_config.local, or any condor configuration file):
   <pre class="file">
# GlideinWMS Gratia commands
PER_JOB_HISTORY_DIR = /opt/vdt/gratia/var/data
JOBGLIDEIN_ResourceName="$$([IfThenElse(IsUndefined(TARGET.GLIDEIN_ResourceName), IfThenElse(IsUndefined(TARGET.GLIDEIN_Site), FileSystemDomain, TARGET.GLIDEIN_Site), TARGET.GLIDEIN_ResourceName)])"
SUBMIT_EXPRS = $(SUBMIT_EXPRS) JOBGLIDEIN_ResourceName   </pre>
   1. Modify cron to periodically run the script.  You can create a file in /etc/cron.d/ to do this.
   <pre class="screen">
echo '12,27,42,57 * * * * root "/opt/vdt/gratia/probe/condor/condor_meter.cron.sh"' > /etc/cron.d/gratia-probe-condor.cron</pre>



-- Main.DerekWeitzel - 19 May 2011
