%META:TOPICINFO{author="PhilippeCanal" date="1299103712" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="ProbeDevelopement"}%
Example of ProbeConfig:

To configure a Gratia Probe.  One should modify the value of

| *Gratia Configuration Variable=&quot;Default&quot;* | *Set value information* |
| !ProbeName = &quot;generic&quot; | This value will be entered in the database to indicate where the record came from.<br />We recommend a =batchsystem:FQDN= such as "condor:fermigrid1.fnal.gov". |
| !SiteName = &quot;Generic Site&quot; | This value is used in the report to refer to the site/farm/cluster to which the head node gives access. |
| !VDTSetupFile = &quot;<tt>MAGIC_VDT_LOCATION</tt>/setup.sh&quot; |Path to the VDT =setup.sh= file. Please expand =MAGIC_VDT_LOCATION=. |

<verbatim>
<ProbeConfiguration 

    Title1="Collector Information"

    CollectorHost="gratia-osg.fnal.gov:8880"
       Comments0="Collector host replaces SOAPHost"
    SSLHost="gratia-osg.fnal.gov:8443" 
    SSLRegistrationHost="gratia-osg.fnal.gov:8880"

    CollectorService="/gratia-servlets/rmi" 
    SSLCollectorService="/gratia-servlets/rmi"
    RegistrationService="/gratia-registration/register"

    Title2="Probe information and functional configuration"

    ProbeName="generic" 
       Comments1="ProbeName used to be spelled 'MeterName'"
    SiteName="Generic Site"
    Grid="OSG"
    SuppressUnknownVORecords="0"
    SuppressNoDNRecords="0"
    SuppressGridLocalRecords="0"
    EnableProbe="0"

    Title3="Tuning parameter"

    BundleSize="20"
    MaxPendingFiles="100000"
    UseSyslog="0"

    LogLevel="2"
    DebugLevel="0" 
    LogRotate="31"
    GratiaExtension="gratia.xml"

    Title4="Authentication Configuration"

    UseSSL="0" 
    CertificateFile="/etc/grid-security/hostcert.pem"
    KeyFile="/etc/grid-security/hostkey.pem"
    UseGratiaCertificates="0"
       Comments2="If no directory is specified the gratia certificate file will be created in 'WorkingFolder'/certs."
    GratiaCertificateFile="gratia.probecert.pem"
    GratiaKeyFile="gratia.probekey.pem"
    

    Title5="File and directory location"

    VDTSetupFile="MAGIC_VDT_LOCATION/setup.sh"
    UserVOMapFile="MAGIC_VDT_LOCATION/monitoring/grid3-user-vo-map.txt"
    CertInfoLogPattern="MAGIC_VDT_LOCATION/var/log/accounting/blahp.log-*"
       Comments51="Location and wildcard pattern of log files that contains certificate information about the jobs in the format followed by the 'blah demons'."

    DataFolder="MAGIC_VDT_LOCATION/gratia/var/data/"
    WorkingFolder="MAGIC_VDT_LOCATION/gratia/var/tmp"
    LogFolder="MAGIC_VDT_LOCATION/gratia/var/logs/"
/>
</verbatim>


-- Main.PhilippeCanal - 15 Dec 2006