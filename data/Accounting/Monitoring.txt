%META:TOPICINFO{author="PhilippeCanal" date="1214980208" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+Monitoring tools

To monitor the health of a collector you have the following options:

---++Probes to Collector connection

To test the probe to collector connection, execute the script _GratiaPing.py_

This script will return the exit code 0 in case of successful connection to the server.

This script can be found in the probe/common directory.  You will need to execute it in a directory with a ProbeConfig pointing to your collector.

---++Collector record processing.

The collector can be setup to send mail if no record has been processed in a given time period.   To setup up this emails and its frequency, you need to edit the monitor/monitoring section in the Gratia service-configuration.properties (located in $tomcat_topdir/gratia )

<verbatim>
gratia-fermi.fnal.gov:8884 tomcat-conversion Potential listener problem

The MonitorListenerThread has detected a possible problem. There have been
no input records processed in the past 60 minutes. Please check the service.
</verbatim>

---++Collector Metrics

System status information can be found in the administration page http://yourhost:youport/gratia-administration.

The _normal_ status page shows the number of messages in the queue.  This messages have been received by the collector but not yet processed.  Those messages includes both the regular job level record, as well as handshake records and (possibly) duplication messages.  Each duplication message may contain more than one job level records.

It also shows the number of individual records and of duplicates records processed in each of the last 6 hours, the last day, the last week and forever.

The detailed page also include the number of error seen during the record processing (each error represent one record that was not processed).

-- Main.PhilippeCanal - 02 Jul 2008
