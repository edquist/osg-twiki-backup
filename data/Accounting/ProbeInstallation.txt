%META:TOPICINFO{author="ChrisGreen" date="1166037271" format="1.1" version="1.27"}%
%META:TOPICPARENT{name="InstallationGuide"}%
---++OSG Accounting Services - Gratia - Probe Installation

---+++Installation using pacman

The Gratia condor probe in particular is available from VDT using pacman:

<verbatim>pacman -get Gratia-Condor-Probe</verbatim>

%RED%*HOWEVER*%ENDCOLOR%: this package may not be available for your version of VDT. Gratia probes for the condor, PBS and LSF batch systems may be installed via RPMS as described below. Please see the [[ProbeConfigCondor#GratiaCondorGramPatch][installation notes for the condor probe]] though, as it requires versions of VDT prior to 1.5.1 to be patched for operation with versions of Condor prior to v6.9.1. 

---+++Installation from RPM

First, download the RPMS for the desired probe installation from the table below:

#ProbeDownloadTable
| *RPM* | *Comments* |
| <a name="ProbeDownloadCommon"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-common-0.11f-2.noarch.rpm][gratia-probe-common-0.11f-2]] | Needed by all probes. |
| <a name="ProbeDownloadCondor"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-0.11f-2.noarch.rpm][gratia-probe-condor-0.11f-2]] | Probe for Condor-based production CEs<sup>[[#ProdReporting][1]]</sup>. |
| <a name="ProbeDownloadCondorItb"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-itb-0.11f-2.noarch.rpm][gratia-probe-condor-itb-0.11f-2]] | Condor configuration for ITB CEs<sup>[[#ItbReporting][2]]</sup>. |
| <a name="ProbeDownloadPbsLsf"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-0.11f-2.i386.rpm][gratia-probe-pbs-lsf-0.11f-2]] | Probe for PBS / LSF-based production CEs<sup>[[#ProdReporting][1]]</sup>. |
| <a name="ProbeDownloadPbsLsfItb"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-pbs-lsf-itb-0.11f-2.i386.rpm][gratia-probe-pbs-lsf-itb-0.11f-2]] | PBS / LSF configuration for ITB CEs<sup>[[#ItbReporting][2]]</sup>. |
| <a name="ProbeDownloadPsacct"></a>[[http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-psacct-0.11f-2.noarch.rpm][gratia-probe-psacct-0.11f-2]] | Basic daily-info probe<sup>[[#PsacctReporting][3]]</sup>. |
| <a name="ProbeDownloadSrpm"></a>[[http://gratia.fnal.gov/Files/probe/SRPMS/gratia-probe-0.11f-2.src.rpm][gratia-probe-0.11f-2]] | Source RPM<sup>[[#SourceRpm][4]]</sup>. |

Then, install the RPMS. Note that the main install prefix may be changed with this addition to the =rpm= command line: =--relocate&nbsp;/opt/vdt/gratia=/desired/path=. It is recommended to use (eg)
d193 1
<verbatim>rpm -Uvh --relocate /opt/vdt/gratia=$VDT_LOCATION/gratia \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-common-0.11f-2.noarch.rpm \
http://gratia.fnal.gov/Files/probe/RPMS/gratia-probe-condor-0.11f-2.noarch.rpm
</verbatim>

---+++Configuration

   * [[ProbeConfigGeneral][General configuration notes]]
   * [[ProbeConfigCondor][Configuring the Condor probe]]
   * [[ProbeConfigPbsLsf][Configuring the PBS / LSF probe]]
   * [[ProbeConfigPsacct][Configuring the ps-accounting probe]]
a48 27

------
---++++++Footnotes
<small>
<OL>
#ProdReporting<LI />The default configuration files are configured to send data to the official [[http://gratia-osg.fnal.gov:8880/gratia-reporting][OSG Gratia server]]
#ItbReporting<LI />The default configuration files are configured to send data to the [[http://gratia-osg.fnal.gov:8881/gratia-reporting][OSG Gratia ITB server]]
#PsacctReporting<LI />This probe uses the Linux processing accounting facility and reporting is daily. The default configuration files are configured to send data to the [[http://gratia-fermi.fnal.gov:8882/gratia-reporting][OSG Gratia psacct server]]. Note that unlike the other probes, the psacct probe must be installed on every worker node.
</OL>
</small>

-- Main.PenelopeConstanta - 30 Aug 2006
-- Main.ChrisGreen - 13 Dec 2006
-- Main.ChrisGreen - 05 Jan 2007

%META:PREFERENCE{name="ProbeVersion" title="ProbeVersion" type="Set" value="0.12f-1"}%
%META:TOPICMOVED{by="ChrisGreen" date="1158007224" from="Accounting.ProbeConfiguration" to="Accounting.ProbeInstallation"}%
%META:PREFERENCE{name="ProbeVersion" title="ProbeVersion" type="Set" value="0.12i-1"}%
