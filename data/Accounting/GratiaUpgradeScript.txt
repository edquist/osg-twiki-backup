%META:TOPICINFO{author="JohnWeigand" date="1216400259" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="GratiaDevAndTestEnviron"}%
---+!! <nop>Gratia Upgrade Script

<!--
   * Set VIEWTHISTOPIC = <div class="twikiSmall"><a href="%TOPIC%">View this section</a></div>
--> 
%TOC% 
%STARTINCLUDE%

---++ Gratia Upgrade Script

%VIEWTHISTOPIC%

A script ( __gratia-upgrade.sh__) is available to facillitate the upgrading and installation of production, test and development gratia instances.

In the cvs repostitory, the script resides in __./gratia/build-scripts/gratia-upgrade.sh__.

*Usage: gratia-upgrade.sh --help* <br />This script is intended to simplify the upgrading of a gratia instance<br />in development, intergration and production. It is currently designed <br />to operated in question and answer mode. At a later date command line<br />options may be provided.<br /><br />Although it does not really do much more than is already available to do, its<br />intent is to take some of the guesswork (memory-like) out of the upgrade<br />process.<br /><br />The only assumption it makes is that all tomcat collectors are in /data.<br />If this is not true, you will have to do it the old fashion way.<br /><br />The script will prompt you for:<br /> tomcat instance (e.g, tomcat-weigand<br /> source directory<br />  - daily builds..... /home/gratia/gratia-builds<br />  - release builds... /home/gratia/gratia-releases<br />  - other: specified by you<br /> mysql root password<br /><br />The script then:<br /> 1. shutdown your tomcat instance<br /> 2. run update-gratia-local with the appropriate arguments<br /> 3. clean your log directory saving the old logs in <br />     /data/gratia_tomcat_logs_backups<br /> 4. optionally, allow you to start your collector<br /><br />You must be root user to execute this script.

%STOPINCLUDE%

-- Main.JohnWeigand - 18 Jul 2008