%META:TOPICINFO{author="ChrisGreen" date="1227653363" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! Gratia Data Collection Notes

---++ Introduction

This attempts to put, all in one place, a description of the algorithms followed when collecting and processing job level Gratia data. Where appropriate, common and probe-specific behaviors will be discussed, including any historical behaviors that still may be of relevance.

---++ Overview of Gratia data collection.

Speaking very generally, a Gratia probe will:
   1. Collect information from one or more sources;
   1. Prepare a record for upload to the probe by using the Gratia python API;
   1. Contact a Gratia data collection and reporting service, upload some meta-information and then the job level data.

Different types of data sent to Gratia collectors includes:

   1. Local and OSG-originated job level information on batch jobs executed by a variety of LRMS (Local Resource Management Systems) including Condor, PBS (including Torque), LSF, SGE;
   1. Summary level information from a variety of resources (PANDA is a prime example) for /ad hoc/ comparison with job-level data.
   1. Summarized process-level information.
   1. Metric information from RSV tests.
   1. Pilot level information from the glExec pilot/glide0in system.
   1. Storage allocation information from OSG Storage Elements (SEs).
   1. Transfer-level information from dCache and GRIDFtp.

At the collector these data are received, stored in a DB and summarized as appropriate. Reports are available either via the BIRT interface, or as text-based emails.

---++ Anatomy of a record upload.

---++ Behavior common to all probes.

---++ Behavior common to LRMS probes.

---++ Specific probe behavior and other notes.

-- Main.ChrisGreen - 25 Nov 2008
