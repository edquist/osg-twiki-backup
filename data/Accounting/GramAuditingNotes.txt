%META:TOPICINFO{author="JohnWeigand" date="1200679932" format="1.1" reprev="1.3" version="1.3"}%
---+!! GRAM Auditing Notes

<!--
   * Set BUG5712 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5712][Bug 5712]] - Local_job_id format variations
   * Set BUG5713 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5713][Bug 5713]] - Failed database connection loses audit records
   * Set BUG5714 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5714][Bug 5714]] - Additional data (FQAN) in audit records
   * Set BUG5725 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5725][Bug 5725]] - housekeeping for the auditRecords database
   * Set BUG5776 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5776][Bug 5776]] - Need for one INFO log message. Currently none.
   * Set BUG5777 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5777][Bug 5777]] - Database connection times out
   * Set BUG5778 = [[http://bugzilla.globus.org/globus/show_bug.cgi?id=5778][Bug 5778]] - No error message on db update failure



-->

%TOC%

%STARTINCLUDE%

---++ Description
Gratia has a requirement to be able to report grid usage data for:
   * VOs 
   * VO subgroups
   * Individual grid users (DN)
   * Roles

All of the above information is contained within the proxy certificate when the job request is received on the CE node for a VOMS proxy.  If a user uses a grid proxy (does not have the extended attributes), only the DN is available.

Currently (1/17/2008), the only reliable data available to Gratia is the DN of the grid user.





---++ GRAM proposal (1/11/2008)
Conference call on Friday 1/11/2008 to discuss getting this additional data (FQAN) into the GRAM audit record. Attendees:
   * Rachana Ananthakrishnan (ranantha@mcs.anl.gov)
   * Stuart Martin (smartin@mcs.anl.gov)
   * John Weigand  (weigand@fnal.gov)

The Globus proposal for  is to create a 2nd audit table which would be joined to the current one (_gram_audit_table_). The _job_grid_id_ would be the joining column and essentially make this 2nd table similar in  nature to the <nop> _JobUsageRecord_Meta_ in Gratia where it is an  just an extension of  the <nop> _JobUsageRecord_ .



---+++ GRAM4 (web services)


---+++ GRAM2 (pre-web services)



---++ Implementation Time Frame
The use of GRAM audit records in the Gratia probes is needed for OSG 1.0 and, therefore needs to be made available for integration testing in OSG 0.9.

The current VDT distribution for OSG 0.8.0 is Globus v4.0.5.

Globus v4.0.6 was released on 1/14/2008.%BR%
Globus v4.0.7 is scheduled for March 2008.


---++ GRAM Auditing Log Bugzilla Items
These are the current items entered in the Globus bugzilla system for GRAM auditing that are relevant to the Gratia requirements:
   * %BUG5712%
   * %BUG5713%
   * %BUG5714%
   * %BUG5725%
   * %BUG5776%
   * %BUG5777%
   * %BUG5778%

All of the above are deemed critical for GRAM auditing to be used by Gratia.  

The only one that Globus does not feel they can address is %BUG5725%.  It is felt this is similar in nature to housekeeping on file system type log files which are handled in a variety of different ways at sites and therefore impossible to address with a general solution.  The housekeeping would also be dependent on how non-Globus processes use the data.  Some may need to clean once they process the audit record.  Others may need to retain the data for a period.  The use of the data will dictate the housekeeping rules.

All others they agreed to address.


%INCLUDE{ConfigureGramAuditing}%



%STOPINCLUDE%




<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
---++!! Major updates
<!--Future editors should add their signatures beneath yours!-->
-- Main.JohnWeigand - 17 Jan 2008%BR%
