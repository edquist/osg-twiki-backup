%META:TOPICINFO{author="ChrisGreen" date="1164037183" format="1.1" reprev="1.6" version="1.6"}%
%META:TOPICPARENT{name="ProbeInstallation"}%
---+OSG Gratia probe configuration: Condor
<OL>
<LI>[[ProbeInstallation#DownloadTable][Install]] the software

<LI>Customize the Gratia =ProbeConfig= file. The following variables (at least)
should have appropriate values:

| *Gratia Configuration Variable=&quot;Default&quot;* | *Set value information* |
| !MeterName = &quot;generic&quot; | This value will be entered in the database to indicate where the record came from.<br />We recommend a =batchsystem:FQDN= such as "condor:fermigrid1.fnal.gov". |
| !SiteName = &quot;Generic Site&quot; | This value is used in the report to refer to the site/farm/cluster to which the head node gives access. |
| !VDTSetupFile = &quot;<tt>MAGIC_VDT_LOCATION</vdt>/setup.sh&quot; |Path to the VDT =setup.sh= file. Please expand =MAGIC_VDT_LOCATION=. |

<LI>The RPM install procedure makes appropriate entries in root's crontab
for uploading accounting information to gratia at the appropriate
time. The time is appropriately randomized.

#GratiaCondorGramPatch<LI>Under the directory =gratia/condor-probes/gram_mods= there are two
files that contain some required changes to the GRAM jobmanager scripts. These patches change =$VDT_LOCATION/globus/lib/perl/Globus/GRAM/JobManager/condor.pm= and =$VDT_LOCATION/globus/lib/perl/Globus/GRAM/JobManager/managedfork.pm=. The RPM installation will attempt to check for these patches if installed under =$VDT_LOCATION=. If they are not found you will be warned. At this point you may apply the patches yourself and/or run =update_pm_in_place= but you may wish to take advantage of a newly available patch to VDT-1.3.10 and OSG-0.4.1 (thanks to Andy Pavlo for packaging this) prior to installing the condor-probe RPM.

This can be done by executing:

<verbatim>pacman -get VDT:Gratia-Patch</verbatim> 

In less standard situations (a different version of VDT, or customized patches already applied to the GRAM scripts), you may wish to refer directly to the patches and associated notes in the RPM.

<LI>The SOAPHost has been preconfigured to use the official OSG Gratia
collector (or the official ITB Gratia if you installed the ITB RPMs).

</OL>

-- Main.ChrisGreen - 17 Nov 2006

