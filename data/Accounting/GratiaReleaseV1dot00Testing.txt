%META:TOPICINFO{author="JohnWeigand" date="1225114747" format="1.1" reprev="1.6" version="1.6"}%
%META:TOPICPARENT{name="GratiaReleaseV1dot00"}%
---+ !! Gratia Release V1.0 Testing

%TOC%

%STARTINCLUDE%



---++ itb_gratia_itb

Host: gratia02%BR%
Location: /data/tomcat-itb_gratia_itb

http://gratia02.fnal.gov:8880/gratia-reporting%BR%
http://gratia02.fnal.gov:8880/gratia-administration%BR%

%TABLE{ tableborder="1" cellpadding="0" cellspacing="1" headerbg="#99CCCC" databg="#FFFFCC, #FFFFFF"}% 
%EDITTABLE{  header="|*Schema*|*URL*|*Description*|" format="| text, 20 | text, 20 | textarea, 3x20 | textarea, 3x20| textarea, 3x20| textarea, 3x20|"  changerows="on" quietsave="on" editbutton="Edit table" }%
| *Section* | *Menu* | *Graphical display* | *Query* | *Drill Down* | *Query* |
| Reports - VO Views | Usage by VO | OK | OK | OK | OK |
| | Daily Usage by VO | OK | OK | OK | OK |
| | Daily Usage by Site for VO | OK | OK | OK | OK |
| | Site Usage by VO | OK | OK | OK | OK |
| Reports - VO Views - Weekly History | Usage by VO | OK | OK | OK | OK |
| | Usage Metrics By VO | OK | OK | OK | OK |
| | Usage Metrics By Site | OK | OK | OK | OK |
| Reports - Site Views | Usage by Site | OK | OK | OK | OK |
| | Daily Usage By Site | OK | OK | OK | OK |
| | Daily Usage By VO For Site | OK | OK | OK | OK |
| Reports - by Probe | Jobs By Probe | Show query at top level shows hours.%BR%       Drill down shows minutes. %BR%      problem or not? | OK | OK | OK |
| | Daily Usage By Probe | OK | OK | N/A - No drill downs | N/A - No drill downs |
| Reports - Display in 30 sec | 2007 Usage for All VOs | OK | OK | Drill down has an open/close paren with nothing in it.  Is something suppose to be in there? | OK |
| DCache | Dcache Probe Table | Query shows as 'call dCacheSimple();' which does not tell you much. | N/A | N/A | N/A |
| SQL Queries | Custom SQL Report | OK | N/A | N/A | N/A |
| | Distinct Probe Names | OK | N/A | N/A | N/A |
| | Probes With Odd SiteName | OK | N/A | N/A | N/A |
| | Records Without Dates | OK | N/A | N/A | N/A |
| Static Reports | Usage By VO By Date (ppt) | OK | N/A | N/A | N/A |
| | Usage By Site By Date (ppt) | OK | N/A | N/A | N/A |
| | Weekly Usage By VO (ppt) | OK | N/A | N/A | N/A |
| | Last 12 Months (csv) | OK | N/A | N/A | N/A |
| | Last 2 Months (csv) | OK | N/A | N/A | N/A |
| | Last 14 Days (csv) | OK | N/A | N/A | N/A |
| WLCG ATLAS/CMS Tier1/2 | APEL-WLCG Interface Data | OK | N/A | N/A | N/A |
| | EGEE Portal - Tier1 | OK | N/A | N/A | N/A |
| | EGEE Portal - Tier2 | OK | N/A | N/A | N/A |
| Commands | Logout | N/A | N/A | N/A | N/A |
| Contact us | | OK | N/A | N/A | N/A |
| Gratia Reporting Version | | OK | N/A | N/A | N/A |

---++ itb_gratia_psacct

Host: gratia02%BR%
Location: /data/tomcat-itb_gratia_psacct

http://gratia02.fnal.gov:8881/gratia-reporting%BR%
http://gratia02.fnal.gov:8881/gratia-administration%BR%

%TABLE{ tableborder="1" cellpadding="0" cellspacing="1" headerbg="#99CCCC" databg="#FFFFCC, #FFFFFF"}% 
%EDITTABLE{  header="|*Schema*|*URL*|*Description*|" format="| text, 20 | text, 20 | textarea, 3x20 | textarea, 3x20| textarea, 3x20| textarea, 3x20|"  changerows="on" quietsave="on" editbutton="Edit table" }%
| *Section* | *Menu* | *Graphical display* | *Query* | *Drill Down* | *Query* |
| Reports | System Capacity by Site | OK | OK | OK | OK |
| | Usage by Site and Processor Type | OK | OK | N/A | N/A |
| | Weekly Percent Usage by Site | OK | OK | N/A | N/A |
| | Weekly Usage for Site | OK | OK | N/A | N/A |
| | Monthly Percent Usage by Site | OK | OK | N/A | N/A |
| | Monthly Usage for Site | OK | OK | N/A | N/A |
| | Usage by Group for Site | OK | OK | N/A | N/A |
| | Daily Usage by Group | OK | OK | Drill down does not show the day selected for the VO.  It shows the entire week.  Is this correct? | OK |
| | Daily Usage for Site | Select ALL does not work.. rest is OK | OK | N/A | N/A |
| SQL Queries | Custom SQL Report | | | | |
| Commands | Logout | N/A | N/A | N/A | N/A |
| Contact us | | OK | N/A | N/A | N/A |

---++ itb_gratia_osg_daily

Host: gratia02%BR%
Location: /data/tomcat-itb_gratia_osg_daily

http://gratia02.fnal.gov:8882/gratia-reporting%BR%
http://gratia02.fnal.gov:8882/gratia-administration%BR%

%TABLE{ tableborder="1" cellpadding="0" cellspacing="1" headerbg="#99CCCC" databg="#FFFFCC, #FFFFFF"}% 
%EDITTABLE{  header="|*Schema*|*URL*|*Description*|" format="| text, 20 | text, 20 | textarea, 3x20 | textarea, 3x20| textarea, 3x20| textarea, 3x20|"  changerows="on" quietsave="on" editbutton="Edit table" }%
| *Section* | *Menu* | *Graphical display* | *Query* | *Drill Down* | *Query* |
| Reports | Daily Usage by Site | OK <br /> | No sql query shown | No drill down.  Don't recall if this is valid or not. | |
| | Usage by Site | OK.. I guess .... it displays | No show query button | OK  I guess... it displays | No show query button. |
| | Daily Usage by VO | OK | No sql query shown | No drill down. | |
| | Usage by VO | OK.. I guess .... it displays | No show query button | OK  I guess... it displays | No show query button. |
| SQL Queries | Custom SQL Report | OK | N/A | N/A | N/A |
| | Distinct Probe Names | OK | N/A | N/A | N/A |
| | Probes With Odd Site Name | OK | N/A | N/A | N/A |
| | Records Without Dates | OK | N/A | N/A | N/A |
| Commands | Logout | OK | N/A | N/A | N/A |
| Contact us | | OK | N/A | N/A | N/A |


---++ VDT distribution

Host: gratiax23%BR%
Cache: http://vdt.cs.wisc.edu/test-cache/gratia:Gratia-Reporting%BR%
VDT_LOCATION: /usr/local/osg-collector%BR%

http://gratiax23.fnal.gov:8880/gratia-reporting%BR%
http://gratiax23.fnal.gov:8880/gratia-administration%BR%

---+++ Unexpected log file messages
Log file directory: $VDT_LOCATION/tomcat/v55/logs directory files


---++++ catalina.out
These occurred on the 1st installation only.  They did not occur on a subsequent installation.
<pre>
Oct 24, 2008 1:20:35 PM org.eclipse.birt.chart.computation.withaxes.AutoScale getPrecision
WARNING: Autoscale precision not found for 2.7777777777778E-4
Oct 24, 2008 1:20:39 PM org.eclipse.birt.chart.computation.withaxes.AutoScale getPrecision
WARNING: Autoscale precision not found for 2.7777777777778E-4
Oct 24, 2008 1:20:41 PM org.eclipse.birt.chart.computation.withaxes.AutoScale getPrecision
WARNING: Autoscale precision not found for 2.7777777777778E-4
</pre>



---++++ gratia.log
This can occur I believe.
<pre>
008-10-24 08:19:23,244 gratia.service(main) [WARNING]: checkMd5v2Unique: 
attempt to check for index on md5v2 in JobUsageRecord_Meta failed!
</pre>

Appears to be a replication issue:
<pre>
2008-10-24 08:20:27,715 gratia.service(Thread-47) [WARNING]: ReplicationService:
 caught exception org.hibernate.exception.JDBCConnectionException: 
Cannot open connection trying to check and/or start new replication data pumps.

2008-10-24 08:20:28,724 gratia.service(Thread-48) [WARNING]: ListenerThread: 0: Replication : 
received unexpected exception Cannot open connection while processing probe entry.
</pre>

   * I stopped/cleared logs/started to see if replication error will occur again
   * did not.. but got this one
<pre>
hibernate-services.log

2008-10-24 11:44:58,792 com.mchange.v2.c3p0.C3P0Registry(TP-Processor2) 
[INFO]: Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]

2008-10-24 11:44:58,794 com.mchange.v2.c3p0.management.ActiveManagementCoordinator(TP-Processor2) [WARN]:
 A C3P0Registry mbean is already registered. This probably means that an application using c3p0 was undeployed, 
but not all PooledDataSources were closed prior to undeployment. This may lead to resource leaks over time. 
Please take care to close all PooledDataSources.
</pre>
   * started replication to vm02:8887  ... seems to work but no 
              further messages indicating it does... checking others
              May not be a problem.
<pre>
2008-10-24 12:02:53,574 gratia.service(Thread-64) [FINE]: ReplicationDataPump #1 (All to http://gratia-vm02.fnal.gov:8887):  active
</pre>

---+++ Miscellaneous
   1 initd service: the wget for stopDatabaseUpdateThreads never
                 made it into VDT.  Not sure if this is supposed to be
                 some special instructions or part of make.  Assume former.
   1 dates are shifted 1 day on UI reports.  
                 Which service is supposed to reset this?
   1 admin: no log message when "Database updates" stopped.
   1 pdf reports displaying only 1 day/week 

 %STOPINCLUDE%

<!-- MAJOR UPDATES  
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->

---++!! Major updates

<!--Future editors should add their signatures beneath yours!-->

-- Main.JohnWeigand - 16 Oct 2008
