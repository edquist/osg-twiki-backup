%META:TOPICINFO{author="MatyasSelmeci" date="1412183490" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="AcceptanceTestingHome"}%
---+ Acceptance Testing for HTCondor-CE (WIP)

---++ Testing the CE Collector

The CE Collector is a stripped-down version of !HTCondor-CE that contains mostly just the collector daemon and configs.
It was introduced in htcondor-ce-1.6.
The production CE Collectors run at the GOC, but you may want to set up your own for testing.

   1. Make 2 VMs with the EPEL/OSG repos installed: one for the collector, and one for the CE

---+++ Setting Up the Collector

   1. Install =htcondor-ce-collector=
   1. *(TODO unsure)* Create a file called =/etc/condor-ce/config.d/99-local.conf= that contains this line:<pre class='file'>
ALLOW_ADVERTISE_SCHEDD = $(ALLOW_ADVERTISE_SCHEDD), your_htcondor_ce_host.example.net</pre>%BR%\
      (with your_htcondor_ce_host replaced by the hostname the !HTCondor-CE VM)
   1. Run =service condor-ce-collector start=

---+++ Setting Up the CE

   1. Install =osg-htcondor-ce-condor= (replace condor with the batch system of your choice)
   1. Ensure osg-configure &gt;= 1.0.60-2 is installed
   1. *(TODO expand)* Configure your CE using osg-configure; be sure to fill out the =resource= and =resource_group= settings in =40-siteinfo.ini=
   1. Edit the file =/etc/osg/config.d/30-infoservices.ini= and set =ce_collectors= to the collector host
   1. Run =osg-configure -dc=
   1. Start up your batch system
   1. Run =service condor-ce start=

The CE will report to the collector host every five minutes.
If you want to force it to send now, run =condor_ce_reconfig=.
You should see your CE if you run =condor_ce_status -schedd= on the collector host.
