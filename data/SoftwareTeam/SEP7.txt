%META:TOPICINFO{author="DougOlson" date="1271697097" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="SEPIndex"}%
---+ Software Enhancement Proposal 7: CA Certificates Distribution Process

| *SEP* | 7 |
| *Title* | CA Certificates Distribution Process  |
| *Comment Period Ends:* | 2010-04-27  |
| *Last Modified:* | 2010-04-13 | 
| *Created:* | 2010-04-13 |
| *Author:* | Doug Olson |
| *Status:* | Draft |
| *Type:* | Process |

---++ Motivation
For some time the CA certificates distribution process for OSG has consisted of
OSG downloading a release of the IGTF CA certificates distribution,
extracting the appropriate CA information files and putting those into
a pacman cache (also yum and apt repositories) which is referenced from
an automatic update process run at each site (most sites) so they
would get a new CA distribution as soon as the pacman cache was populated.
The same cache is used by production sites and ITB sites.

This process has a weakness because it does not allow testing of a new CA
distribution on the ITB independently of the production OSG.
There are three known cases where enabling this testing before production deployment
is important.
   1. The IGTF release process is currently undergoing changes to handle the CA hash form changes caused by openssl 1.0 using SHA-1 to compute the hash values while previously MD5 has been used.  We need to test this change before putting it out in production
   1. At times there are required changes to the format of certificates.  This SEP will allow testing new certificates before installing them in production. We had an example of this last fall when a bug was introduced to the EKU (Extended Key Usage) extension for certificates from the DOEGrids CA.
   1. A normal update of the CA certificates package so it can be tested quickly on the ITB before going into production.
For the case of testing a new format of certificates it may be that we will deploy a normally untrusted CA certificate on the ITB in order to test these end entity certificates.  In this case we would not include the untrusted CA certificate in the production OSG release and would probably only deploy it 
temporarily on the ITB.
It is expected that each case of testing a new format of end entity certificate will need it's own SEP writeup describing what is to be
tested and how long an untrusted CA certificate may be deployed on the ITB.

This SEP describes the process for deploying a release of a CA package
first to the ITB from an ITB specific software cache for testing before
it is released to the production OSG.



---++ Proposed Change
An ITB-specific software cache will be used to deploy an ITB-specific version
of the CA certificates package, independent of the software cache and
package versions used on the production OSG infrastructure.

Services running in the ITB will have their configuration for vdt-update-certs,
<tt>$VDT_LOCATION/vdt/etc/vdt-update-certs.conf</tt>,
reference the ITB-specific cache<br>
<tt>
cacerts_url = ITB specific URL
</tt>.<br>
A similar configuration change is needed for ITB sites that
get CA certificates via yum or apt (for rpm or debian packaging).

When the OSG security team informs the GOC that a new CA package
is available for release the communication will clearly state
if the release is for the ITB or the production OSG
and the GOC will then populate the appropriate
software cache from the svn repository.

The OSG Security Team will observe the results of the automated ITB testing
robot following the deployment of a new CA package release to see
what effects occur.

We expect to test this SEP first with case 1 mentioned above, the new CA hash format of 
the IGTF distribution.

---++ Expected Impact
A change in procedures for the security team, and for the GOC to handle
separately ITB and production versions of CA packages and distribution points.

A one-time change to the configuration of the vdt-update-certs process
on ITB services.



---++ Affected Communities

ITB, GOC, Security Team

---++ Minimum Time for Public Discussion

?

---++ Questions
   1. What time period of testing should be observed following a CA package release? I.e., how often are ITB sites updating their CA package?



-- Main.DougOlson - 13 Apr 2010