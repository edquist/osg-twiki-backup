%META:TOPICINFO{author="MatyasSelmeci" date="1473695554" format="1.1" version="1.7"}%
%META:TOPICPARENT{name="InternalDocs"}%
---+ Repository Management

This document attempts to record everything there is to know about repository management for the OSG.

---++ Public Repositories

We host four public-facing repositories at [[http://repo.grid.iu.edu/][repo.grid.iu.edu]]:
   * *development*: This repository is the bleeding edge.  Installing from this repository may cause the host to stop functioning, and we will not assist in undoing any damage.
   * *testing*: This repository contains software ready for testing.  If you install packages from here, they may be buggy, but we will provide limited assistance in providing a migration path to a fixed verison.
   * *release*: This repository contains software that we are willing to support and can be used by the general community.
   * *contrib*: RPMs contributed from outside the OSG.

Koji maintains internal copies of all the above repositories; Koji is updated shortly after build jobs complete, but the above repositories will only be updated on the schedule outlined below.

---++ Build repositories

   * *Koji*: The =koji= task in =osg-build= uses the [[http://koji.chtc.wisc.edu/koji/taginfo?tagID=322][osg-3.3-el6-build]]/[[http://koji.chtc.wisc.edu/koji/taginfo?tagID=330][osg-3.3-el7-build]] repo, which is the union of the following repositories:
      * The Koji internal development tag.
      * The dist-el6-build/dist-el7-build tag (consisting of the appropriate macros for %dist).
      * !CentOS and EPEL
      Koji will work from its internal cache of the above repositories (downloading the packages from the source), and will not update until the build repository is regenerated (see below).  By default, Koji does a groupinstall of the build group, then resolves the !BuildRequires dependencies.

---++ Creation and Updates of Repositories

   * When RPMs are built with Koji, the kojira daemon will re-create the
     internal Koji development repository ("osg-minefield") based on the Koji
     osg-3.\*-osg-development tags.
   * *development* is updated once every hour hours based on the Koji osg-3.\*-osg-development tags.  Any package built will end up here by default.
   * *testing* is updated once every hour based on the Koji osg-3.\*-osg-testing tags.  It is a manual action to be promoted from development to testing.
   * *release* is updated only during recognized update windows, based on the Koji osg-3.\*-osg-release tags.  It is a manual action to be promoted from testing to prerelease to release.

%META:TOPICMOVED{by="AlainRoy" date="1317758384" from="Documentation.RepositoryManagement" to="SoftwareTeam.RepositoryManagement"}%
