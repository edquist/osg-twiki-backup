%META:TOPICINFO{author="MatyasSelmeci" date="1358895642" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="InternalDocs"}%
---+!! Proposal to switch to fetch-crl3 on el5 systems

%TOC%

Original ticket: [[https://jira.opensciencegrid.org/browse/SOFTWARE-689][SW-689]]

The version of =fetch-crl= shipped on el5, =fetch-crl-2.8.5= is old and has some issues that are not likely to be fixed.
Because of this, we are considering switching to version 3 of fetch-crl on el5.
el6 already ships with version 3 of fetch-crl.
Since there are some config incompatibilities between version 2 and version 3, the rpm is called =fetch-crl3= on el5.

Here are lists of things we will need to examine or change in order to make the transition from fetch-crl 2 to 3 as painless as possible for the end-user.

---++ Package changes

Packages in our SVN that have =fetch-crl= as an explicit dependency:
   * =cms-xrootd=
   * =dcache-gratia-probe=
   * =glite-ce-cream=
   * =osg-gridftp=
   * =osg-gridftp-hdfs=
   * =osg-gridftp-xrootd=
   * =osg-se-bestman=
   * =osg-se-bestman-xrootd=
   * =osg-se-hadoop= ( =-gridftp=, =-srm= )
   * =osg-wn-client=
   * =rsv-metrics= (?)
   * =voms-admin-server=

=rsv-metrics= says it requires =fetch-crl= but does not run it anywhere, so that dep can be removed.
Looks like it was for an old probe?

RPMs _outside_ of our SVN that have =fetch-crl= as an explicit dependency:
   * =nordugrid-arc-ca-utils= (epel) (we don't use it, but should mention it in the announcement email anyway)

RPMs that have =/usr/sbin/fetch-crl= as a dependency: none

---++ Software changes

Stuff that can invoke or use (parts of) =fetch-crl= that should be changed to use =fetch-crl3= instead (if that exists):
   * =osg-configure= (=osg_configure.modules.utilities.fetch_crl()=)
   * *DONE* =osg-test= (=test_06_fetch_crl.py=)
   * =osg-ca-manage=, =osg-ca-certs-status= in the =osg-ca-scripts= package (checks if it's enabled and when it was last run)

---++ Docs changes
Twiki pages to update:
   * Documentation.Release3.InstallBestPractices
   * Documentation.Release3.InstallCertAuth
   * Documentation.Release3.InstallBestmanXrootdSE (install transcript only)
   * Documentation.Release3.InstallGratiaService (install transcript only)
   * Documentation.Release3.InstallGridFtpXrootd (install transcript only)
   * Documentation.Release3.InstallGums
   * Documentation.Release3.InstallHadoopSE
   * Documentation.Release3.InstallOSGBestmanSE (install transcript only)
   * Documentation.Release3.InstallOSGClient
   * Documentation.Release3.InstallRSV
   * Documentation.Release3.InstallVoms
   * Documentation.Release3.InstallWNClient
   * Documentation.Release3.InstallXrootd
   * [[Documentation.Release3.OSGServices]]
   * Documentation.Release3.OsgCaManage
   * <s>Documentation.Release3.RsvPigeonTools</s> (OSG 1.2 only, don't bother)
   * Documentation.Release3.SrmTester
   * Documentation.Release3.UnderstandingComputeElement (note: looks a lot like [[Documentation.Release3.OSGServices]], what's up with those two pages?)

Pages marked 'install transcript only' have transcripts ("screen dumps") of the output of a full installation procedure.


---++ Upgrade procedure

Upgrade instructions and the config migration table have moved to [[Documentation.UpgradeFetchCrl2to3_draft]].


---++ Change Plan / Social

   1. Need the blessing of the security group, technology group and production group
   1. Need the upgrade instructions (see above) reviewed and tested
   1. Send a pre-announcement of the change a few weeks in advance;%BR%
      include whether or not this is something to worry about, how much effort migration will take, etc.
   1. Do the release; highlight this change in the release notes and announcement, and link to the upgrade instructions


<!-- vim:ft=twiki
-->