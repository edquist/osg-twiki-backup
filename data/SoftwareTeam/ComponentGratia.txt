%META:TOPICINFO{author="TimCartwright" date="1347564185" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="ComponentHome"}%
---+ OSG Software Component: Gratia

---++ Purpose

[[Accounting.WebHome][Gratia]] is an accounting system. It records information about jobs and data transfers. Gratia helps us understand the activity on OSG. For example:

   * http://display.grid.iu.edu/
   * http://gratiaweb.grid.iu.edu/gratia/

Gratia comes in three main parts:

   * *Gratia probes:* individual software components that collect, format, and forward information from different sources. There are 15–20 probes, written in Python and Perl, one for each activity that can be probed. For instance, there are separate probes for Condor, PBS, and Sun Grid Engine. They share some common functionality (contained in libraries), particularly a reliable upload functionality.

   * *Gratia service:* collects information from one or more probes. There is a special Gratia protocol that is used to upload probe data to a Gratia service. Most OSG sites upload directly to a Gratia service located at Fermilab, but a few sites run a local Gratia service for local accounting purposes that forwards the data to the central Gratia service.

   * *Gratia reporting:* generates email reports (daily, weekly, etc.) from Gratia data.

---++ Usage

---++ Source

The core Gratia software comes from the OSG, and Tanya Levshina is in charge of the Gratia project. The probes come from OSG and a variety of other contributors.

Tanya and the Gratia development team are responsible for cutting releases and for some of the software itself: the common libraries, the services, !gLExec probe, psacct probe.

The OSG Software Team owns several of the probes: bdii-status, condor, !dCache-transfer, !dCache-storage, metric (transfers data to the Gratia service?), pbs-lsf (Suchandra), sge (Suchandra), xrootd-transfer (Neha), xrootd-storage (Neha), hadoop-storage, grdiftp-transfer (Neha).

---++ Packaging

*Repository:* OSG.

The probes are grouped together into a single source package.

---++ History

The core Gratia software was developed at Fermilab by Philippe Canal and his team in collaboration with the University of Nebraska Lincoln.

---++ Future

There are no major problems with the Gratia probes, but they are updated somewhat regularly as minor problems are fixed.
