%META:TOPICINFO{author="MatyasSelmeci" date="1391791850" format="1.1" version="1.13"}%
%META:TOPICPARENT{name="Projects"}%
---+ Globus Patches

We have many patches for Globus packages, and we would like to push most of them upstream. [[http://jira.globus.org/browse/GT-455][GT-455]] is the master ticket on Globus's JIRA for this.
The patches have been checked against globus_5_2_branch in CVS, retrieved 2013-10-08 (which is what will be 5.2.5).

---++ Patches

| *5.2.5 status* | *Package*                       | *Added*    | *Patch File*                                 | *Purpose*                                                                                 | *Status*                                                                                                    | 
| present        | globus-ftp-control              | 4.2-5      | level-out-connection-speeds.patch            | Fix connection speed leveling on servers with different buffer sizes; critical for HDFS   | Sent upstream: GT-462                                                                                       | 
| present        | globus-gatekeeper               | 8.1-7      | init.patch                                   | Load OSG environment options                                                              | OSG specific                                                                                                | 
| dropped        | globus-gatekeeper               | 9.6-1.5    | GRAM-309.patch                               | Support IPv4-only systems (fixed in GT 5.2.1?)                                            | In upstream                                                                                                 | 
| present        | globus-gatekeeper               | 9.6-1.11   | logrotate-copytruncate.patch                 | Fix log rotation (SOFTWARE-1083)                                                          | Sent upstream: GT-465                                                                                       | 
| new            | globus-gatekeeper               | 9.15-1.2   | GT-489-openssl-1.0.1-fix.patch | Workaround for !OpenSSL 1.0.1e crash/hang | Upstream ticket: GT-489 |
| new            | globus-gatekeeper               | 9.15-1.7   | 1250-init-priorities.patch | Fix init script priorities to run after netfs and autofs | Can be upstreamed |
|                | globus-gram-client-tools        | 10.0-7     | globus_sh_awk.patch                          | Fix awk issues for globus-job-get-output                                                  | In 5.2.5 upstream                                                                                           | 
|                | globus-gram-job-manager         | 12.10-2    | unlock_init.patch                            | Added !GlobusGramJobManagerUnlock() and -Lock() pair of calls                             | Needs review                                                                                                | 
|                | globus-gram-job-manager         | 12.10-2    | null_old_jm.patch                            | Handle NULL old job request                                                               | Needs review                                                                                                | 
|                | globus-gram-job-manager         | 12.10-2    | description_service_tag.patch                | Include the service tag in the job description                                            | Necessary for OSG; Needs review                                                                             | 
|                | globus-gram-job-manager         | 12.10-2    | load_requests_before_activating_socket.patch | Cleanly recover when globus-job-manager processes die                                     | Sent upstream: GT-456                                                                                       | 
|                | globus-gram-job-manager         | 13.5-4     | fix-job-home-dir.patch                       | Fix the globus-job-dir option                                                             | Necessary for OSG, but needs to be rewritten. (Still applies as of 5.2.5)                                   | 
|                | globus-gram-job-manager         | 13.5-6     | fix-job-lock-location.patch                  | Keep locks on local filesystem                                                            | Fix necessary after fix-job-home-dir.patch.  Likely also needs to be rewritten. (Still applies as of 5.2.5) | 
|                | globus-gram-job-manager         | 13.23-0.5  | allow-manager-restart.patch                  | Allow job-manager to get a new proxy after the prior one expired                          | Needs review                                                                                                | 
|                | globus-gram-job-manager         | ?          | recompute-stdio-on-restart.patch             | ?                                                                                         | Patch fails on 5.2.5; needs OSG review                                                                      | 
|                | globus-gram-job-manager         | 13.45-1.2  | gt-268-missing-normalize.patch               | SEG fails to replay first log of month ([[http://jira.globus.org/browse/GT-268 GT-268]])  | 5.2.5: In upstream                                                                                          | 
|                | globus-gram-job-manager         | 13.45-1.4  | gt-311-memory-leak.patch                     | Memory leak in job manager ([[http://jira.globus.org/browse/GT-311 GT-311]])              | 5.2.5: In upstream                                                                                          | 
|                | globus-gram-job-manager         | 13.45-1.6  | logrotate-copytruncate.patch                 | Fix log rotation (SOFTWARE-1083)                                                          | Sent upstream: GT-466                                                                                       | 
|                | globus-gram-job-manager-condor  | 0.0-3      | job_status.patch                             | Handle $num_abort &gt; 0                                                                  | Needs review                                                                                                | 
|                | globus-gram-job-manager-condor  | 0.0-3      | gratia.patch                                 | Add logging to Gratia                                                                     | OSG-private.  Likely can be committed                                                                       | 
|                | globus-gram-job-manager-condor  | 0.0-3      | nfslite.patch                                | Add NFSLite                                                                               | Sent upstream: GT-457                                                                                       | 
|                | globus-gram-job-manager-condor  | 0.0-3      | groupacct.patch                              | Add callout for accounting groups                                                         | Sent upstream: GT-458                                                                                       | 
|                | globus-gram-job-manager-condor  | 0.0-3      | managedfork.patch                            | Add managed fork                                                                          | OSG-private                                                                                                 | 
|                | globus-gram-job-manager-condor  | 0.0-4      | conf_location.patch                          | Fix default configuration file location                                                   | Appears to be in upstream; needs verification. (5.2.5: Applies cleanly)                                     | 
|                | globus-gram-job-manager-condor  | 1.0-12     | 669-xcount.patch                             | Add xcount and min_memory                                                                 | Sent upstream: GT-459                                                                                       | 
|                | globus-gram-job-manager-condor  | 1.0-13     | 717-max-walltime.patch                       | Add periodic_remove statement for max_wall_time                                           | Sent upstream: GT-460                                                                                       | 
|                | globus-gram-job-manager-lsf     | 1.0-1.5    | host-xcount.patch                            | Add xcount attribute                                                                      | Appears to be upstream in 5.2.5; needs verification                                                         | 
|                | globus-gram-job-manager-pbs     | 1.1-3      | osg-teragrid-pbs.patch                       | Large patch with !TeraGrid changes (still relevant?)                                      | Needs review                                                                                                | 
|                | globus-gram-job-manager-pbs     | 1.6-1.4    | slurm-support-pbs.pm.patch                   | Patch to work with SLURM's PBS emulation layer (SOFTWARE-1105)                            | Needs Globus review (*)                                                                                     | 
|                | globus-gram-job-manager-pbs     | 1.6-1.5    | bad-slurm-submits.patch                      | Patch to catch bad SLURM submits (SOFTWARE-1162)                                          | Needs Globus review (*)                                                                                     | 
|                | globus-gram-job-manager-scripts | 3.1-2      | gratia.patch                                 | Add Gratia callout;  OSG-specific, but would be harmless on non-OSG sites                 | Sent upstream: GT-467                                                                                       | 
|                | globus-gram-job-manager-scripts | 3.1-2      | osg-environment.patch                        | Add OSG job environment information; OSG-specific, but would be harmless on non-OSG sites | Sent upstream: GT-468                                                                                       | 
|                | globus-gram-job-manager-scripts | 3.1-2      | osg-path.patch                               | Add default PATH to environment                                                           | Sent upstream: GT-463                                                                                       | 
|                | globus-gram-job-manager-sge     | 1.0-7.2    | seg_sge_module.c.patch                       | From Jeff Porter; fixes extra 'acct' records at midnight                                  | Fails to apply to 5.2.5; needs review                                                                       | 
|                | globus-gram-protocol            | 11.2-3.1   | increase-concurrency.patch                   | Increase maximum concurrency                                                              | Sent upstream: GT-461                                                                                       | 
|                | globus-gridftp-server           | 6.14-2.osg | osg-sysconfig.patch                          | ? (ask Dave Dykstra)                                                                      | Applies to a sysconfig file we get separately (no idea where from); needs review                            | 
|                | globus-gridftp-server           | 6.14-4.osg | gridftp-conf-logging.patch                   | Add logging options in gridftp.conf                                                       | Sent upstream: GT-464                                                                                       | 
|                | globus-gridftp-server-control   | 2.3-1.1    | GT-195.patch                                 | Fix problem when user is authorized but account does not exist                            | Fixed in Globus 5.2.2                                                                                       | 
|                | globus-xio                      | 2.9-3      | timeout_close.patch                          | Fix potential deadlock                                                                    | Only affects threaded mode, I think - possible to drop? (Applies cleanly to 5.2.5)                          | 

(*) As of 5.2.5, looks like Globus has a SLURM job manager -- perhaps we can drop the SLURM patches for the PBS jobmanager?