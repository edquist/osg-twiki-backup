%META:TOPICINFO{author="TimCartwright" date="1310673337" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Java Packages for Scientific Linux 5

---++ Background

See:

   * [[https://jira.opensciencegrid.org/browse/SOFTWARE-3][JIRA ticket SOFTWARE-3]]
   * [[https://twiki.cern.ch/twiki/bin/view/EMI/HowToUseJavaInEMI][How to use Java in EMI]]
   * [[http://fedoraproject.org/wiki/Packaging/Java][Fedora packaging guidelines for Java]]

---++ Recommendation

   * Essentially, do what EMI is doing
   * Default to the Oracle JDK, but allow !OpenJDK (for, e.g., VOMS Admin)
   * Rethink everything once !OpenJDK 7 is out and available as the default JDK from our supported platform(s)
   * Use the JPackage conventions wherever possible (if we can find them…)

---+++ Why?

   * Most OSG Java packages have been built and/or tested only against Oracle JDK, but some use OpenJDK now (VOMS Admin)
   * !OpenJDK 6 causes lots of problems for some people (not just in OSG)
   * Oracle JDK is available from Scientific Linux 5

---+++ To Be Resolved

   * How to set correct environment for *every* Java-using program?
   * How to build Ant and Maven builds correctly and easily?

---++ Notes

According to the EMI page, the =java= dependency is the recommended runtime dependency. That virtual package is satisfied by:

   * java-1.4.2-gcj-compat
   * java-1.6.0-openjdk (1.6.0.0-1.11.b16 through 1.6.0.0-1.22.1.9.8)
   * java-1.6.0-sun-compat (1.6.0.20-1 through 1.6.0.26-3)

---+++ java-1.6.0-openjdk

!OpenJDK is an open-source implementation of the Java platform. !OpenJDK 7 will be the Oracle-backed reference implementation of Java 7, but the status of !OpenJDK 6 (= java-1.6.0-openjdk) in the Java ecosystem is less clear.

Nonetheless, this set of packages (including -demo, -devel, -javadoc, and -src) are available in Scientific Linux 5.6 (and presumably, earlier) and provide a complete JDK/JRE.

Package properties:

   * It sets up the JDK to work with the RPM alternatives system
   * It provides a bunch of virtual packages to satisfy dependencies (including =java-sdk= but not =jdk=)

---+++ java-1.6.0-sun-compat

From the RPM metadata: This package provides JPackage compatibility symlinks and directories for the vendor's JDK rpm.

I think what this means is that the Oracle/Sun JDK 1.6 does not install into the filesystem like the JPackage standard dictates, so the -compat RPM adds a bunch of symlinks and empty directories to the filesystem to satisfy JPackage. Also, the package appears to have the following properties:

   * It sets up the Oracle/Sun JDK to play nicely with the RPM alternatives system
   * It conflicts with certain JDK packages from IBM, Blackdown, and BEA
   * It provides a bunch of virtual packages to satisfy dependencies
   * It depends on the =jdk= virtual package, which is the Oracle/Sun JDK package

This compatibility package is available only on Scientific Linux 5, not !CentOS 5 or from EPEL. So *if* we depend on it for our Java packaging, then we are either constrained to Scientific Linux 5 or must pass-through the =-compat= package.

---+++ jdk

Scientific Linux 5, at least, supplies the full Oracle/Sun JDK 1.6.
