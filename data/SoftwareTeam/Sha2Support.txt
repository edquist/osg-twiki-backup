%META:TOPICINFO{author="AlainRoy" date="1327375904" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="Projects"}%
---+ SHA-2 Software Support

---++ Goals

<blockquote>
All OSG software components that process X.509 certificates work correctly with certificates (including legacy, draft RFC, and RFC 3820 compliant proxy certificates) that use MD5, SHA-1 and SHA-2 as their signing algorithm.
</blockquote>

---++ Project Definition

As of January 2012, all certificates in use in OSG (CA, host, user, and proxy) certificates use SHA-1 or MD5 as their signing algorithm. In the near future (where "near" is being defined), the Certificate Authorities will begin using SHA-2 as their signing algorithm. To ensure we are ready, we need to verify that all software we provide works with MD5, SHA-1 and SHA-2. If any software is not ready, it must be updated. If we are unable to update, we need to find workarounds or delay the transition to SHA-2. 

The OSG Security Team has [[Security.HashAlgorithms][more information on MD5, SHA-1, and SHA-2]] available. 

---++ Scope

All OSG software components that we distribute will be tested and/or updated. Software development will be done as needed by the software providers. 

---++ Staff

The project Lead, co-leads and support:

   * Ruth Pordes: Project Manager
   * Alain Roy, OSG Software Coordinator: Project lead
   * Mine Altunay, OSG Security Officer: Consultant
   * Jim Basney, Consultant on identity management

---++ Deliverables

   * An OSG software stack and deployed infrastructure and services that serve those users, hosts and services with SHA-2, SHA-1, and MD-5 certificates. 
   * A documented list of software with details of SHA-2 support, including: (SHA2Responses)
      * Identifying software that has no support for SHA-2 and has no plans for future support. (Orphaned software)
      * Identifying software that has no support for SHA-2 currently but has future plans to achieve it, accompanied with each components' future plans.
   * Updates (as necessary) to the OSG Software for SHA-2 support.

---++ What we know 

As of this writing (January 2012) we know:

*Software that uses !OpenSSL*: Earlier indications are that software that uses !OpenSSL will work correctly on Red Hat Enterprise Linux 5 and later. (That is, if there are any sites using RHEL 4, they might have problem.) This software includes Globus GRAM and !GridFTP, glexec, and Condor. !OpenSSL officially supports SHA-2 and Brian Bockelman has done informal but extensive testing with the software stack. While not formal, his testing indicates they are all likely to work. 

*Software based on jGlobus*: !dCache and Bestman use !jGlobus 1.8 and does *not* support with SHA-2. The situation is complicated because while we can update to jGlobus 2.0 (which is in beta testing), and jGlobus supports SHA-1 and SHA-2, jGlobus 2 does not support other things we need:
   * jGlobus 2.0 only supports RFC 3820 proxy certificates: it does not support legacy or draft RFC 3820 proxies. These are still used in OSG because the defaults produced in OSG 1.2 are:
      * =grid-proxy-init=: draft RFC 3820 proxies
      * =voms-proxy-init=: legacy proxies
   * jGlobus 2 does not support the httpg protocol that jGlobus 1 supported and Bestman and dCache rely on. Instead it supports https. There are no plans for it to support https. 

---++ What we don't know

We have not done thorough testing to be sure that all software based on OpenSSL definitely works with SHA-2. 

---++ Transition timeline for Certificate Authorities

We are not sure of the transition time for the Certificate Authorities. Originally we thought the IGTF CAs would be allowed to transition beginning in April 2012, but this is not certain. [[https://indico.cern.ch/getFile.py/access?sessionId=4&resId=3&materialId=0&confId=155064][A presentation from Maarten Litmaath to the GDB on January 11, 2012]] suggests the transition may be delayed until 2012.

---++ Plan: Part 1, The Evaluation

| *Deadline* | *Task* |
| 27-Jan-2012 | Gather information on support from software providers. (In progress) |
| 27-Jan-2012 | Security team will provide VDT with test CA & certs using SHA-2 for use in testing |
| 10-Feb-2012 | Run internal test suite on all VDT software with SHA-2 certificates (CA, host, user). |
| 10-Feb-2012 | Meet with representatives from Globus, Bestman, dCache to discuss plans for jGlobus transition. |
| 15-Feb-2012 | Write plan for remaining work |

Each of these will generate a written summary. 

---++ Plan: Part 2, The Implementation

This plan will not be written until Part 1 has been completed. Likely tasks to be included:

   * Provide feedback to IGTF on how long we need continued SHA-1 support
   * jGlobus work: Update software to use jGlobus 2 or update jGlobus 1.8 to support SHA-2 or...?
   * Update other software as needed
   * Verify software using certificates from the cilogon CA, which uses SHA-2. We will test in the Integration Testbed. 
   * Release new software
