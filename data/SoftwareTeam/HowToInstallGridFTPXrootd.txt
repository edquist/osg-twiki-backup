%META:TOPICINFO{author="TanyaLevshina" date="1302028193" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="XrootdRPMPhase1"}%
---++ How to install and test xrootd-gridftp rpm

   1.  obtain hostcertificate and place it ==/etc/grid-security/hostcert.pem== ==/etc/grid-security/hostkey.pem== 
   1. create ==/etc/yum.repos.d/vdt.repo== <pre class="rootscreen">
[vdt-development]
name = VDT RPM repository - development versions for Redhat Enterprise Linux 5 and compatible
baseurl = http://vdt.cs.wisc.edu/native/rpm/development/rh5/$basearch
gpgcheck = 0
enabled = 1
#### skip that if you already have CAs certificate installed from some other source
[vdt-ca-certs]
name=VDT CA Certificates
baseurl=http://vdt.cs.wisc.edu/vdt_rpms/vdt-ca-certs
gpgcheck=0
enabled=1
</pre>
   1. install xrootd-grdftp and related packages:<pre class="rootscreen">
$ yum install vdt-ca-certs #execute this command only if you want CA certificates from VDT
$ yum install xrootd-dsi
</pre>
   1. manually create ==grid-mapfile== under ==/etc/grid-security==. %RED%Does ATLAS Tier-3 plan to use GUMS?%ENDCOLOR% 
   1. create "xrootd-gsiftp.sh" in ==/opt/vdt/setup.d==  (I think we need template there with local host and /tmp directory instead of mount point and storage_path)<pre class="file">
# This file must not be world-writable, and must be owned by root

# You need to edit XROOTD_VMP if XROOTD_HOST, XROOTD_MOUNT_POINT
# or XROOTD_REDIRECTOR_STORAGEPATH are present in the line below.
export XROOTD_VMP="gw016k0.fnal.gov:1094:/data/xrootdfs/public=/data/xrootdfs/public"

# You almost certainly should not edit XROOTDLIB or LD_PRELOAD
export XROOTDLIB=/opt/vdt/xrootd/lib
export LD_PRELOAD=$XROOTDLIB/libXrdPosixPreload.so
******************************************************
</pre>%RED%Somebody (xrootd-grdiftp developers or vdt) should provide template.%ENDCOLOR%
   1. start service<pre class="rootscreen"> 
service  globus-gridftp-server  start
</pre>
   1. did various tests from the node where OSG client is installed e.g:<pre class="rootscreen"> 
uberftp fermicloud015
220 fermicloud015.fnal.gov GridFTP Server 2.8 (gcc64dbg, 1217607445-63) ['VDT patched' 4.0.8] ready.
230 User tlevshin logged in.

UberFTP> ls /tmp
-rw-------   1     root     root          115 Apr  5 10:14 tkt0_52oRys
-rw-r--r--   1     root     root          413 Apr  5 04:27 yum.conf.security
-rw-------   1     root     root          397 Apr  5 10:14 krb5cc_0_XnhmW28074
drwx------   2     root     root         4096 Apr  5 09:38 ssh-Echwp26535

UberFTP> ls /data/xrootdfs/public/tanya/test-1235
-rw-------   1 tlevshin     docs           54 Apr  5 11:00 test-1235
</pre>




-- Main.TanyaLevshina - 05 Apr 2011
