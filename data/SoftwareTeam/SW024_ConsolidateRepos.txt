%META:TOPICINFO{author="ScottTeige" date="1445437333" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="Projects"}%
---+ Project 24: Consolidate OSG Software Distribution Repositories

The goal of this project is to consolidate all public OSG software distribution repositories on a single host (repo.grid.iu.edu) to reduce user confusion and maintenance costs.

---++ The Problem

As of October 2015, OSG software is distributed from at least two hosts:
   * repo.grid.iu.edu contains the OSG Yum repositories (at least)
   * software.grid.iu.edu contains OSG CA certificate tarballs and Debian packages (at least)

This situation confuses users, operations, support, and even developers, especially because software.grid.iu.edu is used lightly and often by automated tools only. Further, OSG Operations is maintaining two public software distribution hosts when one would suffice.

---++ Deliverables

   * Consolidate all public OSG software distribution repositories on a single host (repo.grid.iu.edu)
   * Remove the software.grid.iu.edu host
   * Document for OSG internal use the top-level filesystem/URL hierarchy of the software host

---++ Scope

[Nothing in particular yet.]

---++ Risks

   * We have done a poor job of keeping track of who uses software.grid.iu.edu and for what purposes, so there is the risk of breaking an existing but unknown use case. To mitigate, we will survey the contents of the software host carefully, check with OSG teams about known use cases, and work with identified stakeholders to ensure a smooth transition.

   * This project is low priority, so there is a risk of schedules slipping due to higher priority work. At the moment, there is nothing critical about the schedule so this risk is acceptable as is.

---++ Major Tasks

The list of tasks below is for planning purposes and eventually will be turned into a real project plan (WBS).

   * Document the current situation
      * Survey the contents of software.grid.iu.edu
      * Identify users of software.grid.iu.edu and their use cases
      * Look for OSG software tools that depend on software.grid.iu.edu
      * Determine whether any software.grid.iu.edu paths conflict with ones on repo.grid.iu.edu
   * Deployment Phase I – copy content to repo, make software an alias to repo
      * Form a plan for copying content from software.grid.iu.edu to repo.grid.iu.edu
      * Investigate the options for making software.grid.iu.edu an alias to repo.grid.iu.edu
      * Schedule and deploy the Phase I changes
      * After a reasonable waiting period, decommission the old software.grid.iu.edu host
   * Deployment Phase II – eliminate software URLs
      * Change OSG internal processes to use repo instead of software
      * Change OSG software tools to refer to repo instead of software
      * Migrate external groups who refer to software.grid.iu.edu directly
      * Schedule and announce an EOL date for software.grid.iu.edu
      * Remove software.grid.iu.edu

---++ Stakeholders

Initial list – there are probably more!

| *Stakeholder* | *Use Case(s)* |
| OSG Operations | &bull;&nbsp;Maintains grid.iu.edu hosts%BR%&bull;&nbsp;Provides support to OSG users |
| OSG Software | &bull;&nbsp;Manages CA certificate packaging%BR%&bull;&nbsp;Provides support to OSG users |
| OSG Release | &bull;&nbsp;Tests CA certificate packaging%BR%&bull;&nbsp;Manages releases |
| OSG Security | &bull;&nbsp;Produces OSG CA certificate distributions, hosted on software.grid.iu.edu |
| LIGO | &bull;&nbsp;Uses Debian APT repository on software.grid.iu.edu%BR%&bull;&nbsp;May start using CA certificate tarballs on software.grid.iu.edu |
| Users of osg-ca-scripts | &bull;&nbsp;Uses CA certificate tarballs on software.grid.iu.edu |

Searching /var/log/httpd/software-cache-access_log on software1 gives GETs like these:

   * GET /pacman/cadist/ (Many unique sites, symlink to /cadist)
      * ca-certs-version
      * ca-certs-version-new
      * INDEX-new.txt
      * cacerts_md5sum-new.txt
   * GET /pacman/tarballs/vo-version/edg-mkgridmap.osg
   * GET /pacman/tarballs/vo-package/vomsdir/
      * UC3, dayabay, cms, mcdrd, dream, CSIU, GridUNESP, fermilab, geant4
      * content of all of these directories is 2011-2013
   * GET /osg-1.2
      * monitor1.fnal.gov.
      * tyo1.static.conoha.io
      * myosg1/2 (reference found and deleted 21/Oct, SWT)
   * GET /apt/dists/stable
      * wifi-278.cs.wisc.edu.
      * yew.physics.sunysb.edu.
      * atlas9.atlas.aei.uni-hannover.de.
      * ahgate1.aei.uni-hannover.de.
      * ldrmaster.ligo.caltech.edu.
      * apcnb116.in2p3.fr.
      * mailgate4.kenyon.edu.
      * mailgate5.kenyon.edu.
      * dtn.chicago.kbase.us.
      * webcollab.bocklabs.wisc.edu.

Eliminating these leaves baidu, amazon and a few foreign sites
 
---++ References

   * [[Documentation.Release3.InstallCertAuth][OSG instructions for installing and managing CA certificates]] (includes osg-ca-scripts)
   * [[http://software.grid.iu.edu][Root of software.grid.iu.edu]] (includes existing deprecation warning and possibly a lot of stale information and broken links)
   * [[http://software.grid.iu.edu/apt/][Root of Debian APT repository]]
   * [[http://software.grid.iu.edu/pacman/cadist/ca-certs-version-new][URL for current OSG CA certificates “description file”]]
   * [[http://software.grid.iu.edu/pacman/cadist/ca-certs-version-igtf-new][URL for current OSG IGTF CA certificates “description file”]]
   * [[Security.CreatingCADistributions][OSG Security internal documentation for creating OSG CA certificate distributions]]