%META:TOPICINFO{author="MatyasSelmeci" date="1318282638" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="InternalDocs"}%
---+ Notes on Koji-Hub Setup (stub)

koji is run on =koji-hub.batlab.org=; right now a single machine is used for the hub (koji-hub), the web frontend (koji-web), repo generation (kojira), and building (kojid).

Two partitions are used specifically for koji: a 35G partition mounted on =/var/lib/mock= for the builder, and a 120G partition mounted on =/mnt/koji= for everything else.

The server was generally put together using the instructions at [[http://fedoraproject.org/wiki/Koji/ServerHowTo]]. We didn't use the instructions there to create a certs, but got some from DOEGrids instead. (Note that we had to run =dos2unix= on the certs we got from DOEGrids before they would work).

We have 2 certs, with the following subjects:
   * =/DC=org/DC=doegrids/OU=Services/CN=koji-hub.batlab.org= (for koji-hub, koji-web, and kojid)
   * =/DC=org/DC=doegrids/OU=Services/CN=kojira/koji-hub.batlab.org= (for kojira)
kojid needed a different cert than kojira because the two would connect to koji-hub at the same time and log each other off.

-- Main.MatyasSelmeci - 10 Oct 2011
