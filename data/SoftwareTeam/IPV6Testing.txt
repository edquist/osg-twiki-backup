%META:TOPICINFO{author="EdgarFajardo" date="1402509203" format="1.1" reprev="1.3" version="1.3"}%
---+!! Testing Software with IPV6

%TOC{depth="2"}%

---# About this Document

This document is for the OSG Software team,  to gather information on testing software pieces with IPV6.


This document follows the general OSG documentation conventions: %TWISTY{%TWISTY_OPTS_OUTPUT% showlink="Click to expand document conventions..."}%
%INCLUDE{"Documentation/DocumentationTeam/DocConventions" section="Header"}%
%INCLUDE{"Documentation/DocumentationTeam/DocConventions" section="CommandLine"}%
%ENDTWISTY%

For more information on ipv6 see: [[http://en.wikipedia.org/wiki/IPv6][IPV6]].

---# Requirements

   1 Be familiar with your institute's network policy and firewall configuration
   1 _root_ access is required to configure a host-based firewall using =iptables=

---# Enabling IPV6

The first thing is to determine the IPV6 address of the machine. Like this:

<pre class="screen">
%UCL_PROMPT% nslookup -type=aaaa ipv6vm001.fnal.gov
Server:		132.239.0.252
Address:	132.239.0.252#53

Non-authoritative answer:
ipv6vm001.fnal.gov	has AAAA address 2001:400:2410:29::182
</pre>

Then the IPV6 Default Gateway address is needeed. For this ask your network admin.

Modify the file =/etc/sysconfig/network-scripts/ifcfg-eth0=  and be sure these lines exist, and replace the IPV6 address by your IPV6 address.

<pre class="file">
IPV6INIT=yes
IPV6_AUTOCONF=no
IPV6ADDR="2001:400:2410:29::182"
IPV6_DEFAULTGW="The IPV6 Default Gateway"
</pre>

Then restart the network devices
<pre class="rootscreen">
%UCL_PROMPT_ROOT% service network restart
Shutting down interface eth0:                              [  OK  ]
Shutting down loopback interface:                          [  OK  ]
Bringing up loopback interface:                            [  OK  ]
Bringing up interface eth0:                                [  OK  ]
</pre>

---# Testing ipv6 connectivity

From another machine which already has ipv6 networking capabilities:

<pre class="screen">
%UCL_PROMPT% ping6 ipv6vm001.fnal.gov
PING ipv6vm001.fnal.gov(ipv6vm001.fnal.gov) 56 data bytes
64 bytes from ipv6vm001.fnal.gov: icmp_seq=1 ttl=51 time=68.1 ms
64 bytes from ipv6vm001.fnal.gov: icmp_seq=2 ttl=51 time=57.6 ms
</pre>

And from your own box

<pre class="screen">
[efajardo@ipv6vm001 ~]# ping6 uaf-4.t2.ucsd.edu
PING uaf-4.t2.ucsd.edu(uaf-4.t2.ucsd.edu) 56 data bytes
64 bytes from uaf-4.t2.ucsd.edu: icmp_seq=1 ttl=51 time=57.6 ms
</pre>

Now make sure you can login to your vm over ipv6. Fermilab kerberos still doesn't support it.

<pre class="screen">
efajardo@uaf-4 ~$ ssh -6 cabinet-10-10-1.t2.ucsd.edu -l root
Last login: Wed Jun  4 11:07:53 2014 from uaf-4.t2.ucsd.edu
[1051] root@cabinet-10-10-1 ~# 
</pre>


---# Disabling ipv4

---# Test of OSG Software stack

|*Component*|*Version*|*In Release*|*IPV6 Only*|*Mix Mode (IPV6 preferred)*|*Notes*|
|*xrootd*|4.0.0-1| to be released |Not yet tested | Passed| None|







-- Main.EdgarFajardo - 04 Jun 2014
