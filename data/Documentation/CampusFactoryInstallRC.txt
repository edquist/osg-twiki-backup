%META:TOPICINFO{author="DerekWeitzel" date="1330807545" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="DocHowTo"}%
---+!! *Campus Factory Install RC*
<div style="background-color:#ffa07a; padding:7px; -moz-border-radius: 5px; border-radius: 5px;">
This is a pre-release.  It is not officially supported.  If you find any bugs, email campusgrids@fnal.gov
</div>

%DOC_STATUS_TABLE%
%TOC{depth="2"}%

---++ About This Document
This document is the instructions to install the 1.0 Release Candidate.  For the production release (0.4.X), see the CampusFactoryInstall.  

---++ Requirements
In order to install the Release Candidate
   1. CampusGrids.BoSCO

---++ Procedure
---+++ Configure CampusGrids.BoSCO
   1. Edit =~/bosco/local.%RED%hostname%ENDCOLOR%=.
   1. Add daemons to the =DAEMON_LIST=. <pre class="file">
DEAMON_LIST = MASTER, SCHEDD, COLLECTOR, NEGOTIATOR
</pre>
   1. Add the factory node to the collector host. <pre class="file">
COLLECTOR_NAME = fermicloud013.fnal.gov
CONDOR_HOST = $(COLLECTOR_NAME)
</pre>
   1. Add the possible worker nodes to write to the factory node.  The IP in %RED%red%ENDCOLOR% should be replaced with possible IPs if remote worker nodes. <pre class="file">
ALLOW_WRITE = $(ALLOW_WRITE), %RED%129.93.*%ENDCOLOR%
SEC_DEFAULT_AUTHENTICATION_METHODS = FS,CLAIMTOBE
</pre>

---+++ Configure the Campus Factory
   1. Download the !CampusFactory-1.0-rc1 at [[https://sourceforge.net/projects/campusfactory/][SourceForge]]
   1. Untar the Campus Factory <pre class="screen">
%UCL_PROMPT% tar xzf CampusFactory-1.0-rc1.tar.gz
</pre>
   1. Configure the Campus Factory, edit the =logdirectory=, =worker_tmp=.  Add the configuration option =FLOCK_FROM=, adding the hostname of the Campus Factory host. <pre class="file">
logdirectory = /home/dweitzel/campus-factory/share
worker_tmp = /state/partition1/tmp
FLOCK_FROM = fermicloud013
</pre>
   1. Rsync the campus factory over to the remote clusters <pre class="screen">
%UCL_PROMPT% rsync -av campus-factory/ %RED%user@host.example.com%ENDCOLOR%/bosco
</pre>

---+++ Starting the services
   1. Start BoSCO: <pre class="screen">
%UCL_PROMPT% bosco_start
</pre>
   1. Start the campus factory: <pre class="screen">
%UCL_PROMPT% campus-factory/bin/cf start
</pre>

---++ Validation of Success
Show how to verify the procedure was successful, especially if that is a separate step and is not given as a direct response from performing the steps.

---++ Problem Resolution and Help
---+++!!Where to look for information
Location of information that is important for resolving the problem with the procedure.  

---+++!!Problem procedure
What are the first things to check, step-by-step instructions to determine source of problem
%BR%
If you cannot resolve the problem, the best way to get help on this procedure is to: ....

---+++!!Caveats/Known issues
Restrictions and/or work around for known issues 

---+++!!References
References to additional information.  This document should be as concise as possible, but the reader can use these links if he/she wants more background or information.

---+++!!Screen dump of the complete procedure
Include if the procedure includes use of terminal commands.
%BR%
%TWISTY{
mode="div"
showlink="Show..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
complete screen dump of the procedure
</pre>
%ENDTWISTY%

---++ *Comments*
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = DerekWeitzel

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|General|Integration|Monitoring|Operations|Security|Storage|Tier3|User|VO)
   * Local DOC_AREA       = General

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (Developer|Documenter|Scientist|Student|SysAdmin|VOManager)
   * Local DOC_ROLE       = Scientist

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (HowTo|Installation|Knowledge|Navigation|Planning|Training|Troubleshooting)
   * Local DOC_TYPE       = HowTo
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = DerekWeitzel
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = DerekWeitzel
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
############################################################################################################
-->

-- Main.JamesWeichel - 23 Feb 2010
