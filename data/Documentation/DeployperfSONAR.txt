%META:TOPICINFO{author="ShawnMcKee" date="1413550653" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="NetworkingInOSG"}%
%LINKCSS%

<!-- This is the default OSG documentation template. Please modify it in -->
<!-- the sections indicated to create your topic.                        --> 

<!-- By default the title is the WikiWord used to create this topic. If  -->
<!-- you want to modify it to something more meaningful, just replace    -->
<!-- %TOPIC% below with i.e "My Topic".                                  -->

---+!! %SPACEOUT{ "Deploying perfSONAR for WLCG/OSG" }%
%TOC%

%STARTINCLUDE%
This  page provides  details for site admins installing, upgrading or  using  perfSONAR  in  WLCG/OSG.     The sections  below are intended to allow users  to  find  quickly the  specific information they are  interested in. 

Our  *strong recommendation* for  anyone maintaining/using  perfSONAR is that they join either/both of the following mailing lists:
   * *User's Mailing List*  The perfSONAR project maintains a mailing list for communication on matters of installation, configuration, bug reports, or general performance discussions:  https://lists.internet2.edu/sympa/subscribe/perfsonar-user
   * *Announcement Mailing List* The perfSONAR project also maintains a low volume mailing list used for announcements related to software updates and vulnerabilities: https://lists.internet2.edu/sympa/subscribe/perfsonar-announce

---+++ Overview of WLCG/OSG Changes for perfSONAR 3.4

For those of you have are familiar  with installing  perfSONAR  in  WLCG  we summarize what is changed going to v3.4
   *  *Upgrades  or  reinstalls  to perfSONAR v3.4* should  just  follow the  perfSONAR page instructions
      * If there  is  any suspicion your system  could have  been  compromised  we  recommend  a  clean install  of  v3.4,  though this  will  lose any existing data.
      * For running v3.3.x versions this should  be as  simple  as  =yum clean all=;  =yum -y update=;  =reboot=  (But read the  install/upgrade notes)
   *  *We are  deprecating the  use  of  =NDT=  and =NPAD=.*   These components,  while  useful in  some cases,  force  the  use of  Web100 kernels and RENO  as  the  TCP  protocol.  
      * Sites  can  choose  to  run these  but  it  is not a  recommendation from  OSG  or  WLCG
   *  perfSONAR v3.4 uses a new measurement archive based upon Esmond and the measurement archive access URLs inside our meshes need to be updated.
      * Updated mesh-configurations have been created but work  only with perfSONAR  3.4+ versions.
      * Sites  must  either  open  port  80 or port 443 to  our monitoring  subnets  to  allow the  test metrics  to  be  collected (see  iptables  item  below).
   *  *The mesh-config  URLs are now hosted at OSG* and  the updated  URLs  are document in  the  "Installation/upgrade  Guide"  below.
      * Until the OSG created meshes are  ready,  the  OSG  URLs will redirect  to the manually configured  CERN instances  we  have  been  using.
   *  *The  monitoring  for  perfSONAR will be  migrating to  OSG but in  the near term  we  will  continue  to use  the  prototype  instances on  maddash.aglt2.org*
      * !MaDDash protoytpe  URL: https://maddash.aglt2.org/maddash-webui
      * !MaDDash production (*not  ready yet*) URL:  https://perfsonar.grid.iu.edu/maddash-webui/
      * OMD prototype URL:  https://maddash.aglt2.org/WLCGperfSONAR/check_mk/
      * OMD production (*not  ready yet*) URL: https://perfsonar.grid.iu.edu/WLCGperfSONAR/check_mk/
   * We are recommending  *tightening the  iptables  configuration which  comes  with  perfSONAR*
      * Ports  80 and  443  should  only be  open  for  the OSG/WLCG monitoring  subnets and any desired  local  subnets
      * Ports  not required  for  WLCG/OSG  testing should  be  closed
   * For sites  with IPv6 available we  are *strongly recommending configuring  perfSONAR to  be  dual-stacked*
      * Sites with  IPv6 should get both =A= and =AAAA= records for  their  perfSONAR  DNS name (as  well  as  ensuring  the reverse  is  in place).
      * All existing meshes will be configured to *force* the  use  of IPv4
      * Once we have sufficient numbers of dual-stacked  sites in a mesh  we  will then  add a new  IPv6  testing mesh.

Details on all of the  above  points are in perfSONAR topical sections below:
   * [[IntegrationPS][Overview,  Motivation  and Requirements (new sites)]]
   * [[InstallUpdatePS][Installation/upgrade guide]]
   * [[TroubleFAQPS][Troubleshooting/FAQ]]
   * [[ExGuidePS][Guide for experiments (storage APIs, dashboard, etc.)]]






%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.ShawnMcKee - 14 Oct 2014