%META:TOPICINFO{author="BrianBockelman" date="1268966864" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="UsingTheGrid"}%
---++ User Introduction
This page will cover three things:
   * Initializing your grid environment
   * Simple certificate management
   * Sending a debug job to a CE.

If you don't have a CE to test against, please use the [[FindAvailableResource][guide for finding resources]] to find a CE that supports your VO.  The document below uses =osg-ce.ligo.caltech.edu= as the example CE.

---++ Initialize your Grid Environment

We assume you or a system administrator have already installed the [[ReleaseDocumentation/ClientInstallationGuide][OSG client]].  As a part of this, you must know the top-level client install directory, called =<i>VDT_LOCATION</i>=.

To initialize the grid environment, source the =setup.[c]sh= script in =$<i>VDT_LOCATION</i>=.  You will need to execute one of the following commands.

For bash shell:
<pre class="userinput">
source <i>VDT_LOCATION</i>/setup.sh
</pre>
For csh:
<pre class="userinput">
source <i>VDT_LOCATION</i>/setup.csh
</pre>
You will need to replace =<i>VDT_LOCATION</i>= above with your top-level install directory.

---++ Verify your Grid Credential

Your grid credential will be used to authenticate with every service provided by the CE. The authentication is based on the =X.509 Public Key Infrastructure= which consists of a private key (=userkey.pem=) and a public key (=usercert.pem=). Both files are by default located in =$HOME/.globus=:

%TWISTY{
mode="div"
showlink="Show sample directory listing..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
[robert@osg-job ~]$ ls -al $HOME/.globus
total 68
drwxr-x---  4 robert robert  4096 Mar 18 18:50 .
drwx------ 29 robert robert 12288 Jul 28 08:38 ..
drwxrwxr-x  5 robert robert  4096 Jul 20 11:18 .gass_cache
drwx------  4 robert robert  4096 Mar 27 12:14 job
-rw-r-----  1 robert robert  1724 Dec 16  2008 usercert.pem
-r--------  1 robert robert  1919 Dec 16  2008 userkey.pem
</pre>
%ENDTWISTY%
<br/>

To create a proxy - a token required to use the grid - you can use the  =grid-proxy-init= tool:

<pre class="screen">
[robert@osg-job ~]$ grid-proxy-init -valid 500:00
Your identity: /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
Enter GRID pass phrase for this identity:
Creating proxy ................................. Done
Your proxy is valid until: Tue Aug 18 08:06:35 2009
</pre>

Alternately, some VOs require you to use the =voms-proxy-init= command line instead.  The command-line usage of this includes an extra argument:

<pre class="userinput">
voms-proxy-init --voms <i>voname</i>:/<i>voname</i>
</pre>

If you are unsure, check with your VO manager to see which one you should use.

To display detailed information about your grid certificate =grid-proxy-info= can be used.

%TWISTY{
mode="div"
showlink="Show sample command output..."
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
[robert@osg-job ~]$ grid-proxy-info
subject  : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994/CN=1692124231
issuer   : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
identity : /DC=org/DC=doegrids/OU=People/CN=Robert Engel 392994
type     : Proxy draft (pre-RFC) compliant impersonation proxy
strength : 512 bits
path     : /tmp/x509up_u500
timeleft : 291:11:00  (12.1 days)
</pre>
%ENDTWISTY%

---++ Test the remote CE

A program can be executed remotely an OSG CE.  To verify a grid endpoint will accept jobs from you and will be useful for the rest of the grid guide, one can use =globus-job-run=.  The we'll demonstrate is simple:

<pre class="userinput">
globus-job-run <i>hostname</i>:/jobmanager-<i>name</i> /path/to/executable
</pre>

For test jobs (lasting a few seconds), you can use =jobmanager-fork=.  For determining the jobmanager for all other jobs, use the  [[FindAvailableResource][guide for finding resources]]; other valid jobmanager names on the OSG are condor, pbs, lsf, or sge.

An example for running the 'id' binary follows:
<pre class="screen">
[robert@osg-job ~]$ globus-job-run osg-ce.ligo.caltech.edu:/jobmanager-fork /usr/bin/id
uid=506(ligo) gid=506(ligo) groups=506(ligo)
</pre>
