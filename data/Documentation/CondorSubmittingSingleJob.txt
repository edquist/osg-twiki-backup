%META:TOPICINFO{author="KyleGross" date="1225985936" format="1.1" version="1.7"}%
%META:TOPICPARENT{name="GridUsersGuide"}%
%LINKCSS%
---+ Submitting a Single Job Using Condor-G

%STARTINCLUDE%
%EDITTHIS%

<ol>
  <li>Create a file named =test.cmd= that contains the following:
<pre class="programlisting">
universe=globus

# You will probably want to change the following line to point to
# some remote site that supports your VO
GlobusScheduler=osg-gw-2.t2.ucsd.edu:/jobmanager-condor

# You will certainly want to change the following line to point
# to the executable you want to run on the OSG.  /usr/bin/env is useful for
# testing the submission process, but that's about it.
executable=/usr/bin/env
# If your executable originates from your submission machine rather than
# being guaranteed to be available on the destination, you need to uncomment:
# transfer_input_files = True

# These attributes should be False in general for GRID operations
stream_output = False
stream_error  = False

# This makes the standard output of your program end up in the local file
# named test1.out.  Any additional output files your job creates will be detected
# and returned to the submitting directory.

# Standard output from your job.
output = test1.out

# Standard error from your job
error  = test1.err

# Condor messages related to the scheduling and execution of your job.
log    = test1.log

# Generic directives
#
# maxWallTime in minutes is advisable because some sites have short default times
# if this is not specified.
# 
# JobType is advisable because on many sites where the underlying batch manager is
# of the PBS flavor default to the "multiple" type. Note the escaping of the
# quotes on the string value for the quantity. For a full description of RSL, see
# http://www.globus.org/toolkit/docs/2.4/gram/rsl_spec1.html
globusrsl = (maxWallTime=14400)(JobType=\"single\")

# The following line must be last in the file.  The order of the other
# lines does not matter.
queue
</pre>
   </li>
   <li>Source the environment for the OSG client.
<pre class="screen">
$ <userinput>source $VDT_LOCATION/setup.sh</userinput>
</pre>
   </li>
   <li>Obtain a proxy from your VirtualOrganizations/VOInfoMS:
 <pre class="screen">
$ <userinput>voms-proxy-init --voms cms:/cms/uscms/Role=cmsuser</userinput>
</pre>
   </li>
   <li>Submit the =test.cmd= job:
<pre class="screen">
$ <userinput>condor_submit test.cmd</userinput>
</pre>
   </li>
   <li>Give yourself some time. Grid middleware has notoriously large latency: it is meant to provide high-throughput computing, _not_ interactive computing or even low-latency computing tools. It might take several minutes before anything starts, even if the site you are submitting to has plenty of free batch slots.
<pre class="screen">
$ <userinput>sleep 300</userinput> 
</pre>
   </li>
   <li>Use =condor_q= to display information about your jobs:
<pre class="screen">
$ <userinput>condor_q</userinput>
</pre>
    </li>
</ol>

 
%NOTE% In most cases, a basic grid proxy certificate generated by =<span class="command">grid-proxy-init</span>= should be sufficient. =<span class="command">voms-proxy-init</span>= is only necessary if your VirtualOrganizations/VOInfo supports user roles and if the site you submit to can map your jobs to different local accounts depending on these roles. 

%STOPINCLUDE%

For more information, see the [[http://www.cs.wisc.edu/condor/condorg/][Condor-G documentation]].

%BOTTOMMATTER%
-- Main.ForrestChristian - edited from GridUsersGuide %BR%
-- Main.ForrestChristian - 03 April 2007