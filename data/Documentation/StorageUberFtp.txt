%META:TOPICINFO{author="ForrestChristian" date="1164061144" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="StorageGridFTP"}%
---+!! Using !UberFTP as your !GridFTP-Enabled Client

%STARTINCLUDE%
According to the [[http://dims.ncsa.uiuc.edu/set/uberftp/index.html][UberFTP site at NCSA]],

%STARTInsetBox%
!UberFTP is the first interactive, !GridFTP-enabled ftp client. It supports GSI authentication, parallel data channels and third party transfers.
%ENDInsetBox%

!UberFTP comes in the OSG Software package as one of the [[Documentation.StorageGridFTP][GridFTP]]-enabled clients.

%BHL%+ !UberFTP Commandline Options
	
Usage: 
   * uberftp [-?] [-d] [ host [-P port] [-a auth] [-c N] [-t type] ]
   * uberftp [-?] [-d]  host  [-P port] [-a auth] [-c N] [-t type] "cmd"
   * uberftp -v

| *Option* | *Description* |
| =host= | Connect to host |
| =-P port= | Connect to port (default 2811 for GSI) |
| =-a auth= | Use auth authentication. GSI and MSS (NCSA passwordless) authentication methods are supported. If this option is not used, the default is GSI |
| =-c N= | Use N parallel data connections. Defaults to 1. |
| =-t type= | Use ASCII or BINARY transfer type. Valid type options are 'a' (ASCII) or 'b' (BINARY). Default is BINARY. |
| =cmd= | This specifies the FTP commands to run once the control connection is establish. This list must be enclosed in quotes. Multiple commands are semicolon delimited uberftp will execute these commands and then exit. |
| =-v= | Print version information and exit. |
| =-?= | Print this help message |
| =-d= | Turn on debug (verbose) output |

							
   $ %H% *%ORANGE% NOTE %ENDCOLOR%*: As of version 1.7, =-u user= and =-p pass= are no longer supported. %BR% =-H host= is now optional: you can just specify =host=. The =-H= switch is supported for backwards compatibility. It will will be removed in version 2.

%BHL%+ Interactive Commands

<nop>UberFTP supports the following commands (type =help= at the command prompt to list):

<table style="valign: top;"><tr style="valign: top;"><td>
   * ascii
   * binary
   * blksize
   * cat
   * cd
   * chmod
   * debug
   * close
   * dir
   * get
   * hash
</td><td>
   * help
   * lcat
   * lcd
   * lchmod
   * lls
   * lclose
   * lmkdir
   * lopen
   * lpwd
   * lrm
   * lrmdir
</td><td>
   * lquote
   * ls
   * mget
   * mput
   * mkdir
   * mode
   * passive
   * open
   * parallel
   * pget
   * pput
</td><td style="valign: top;" valign="top">
   * pwd
   * put
   * rm
   * rmdir
   * quit
   * quote
   * tcpbuf<sup>[[#FootNoteTcpbuf1][1]]
</td>
</tr></table>

#FootNoteTcpbuf1
   1. =tcpbuf= was added in version 1.8.


%BHL%+ Configuring Your Environment for !UberFTP
[[http://dims.ncsa.uiuc.edu/set/uberftp/index.html][UberFTP]] is typically dynamically linked. Normally, you must configure your environment so that the client can locate all of its needed libraries. 

The following error message means that your environment has not been configured for !UberFTP: 
<pre>    uberftp: error while loading shared libraries: 
        libglobus_ftp_control_gcc64pthr.so.0: cannot open 
        shared object file: No such file or directory</pre>

%BHL%++ To Configure your environment: 
   1. Set =GLOBUS_LOCATION=: <pre> > export GLOBUS_LOCATION=/usr/local/globus</pre>
   1. Source =$GLOBUS_LOCATION/etc/globus-user-env.sh=: <pre> > . $GLOBUS_LOCATION/etc/globus-user-env.sh</pre>

%BHL%+ Performing Normal Transfers
In normal data transfers, the "local" machine is the one on which you are running the command. 
   1. Use =open= to select the remote host.
   1. Perform =put= and =get= between the local client machine and the remote FTP service. 


%BHL%+ Third-Party Transfers
Since third-party transfers involve two remote sites, you must first set one as a "local" service, and then use =get= and =put= in the right direction.
   1. Use =lopen= to select a remote host as a new "local" service. All =l*= commands can now act on the new "local" service as if you were logged into that machine.
   1. Use =put= to perform a third-party transfer where you are moving the file from the "local" service to the "remote" service. 
   1. Use =get= to move a file from the "remote" service to the "local" service". 
   1. When you have completed the data transfers, use =close= with the "local" service and =lclose= with the "remote" service. 


%BHL%++ To start a session using GSI authentication:
   1. Obtain a current grid proxy using =grid-proxy-init=.
   1. Use !UberFTP to access the remote server.
   1. Run your commands.
   1. Close the connection.
   
Here's an example of starting a session using GSI authentication: 
%STARTMore%
<verbatim>
>  grid-proxy-init
  Your identity: /C=US/O=National Computational Science Alliance/CN=Jason Alt
  Enter GRID pass phrase for this identity:
  Creating proxy .................................................... Done
  Your proxy is valid until: Thu Sep 25 22:14:10 2003
  [jalt@cvs bin]$ ./uberftp mss.ncsa.uiuc.edu
  220-
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  *******************************************************************************
  
                        NCSA's Mass Storage System
                  Running UniTree Central File Manager 2.3
                      for IRIX on a SGI Origin 2000
  
  Dec 29, 2000:  UniTree has been upgraded to version 2.3. There are a few
                 new enhancements to the ftp services. Please see the
                 consulting team's web pages for updated information:
  
                 http://www.ncsa.uiuc.edu/SCD/Hardware/UniTree/Doc/
  
  *******************************************************************************
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  
  Aug 18 2003   There may be delays accessing archived (AR) files from Mass
                Storage, due to tape drive upgrades. Please let the Helpdesk
                or Consult know if delays seem excessive.
  
  Sept 23 2003  The certificate for MSS has been renewed using NCSA's CA
                certificate. To continue using GSI authentication to MSS,
                please get a copy of NCSA's CA certificate
                (4a6cd8b1.0 and 4a6cd8b1.signing_policy) from
                ftp://ftp.ncsa.uiuc.edu/aces/ncsa-ca/certificates and place them
                in /etc/grid-security/certificates on your client machine.
  
  UNIX Archive FTP server (DiskXtender Version 2.4) active. Checking DiskXtender.conf
  
  220 UNIX Archive FTP server ready.
  230 User jalt logged in.
  uberftp>
</verbatim>
%ENDMore%

%BHL%++ To perform a third-party transfer with five data connections:
   1. Run !UberFTP
   2. =open= the site you will use as the "remote" service.
   3. =lopen+= the site that you wish to use as the "local" service.
   4. =get= the file to transfer it from the "remote" service to the server you designated as a "local" service.

Here's an example of a third-party transfer with five data connections:
%STARTMore%
<verbatim>
> ./uberftp
  uberftp> open mss.ncsa.uiuc.edu -a mss
  UNIX Archive FTP server (DiskXtender Version 2.4) active. Checking DiskXtender.conf
  
  220 UNIX Archive FTP server ready.
  230 User jalt logged in.
  uberftp> lopen tg-tts1.ncsa.teragrid.org
  220 tg-tts1.ncsa.teragrid.org GridFTP Server 1.5 GSSAPI type Globus/GSI wu-2.6.2 (gcc32dbg, 1032298778-28) ready.
  230 User jalt logged in.  Access restrictions apply.
  uberftp> ls
  535 DCAU not supported for this authentication mechanism
  150 Opening  BINARY connection(s) for /usr/unitree/prod/bin/ddir.
  drwx------      2 jalt      ac       DK  common      1024 Sep 18 12:54 .trash
  -rw-------      1 jalt      ac       DK  common         0 Sep 18 13:50 10
  -rw-------      1 jalt      ac       AR  common 10000000001 Sep 11 13:42 10GigFile.1
  226 Transfer complete.
  uberftp> lls
  150 Opening BINARY mode data connection.
  226 Transfer complete.
  uberftp> get 10
  dst> 150 Opening BINARY mode data connection.
  src> 150 Opening  BINARY connection(s) for 10.
  dst> 226 Transfer complete.
  src> 226 Transfer complete.
  uberftp>
</verbatim>							
%ENDMore%


_Adapted from the [[http://dims.ncsa.uiuc.edu/set/uberftp/userdoc.html][UberFTP website]]_
%STOPINCLUDE%

---++ See Also
   * [[Documentation.StorageGridFTP][Overview of GridFTP]]
   * [[http://dims.ncsa.uiuc.edu/set/uberftp/index.html][UberFTP site at NCSA]]
-------------

%INCLUDE{ "Documentation.ToolsBottomMatter" }%
-- Main.ForrestChristian 2006 nov 20

<!-- Set some internal variables. The last excl. point (open comment tag) is necessary for a variety of complex reasons. (ForrestChristian)
   * Set BHL= ---+
<!-- -->
