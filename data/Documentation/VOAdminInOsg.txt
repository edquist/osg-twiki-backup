%META:TOPICINFO{author="AnneHeavey" date="1158965892" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="AdminDocVO"}%
---+ Where does a VO fit into the OSG Infrastructure?
%RED%Under construction!%ENDCOLOR%

%TOC%
---++ VO as Gateway for Individuals to use OSG Resources
A VO is, most simply, an organizational structure formed to identify and control people who wish access to grid resources. A VO must become a member of OSG in order for its members to access the resources. By the same token, resource users must be authenticated and authorized under the auspices of a member VO. VOs are typically organized around research efforts, e.g., there is one VO for the ATLAS HEP experiment, another for the LIGO project, and so on.

Beyond representing a group of users, a VO manages a set of resources and services. Contracts across the groups define agreements for using the resources and the privileges that users in the VO have to access data, storage, catalogs and other services.
d14 1
Illustration of sample VOs in OSG infrastructure: <br />
<img src="%ATTACHURLPATH%/VO_in_OSG.gif" alt="VO_in_OSG.gif" width='960' height='720' />

---++ Role-Based Access Control (RBAC) Infrastructure
The OSG has implemented a role-based access control infrastructure which provides a framework for role-based access to resources and services. Within OSG, the RBAC infrastructure supports:
The OSG has implemented a RBAC infrastructure which provides a framework for role-based access to resources and services. Within OSG, the RBAC infrastructure supports:

   * VO administrators defining privileges based on role and group definitions
   * Site administrators defining local accounts based on groups and roles of the supported VOs
   * Service-based (rather than host-based) granularity for authorization
   * Users defining their role for any resource access
   * Multiple roles per DN (per user), thus multiple privileges at the same time
   * Multi-user environment in which traditional UID-based auditing is possible if desired

---+++ VO as Component of RBAC
VOs can organize their users into groups and assign them roles.  Different levels of authorization can be associated with roles, so the VO can control who has access to what, based on what the users are doing rather than who they are. OSG sites, where CE and/or SE resources are maintained, enforce local authorization on incoming jobs.  To set the local authorization appropriately, they rely on information coming from member VOs. The VO therefore must implement VOMS software that provides role information, via certificate extensions, to the middleware, from which the sites can pull it.

---+++ Implementation of Roles and Privileges
The OSG software stack, using VDT 1.3.6 and above, includes the [[http://computing.fnal.gov/docs/products/voprivilege/index.html][Privilege Project]] which administers and applies role-based access control to compute and storage resources (CEs and SEs). The current implementation provides for the following:

   * Extended X509 certificates (VOMS extended certificates) to include [[VORolesAndGroups][group membership and multiple roles]].
   * Site-based mapping of certificates to UNIX accounts based on extended proxy certificates.
   * Application of Policy through an implementation of the standard Globus Gatekeeper, GridFTP and SRM/dCache callouts.

---+++ The Integrated Solution
The OSG components provide an integrated solution to role-based access control based on:
   $ [[http://www.globus.org][Globus gatekeeper and GridFTP server callouts]]: The Globus Toolkit GridFTP Server reads two files (=gsi-authz.conf= and =gsi-gaa.conf=) to determine how to perform certain authorization and mapping functions. If these files are not present , the GridFTP server will determine the user's permissions based solely on the user's identity (this is not what we want). There is a callout command to create these files, and the GridFTP server will honor CAS policy assertions. ([[http://www.globus.org/toolkit/docs/3.2/cas/key/index.html][CAS]] allows resource providers to specify course-grained access control policies in terms of communities as a whole, delegating fine-grained access control policy management to the community itself.)

   $ [[http://grid.racf.bnl.gov/GUMS][GUMS Grid User Management System]]: !GUMS maps a Grid entity to a local username (UID) at the requested resource based on the entity&#8217;s X.509 name and provided attributes.

   $ [[http://infnforge.cnaf.infn.it/voms/][INFN VOMS VO Membership Service]]: VOMS allows a VO to manage information about its members, to provide appropriate tokens to users, and to communicate with grid middleware.

   $ the SRM/dCache storage service: SRM/dCache provides storage for huge amounts of data, a common interface to physical storage systems, and storage management tools. It handles load balancing and system failure and recovery.

   $ the [[http://osgdocdb.opensciencegrid.org/0001/000108/001/plugable-authorization-module-infofermilab.doc][gridaware
PLuggable !AuthoriZation MAnagement (!gPLAZMA) module]]: !gPLAZMA invokes plugins for authorization methods.

   $ [[http://computing.fnal.gov/docs/products/voprivilege/index.html][the PRIMA modules]]: PRIMA extracts the VOMS attributes containing the VO and role information from the user's proxy certificate, and queries the identity mapping service for an appropriate local user account assignment.

---++ What does this involve for you as a VO?
   * First of all, you must run a VOMS installation, as we've said. 
   * You must communicate your role-to-privilege definitions with the sites that your users will use. You want the appropriate privileges to be honored.
   * You may want to facilitate the management of users, groups, roles, and site requirements by interfacing to your VOMS server with the VOM Registration Service

a69 1
---++ Authorization Processes for Compute and Storage Elements
---+++ CE Authorization Process
     <img src="%ATTACHURLPATH%/ce_auth_process.gif" alt="ce_auth_process.gif" width='787' height='383' />

---+++ SE Authorization Process
     <img src="%ATTACHURLPATH%/se_auth_process.gif" alt="se_auth_process.gif" width='836' height='480' />

---++ Information Resources
[[http://osg-docdb.opensciencegrid.org/0001/000134/001/OSG-RoleBasedAccessControl.pdf#search=%22VOMS%20interface%20for%20extended%20attribute%20certificates%22][Open Science Grid Authorization Architecture - Role Based Access Control]] %br%
[[http://www.globus.org/toolkit/docs/3.2/cas/key/index.html][Globus Toolkit site]] %BR%
[[http://osg-docdb.opensciencegrid.org/0001/000113/003/GriPhyN-talk.pdf][]] %BR%
[[www.dcache.org/manuals/chep04/chep04.michael.talk.ppt][SRM and dCache in Use]]

-- Main.AnneHeavey - 22 Sep 2006

%META:FILEATTACHMENT{name="se_auth_process.gif" attr="" autoattached="1" comment="SE Authorization process" date="1158957823" path="se_auth_process.gif" size="23791" user="Main.AnneHeavey" version="1"}%
%META:FILEATTACHMENT{name="ce_auth_process.gif" attr="" autoattached="1" comment="CE Authorization Process" date="1158957803" path="ce_auth_process.gif" size="22248" user="Main.AnneHeavey" version="1"}%
%META:FILEATTACHMENT{name="VO_in_OSG.gif" attr="" autoattached="1" comment="VOs in OSG infrastructure" date="1158877959" path="VO_in_OSG.gif" size="76483" user="Main.AnneHeavey" version="1"}%
