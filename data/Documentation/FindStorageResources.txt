%META:TOPICINFO{author="BrianBockelman" date="1266809478" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="UsingTheGrid"}%
%LINKCSS%

---+ Finding Storage 

%STARTINCLUDE%
%EDITTHIS%

At present, there is no "one-stop shopping" for finding SRM endpoints like there is for CE endpoint.  There are some application framework which can do this, but the user-accessible command-line tools are not as well-developed.

Quite literally, if you want to find a new storage endpoint to use, one option is to send email to =osg-storage at opensciencegrid.org=. They can help you get started, and coordinate getting access to the SRMs across OSG.

Another alternate is use lcg-info (which is not developed by the OSG, but packaged in the OSG client), which provides an nearly-correct view.  Run:

<pre class="screen">
<userinput>lcg-info --list-service --bdii is.grid.iu.edu:2170 --vo gpn --attrs ServiceEndpoint</userinput>
</pre>
<br/>
%TWISTY{
mode="div"
showlink="Show output..."
hidelink="Hide output"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
-bash-3.2$ lcg-info --list-service --bdii is.grid.iu.edu:2170 --vo gpn --attrs ServiceEndpoint
- Service: httpg://red-srm1.unl.edu:8443/srm/v2/server
  - ServiceEndpoint     httpg://red-srm1.unl.edu:8443/srm/v2/server

- Service: httpg://se01.cmsaf.mit.edu:8443/srm/managerv1
  - ServiceEndpoint     httpg://se01.cmsaf.mit.edu:8443/srm/managerv1

- Service: httpg://se01.cmsaf.mit.edu:8443/srm/managerv2
  - ServiceEndpoint     httpg://se01.cmsaf.mit.edu:8443/srm/managerv2

- Service: httpg://sigmorgh.hpcc.ttu.edu:49443/srm/v2/server
  - ServiceEndpoint     httpg://sigmorgh.hpcc.ttu.edu:49443/srm/v2/server

- Service: httpg://srmb.ihepa.ufl.edu:8443/srm/v2/server
  - ServiceEndpoint     httpg://srmb.ihepa.ufl.edu:8443/srm/v2/server
%ENDTWISTY%
<br/>
Replace "gpn" with your VO's name.  These are the endpoints for all the SRM servers which claim support for your VO.  Next, take the hostname (such as =red-srm1.unl.edu=) and perform another query to get the path you should write into:
<pre class="screen">
<userinput>lcg-info --list-se --bdii is.grid.iu.edu:2170 --vo gpn --attrs Path --query 'SE=red-srm1.unl.edu'</userinput>
</pre>
<br/>
%TWISTY{
mode="div"
showlink="Show output..."
hidelink="Hide output"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
-bash-3.2$ lcg-info --list-se --bdii is.grid.iu.edu:2170 --vo gpn --attrs Path --query 'SE=red-srm1.unl.edu'
- SE: red-srm1.unl.edu
  - Path                /mnt/hadoop/public/
</pre>
%ENDTWISTY%
<br/>

You can create an SRM URL from the endpoint path, and VO name (in this case, =gpn=).  Replace httpg with srm, add a "?SFN=" to the endpoint, and add the VO's name to the path:

<pre>
srm://red-srm1.unl.edu:8443/srm/v2/server?SFN=/mnt/hadoop/public/gpn
</pre>

Again, this will not work for every site; sites where this does not work are due to a failing of the tool, not an error of the site.  OSG is working on a storage discovery tool that automates the last few queries.

Keep of this endpoint for your VO, as we will use it for our examples.  You will need a working endpoint to proceed.

%STOPINCLUDE%

---+++ Comments
%COMMENT{type="tableappend"}%
