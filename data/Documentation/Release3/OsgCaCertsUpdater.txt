%META:TOPICINFO{author="MatyasSelmeci" date="1351117027" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="InstallCertAuth"}%
%DOC_STATUS_TABLE%

---+!! OSG CA certificates updater
%TOC%

---+About this Document 
This document ...
*TODO*

---+ Requirements
   * OS must be Red Hat Enterprise Linux 5 or 6 or variants.
   * A grid-certificates package from the OSG repositories must be installed. Currently, these are: =igtf-ca-certs=, =igtf-ca-certs-compat=, =osg-ca-certs=, =osg-ca-certs-compat=.

---+ Install instructions

%INCLUDE{"YumRepositories" section="OSGRepoBrief"}%

---++ Install osg-ca-certs-updater

<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install osg-ca-certs-updater
</pre>

---+ Services
---++ Starting and Enabling Services

Enter the following to enable the updater. This will persist until the machine is rebooted. 
<pre class="rootscreen">
%UCL_PROMPT_ROOT% service osg-ca-certs-cron start
</pre>
Enter the following to enable the updater when the machine is rebooted.
<pre class="rootscreen">
%UCL_PROMPT_ROOT% chkconfig osg-ca-certs-cron on
</pre>

---++ Stopping and Disabling Services

Enter the following to disable the updater. This will persist until the machine is rebooted.
<pre class="rootscreen">
%UCL_PROMPT_ROOT% service osg-ca-certs-cron stop
</pre>
Enter the following to disable the updater when the machine is rebooted.
<pre class="rootscreen">
%UCL_PROMPT_ROOT% chkconfig osg-ca-certs-cron off
</pre>

---+ Troubleshooting
---++  Useful configuration and log files 

Configuration file:
| *Package* | *File Description* | *Location* | *Comment* |
| osg-ca-certs-updater | Cron entry for periodically launching the updater | =/etc/cron.d/osg-ca-certs-updater= | Command-line arguments to the updater can be specified here |
| osg-release | Repo definition files for production OSG repositories | =/etc/yum.repos.d/osg.repo= or =/etc/yum.repos.d/osg-el6.repo= | Make sure these repositories are enabled and reachable from the host you are trying to update |

Log files:

Logging is performed to the console by default.
Please see the manual for your =cron= daemon to find out how it handles console output.

A logfile can be specified via the =-l= / =--logfile= command-line option.

If logging to syslog via the =-s= / =--log-to-syslog= option, the updater will write to the =user= section of the syslog.
The file =/etc/syslog.conf= determines where syslog messages are saved.

---+ How to get Help?
To get assistance please use [[HelpProcedure][Help Procedure]].

---+ References
Some guides on x509 certificates:
   * Useful commands: http://security.ncsa.illinois.edu/research/grid-howtos/usefulopenssl.html
   * Install GSI authentication on a server: http://security.ncsa.illinois.edu/research/wssec/gsihttps/
   * Certificates how-to: http://www.nordugrid.org/documents/certificate_howto.html
Some examples about verifying the certificates:
   * http://gagravarr.org/writing/openssl-certs/others.shtml
   * http://www.cyberciti.biz/faq/test-ssl-certificates-diagnosis-ssl-certificate/
   * http://www.cyberciti.biz/tips/debugging-ssl-communications-from-unix-shell-prompt.html
Related software:
   * [[InstallCertAuth][OSG CA certificates]]
   * Description, manual and examples of OsgCaManage
   * OsgCaCertsUpdater

---+ Comments
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = MatyasSelmeci

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = Security

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local TEST_READY   = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = TimCartwright
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         =
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%

############################################################################################################
-->
