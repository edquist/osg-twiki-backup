%META:TOPICINFO{author="MatyasSelmeci" date="1338303544" format="1.1" version="1.31"}%
---+!! *YUM Repositories*
%DOC_STATUS_TABLE%
%TOC%

---+ About This Document
This document introduces YUM repositories and how OSG uses them.

---+ Repositories
OSG hosts four public-facing repositories at [[http://repo.grid.iu.edu/][repo.grid.iu.edu]]:
   * *development*: This repository is the bleeding edge.  Installing from this repository may cause the host to stop functioning, and we will not assist in undoing any damage.
   * *testing*: This repository contains software ready for testing.  If you install packages from here, they may be buggy, but we will provide limited assistance in providing a migration path to a fixed version.
   * *release*: This repository contains software that we are willing to support and can be used by the general community.
   * *contrib*: RPMs contributed from outside the OSG.  

OSG's RPM packages rely also on external packages provided by supported OSes and EPEL. Supported repositories include:
   * SL 5 and 6 repositories
   * !CentOS 5 and 6 repositories
   * Red Hat Enterprise Linux 5 and 6 repositories
   * EPEL 5 & 6

You must have enabled:
   * your OS repositories
   * EPEL
   * the OSG repositories you'd like to use

If one of these repositories is missing you may have missing dependencies.

%WARNING% We did not test other repositories. If you use packages from other repositories, like =jpackage=, you may encounter problems.

---+ Enabling repositories
In [[Documentation/Release3.InstallBestPractices][our advice on using yum]] you will learn many tricks and tips on using yum.

To use the packages in a repository without adding special options to the yum command the repository must be enabled.

%STARTSECTION{"OSGRepoBrief"}%
---%SHIFT%+ Install the Yum Repositories required by OSG
The OSG RPMs currently support %SUPPORTED_OS%.

OSG RPMs are distributed via the OSG yum repositories. Some packages depend on packages distributed via the [[http://fedoraproject.org/wiki/EPEL][EPEL]] repositories. So both repositories must be enabled.
   1. If not already present, install EPEL. *Note:* This enables EPEL by default. Choose the right version to match your OS version. <pre class="rootscreen">
%RED%# EPEL 5 (For RHEL 5, CentOS 5, and SL5) %ENDCOLOR%
%UCL_PROMPT_ROOT% rpm -Uvh http://dl.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm
%RED%# EPEL 6 (For RHEL 6, CentOS 6, and SL6) %ENDCOLOR% 
%UCL_PROMPT_ROOT% rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm</pre>
   1. Install the =yum-priorities= plugin <pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install yum-priorities</pre>
   1. Ensure that =/etc/yum.conf= has the following line in the =[main]= section (particularly when using ROCKS). This enables yum plugins<pre class="file">
plugins=1</pre>
   1. Install the OSG repositories: <pre class="rootscreen">
%RED%# EPEL 5 (For RHEL 5, CentOS 5, and SL5) %ENDCOLOR%
%UCL_PROMPT_ROOT% rpm -Uvh http://repo.grid.iu.edu/osg-el5-release-latest.rpm
%RED%# EPEL 6 (For RHEL 6, CentOS 6, and SL6) %ENDCOLOR%
%UCL_PROMPT_ROOT% rpm -Uvh http://repo.grid.iu.edu/osg-el6-release-latest.rpm</pre>
       *WARNING*: if you have your own mirror or configuration of the EPEL repository, you *MUST* verify that the OSG repository has a better yum priority than EPEL ([[Documentation.Release3.InstallBestPractices#YumPriorities][details]]). Otherwise, you will have strange dependency resolution (_depsolving_) issues.%BR%
       *NOTE*: If you don't have a required key you can force the installation using =--nogpgcheck=, e.g. =yum install --nogpgcheck yum-priorities=.%BR%

%IF{"$ TOPIC != 'YumRepositories'" then="For more details, please see our [[Documentation.Release3.YumRepositories][yum repository documentation]]." else=""}%

%ENDSECTION{"OSGRepoBrief"}%

---+ Priorities

%NOTE% Make sure you installed the yum-priorities plugin, as described above. Not doing is is a common mistakes that causes failed installations.

The only OSG repository enabled by default is the release one. If you want to enable another one, e.g. osg-testing, then edit its file (e.g. =/etc/yum.repos.d/osg-testing.repo=) and change the enabled option from 0 to 1: <pre class="file">
[osg-testing]
name=OSG Software for Enterprise Linux 5 - Testing - $basearch 
baseurl=http://vdt.cs.wisc.edu/repos/3.0/el5//testing/$basearch
failovermethod=priority
priority=98
enabled=%RED%1%ENDCOLOR%
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-OSG
</pre>

%WARNING% if you have your own mirror or configuration of the EPEL repository, you *MUST* verify that the OSG repository has a better yum priority than EPEL.  Otherwise, you will have strange dependency resolution issues.%BR%

---+ References
   * [[YumRpmBasics][Basic use of Yum]]
   * [[InstallBestPractices][Best practices in using Yum]]

---+ Comments
%COMMENT{type="tableappend"}%

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = AlainRoy

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = ComputeElement

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = MarcoMambelli
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


############################################################################################################
-->
-- Main.JamesWeichel - 29 Aug 2011

%META:TOPICMOVED{by="JamesWeichel" date="1314720209" from="Documentation.Rel3YumRepositories" to="Documentation/Release3.YumRepositories"}%
