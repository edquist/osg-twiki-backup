%META:TOPICINFO{author="DaveDykstra" date="1358896073" format="1.1" reprev="1.1" version="1.1"}%
%DOC_STATUS_TABLE%

---+!! Frontier-squid Installation Guide

%TOC{depth="3"}%

---# About This Document

%ICON{hand}% This document is intended for System Administrators that are installing the OSG version of frontier-squid.

%INCLUDE{"Documentation/DocumentationTeam/DocConventions" section="Header"}%
%INCLUDE{"Documentation/DocumentationTeam/DocConventions" section="CommandLine"}%

---# How to get Help?
To get assistance please use [[HelpProcedure][Help Procedure]].

---# Applicable Versions

The applicable software versions for this document are %RED%OSG Version >= 3.1.13 %ENDCOLOR%.  The version of frontier-squid installed should be %RED% >= 2.7.STABLE9-11.1.osg %ENDCOLOR%.

---# About frontier-squid

Frontier-squid is a distribution of the [[http://squid-cache.org][standard http proxy caching software]] that is optimized for use with applications on the Worldwide LHC Computing Grid (WLCG).  It's most important feature is that it correctly supports the http standard headers Last-Modified and If-Modified-Since better than other distributions of squid.  The [[http://frontier.cern.ch][Frontier distributed database caching system]], which is used by the LHC projects ATLAS and CMS, depends on proper working of this feature so that is the main reason why that project maintains its own squid distribution.  Older versions of squid2 (including the one distributed with Redhat EL5) and all versions of squid3 (including the one on Redhat EL6) do not correctly support this feature, as documented in the infamous [[http://bugs.squid-cache.org/show_bug.cgi?id=7][squid bug #7]].  Also, the frontier-squid package contains a couple of related patches that are not in any standard squid distribution.  Details are in the beginning paragraph of the [[https://twiki.cern.ch/twiki/bin/view/Frontier/MyOwnSquid][MyOwnSquid twiki page]].   Although the package expressly supports If-Modified-Since, it also works well with applications that do not require If-Modified-Since including CVMFS.

In addition, the package has several additional features:
   1. A configuration file generator, so configuration customizations can be preserved across package upgrades even when the complicated standard configuration file changes.
   1. The ability to easily run multiple squid processes listening on the same port, in order to support more networking throughput than can be handled by a single CPU core (squid2 is single-threaded).
   1. Automatic cleanup of the old cache files in the background when starting squid, to avoid problems with cache corruption.
   1. Default access control lists to permit remote performance monitoring from a shared monitoring server at CERN.

The OSG distribution of frontier-squid is a straight rebuild of the upstream frontier-squid package for the convenience of OSG users.

---# Engineering Considerations

If you will be supporting the Frontier application at your site, review the [[https://twiki.cern.ch/twiki/bin/view/Frontier/InstallSquid#Hardware][upstream documentation Hardware considerations section]] to determine how to size your equipment.

---# Requirements

---## Host and OS
   * OS is %SUPPORTED_OS%. 
   * Root access

---## Users
The frontier-squid installation will create one user account unless it is already created.

| *User* | *Comment* |
| =squid= | Reduced privilege user that the squid process runs under.  Set the default gid of the "squid" user to be a group that is also called "squid". |

The package can instead use another user name of your choice if you create a configuration file before installation.  Details are in the [[https://twiki.cern.ch/twiki/bin/view/Frontier/InstallSquid#Preparation][upstream documentation Preparation section]].

--## Networking

---# Install Instructions
%INCLUDE{"YumRepositories" section="OSGRepoBrief" TOC_SHIFT="+"}%

---## Install frontier-squid

After meeting the requirements in the previous section, install frontier-squid with this command: <pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install frontier-squid </pre>

---# Configuring frontier-squid

---# Starting and stopping services

---# Testing the installation of frontier-squid


---# Frontier-squid log files


%BR%

---# *Comments*
%COMMENT{type="tableappend"}%


<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = DaveDykstra

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|General|Integration|Monitoring|Operations|Security|Storage|Tier3|User|VO)
   * Local DOC_AREA       = General

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (Developer|Documenter|Scientist|Student|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (HowTo|Installation|Knowledge|Navigation|Planning|Training|Troubleshooting)
   * Local DOC_TYPE       = Installation
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = 
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = 
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
############################################################################################################
-->

-- Main.DaveDykstra - 22 Jan 2013
