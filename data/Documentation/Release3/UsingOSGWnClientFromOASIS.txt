%META:TOPICINFO{author="MatyasSelmeci" date="1435180245" format="1.1" version="1.3"}%
---+!! Worker Node Client Install using OASIS
%TOC%


---# Introduction
This document is intended to guide system administrators through the process of installing the worker node software and configuring the installed worker node software.

If you are installing the OSG WN Client following these instruction, then remember to set correctly OSG_GRID (see [[EnvironmentVariables]] and the [[IniConfigurationOptions#Storage][CE configuration instructions]]). The value set for OSG_GRID must be the path returned by ==echo $OSG_LOCATION== once you source the setup file created by this installation.

---# About This Document

%ICON{hand}% This document is intended for system administrators that are installing the worker node software on compute nodes. It covers the installation of the OSG Client Tools Package through OASIS. If you are already mounting [[InstallCvmfs][CVMFS]] on your Worker Nodes, you can leverage OASIS to avoid installing the OSG WN Client through RPM or tarball.

---# Requirements
Requirements for the OSG worker node installation:

---## Host and OS
   * OS is %SUPPORTED_OS%.

---# Install the WN Client

   1. Follow the instructions [[NavTechOASIS][here]] to install OASIS.
   1. Source the setup file (==setup.sh== or ==setup.csh== depending on your shell). For EL5 platforms, run the following command: \
   <pre class='screen'>source /cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/3.2/current/el5-x86_64/setup.sh</pre> \
   For EL6 platforms, run the following command
   <pre class='screen'>source /cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/3.2/current/el6-x86_64/setup.sh</pre>

---# Possible Pitfalls

Some possible issues that may come up:

   1. A missing softlink to the CA certs directory. To check this, run: \
   <pre class='screen'>ls -l /cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.2/current/el5-x86_64/etc/grid-security/</pre> \
   and check that 'certificates' is linked to somewhere. The fix is to yum update the oasis-config package to version 4. A known workaround is to run: \
   <pre class='screen'>export X509_CERT_DIR=/cvmfs/oasis.opensciencegrid.org/mis/certificates</pre>\
   before any commands.
   1. !OpenJDK 7 must be installed from RPMs before using software that needs java (e.g. srm-ls) from OASIS.  There are some instructions [[Documentation.Release3.InstallSoftwareWithOpenJDK7][here]]. If you are running under an EL5 distribution, java programs may produce an error like this:\
   <pre class='screen'>Exception in thread "main" java.lang.NoClassDefFoundError: org/globus/gsi/OpenSSLKey</pre>
   This shouldn't happen under EL6 distributions. The (unofficial) workaround is to run the following as root:\
   <pre class='screen'>mkdir /usr/share/java-1.7.0</pre>\
   <pre class='screen'>mkdir /usr/lib/java-1.7.0</pre>\
   This problem is also mentioned [[SoftwareTeam.Java6MigrationDetails][here]].

---# How to get Help?
To get assistance please use this [[HelpProcedure][Help Procedure]].


---# References
   * InstallWNClient explains how to install the RPM based WN Client
   * InstallWNClientTarball explains how to install the tarball based WN Client

#WnContents
---## Contents of the worker node

The worker node may be updated from time to time. As of OSG 3.1.8 in September 2012, the OSG worker node client contains:

   * Bestman2 Client
   * CA certificates
   * curl
   * dcache-srmclient
   * dcap-tunnel-gsi
   * dccp
   * edg-gridftp-client
   * Fetch CRL
   * FTS client
   * globus-url-copy(!GridFTP client)
   * lcg-utils
   * ldapsearch
   * LFC (client and Python bindings)
   * !MyProxy
   * osg-system-profiler
   * osg-version
   * !UberFTP
   * vo-client (includes /etc/vomses file)
   * wget

