%META:TOPICINFO{author="JoseCaballero" date="1415477307" format="1.1" reprev="1.1" version="1.1"}%
*WORK IN PROGRESS*



---+!! %SPACEOUT{ "Update content on OASIS 2 for USATLAS T3" }%
%TOC{depth="3"}%


---# About this Document

This document describes the procedure to update content on OASIS for the USATLAS T3 Facilities. 

---# Requirements

Managers who want to distribute content for the US ATLAS T3 Facilities will need an X.509 credentials with VOMS attributes:

<pre class="file">
/atlas/usatlas/Role=software
</pre>

---# Execution

To update content on OASIS 2 for the US ATLAS T3 facilities, 
the managers prepare an installation job and submit that job with condor-g to gatekeeper =grid42.racf.bnl.gov=
A typical condor submit would be similar to this

<pre class="file">
universe = grid
grid_resource = condor grid42.racf.bnl.gov grid42.racf.bnl.gov:9619
 
executable = install.sh
arguments = 
transfer_executable = True


output = $(Cluster).$(Process).out
error = $(Cluster).$(Process).err
log = $(Cluster).$(Process).log

x509userproxy = /tmp/x509up_u12345

notify_user = neo@matrix.net
stream_output = False

queue 1
</pre>

The managers only need to be sure that the installation job copies all new content under directory 

<pre class="file">
$OSG_APP/usatlast3/
</pre>

The installation job could just download a tarball containing the new content already built, unpack it, and copy the files to =$OSG_APP/usatlast3=
This way allows for faster publishing process, the managers can ensure the new software has been properly compiled and built before trying to distribute it, and no problems with non-relocatable software.

---# Results

If everything goes fine, new content will be available at the WNs under directory

<pre class="file">
/cvmfs/usatlast3.opensciencegrid.org/
</pre>



-- Main.JoseCaballero - 08 Nov 2014
