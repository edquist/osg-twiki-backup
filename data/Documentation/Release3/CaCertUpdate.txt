%META:TOPICINFO{author="MarcoMambelli" date="1349822787" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="Release3110"}%
---+ Update of the CA Certificates

[[Release3110][OSG release 3.1.10]], released on 10/9/2012, contains updates to the IGTF CA certifcates including replacements for expiring certificates.

This is  important because if you do not update the CA certificates:
   * Users with certificates form the CA with expiring certificates will not be able to use your resources. This will affect few members of the WLCG collaboration.
   * The RSV probes will give a warning and then an error (after 2 or 8 days, see below)
   * Your WLCG availability measure will start to decline once RSV reports the error
   * CA certificates are the base of OSG trust system

---++ Does this apply to my resource?

Ask this question for each resource with a separate installation of the CA certificates (CE, SE, WN, ... unless they get the certificates by mounting a shared directory).
 
This applies only to OSG 3 (RPM version). If you have OSG 1.2 (Pacman version) or are mounting certificates from a shared directory managed by a OSG 1.2 installation, then you are OK and can stop reading.

If you installed =osg-ca-manage= and enabled the automatic update, then you don't need this manual update. It will not hurt or modify your configuration if you do it, but you will get the new CA certificates automatically without any action. You can stop hese. If you are not sure or this is not clear, please continue and do the update.


---++ How important is the update for me?

   1. If you are member of WLCG and the CA certificates are on the CE used to measure your availability, then RSV will start reporting a warning and after 2 days from the release (8 if you have OSG 3.1.8 or later), the warning will become an error and your availability measure will start to go down. 
   1. If you are member of WLCG or other collaborations with Europe, then you may have users with a certificate signed form a UK CA that is expiring at the end of October (anyway this is a small percentage of the users form the UK).

If 1, 2, or both are true, then the upgrade is important and urgent (specially for 1), otherwise it is still recommended but not as important.

---+++ Example 
I have the following resources in my site:
   1. A CE with OSG 1.2.30
   2. A cluster with OSG 3 Worker Nodes that mount the CA certificates via NFS form the CE (1)
   3. A new cluster registered with WLCG, with OSG 3.1.9 on one CE and its worker nodes
   4. A second CE registered with WLCG, with OSG 3.1.7 
   5. I have also a CE with OSG 3.1.9 used by my local OSG collaborators here in Chicago

It is very important to update (3) and (4) because I want to be all green for WLCG. And it is urgent, because my CE (4) will be "red" on Thursday 10/11, starting to lower my availability in the WLCG reports.
I decide to update also (5) but it is not so important, so I'll wait for next week when it is more convenient for me. I don't have to worry about (1) and (2).
 

---++ How do I perform the update
You have 2 options:
   1. Update all your installation:<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum update</pre>
   1. Update only the CA certificates. The commands below will update a package only if you have it installed, so run all the following lines:<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum update igtf-ca-certs
%UCL_PROMPT_ROOT% yum update igtf-ca-certs-compat
%UCL_PROMPT_ROOT% yum update osg-ca-certs
%UCL_PROMPT_ROOT% yum update osg-ca-certs-compat
</pre>


---++ How to check if I have the updated CA certificate
After the update, or before if you think you may have already the updated CA certificates, you can check your version by:
   * checking the version in the index file
   * checking the RSV monitor
   * compare the RPM version

---+++ Check the index file

Check the version numbers in =/etc/grid-security/certificates/INDEX.txt=.
They should be 1.50 or OSG-1.31.


---+++ Check the RSV monitor

If the RSV metric monitoring the CA certificates is green, then you have the latest version (at least in that resource monitored by RSV).


---+++ Check the RPMs

Compare the versions on your system with the ones below. *Note:* youwill have only some of the packages below, that's OK, just compare the version of the packages that you have installed:

---++++ Enterprise Linux 5

<pre class="file">
igtf-ca-certs-1.50-2.osg.el5
igtf-ca-certs-compat-1.50-2.osg.el5
osg-ca-certs-1.31-2.osg.el5
osg-ca-certs-compat-1.31-2.osg.el5
</pre>

---++++ Enterprise Linux 6

<pre class="file">
igtf-ca-certs-1.50-2.osg.el6
igtf-ca-certs-compat-1.50-2.osg.el6
osg-ca-certs-1.31-2.osg.el6
osg-ca-certs-compat-1.31-2.osg.el6
</pre>


---++ Need help?

Do you need help with this update? [[HelpProcedure][Contact us for help]].







-- Main.MarcoMambelli - 09 Oct 2012
