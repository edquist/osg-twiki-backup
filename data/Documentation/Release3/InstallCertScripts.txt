%META:TOPICINFO{author="AnandPadmanabhan" date="1318360165" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="InstallVoms"}%
---+ *Certificate Scripts package*
%DOC_STATUS_TABLE%
%TOC%

---++ About This Document
This the home page for documenting the cert-scripts package that provides a command-line interface to the DOEGrids CA website and some additional utilities for dealing with X509 certificates.  This package was developed originally by the PPDG project and is now maintained by the OSG RA.

As an alternative to the web browser interface, these scripts are contributed to the DOEGrids PKI to allow a command-line interface to the certificate authority for submitting certificate requests, retrieving signed certificates, renewing certificates, directory lookup of existing certificates, and checking the remaining lifetime of certificates and certificate revocation lists. They work directly with the PEM format files used by Globus. These are perl scripts and bash shell scripts (some awk), depend upon openssl, ldapsearch and the perl LWP:: module with [[http://search.cpan.org/src/GAAS/libwww-perl-5.803/README.SSL][SSL support]]. Click on the File link below for the usage description of the script, or to download the tar file package containing the scripts. 

---++ Installation Procedure 

---+++ First: Set up the yum repositories

%INCLUDE{"YumRepositories" section="OSGRepoBrief" TOC_SHIFT="+++"}%

%STARTSECTION{"OSGBriefInstallCertScripts"}%
---+++ Install the certificate scripts package 
The Cert Scripts package can be installed with the following command:
<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install osg-cert-scripts</pre>

%ENDSECTION{"OSGBriefInstallCertScripts"}%

---++ Usage of certificate scripts package 
   * [[Documentation.GetHostServiceCertificates][Get host and service certificates using command line]]
   * [[Documentation.CertificateGetCmd][Get personal certificates using command line]]

---++ Man Pages

For additional information on the functionality of a script execute it with the -help option. 

| *File* | *Description*  |
| [[Security.CSReadMe][README]]  | describes the package, includes release notes  |
| [[Security.CSReadMe#cert_check_time][cert-check-time]]  | checks lifetime of certificates and revocation lists  |
| [[Security.CSReadMe#cert_gridadmin][cert-gridadmin]]  | immediate issuance of service certificates for authorized requestors  |
| [[Security.CSReadMe#cert_lookup][cert-lookup]]  | queries directory based on DN of certificates  |
| [[Security.CSReadMe#cert_request][cert-request]]  | generates and submits a certificate signing request  |
| [[Security.CSReadMe#cert_retrieve][cert-retrieve]]  | retrieves signed certificate previously requested  |
| [[Security.CSReadMe#cert_renew][cert-renew]]  | renews existing person certificate (not host or service)  |
| [[Security.CSReadMe#multi_cert_gridadmin][multi-cert-gridadmin]] | immediate issuance of multiple service certificates for authorized administrators (new with V2-3) |
| [[Security.CSReadMe#InstallationNotes_txt][InstallationNotes.txt]] | extra installation requirements for multi-cert-gridadmin (new with V2-3) |

---++ FAQ
---+++ !!Request a certificate for myself
<pre class="screen">
%UCL_PROMPT% cert-request -ou p
</pre>

---+++ !!Request a certificate for my computer
<pre class="screen">
%UCL_PROMPT% cert-request -ou s
</pre>

---+++ !!Request a certificate for the http service on my computer (if necessary)
<pre class="screen">
%UCL_PROMPT% cert-request -ou s -service http -host <i>my-computer.some.domain</i> -label <i>http-my-computer</i>
</pre>

---+++ !!How do I retrieve a certificate
   1. Check the email notice you got when the certificate was granted for the serial number (<i>0xNNNN</i>)
<pre class="screen">
%UCL_PROMPT% cert-retrieve -serial <i>0xNNNN</i> [-label <i>label-matching-cert-request</i>]
</pre>

Use the =-p12= option to create the PKCS12 format file useful for importing your certificate into a web browser or email program.

---+++ !!How do I get lots of service certificates
   1. Ask your RA to grant you the [[http://www.doegrids.org/Library/gridAdmin/gridAdminUser.html][gridadmin]] privilege.
   2. Use =cert-gridadmin= and you can get service certificates issued immediately  without using the web interface. (Since VDT 1.3.10, cert-scripts V1-7)

---+++ !!My certificate is about to expire, how do I get another with the same DN
   1. Use =cert-renew=

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = AnandPadmanabhan MarcoMambelli

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = VO

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local TEST_READY   = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = 
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %IN_PROGRESS%


DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = 
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%

############################################################################################################
-->
