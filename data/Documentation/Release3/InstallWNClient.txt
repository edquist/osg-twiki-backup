%META:TOPICINFO{author="TimCartwright" date="1436541131" format="1.1" version="1.37"}%
%META:TOPICPARENT{name="InstallBestPractices"}%
---+ Installing and Using the Worker Node Client From RPMs
%TOC{depth="3"}%

---++ About This Guide

The *OSG Worker Node Client* is a collection of software components that is expected to be added to every worker node that can run OSG jobs. It provides a common environment and a minimal set of common tools that all OSG jobs can expect to use. See the [[#ReferenceSection][reference section]] below for contents of the Worker Node Client.

It is possible to install the Worker Node Client software in a variety of ways, depending on what works best for distributing and managing software at your site:

   * Install using RPMs and Yum (this guide) - useful when managing your worker nodes with a tool (e.g., Puppet, Chef) that can automate RPM installs
   * [[InstallWNClientTarball][Install using a tarball]] - useful when installing onto a shared filesystem for distribution to worker nodes
   * [[UsingOSGWnClientFromOASIS][Use from OASIS]] - useful when worker nodes already mount [[NavTechOASIS][OASIS]] on your worker nodes

This document is intended to guide system administrators through the process of configuring a site to make the Worker Node Client software available from an RPM.

---++ Before Starting

As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:

   * Ensure the host has [[SupportedOperatingSystems][a supported operating system]]
   * Obtain root access to the host
   * Prepare [[YumRepositories][the required Yum repositories]]
   * Install [[InstallCertAuth][CA certificates]]

---++ Install the Worker Node Client

Install the Worker Node Client RPM:

<pre class="rootscreen">%UCL_PROMPT_ROOT% yum install osg-wn-client</pre>

---+++ Adding support for ATLAS jobs

If you are an ATLAS site or allow opportunistic ATLAS jobs to run at your site, you need to install the =lfc-python= RPM(s).

   1. If the worker node is on EL&nbsp;6, run the following command:\
       <pre class="rootscreen">%UCL_PROMPT_ROOT% yum install lfc-python lfc-python.i386</pre>
   1. If the worker node is on EL&nbsp;5, run the following command:\
       <pre class="rootscreen">%UCL_PROMPT_ROOT% yum install lfc-python26 lfc-python.i386 lfc-python26.i386</pre>

---++ Services

Fetch-CRL is the only service required to support the WN Client.

%TABLE{sort="off"}%
| *Software* | *Service name* | *Notes* |
| Fetch CRL | On EL 6: =fetch-crl-boot= and =fetch-crl-cron= %BR% On EL 5: =fetch-crl3-boot= and =fetch-crl3-cron= | See [[InstallCertAuth#Start_Stop_fetch_crl_A_quick_gui][CA documentation]] for more info |

Start the services in the order listed and stop them in reverse order. As a reminder, here are common service commands (all run as =root=):

%TABLE{sort="off"}%
| *To &hellip;* | *Run the command &hellip;* |
| Start a service | =service <em>SERVICE-NAME</em> start= |
| Stop a service | =service <em>SERVICE-NAME</em> stop= |
| Enable a service to start during boot | =chkconfig <em>SERVICE-NAME</em> on= |
| Disable a service from starting during boot | =chkconfig <em>SERVICE-NAME</em> off= |

---++ Validing the Worker Node Client

To verify functionality of the worker node client, you will need to submit a test job against your CE and verify the job's output.

   1. Submit a job that executes the =env= command (e.g. Run [[TroubleshootingHTCondorCE#condor_ce_trace][condor_ce_trace]] with the =-d= flag from your HTCondor CE)
   1. Verify that the value of =OSG_GRID= is set to =/etc/osg/wn-client=

---++ How to get Help?

To get assistance please use this [[HelpProcedure][Help Procedure]].

#ReferenceSection
---++ Reference

Please see the documentation on using [[Documentation/Release3.YumRpmBasics][yum and RPM]], [[Documentation/Release3.InstallBestPractices][the best practices]] for using yum to install software, and using [[Documentation/Release3.YumRepositories][yum repositories]].

#WnContents
---+++ Worker node contents

The worker node may be updated from time to time. As of OSG 3.1.8 in September 2012, the OSG worker node client contains:

   * Bestman2 Client
   * curl
   * !dCache SRM client
   * dcap-tunnel-gsi
   * dccp
   * edg-gridftp-client
   * Fetch CRL
   * FTS client
   * globus-url-copy (!GridFTP client)
   * lcg-utils
   * ldapsearch
   * LFC (client and Python bindings)
   * !MyProxy
   * osg-system-profiler
   * osg-version
   * !UberFTP
   * vo-client (includes /etc/vomses file)
   * wget

To see the currently installed version of the worker node package, run the following command:

<pre class="screen">
%UCL_PROMPT% rpm -q --requires osg-wn-client
</pre>

Click [[YumRpmBasics#ListDeps][here]] for more details on using RPM to see what was installed

%META:TOPICMOVED{by="JamesWeichel" date="1317238795" from="Documentation/Release3.InstallWorkerNode" to="Documentation/Release3.InstallWNClient"}%
