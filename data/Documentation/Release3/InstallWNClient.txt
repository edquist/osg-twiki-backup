%META:TOPICINFO{author="BrianLin" date="1436210243" format="1.1" version="1.34"}%
%META:TOPICPARENT{name="InstallBestPractices"}%
---+ Worker Node Client RPM Install
%TOC{depth="3"}%

---++ About This Guide

The _OSG Worker Node Client_ is a collection of software components that is expected to be added to every worker node that can run OSG jobs. It provides a common environment and a minimal set of common tools that all OSG jobs can expect to use. Contents of the Worker Node Client can be found [[InstallWNClient#4_Contents_of_the_worker_node][here]].

It is possible to install the Worker Node Client software in a variety of ways, depending on what works best for distributing and managing software at your site:

   * [[InstallWNClientTarball][Install using a tarball]] - useful when installing onto a shared filesystem for distribution to worker nodes
   * [[UsingOSGWnClientFromOASIS][Use from OASIS]] - useful when worker nodes already mount [[NavTechOASIS][OASIS]] on your worker nodes
   * Install using RPMs and Yum (this guide) - useful when managing your worker nodes with a tool (e.g., Puppet, Chef) that can automate RPM installs

This document is intended to guide system administrators through the process of configuring a site to make the Worker Node Client software available from an RPM.

---++ Before Starting

As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:

   * Ensure the host has [[SupportedOperatingSystems][a supported operating system]]
   * Obtain root access to the host
   * Prepare [[YumRepositories][the required Yum repositories]]
   * Install [[InstallCertAuth][CA certificates]]

---++ Install the Worker Node Client

Install the WN-Client RPM: <pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install osg-wn-client </pre>

---+++ Running ATLAS jobs
%WARNING% If you may run ATLAS jobs, i.e. if you are an ATLAS site or allow opportunistic usage by ATLAS, you have to install a couple of additional packages. These are some additional LFC-python bindings necessary to run ATLAS jobs. They were included in the Pacman release of the worker node client and have been removed in the migration to the RPM one.

To run ATLAS jobs, install the LFC-python RPMs:
%NOTE% Depending on your yum configuration the first 2 commands (installing lfc-python26 and lfc-python.i386) may be sufficient. Only if you have =multilib_policy=best= (instead of the default =multilib_policy=all= , current default) in =/etc/yum.conf=, then yum will install only the x86_64 package on an x86_64 system, so you'll need to install explicitly also =lfc-python26.i386=.
<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install lfc-python26
%UCL_PROMPT_ROOT% yum install lfc-python.i386
%UCL_PROMPT_ROOT% yum install lfc-python26.i386
</pre>

---++ Services
The only service is fetch-crl that keeps uptodate the CRLs.

---+++ Starting and Enabling Services
To start the services:
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlStart"}%

You should also enable the appropriate services so that they are automatically started when your system is powered on: 
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlEnable"}%

---+++ Stopping and Disabling Services
To stop the services:
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlStop"}%

In addition, you can disable services by running the following commands.  However, you don't need to do this normally.
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlDisable"}%

---++ How to get Help?
To get assistance please use this [[HelpProcedure][Help Procedure]].


---++ Reference
Please see the documentation on using [[Documentation/Release3.YumRpmBasics][yum and RPM]], [[Documentation/Release3.InstallBestPractices][the best practices]] for using yum to install software, and using [[Documentation/Release3.YumRepositories][yum repositories]].

#WnContents
---+++ Worker node contents

The worker node may be updated from time to time. As of OSG 3.1.8 in September 2012, the OSG worker node client contains:

   * Bestman2 Client
   * curl
   * !dCache SRM client
   * dcap-tunnel-gsi
   * dccp
   * edg-gridftp-client
   * Fetch CRL
   * FTS client
   * globus-url-copy (!GridFTP client)
   * lcg-utils
   * ldapsearch
   * LFC (client and Python bindings)
   * !MyProxy
   * osg-system-profiler
   * osg-version
   * !UberFTP
   * vo-client (includes /etc/vomses file)
   * wget

To see the currently installed version of the worker node package, run the following command:

<pre class="screen">
%UCL_PROMPT% rpm -q --requires osg-wn-client
</pre>

Click [[YumRpmBasics#ListDeps][here]] for more details on using RPM to see what was installed

%META:TOPICMOVED{by="JamesWeichel" date="1317238795" from="Documentation/Release3.InstallWorkerNode" to="Documentation/Release3.InstallWNClient"}%
