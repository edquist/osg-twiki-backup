%META:TOPICINFO{author="AlainRoy" date="1332167342" format="1.1" version="1.27"}%
%META:TOPICPARENT{name="InstallBestPractices"}%
---+!! Worker Node Client RPM Install
%DOC_STATUS_TABLE%
%TOC%

---+ Introduction
This document is intended to guide system administrators through the process of installing the worker node software and configuring the installed worker node software.

---+ About This Document

%ICON{hand}% This document is intended for system administrators that are installing the worker node software on compute nodes.  It covers installation and configuration of the worker node software using the RPMs distributed by OSG.

---+ Requirements
Requirements for the OSG worker node installation:

---++ Host and OS
   * OS is %SUPPORTED_OS%.
   * Root access

---+ Install Instructions
%INCLUDE{"YumRepositories" section="OSGRepoBrief" TOC_SHIFT="+"}%

Some of the worker node client software verifies proxies or certificates.  In order to do this, they will need the CA certificates used to sign the proxies.  
%INCLUDE{"InstallCertAuth" section="OSGBriefCaCerts" TOC_SHIFT="+"}%

---++ Install the Worker Node Client

Install the WN-Client RPM: <pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install osg-wn-client </pre>

---+ Running ATLAS jobs
%WARNING% If you may run ATLAS jobs, i.e. if you are an ATLAS site or allow opportunistic usage by ATLAS, you have to install a couple of additional packages. These are some additional LFC-python bindings necessary to run ATLAS jobs. They were included in the Pacman release of the worker node client and have been removed in the migration to the RPM one.

To run ATLAS jobs, install the LFC-python RPMs:
%NOTE% Depending on your yum configuration the first 2 commands (installing lfc-python26 and lfc-python.i386) may be sufficient. Only if you have =multilib_policy=best= (instead of the default =multilib_policy=all= , current default) in =/etc/yum.conf=, then yum will install only the x86_64 package on an x86_64 system, so you'll need to install explicitly also =lfc-python26.i386=.
<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install lfc-python26
%UCL_PROMPT_ROOT% yum install lfc-python.i386
%UCL_PROMPT_ROOT% yum install lfc-python26.i386
</pre>

---+ Services
The only service is fetch-crl that keeps uptodate the CRLs.

---++ Starting and Enabling Services
To start the services:
   1. %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlStart"}%

You should also enable the appropriate services so that they are automatically started when your system is powered on: 
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlEnable"}%

---++ Stopping and Disabling Services
To stop the services:
   1. %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlStop"}%

In addition, you can disable services by running the following commands.  However, you don't need to do this normally.
   * %INCLUDE{"InstallCertAuth" section="OSGBriefFetchCrlDisable"}%


---+ Configuring the CE for wn-client RPMs
Using the wn-client software installed from RPMs will require a few changes on the compute element so that the resource's configuration can be correctly reported.  The =$OSG_GRID= variable, which points to the location of the wn-client installation directory, will need to change.  Most jobs source =$OSG_GRID/setup.sh= before performing any work.  For backwards capability, we have created =/etc/osg/wn-client/setup.sh= to mimic this functionality.  Setting =$OSG_GRID= (in the CE config.ini) to =/etc/osg/wn-client= should provide backward capability.

On an mixed RPM/pacman based system, a possible solution would be to symlink the existing =$OSG_GRID= location to =/etc/osg/wn-client=.

---+ Using the RPM-based worker nodes with a Pacman-based CE

[[Documentation.Release3.KnownProblems#SetWNPath][See our notes in the "Known Problems"]] if you are using a Pacman-based CE with your RPM-based worker nodes.


---+ How to get Help?
To get assistance please use this [[HelpProcedure][Help Procedure]].


---+ References
Please see the documentation on using [[Documentation/Release3.YumRpmBasics][yum and RPM]], [[Documentation/Release3.InstallBestPractices][the best practices]] for using yum to install software, and using [[Documentation/Release3.YumRepositories][yum repositories]].

---+ Comments
%COMMENT{type="tableappend"}%

<!-- REVIEW PROCESS

   * Local DOC_ROLE		  = SysAdmin
   
   * Local DOC_TYPE		  = Installation
   
   * Local DOC_AREA               = ComputeElement

   * Local OWNER                  = SuchandraThapa
   * Local INCLUDE_REVIEW = %YES%
   * Local INCLUDE_TEST   = %YES%
   * Local REVIEW_READY   = %YES%
   * Local TEST_READY     = %YES%
   * Local RELEASE_READY  = %YES%

   * Local REVIEWER       = MarcoMambelli
   * Local REVIEW_PASSED  = %YES%
 
   * Local TESTER         = AlainRoy
   * Local TEST_PASSED  = %YES%

-->


%META:TOPICMOVED{by="JamesWeichel" date="1317238795" from="Documentation/Release3.InstallWorkerNode" to="Documentation/Release3.InstallWNClient"}%
