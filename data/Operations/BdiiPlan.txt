%META:TOPICINFO{author="RobQ" date="1218118368" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
---+ BDII Plan

The OSG BDII has been determined to be a critical service provided by the GOC. In preparation for the LHC turn on and the increased load expected from the ATLAS and CMS VOs, the GOC plans on taking the following action plan.

---++ Current Issues with the OSG BDII

The current version of the BDII is experiencing two known issues. These are a priority to correct for service stability. First, the file system on the machine running the BDII service seems to occasionally (we haven't found the cause) go read only. This does not cause an outage, but prevents new data from being sent to the BDII from the resource CEMon's, resulting in stale GLUE data. We initially believed this was due to a drive going bad, but when the service was moved to a new machine it happened again. Our current guess is a firmware issue, we are working on firmware updates in the near future. Regardless of these firmware updates we need to move to a new version of BDII which includes several bug fixes which may be causing problems. The second issue, is several small ~1-2 minute outages reported by the USCMS support center. When talking to the BDII experts at CERN they point at two recent upgrades that fix this issue...

   * Version 3.8.6: 
      * Wait up to 1 minute for a new slapd to become responsive. 
   * Version 3.8.7: 
      * Try to prevent the slapd ports from getting taken by other processes. 

The GOC is planning on setting up a new BDII service from scratch with new versions. See Time Line section below

---++ Stability and Stress Testing

Once the new service is ready for testing, we will use stakeholder knowledge to test the new BDII for possible issue. We have been assured that CERN has done load testing during CCRC08, and don't expect any issue. We will have a slightly different configuration with the OSG CEMon reporting structure, so we will do a full set of tests to assure we will be able to handle the load when the time comes.

---++ Failover and Load Balancing

Longer term, but of no less importance is having a solid failover plan in case of a BDII failure. The IU facilities will be used to create a second BDII service. It has not been determined if this will be used only in emergencies when the main BDII fails, or as a way to balance load. This depends on the results of the stress testing done.

---++ Time Line

| *Date* | *Description* | *GOC Notes* |
| Aug 28th 2008  | Install dev collector for CMS/ATLAS testing | Including load testing as applicable; We don't think the load on the collector and/or the web service (LDAP) will be an issue, neither does Burt. But it's definitely worth testing out. |

| Sep 11th 2008 | Install production collector, and have friendly testing | including stress testing if applicable (again) (friendly = Tony Tiradani, Terrence Martin, who from ATLAS?)  |

| Sep 18th 2008 (worst case 25th) | Release production BDII collector | This would be the replacement for the current BDII available at is.grid.iu.edu |

| Oct 2nd 2008 | try to have test failover node... | This will not be a simple hot-swap 'switch the DNS' collector if production collector fails; instead it'd be some sort of load balancing round-robinning sort of collector. I understand this is a lofty goal but we'll try. It'll depend on at least two factors: a) implementation of above critical goals b) how hard/easy BDII is toward allowing seamless failover and/or RR'ing of collectors -- Rob thinks it should allow both since it already has capability to handle CEMon and ReSS collectors. |

-- Main.RobQ - 07 Aug 2008
