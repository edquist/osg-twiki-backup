%META:TOPICINFO{author="KyleGross" date="1225985960" format="1.1" version="1.7"}%
%META:TOPICPARENT{name="WebHome"}%
%TOC%

---+ Purpose

With the upcoming LHC turn on and the increased load expected by CMS and ATLAS the GOC is reviewing our trouble ticket exchange mechanisms. This document is intended to describe the exchange processes with each of the important LHC stakeholders and log any problems. The final deliverable will be recomendations to update and improve the exchanges under the following timeline.

| Date | Deliverable |
| Sept 1 | Report and Conclusions available for stakeholder input. |
| Sept 8 | Sign off by stakeholders and OSG Facility to proceed. |
| Sept 29 | Updates to exchange mechanism ready for testing. |
| Oct 6 | All Updates in place for LHC turn up. |

---+ Report of Current Trouble Ticket Exchange

---++ GOC/GGUS Ticket Exchange

The GOC currently maintains the scripts for tickets incoming/outgoing. GGUS emails are sent in XML format and the GOC's parser strips those details from the email. Then it queries the GOC's ticketing system database to see if a new ticket should be opened, or if the update to should be appended to an existing one. The incoming parser script runs every five minutes. Tickets from GGUS to the GOC are opened without human intervention.

However, in order for the GOC to open/update a ticket with the GGUS system the GOC must create the ticket then login to the ticketing system's database server to run a perl script which will query data from the database for a specific ticket and format it into an email to be addressed to GGUS. This process has potential faults since it does require the GOC to take manual steps in order to send every update to GGUS. With other ticket exchanges this process requires no special action. Another problem with this is that is only sends the most recent update, not every update that hasn't yet made it to GGUS. This leads to GGUS missing updates unless the GOC staff recognizes that additional updates, other than just the most recent one, should be sent to GGUS.

The GOC will propose that GGUS take ownership of parsing the incoming emails from Footprints. Benefits include:

   * GGUS will receive <span style="font-weight: bold" class="Apple-style-span">every</span> update from the GOC. No longer will the GOC staff be required to update the ticket and manually run a script on a remote server in addition to updating the ticket. Any incoming email submissions to the GOC ticket would automatically be pushed out via an email update to GGUS; updates won't be missed. 
   * GGUS can write their parser script to more accurately populate their ticket fields, like Status, for example. 
   * As GGUS schema changes occur, they are in a better position to maintain the script/parser. 

---++ GOC/ATLAS Ticket Exchange

ATLAS uses the RT ticketing system. Since RT and the GOC's Footprints ticket systems automatically send acknowledgments to all incoming email, RT has employed a perl script (designed by VDT) that prevents ticket looping. Simply updating the sending ticket will send mail to the receiving ticket, updating it. The GOC is not required to deviate from normal ticket processing procedures when working ATLAS tickets. Problems are often due to delays in the manual assignments of tickets once they are received by RT at ATLAS.
---++ GOC/CMS Ticket Exchange

CMS is hosted at Fermilab and they use Remedy as their ticketing system. They have developed a script to parse incoming emails from the GOC. The script also prevents mail loops. The GOC has made modifications to the outgoing emails in order to help CMS parsing, providing them with ticket numbers (ours and theirs) in the email. Providing these ticket numbers allows them to determine whether to open a new ticket, or update an existing one.

While this system works, there can be problems. For example, some fields are occasionally not set accurately in the GOC's Footprint system by GOC staff.&dagger; While the process for setting these fields correctly is documented (see attachment), it is still prone to human error. The GOC will address this as a training issue and see if there are automated options or validation checks that can be utilized within Footprints to increase accuracy.

&dagger;The script on the receiving VirtualOrganizations/VOInfo end will parse the incoming email and update the ticket in Remedy only if specific fields (Assignee = USCMS or Fermilab & Destination VirtualOrganizations/VOInfo Support Center = USCMS, Fermilab (or sub-VO)) match specific criteria.

---+ Log of Problems Reported

<table width="100%" align="center" cellspacing="1" cellpadding="1" height="86" border="1"><tbody><tr><td>originating ticketing system</td><td>original ticket #</td><td> destination ticket system</td><td>destination ticket #</td><td>direction of exchange while encountering problem </td><td> date of occurence</td><td> details of incident</td></tr><tr><td> ggus </td><td>37059</td><td> GOC footprints</td><td>5059</td><td>GGUS to GOC FP</td> <td> 06/23/2008, 07/09/2008, 7/24/08</td><td> original entry on GGUS tickets are relayed to FP rather than the most recent updates, which had to be manually retrieved from the GGUS ticket system</td></tr></tbody></table>

-- Main.RobQ - 21 Jul 2008

   * [[%ATTACHURL%/Remedy_Footprints_Ticket_Exchange.pdf][Remedy_Footprints_Ticket_Exchange.pdf]]: How the GOC to Fermilab/USCMS trouble ticket exchange works. 

   * [[%ATTACHURL%/VO_tt_exchange.html][VO_tt_exchange.html]]: VirtualOrganizations/VOInfo's exchanging tickets with the GOC.

%META:FILEATTACHMENT{name="Remedy_Footprints_Ticket_Exchange.pdf" attachment="Remedy_Footprints_Ticket_Exchange.pdf" attr="" comment="How the GOC to Fermilab/USCMS trouble ticket exchange works." date="1218733365" path="Remedy_Footprints_Ticket_Exchange.pdf" size="48486" stream="Remedy_Footprints_Ticket_Exchange.pdf" tmpFilename="/usr/tmp/CGItemp14195" user="TimSilvers" version="1"}%
%META:FILEATTACHMENT{name="VO_tt_exchange.html" attachment="VO_tt_exchange.html" attr="" comment="VO's exchanging tickets with the GOC." date="1218733540" path="VO_tt_exchange.html" size="3489" stream="VO_tt_exchange.html" tmpFilename="/usr/tmp/CGItemp8364" user="TimSilvers" version="1"}%
