%META:TOPICINFO{author="ScottTeige" date="1323879844" format="1.1" reprev="1.3" version="1.3"}%
-- Main.ScottTeige - 13 Dec 2011

---+++ The Event Timeline

*December 13th Maintenance Window*
   * 9:00 AM EST two new instances of BDII were added to DNS round robin. 
   * 9:51 AM EST is3 failed. It was found that it was erroneously also running two copies of the CEMon collector. These were removed and the service restarted. 
   * At 10:55 AM EST is5 failed. is3 failed at 10:59. A request was sent to Indana University DNS adminstrators to remove the new instances from round robin. To minimize impact the services were restarted while the round robin change was made and propagated. Both instances ran without problem until the round robin change was completed. 
   * 13:00 EST service had been restored to its previous state.

---+++ Impact
There were two partial outages effecting some (but not all) users. These lasted 35 and 13 minutes and occurred entirely within the maintenance window. Service was intermittently available during the first outage period.

---+++ Cause (hypothesis at the moment)
A detailed root cause analysis is underway and will include testing to verify (or refute) the current hypothesis. Examination of the logs immediately before the first failure of is3 showed that there was a large "spike" in connection requests. At 6 and 10 seconds before the failure the largest rate observed in the time range examined occurred. Immediately after these the request rate fell to zero indicating saturation of some sort had occurred. The other failures also occurred near peaks in the connection request rate. This situation would not have been detected by previous testing because of the design of those tests. The tests showed that a very large data rate could be achieved but used sequential connections from a relatively small number of hosts. 

---+++ Next steps
A plan using a large number of hosts making sequential requests is planned to verify or refute the above hypothesized cause. Two instances will be compared, one running on vmware, another on KVM. If the effect is reproduced steps to prevent it will be investigated, if not the root cause analysis will continue. 
