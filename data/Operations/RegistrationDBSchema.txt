%META:TOPICINFO{author="KyleGross" date="1225985960" format="1.1" version="1.13"}%
%META:TOPICPARENT{name="WebHome"}%
%TOC%

---+Registration and Historical Status Database

---++ Current Schema
   * 3 Tables Resource, Support Center, and Virtual Organization
   * Non Relational
   * Certificate Required to Access

---+++Resources Schema
https://goc.grid.iu.edu/registration/main.php?whichReg=rp

   * Resource URL
   * Resource Short Name
   * Admin Certificate DN
   * Resource Type
      * Compute Element
      * Storage Element
   * Resource FQHN
   * OSG Grid
      * OSG Production
      * OSG ITB
   * Security Contact Name
   * Security Contact Email
   * Security Contact Phone
   * Support Center Name
   * Date Submitted (Auto Populated)
   * Submitter Name (Auto Populated from Cert)
   * Submitter Email

---+++ Support Center Schema
https://goc.grid.iu.edu/registration/main.php?whichReg=sc

   * Support Center Short Name
   * Support Center Brief Description
   * Manager or Rep Name
   * Manager or Rep Email
   * Manager or Rep Phone
   * Manager or Rep Address
   * Operation Contact Name
   * Operation Contact Alt Name
   * Operation Contact Email
   * Operation Contact Alt Email
   * Operation Contact Phone
   * Operation Contact Alt Phone
   * Security Contact Name
   * Security Contact Alt Name
   * Security Contact Email
   * Security Contact Alt Email
   * Security Contact Phone
   * Security Contact Alt Phone
   * Community
   * Date Submitted (Auto Populated)
   * Submitters DN (Auto Populated from Cert)
   * Submitters Name (Auto Populated from Cert) 
   * Submitters Email

---+++Virtual Organization Schema

   * VirtualOrganizations/VOInfo Short Name
   * VirtualOrganizations/VOInfo Primary URL
   * VirtualOrganizations/VOInfo Privilege URL
   * VirtualOrganizations/VOInfo Manager Name
   * VirtualOrganizations/VOInfo Manager Email
   * VirtualOrganizations/VOInfo Manager Phone
   * VirtualOrganizations/VOInfo Manager Address
   * Membership Services URL (VirtualOrganizations/VOInfoMS URL)
   * VirtualOrganizations/VOInfoMS Operations Contact Name
   * VirtualOrganizations/VOInfoMS Operation Contact Email
   * VirtualOrganizations/VOInfoMS Security Contact Name
   * VirtualOrganizations/VOInfoMS Security Contact Email
   * VirtualOrganizations/VOInfoMS Security Contact Phone
   * VirtualOrganizations/VOInfo Purpose URL
   * User Support URL
   * Community
   * Application Description
   * Support Center Name
   * Date Submitted (Auto Populated)
   * DN of Submitter (Auto Populated by Cert)
   * Submitter Name (Auto Populated by Cert)
   * Submitter Email    

---++ Proposed Schema

%BLUE% Changes Proposed in Blue

   * Relational
   * Certificate Required to Access - Except for VirtualOrganizations/VOInfo Post Approval%ENDCOLOR%

---+++ Proposed Resource Schema

%BLUE%Relations: (Resource) Support Center id<-> (Support Center) Support Center id %ENDCOLOR%
%BLUE%Relations: (Resource) Resource id <-> (Support Center) Support Center Short Name %ENDCOLOR%

resource table

%GREEN% Changes made by Mine Altunay in green -- attribute definitions %ENDCOLOR%
   * resource_id  : %GREEN%id generated by the GOC database%ENDCOLOR%
   * site_id         : %GREEN%this will come from the pull-down Site menu. Resource will select the Site upon registering%ENDCOLOR%
   * url               : %GREEN%This is a website that describes the resource%ENDCOLOR%
   * name           : %GREEN%resource name%ENDCOLOR%
   * OSG Grid     : %GREEN%type of grid in which the resource resides, production or integration%ENDCOLOR%
      * OSG Production
      * OSG ITB
   * type            : %GREEN%resource type, either compute or storage%ENDCOLOR%
      * Compute Element
      * Storage Element - %BLUE%for storage elements, we'll need to add ldap host/port and search string%ENDCOLOR%
   * Support Center id number     : %GREEN%support center is selected from a pull down menu, specified at registration%ENDCOLOR%
   * Date Submitted (Auto Populated)
   * Submitter Name (Auto Populated from Cert)
   * Submitter Email                    : %GREEN%the person who registers the resource %ENDCOLOR%

gatekeeper table

   * resource_id   :%GREEN%resource id same as above%ENDCOLOR%
   * Resource FQHN :%GREEN%resource IP address%ENDCOLOR%


resourcecontact table


   * person_id  :%GREEN%person id generated by the GOC db%ENDCOLOR%
   * resource_id  :%GREEN%resource id same as above%ENDCOLOR%
   * type     :%GREEN%4 types: manager, operational, security contact, or incident response contact. each contact type can have alternate (two people listed per type, see rank)%ENDCOLOR%
   * rank     :%GREEN%shows if this person an alternate contact or not. %ENDCOLOR%
   * details   :%GREEN%text, what are possible details ???%ENDCOLOR%
   * cert    :%GREEN%X.509 cert of the contact%ENDCOLOR%

vo_resource_ownership

   * resource_id :%GREEN%resource id being owned same as above%ENDCOLOR%
   * vo_id     :%GREEN%VirtualOrganizations/VOInfo owning the resource, same as above%ENDCOLOR%
   * percent  :%GREEN%the percent of the resource owned by the VO %ENDCOLOR%


---+++ Proposed Support Center Schema

%BLUE%Relations: (Resource) Support Center Name<-> (Support Center) Support Center Short Name %ENDCOLOR%
%BLUE%Relations: (Virtual Organization) Support Center Name<-> (Support Center) Support Center Short Name %ENDCOLOR%

supportcenter table

   * sc_id  :%GREEN%support center id generated by GOC db%ENDCOLOR%
   * Support Center Name :%GREEN%support center name%ENDCOLOR%
   * Support Center Brief Description   :%GREEN%describes the support provided%ENDCOLOR%
   * Community  :%GREEN%this a list of VOs that are supported. Please note that resources that are supported can be found from the resourcetables%ENDCOLOR%
   * Date Submitted (Auto Populated)  
   * Submitters DN (Auto Populated from Cert)
   * Submitters Name (Auto Populated from Cert) 
   * Submitters Email  :%GREEN%the person who does the regsitration %ENDCOLOR%

sccontact table

%GREEN%all attribute definitions are same as resource contact table%ENDCOLOR%

   * sc_id
   * person_id
   * type   
   * rank
   * details
   * cert
 

---+++ Proposed Virtual Organization Schema

%BLUE% Pre Approval Submission %ENDCOLOR%

   * vo_id          :%GREEN%VirtualOrganizations/VOInfo id generated by GOC db%ENDCOLOR%
   * VirtualOrganizations/VOInfo Short Name  :%GREEN%VirtualOrganizations/VOInfo name%ENDCOLOR%
   * Community  :%GREEN%description of user community%ENDCOLOR%
   * Application Description :%GREEN%type of application being run by this VirtualOrganizations/VOInfo%ENDCOLOR%
   * Date Submitted (Auto Populated)
   * DN of Submitter (Auto Populated by Cert)
   * Submitter Name (Auto Populated by Cert)
   * Submitter Email    :%GREEN%the person who registers the VirtualOrganizations/VOInfo%ENDCOLOR%

%BLUE% Post Approval Submission %ENDCOLOR%
%BLUE%Relations: (Virtual Organization) Support Center Name<-> (Support Center) Support Center Short Name %ENDCOLOR%

virtualorganization table

   * VirtualOrganizations/VOInfo Primary URL    :%GREEN%VirtualOrganizations/VOInfo web page%ENDCOLOR%
   * VirtualOrganizations/VOInfo Privilege URL   :%GREEN%the list of VirtualOrganizations/VOInfo internal groups and the corresponding access rights for each group. This is posted on the privilege URL , see twiki/VirtualOrganizations/VOInfo pages for example%ENDCOLOR%
   * Membership Services URL (VirtualOrganizations/VOInfoMS URL)    :%GREEN%VirtualOrganizations/VOInfoMS address%ENDCOLOR%
   * VirtualOrganizations/VOInfo AUP URL     :%GREEN%the VirtualOrganizations/VOInfo Agreed Usage Policy, posted on this URL. This will not be submitted right away, but later when the VirtualOrganizations/VOInfo creates its AUP, this will get filled out%ENDCOLOR%
   * VirtualOrganizations/VOInfo Purpose URL     :%GREEN%statement of VirtualOrganizations/VOInfo purpose. This is a subset of VirtualOrganizations/VOInfo AUP. Since AUP is more comprehensive (with rules and restrictions over the user), this statement only covers what is the common goal of this VirtualOrganizations/VOInfo members%ENDCOLOR%
   * User Support URL   :%GREEN%VirtualOrganizations/VOInfo maintained support web page for its users -- this is not a Support Center%ENDCOLOR%
   * Support Center id    :%GREEN%VirtualOrganizations/VOInfo's support center. This is different from support URL. the VirtualOrganizations/VOInfo selects the Support center from a pull down menu. %ENDCOLOR%
   * Date Submitted (Auto Populated)
   * DN of Submitter (Auto Populated by Cert)
   * Submitter Name (Auto Populated by Cert)
   * Submitter Email 

vosupportcenter table

   * sc_id
   * vo_id

vomembership table


%GREEN%I really think that we can leave this table null for the OIM v1.0. This table is not needed%ENDCOLOR%

   * person_id
   * vo_id
   * begindate  :%GREEN%Membership start date%ENDCOLOR%
   * enddate   :%GREEN%membership end date%ENDCOLOR%


role table

%GREEN%I really think that we can leave this table null for the OIM v1.0. This table is not needed%ENDCOLOR%

   * vo_id
   * person_id
   * role   :%GREEN%the role that person plays for the VO. We are not collecting all internal VirtualOrganizations/VOInfo roles. We only collect roles that are meaningful for GOC  %ENDCOLOR%
   * certificate

vocontact table
%GREEN%all attribute definitions are same as resource contact table%ENDCOLOR%

   * vo_id
   * person_id
   * type  
   * rank
   * details

---+++ Persons

person table

   * person_id
   * dn
   * email
   * name
   * phone


---+++ Sites

site table
%GREEN%site is a geographical location that contains a set of resources%ENDCOLOR%

%GREEN%facility is an abstraction that can spread across multiple sites%ENDCOLOR%

%GREEN%each site belongs to a facility%ENDCOLOR%

   * site_id  
   * facility_id  
   * name
   * timezone
   * longitude
   * latitude

sitecontact table

%GREEN%all attribute definitions are same as resource contact table%ENDCOLOR%

   * site_id
   * person_id
   * type  
   * rank
   * certificate
   * details

facility table

   * facility_id
   * name
   * details %GREEN%any text , needs to be added%ENDCOLOR%


---+++ Services
%GREEN%Important note form schema freeze meeting on 10/17/2007:
Service is expected to be owned by a VirtualOrganizations/VOInfo or a resource, or both. We should provide additional interface at GOC registration web site so that
while registering a VirtualOrganizations/VOInfo or a resource, the services must also be listed at the GOC registration web page. 
%ENDCOLOR%



service table

   * service_id
   * site_id  %GREEN%a service can be owned by a site or a vo. This is the owner site's id. Note that a service can have simulatenously be owned by VirtualOrganizations/VOInfo or site. %ENDCOLOR%
   * vo_id %GREEN%a service can be owned by a site or a vo. This is the owner VirtualOrganizations/VOInfo id. Note that a service can have simulatenously be owned by VirtualOrganizations/VOInfo or site. %ENDCOLOR%


servicecontact table

%GREEN%all attribute definitions are same as resource contact table, except site_id and vo_id are additional and explained below%ENDCOLOR%

   * person_id
   * service_id
   * site_id  %GREEN% owner site id
   * vo_id Note this attribute is added on 10/17/2007, owner vo_id 
%ENDCOLOR%

   * type 
   * rank


---+++ Historical Resource Status

   * Relation to (Resource) Short Name <-> (Historical Resource Status) Short Name
   * This would contain data from monitoring probes and be available to WLCG monitoring tools.

---++ Other Possibilities


---++ Schema Mapping

*Resource Registration*

Format:   old_attribute_name - new_attribute_name - explanation of information

| resURL -  url - public website for information

| resName - gatekeeper_name - Name

| resDNS - hostname - FQHN for resource gatekeepe

| gridCat - osg_gridtype - OSG or OSG-ITB

(the following 6 will all go in the person and resource contact tables)

======================================

| secName - person.name - Security Contact Name 

| secEmail - person.email - Security Contact Email

| secPhone - person.phone - Security Contact Phone

| secNameAlt - person.name - Security Contact Name (alternate)

| secEmailAlt - person.email -  Security Contact Email (alternate)

| secPhoneAlt - person.phone - Security Contact Phone (alternate)

======================================

| secDateConf - Date that a contact's information was confirmed (will need to be added)

| scShortName - sc_id - Support Center Name (this will have to reference back to a support center...list located below)

| subName - submitter_name -  Submitter's Name (from certificate)

| subEmail - submitter_name - Submitter's Email address

| date - Date of submission

| unixtime - date_submitted - exact time of submission

| approved - field that lets monitoring, etc know if a resource is ready to go.

| rsType - resource_type - CE or SE

| adminDN - array of admin DNs for access, etc. (will be created as separate contacts)

| longName - full name of Resource (Not used often)

==================

*Support Center id => name*

| id | shortName              |
|  1 | USATLAS                |
| 23 | NWICG                  |
|  3 | Fermilab               |
|  4 | USCMS                  |
|  5 | LIGO                   |
|  6 | GROW-GOC               |
|  7 | UC CI                  |
|  8 | PROD_SLAC              |
|  9 | CSC                    |
| 10 | OSG-GOC                |
| 11 | fGOC                   |
| 12 | VDT                    |
| 13 | DOSAR                  |
| 14 | STAR                   |
| 15 | GADU                   |
| 16 | SDSS                   |
| 17 | DZero                  |
| 36 | cheapbeer-support      |
| 19 | mariach-support        |
| 20 | nanoHUB Support Center |
| 21 | GRASE                  |
| 22 | GLOW-TECH              |
| 28 | GUGrid                 |
| 29 | GPN                    |
| 30 | UCHC                   |
| 31 | Engagement             |
| 33 | NERSC                  |
| 35 | SBGrid                 |
| 34 | TIGRE                  |
| 37 | LBNL-DSD-support       |
| 38 | CIGI                   |


-- Main.RobQ - 04 Apr 2007

%META:FILEATTACHMENT{name="Picture_2.png" attachment="Picture_2.png" attr="" comment="" date="1176299930" path="Picture 2.png" size="57753" stream="Picture 2.png" user="Main.RobQ" version="1"}%
