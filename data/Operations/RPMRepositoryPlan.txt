%META:TOPICINFO{author="ScottTeige" date="1313083598" format="1.1" reprev="1.5" version="1.5"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Proposed Plan for OSG Software Repository at GOC

One side-effect of the transition to RPMs is that we have the ability to unify software repositories, and make GOC the primary endpoint for OSG software. That is, instead of having separate VDT and OSG software caches, we will have a single software repository. This repository can be mirrored. The official, supported repository should be hosted at the GOC and the contents maintained primarily by the OSG Software Team.

   1. The GOC will host the OSG Software development, testing, release, and contrib repositories at software.grid.iu.edu (and software-itb.grid.iu.edu for testing the repository creation process itself).  These require about 2 GB per repository (except contrib; size is currently minimal), and may grow to 3GB as time goes forward.
      A. The creation of these repositories will be done using the =mash= tool, which will copy software from the Koji-based build server (koji-hub.batlab.org) to the GOC. The OSG Software Team will provide the appropriate configuration files for =mash=, while Operations will script and automate its invocation.
   1. The development and testing repositories will be updated automatically (cronjob every 30 or 60 minutes), but the release repository is only updated manually by designated team members.
      A. The release repository will only be updated during designated release or maintenance windows.
   1. The software repositories will be covered by the same [[SoftwareCacheServiceLevelAgreement][SLA as the webserver]].
      A. GOC will assist the Software team in updating the SLA as necessary.
   1. GOC will host a rsync server so sites can create their own mirrors of the repository.  We believe this service should be at a "normal" level of priority, and considered a routine IT service.
   1. OSG Software, Security, and Operations will come to an agreement about whether to phase-out the existing CA certificate repository, and the timeline.
   1. The hosted repository will only contain precisely the contents of the repository at the OSG Software Koji server.  Specifically, if a team (such as Software or Operations) wants to add RPMs to the repository, they will have to add it to Koji first, then promote it to the appropriate repository.  This is a limitation of =mash=.  OSG Software will help create the correct ACLs in Koji for each piece of software.  Pieces of software that will have special ACLs include:
      A. Security team will be the only ones allowed to promote CA certificates from development to testing, and from testing to release.
      A. Operations team will be the only ones allowed to promote vo-client (vomses file) and osg-voms (LSC files) from testing to release.

---+ Timeline

   1. This will be filled in once Software and Operations sign off on the deliverables.
