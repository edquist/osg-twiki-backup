%META:TOPICINFO{author="AlainRoy" date="1312839060" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Proposed Plan for OSG Software Repository at GOC

One side-effect of the transition to RPMs is that we have the ability to unify software repositories, and make GOC the primary endpoint for OSG software. That is, instead of having separate VDT and OSG software caches, we will have a single software repository. This repository can be mirrored. The official, supported repository should be hosted at the GOC and the contents maintained primarily by the OSG Software Team.

   * The GOC will host the OSG Software development, testing, release, and contrib repositories at software.grid.iu.edu (and software-itb.grid.iu.edu for testing the repository creation process itself).  These require about 2 GB per repository (except contrib; size is currently minimal), and may grow to 3GB as time goes forward.
      * The creation of these repositories will be done using the =mash= tool, which will copy software from the VDT-based build server (oji-hub.batlab.org) to the GOC. The OSG Software Team will provide the appropriate configuration files for =mash=, while Operations will script and automate its invocation.
   * The development and testing repositories will be updated automatically (cronjob every 30 or 60 minutes), but the release repository is only updated manually by designated team members.
      * The release repository will only be updated during designated release or maintenance windows.
   * The software repositories will be covered by the same SLA as the webserver. %RED%Alain asks: What is that SLA? Can we have a pointer to it? Without knowing, I have no idea if it's appropriate or not.%ENDCOLOR%
   * GOC will host a rsync server so sites can create their own mirrors of the repository.  This service is to be low-priority, best-effort. %RED%Alain says: I'm a bit worried about this statement. It's clearly lower priority, but I think it shouldn't just be best effort. I'm not sure how to write an SLA, but I think we should encourage mirroring. I think it would be supported, but during regular business hours, up to a day or two response time... Not best-effort, but not high-priority.%ENDCOLOR%
   * The OSG Software Team is not the only set of people that can update the software cache. Currently, access will need to be given to the GOC (to update RPMs such as the default vomses file) and to the Security Team (to update the CA certificates). 
   * When the CA certificates are updated, OSG Security will create the repositories using the standard OSG Software Team procedures (currently using Koji hosted at the UW-Madison), and they will end up in the development repository. %RED%Alain asks: Does this really belong here? This is not about the GOC hosting anything, but about the security team's effort.%ENDCOLOR%
      * OSG Software will implement ACLs such that OSG Security or Operations can handle the promotion of CA certificates to testing/release and the vomses-related packages to release. %RED%Why the software team? Is this a Koii issue?%ENDCOLOR%
   
---+ Timeline

   * This will be filled in once Software and Operations sign off on the deliverables.