%META:TOPICINFO{author="BurtHolzman" date="1172249895" format="1.1" reprev="1.3" version="1.3"}%
%META:TOPICPARENT{name="TierThreePrerequisiteDocument"}%
-- Main.StevenTimm - 16 Feb 2007
---++Introduction
The OSG software stack will install Condor for you if you don't have it installed otherwise
but it is good practice to keep your Condor installation independent of other grid software
because Condor has more frequent upgrades and bug fixes than the rest of the grid software.
---+++UID/GID
You will need to decide what uid and gid Condor will run as most of the time.  Condor is started 
as root but will suid to a non-privileged id during most of normal operation.  condor:condor 
is conventional.
---++Downloading Condor
Condor can be downloaded from [[http://www.cs.wisc.edu/condor/downloads][http://www.cs.wisc.edu/condor/downloads]].
Select the link for "Latest Stable Release" which is Condor 6.8.4 as of Feb. 5 2007.
There will be a form that asks for your E-mail and a checkbox for "I agree".  Once
you click on the "I agree" box a table of RPM's will come up.  The RPMS for Red Hat
Enterprise Linux 3 and Red Hat Enterprise Linux 4 are the same RPM.  Choose the 
dynamic rpm, not the static.  Also you can use the 32-bit (x86) version of the rpm whether
you are running x86_64 or x86 architecture.<br>

Note: Condor versions 6.8.x may not completely backward compatible with older versions (at least not when we tried!)
You thus want to make sure you are running the latest stable version all across your cluster to avoid unnecessary hassle.

---++Installing Condor
Once you have  downloaded the rpm, install it with
<pre>rpm -i condor-6.8.4-linux-x86-rhel3-dynamic-1.i386.rpm</pre>
The condor files will be placed in /opt/condor-6.8.4 directory.

---++Suggested way to do easy upgrades:
On our production machines we make a symbolic link /opt/condor that points 
to whichever directory is the current version of condor.  This way the path to 
the condor configuration binaries is always the same.  We also have /etc/condor/condor_config (which is the first place condor looks) be a symlink to /opt/condor/etc/condor_config
<pre>
cd /opt
ln -s condor-6.8.4 condor
cd /etc
mkdir condor
cd condor
ln -s /opt/condor/etc/condor_config condor_config
cp /opt/condor/etc/examples/condor.boot /etc/rc.d/init.d/condor
/sbin/chkconfig --add condor
</pre>
In future when a new version of condor comes out, you can install the new rpm,
get all configuration files in place, then just move the /opt/condor symlink when it is 
time and restart condor.
---++ Configuring Condor
Condor is configured to be a "Personal Condor" installation when you install 
the RPM, which means it will be running the full set of Condor daemons, 
SCHEDD, STARTD, COLLECTOR, NEGOTIATOR, and MASTER.
There is a file /opt/condor/local.hostname/condor_config.local
that can be edited to override these settings.
---++Starting Condor
Once Condor is configured, then make sure /opt/condor/sbin and /opt/condor/bin
are in your path and execute "condor_init".  This will create the spool directories
with the correct permissions.  Then do /etc/rc.d/init.d/condor start
If the command works correctly, you should be able to execute the command 
"condor_status" and see a condor pool of one node.
---++Worker nodes
Condor software can either be exported via NFS to the workers or installed on every worker.
Fermigrid admins prefer the latter.  Once the head node is installed and running, install the rpm on 
the other worker nodes as above, but modify /opt/condor-6.8.4/local.hostname/condor_config.local to have
<pre>
DAEMON_LIST=MASTER,STARTD
</pre>
---++Things to avoid
Do not use the development release 6.9.x if you can possibly avoid it.
---++Notes
This example showed using the RPM version to install.  There is also a .tar.gz 
file that you can untar (this sequence is documented in the [[http://www.cs.wisc.edu/condor/manual/v6.8/][Condor Manual]]).  It is also possible
to install it from the Virtual Data Toolkit.  ---++My sample condor_config.local
Coming soon

