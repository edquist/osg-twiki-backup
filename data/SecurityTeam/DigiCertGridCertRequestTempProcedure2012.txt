%META:TOPICINFO{author="DaveDykstra" date="1481311155" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="OSGCATransition2012"}%
---+ Temporary Procedure for Requesting !DigiCert Grid Certificates for OSG Testing

---++ Server Certificates

   1. First, generate a new private key and certificate request for your server as follows (replacing _osg-ce.example.edu_ with the fully-qualified hostname of your server):
      <verbatim>
$ openssl req -nodes -new -newkey rsa:2048 -sha1 -days 395 -out req.pem -keyout hostkey.pem -subj "/CN=osg-ce.example.edu"
$ chmod 0600 hostkey.pem req.pem
      </verbatim>
   2. Paste the contents of =req.pem= into a [[OsgRaOperations#Digitally_signed_email][digitally signed email message]] to jbasney@illinois.edu. For example:
      <verbatim>
To: Jim Basney <jbasney@illinois.edu>
Subject: OSG DigiCert request for osg-ce.example.edu

Please issue a certificate for osg-ce.example.edu. Here is my certificate request:

-----BEGIN CERTIFICATE REQUEST-----
MIICZDCCAUwCAQAwHzEdMBsGA1UEAwwUZWMubmNzYS5pbGxpbm9pcy5lZHUwggEi
MA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC9XLWV3xVQEkplaD57GoT3q82n
Tk99MiQtqsDNsQv3KHqB4JCQ030Jy/xUCAl7h8aueWNw2X7G3aWNlbMOiUBWVoZC
hTTxr9XB5hiqrDbX0AEwjnewfMo2ZM+K/dnID2wXfE5q0YbXY3y+NDROl+RGOM4I
l1/lpMcPik1NSH8PhaY7JBIrAVfFtW+Ejdf3Jmk+3JvVXG5YXEyyQEW41uU5tXlW
1fVw+OIIXhi1li6YDjEafHYLxQAPyTP7gzrbLZitr3LjEHWEHnw539HBUfdkS56z
K/dCK/0HQqKjy0aI0/TrENd2FvHX2D4usKmImlX45p+Y7tNwcGgDaYxS11iJAgMB
AAGgADANBgkqhkiG9w0BAQUFAAOCAQEAO05SiA1scGmX9/a42/AzJkBgP5HkCYVJ
9dGT7PH6xRGsti3CXiCf1/HhEyhh8Y7jxife5s/xiDa/s7MunlZ18mIt1p9PN3aF
v1PJa5t30ZMMPE/MA9evKA0n5QLmFxME/rzodpJTBdYY8R7nSr4HKzMYFu+iQoAK
wiYHBk3J1c405aFd/m8gO+Y4cdr2qML3pnKQ15al/FxkVX3BL1t7ox3ikpGrHhJQ
okGenrvBqaAw0cWSRLgo41JVHfU4tOj+GWXWVVAFAgduX33lAQz+AlRQvYskXEeQ
y3oxZnICyHKAnPSF9Ywvahm9N1Z8lZAnPGpqhJhaVVqczoeO4fmLgw==
-----END CERTIFICATE REQUEST-----
      </verbatim>
   3. After Jim verifies your request, he will send you your signed certificate by email. For example:
      <verbatim>
From: Jim Basney <jbasney@illinois.edu>
Subject: Re: OSG DigiCert request for osg-ce.example.edu

Here is your certificate:

-----BEGIN CERTIFICATE-----
MIIFOjCCBCKgAwIBAgIQDSewuSpdKAv6s+7r4q9tlTANBgkqhkiG9w0BAQUFADBp
MRMwEQYKCZImiZPyLGQBGRYDY29tMR0wGwYKCZImiZPyLGQBGRYNRGlnaUNlcnQt
R3JpZDEWMBQGA1UEChMNRGlnaUNlcnQgR3JpZDEbMBkGA1UEAxMSRGlnaUNlcnQg
R3JpZCBDQS0xMB4XDTEyMDIxNzAwMDAwMFoXDTEzMDIyMTEyMDAwMFowgYIxEzAR
BgoJkiaJk/IsZAEZFgNjb20xHTAbBgoJkiaJk/IsZAEZFg1EaWdpQ2VydC1Hcmlk
MRowGAYDVQQKExFPcGVuIFNjaWVuY2UgR3JpZDERMA8GA1UECxMIU2VydmljZXMx
HTAbBgNVBAMTFGVjLm5jc2EuaWxsaW5vaXMuZWR1MIIBIjANBgkqhkiG9w0BAQEF
AAOCAQ8AMIIBCgKCAQEAvVy1ld8VUBJKZWg+exqE96vNp05PfTIkLarAzbEL9yh6
geCQkNN9Ccv8VAgJe4fGrnljcNl+xt2ljZWzDolAVlaGQoU08a/VweYYqqw219AB
MI53sHzKNmTPiv3ZyA9sF3xOatGG12N8vjQ0TpfkRjjOCJdf5aTHD4pNTUh/D4Wm
OyQSKwFXxbVvhI3X9yZpPtyb1VxuWFxMskBFuNblObV5VtX1cPjiCF4YtZYumA4x
Gnx2C8UAD8kz+4M62y2Yra9y4xB1hB58Od/RwVH3ZEuesyv3Qiv9B0Kio8tGiNP0
6xDXdhbx19g+LrCpiJpV+OafmO7TcHBoA2mMUtdYiQIDAQABo4IBwjCCAb4wHwYD
VR0jBBgwFoAU77B1nWgx0eT3KomCU505d2guIFEwHQYDVR0OBBYEFDg7Ac3cm47e
u7PIDAKQXCY1hLx/MB8GA1UdEQQYMBaCFGVjLm5jc2EuaWxsaW5vaXMuZWR1MA4G
A1UdDwEB/wQEAwIEsDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwcwYD
VR0fBGwwajAzoDGgL4YtaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0
R3JpZENBLTEuY3JsMDOgMaAvhi1odHRwOi8vY3JsNC5kaWdpY2VydC5jb20vRGln
aUNlcnRHcmlkQ0EtMS5jcmwwNQYDVR0gBC4wLDAMBgoqhkiG90wFAgIBMA0GC2CG
SAGG/WwfAQEBMA0GCyqGSIb3TAUCAwMCMHIGCCsGAQUFBwEBBGYwZDAkBggrBgEF
BQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMDwGCCsGAQUFBzAChjBodHRw
Oi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRHcmlkQ0EtMS5jcnQwDAYD
VR0TAQH/BAIwADANBgkqhkiG9w0BAQUFAAOCAQEAE9wzbEte2fv0BtViMue4FBf0
i0dHP+YRRVLoywJ8JR+/2/cXqCXIOGdPA5rvn6fHtzqP6JTkqe6vqEuiy6jzJXOq
A3JCUDOKThJz0VcLVbcaQhPNsU7SwYD5yvvjsWHLhrTctfvtRTXwvyTy3jggBntF
B1RcQTMNHn6y6yI03GI1CVBp3rtL3JbOe61G0+Yzvn31lVXK2sOimnEa8FJM1EZO
byIw5Nr2DJI6NB+cQCtgu72pyfg3qAii7sh31eMX1fMNpOkn02AC4ZtWVijymzQK
mTVZQhUeitsfKLoheWDzB5NnDxpYavq4N/co8VouGISj8SZI4YamxGBi2lJMXw==
-----END CERTIFICATE-----
      </verbatim>
   4. Copy the certificate from the email message and paste it into a =hostcert.pem= file. For example:
      <verbatim>
$ cat > hostcert.pem
-----BEGIN CERTIFICATE-----
MIIFOjCCBCKgAwIBAgIQDSewuSpdKAv6s+7r4q9tlTANBgkqhkiG9w0BAQUFADBp
MRMwEQYKCZImiZPyLGQBGRYDY29tMR0wGwYKCZImiZPyLGQBGRYNRGlnaUNlcnQt
R3JpZDEWMBQGA1UEChMNRGlnaUNlcnQgR3JpZDEbMBkGA1UEAxMSRGlnaUNlcnQg
R3JpZCBDQS0xMB4XDTEyMDIxNzAwMDAwMFoXDTEzMDIyMTEyMDAwMFowgYIxEzAR
BgoJkiaJk/IsZAEZFgNjb20xHTAbBgoJkiaJk/IsZAEZFg1EaWdpQ2VydC1Hcmlk
MRowGAYDVQQKExFPcGVuIFNjaWVuY2UgR3JpZDERMA8GA1UECxMIU2VydmljZXMx
HTAbBgNVBAMTFGVjLm5jc2EuaWxsaW5vaXMuZWR1MIIBIjANBgkqhkiG9w0BAQEF
AAOCAQ8AMIIBCgKCAQEAvVy1ld8VUBJKZWg+exqE96vNp05PfTIkLarAzbEL9yh6
geCQkNN9Ccv8VAgJe4fGrnljcNl+xt2ljZWzDolAVlaGQoU08a/VweYYqqw219AB
MI53sHzKNmTPiv3ZyA9sF3xOatGG12N8vjQ0TpfkRjjOCJdf5aTHD4pNTUh/D4Wm
OyQSKwFXxbVvhI3X9yZpPtyb1VxuWFxMskBFuNblObV5VtX1cPjiCF4YtZYumA4x
Gnx2C8UAD8kz+4M62y2Yra9y4xB1hB58Od/RwVH3ZEuesyv3Qiv9B0Kio8tGiNP0
6xDXdhbx19g+LrCpiJpV+OafmO7TcHBoA2mMUtdYiQIDAQABo4IBwjCCAb4wHwYD
VR0jBBgwFoAU77B1nWgx0eT3KomCU505d2guIFEwHQYDVR0OBBYEFDg7Ac3cm47e
u7PIDAKQXCY1hLx/MB8GA1UdEQQYMBaCFGVjLm5jc2EuaWxsaW5vaXMuZWR1MA4G
A1UdDwEB/wQEAwIEsDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwcwYD
VR0fBGwwajAzoDGgL4YtaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0
R3JpZENBLTEuY3JsMDOgMaAvhi1odHRwOi8vY3JsNC5kaWdpY2VydC5jb20vRGln
aUNlcnRHcmlkQ0EtMS5jcmwwNQYDVR0gBC4wLDAMBgoqhkiG90wFAgIBMA0GC2CG
SAGG/WwfAQEBMA0GCyqGSIb3TAUCAwMCMHIGCCsGAQUFBwEBBGYwZDAkBggrBgEF
BQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMDwGCCsGAQUFBzAChjBodHRw
Oi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRHcmlkQ0EtMS5jcnQwDAYD
VR0TAQH/BAIwADANBgkqhkiG9w0BAQUFAAOCAQEAE9wzbEte2fv0BtViMue4FBf0
i0dHP+YRRVLoywJ8JR+/2/cXqCXIOGdPA5rvn6fHtzqP6JTkqe6vqEuiy6jzJXOq
A3JCUDOKThJz0VcLVbcaQhPNsU7SwYD5yvvjsWHLhrTctfvtRTXwvyTy3jggBntF
B1RcQTMNHn6y6yI03GI1CVBp3rtL3JbOe61G0+Yzvn31lVXK2sOimnEa8FJM1EZO
byIw5Nr2DJI6NB+cQCtgu72pyfg3qAii7sh31eMX1fMNpOkn02AC4ZtWVijymzQK
mTVZQhUeitsfKLoheWDzB5NnDxpYavq4N/co8VouGISj8SZI4YamxGBi2lJMXw==
-----END CERTIFICATE-----
$ chmod 0644 hostcert.pem
      </verbatim>
   5. Install =hostkey.pem= and =hostcert.pem=, backing up your existing files as appropriate:
      <verbatim>
$ mv /etc/grid-security/hostcert.pem /etc/grid-security/hostcert.pem.bak.$$
$ mv /etc/grid-security/hostkey.pem /etc/grid-security/hostkey.pem.bak.$$
$ mv hostcert.pem hostkey.pem /etc/grid-security
$ chown root.root /etc/grid-security/hostcert.pem
$ chown root.root /etc/grid-security/hostkey.pem
      </verbatim>

---++ User Certificates

TBD

-- Main.JimBasney - 17 Feb 2012