%META:TOPICINFO{author="JenyTeheran" date="1439849595" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="SecurityTeamWorkingArea"}%
---+ OSG OASIS CVMFS Security Drill – 07/28/2015

We conducted a drill to verify the blanking procedure over a VO repo worked as expected.

We were looking to verify that after a blanking procedure over a repository the malicious content was not longer available, as well as verify that other repositories weren’t affected.  

The drill was conducted by informing to OSG Operations that a designated VO has malicious in their OASIS repository and asking the OASIS admins (OSG Operations) to execute the blanking procedure on the repository identified as affected. 

*Test*
   * The repositories config-egi.egi.eu and usatlast3.opensciencegrid.org were selected as the target repositories. Those are testing repositories.
   * Following an OASIS scheduled maintenance, OSG Operations performed the blanking procedure over the selected repositories.
   * The usatlast3.opensciencegrid.org repository was successfully blanked. However, after the repository blanking over config-egi.egi.eu, the content could not be checked.
   * After checking the repository configuration, Dave Dykstra found a bug in the cvmfs-config-osg rpm.  Dave’s explanation about the incident:
       * “ Instead of the CVMFS_KEYS_DIR=/etc/cvmfs/keys/egi.eu setting in /etc/cvmfs/domain.d/egi.eu.conf that came in the cvmfs-config-default rpm, it needs to have CVMFS_PUBLIC_KEY=/etc/cvmfs/keys/egi.eu/egi.eu.pub:/etc/cvmfs/keys/opensciencegrid.org/opensciencegrid.org.pub in order to accept both the egi and osg signing keys”.
       * A cvmfs-config-osg  emergency release was put for the new OSG Software version and the bug was removed.


---+ Conclusion

These tests show that OASIS CVMFS provides an adequate mechanism to clear malicious content from a repository with malicious content. 

*Related tickets*

   *https://jira.opensciencegrid.org/browse/SECURITY-9

-- Main.JenyTeheran - 17 Aug 2015
