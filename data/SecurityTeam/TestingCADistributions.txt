%META:TOPICINFO{author="KevinHill" date="1386191759" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="CreatingCADistributions"}%
On fresh sl5 vm:
   1. yum update # make sure system is updated.
   2. yum install yum-priorities
   3. rpm -Uvh http://dl.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm sl6: rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
   4. rpm -Uvh http://repo.grid.iu.edu/osg-el5-release-latest.rpm # sl6: rpm -Uvh http://repo.grid.iu.edu/osg-el6-release-latest.rpm
   5. yum install fetch-crl3 # sl6: yum install fetch-crl
   6. yum --enablerepo osg-development install osg-ca-certs
   7. /usr/sbin/fetch-crl3 # no errors sl6: /usr/sbin/fetch-crl
   8. find /etc/grid-security/certificates \! -perm -a+r -print # no unreadable files
   1. check for expiring certs: <br>
      for new packages: <verbatim>
for x in /etc/grid-security/certificates/*.pem
do
  echo $(date -d "$(openssl x509 -in $x -noout -enddate | cut -d = -f 2)" +%Y-%m-%d) $x
done | sort -nr
</verbatim>
      for old (-compat) packages: <verbatim>
for x in /etc/grid-security/certificates/*.pem
do
  echo $(date -d "$(openssl x509 -in $x -noout -enddate | cut -d = -f 2)" +%Y-%m-%d) $x
done | sort -nr
</verbatim>
   9. yum remove osg-ca-certs; rm -rf /etc/grid-security/certificates
   10. repeat 6-9 with osg-ca-certs-compat, igtf-ca-certs-compat,igtf-ca-certs.
   11. repeat 6-10, installing corresponding cert rpm from osg-release repo first, then upgrade in place of install.
   12. repeat 1-11 with sl6 vm, subst. sl6 for sl5, as appropriate.



-- Main.KevinHill - 04 Dec 2013
