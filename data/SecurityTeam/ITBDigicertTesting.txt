%META:TOPICINFO{author="AnandPadmanabhan" date="1321468708" format="1.1" reprev="1.12" version="1.12"}%
---+!! Testing of new CA distribution format on ITB
%TOC%

As some of you have heard, we are transitioning to using Digicert CA for end user and host certificates. We are conducting a pilot trial where we test the Digicert certificates compatibility with our software. We only have a month to finish this test. 

This test will have three parts 1) get a new CA package with digicert test CA and test software components; 2) get digicert host and service certificates for the machines/services on ITB; and 3) get user certificates for ITB participants and test our s/w infrastructure with these new certificates. We hope to get a wide coverage of OSG s/w components tested in ITB just in the same way we tested the transition to the new CA format. We will be creating an RPM package which contains the new CA certificates which the ITB test site will install. 

---++ Instruction to install !DigiCert CA from OSG repository
The new CA packages are released as RPMs to the osg-development and osg-testing repositories. 

----+++ Preperation

   1. Install Yum repository required by OSG: For more details, please see our [[Documentation/Release3.YumRepositories][yum repository documentation]].
   1.  Enable OSG testing Repository:  The only OSG repository enabled by default is the release one. If you want to enable another one, e.g. osg-testing, then edit its file (e.g. =/etc/yum.repos.d/osg-testing.repo=) and change the enabled option from 0 to 1: <pre class="file">
[osg-testing]
name=OSG Software for Enterprise Linux 5 - Testing - $basearch 
baseurl=http://vdt.cs.wisc.edu/repos/3.0/el5//testing/$basearch
failovermethod=priority
priority=98
enabled=%RED%1%ENDCOLOR%
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-OSG
</pre>
   1. Install CA certificates: For full details and options, please see our [[Documentation/Release3.InstallCertAuth][CA certificates documentation]].

---+++ Install the Digicert Test CA 

<pre class="rootscreen">
%UCL_PROMPT_ROOT% yum install digicert-test-ca-certs
</pre>

---+++ Checklist for ITB admins
   1. Make sure you have installed the Digicert CA from osg-testing repository. This should be done in addition to the other RPM that provides grid-certificates.
   1. Ensure you have host and service certificate from the Digicert CA installed.
   1. Get a new personal certificate and run validation tests against your ITB site with the new CA.
   1. Add your Digicert DN to authenticate you locally. You could do  this by updating your ITB GUMS server to point to the VOMS server
   4. Update this page with the list of software/services that were tested at your site.
   5. Please report back to security team and update this page  if you run into any problems. 

---++ Tests

Test expected from ITB is very simple. WE will provide you host and end user certificates from Digicert. You will install them on your ITB servers. You will do the  ITB tests as usual. Of course, we will also provide you with a CA files that contains the Digicert CA root certificate itself (see instructions). If GSI or some other library breaks, you will let us know. When you submit jobs or move data, we will also ask you to use your new Digicert personal certificate. To facilitate this
   1. Provide us with list of FQDNs for your ITB servers you need host and service certificate for.
   1. If you usually submit jobs to ITB servers for testing, then we will also get you a personal certificate from Digicert. 

In particular we want the following pieces of software/services tested/verified and signed off by ITB sites.

   1. CE 
      * gatekeeper
      * gsiftp
      * RSV probes
      * fetch-crl
   2. SE 
      * dcache
      * bestman
      * Xrootd/Hadoop with GridFTP
   3. GUMS
   4. VOMS
   5. OSG client
      * globus client tools
      * srm client tools
      * Condor-G
   6. WN Client
   7. pilot jobs framework
   8. glexec


%TABLE{ sort="off" valign="top" }%
%EDITTABLE{  header="| Site | Contact Person | Start Date | ITB Version | Node Type | Notes |"  format="| text,10| text,10 | text,10 | text, 10 | text, 10 | textarea,3x20|" }%
| Site | Contact Person | Start Date | ITB Version | Node Type | Notes |
| UC-ITB | Suchandra Thapa | 11/15/2011 | Latest RPM versions as of 11/09/2011 | Hadoop/Bestman2, xrootd/Bestman2, dcache, GUMS, CE, WN | WN are not configured to run glexec. Atlas does not require having glexec. Suchandra has no pacman versions of the software. Suchandra uses certify for bulk certificate request.Need FQDN for services? . Suchandra will need a personal certificate. <br />CE - <br />   vtbv-ce.uchicago.edu <br />   rsv/vtbv-ce.uchicago.edu - rsv service cert <br />   http/vtbv-ce.uchicago.edu  - http service cert <br /> <br />GUMS - <br />   itb-gums.uchicago.edu <br />   http/vtbv-ce.uchicago.edu  - http service cert <br /> <br />dcache - <br />   itbv-dc1.uchicago.edu <br />   http/ <br /> <br />hadoop - <br />   itbv-bmh1.uchicago.edu <br />   http/ <br /> <br />xrootd - <br />    itbv-bmx1.uchicago.edu <br />    http/ <br /> |
| FNAL | Steve Timm | ? After Supercomputing | | | FQDNs: cloudgums.fnal.gov and fgitbgkc1.fnal.gov. Needs a personal certificate for Steve Timm. Do not use certify |
| BNL | Xin Zhao | 11/15/2011 | | CE | ITB CE nodes: gridtest01.racf.bnl.gov and gridtest02.racf.bnl.gov. Xin  Zhao needs a personal certificate <br /> |
| UCSD | Terrence Martin | 11/15/2011 | | CE | Will do CE level testing with a gridmapfile on our ITB host. CE is not currently talking to GUMS. CE is sending sending jobs to production WNs so WNs will not be tested. <br /> <br />Question from Terrence: If I want to switch my systems to the new <br />CA do you know if the software for requesting large numbers of certs via grid- <br />admin called "certify" will work with this new CA? |
| FNAL_CMS | Tony Tiradani | 11/15/2011 | | CE (RPM), CE (Pacman), Worker Node (RPM), glexec, glideinwms | Worker nodes connect to Fermilab Production GUMS server, which will not have the DigiCert CA installed. Thus, we should find an ITB GUMS server for the worker nodes. CE FQDNs: cms-xen13.fnal.gov, cms-xen15.fnal.gov, WN FQDN: cms-xen30.fnal.gov, cms-xen31.fnal.gov, cms-xen32.fnal.gov. Needs a Personal Certificate for Tony Tiradani. <br /> <br />Tony will also test glidein-wms. Service certificates needed for following FQDN <br />cms-xen6.fnal.gov <br />cms-xen7.fnal.gov <br />cms-xen8.fnal.gov |
| Nebraska | Brian Bockelman | 11/15/2011 | ? | ? | Limited participation. The site will only install the DigiCert root certificate on the nodes. They will NOT obtain new service/host certificates. They will test whether a user with DigiCert certificate can submit jobs. <br /> <br />Endpoints covered -  CEs, WNs, xrootd, and storage endpoints. |
| GOC | Rob Quick | 11/15/2011 | latest VOMS RPM version as of 11/9/2011 | VOMS | FQDN: voms-itb.grid.iu.edu. Personal certificates: Rob Quick, Kyle Gross, Elizabeth Chism |

---+++ Test Status



%TABLE{ sort="off" valign="top" }%
%EDITTABLE{  header="| Site | Contact Person | Installed Digicert CA from Yum | Installed Digicert Host/Service Cert | Tested Using Digicert Personal Cert |  Enable users from new VOMS-ITB  | Software/Services Tested | Notes |"  format="| text,10| text,10 | text,10 | text, 10 | text, 10 | textarea,3x20 | textarea,3x20|" }%
| Site | Contact Person | Installed Digicert CA from Yum | Installed Digicert Host/Service Cert | Tested Using Digicert Personal Cert | Enable users from new VOMS-ITB | Software/Services Tested | Notes |
| UC-ITB | Suchandra Thapa | | | | | | |
| FNAL | Steve Timm | | | | | | |
| BNL | Xin Zhao | | | | | | |
| UCSD | Terrence Martin | | | | | | |
| FNAL_CMS | Tony Tiradani | | | | | | |
| GOC | Rob Quick | | | | | | |
| Nebraska | Brian Bockelman | | | | | | |
*NOTE* : If any of the pieces fail the test please record the failure and provide details. If you did not test a particular software/service please also make a note of it.




-- Main.AnandPadmanabhan - 08 Nov 2011
