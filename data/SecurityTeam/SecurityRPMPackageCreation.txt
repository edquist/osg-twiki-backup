%META:TOPICINFO{author="AnandPadmanabhan" date="1315324748" format="1.1" version="1.1"}%
---++Building RPM packages for software  from OSG security team

This page is intended only for documenting steps for building RPM packages for software produced/packaged by OSG security team. It is intended to just supplement the detailed [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/RPMDevelopmentGuide][rpm development guide]]. This assumes you have already installed osg-build. If not follow instruction at [[https://twiki.grid.iu.edu/bin/view/Documentation/VDTRPMBuildBox]]

---+++ OSG security team packaged software
   * OSG CA scripts (osg-update-certs, osg-ca-manage )
   * OSG certificate scripts (original PPDG-Cert-Scripts)
   * OSG CA files (These are CA packages)

The corresponding packages in RPM in vdt repositories are 
   * osg-ca-scripts
   * osg-cert-scripts
   * osg-ca-certs, igtf-ca-certs, osg-ca-certs-experimental (do we need old format in  future?)

---+++ Steps for osg-ca-scripts and osg-cert-scripts
   * Both S/W are OSG owned. Hence the source code needs to be placed in OSG software SVN (https://vdt.cs.wisc.edu/svn/software/). The [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/RPMDevelopmentGuide][development guide]] contains instruction on how to structure this directory and how to get access to SVN.
   * Once the source code is ready put the tarball in the upsteam directory at UW. Note this upstream directory is different than the svn.
   * In the SVN at UW (https://vdt.cs.wisc.edu/svn/native/) under package directory update the rpm spec file (osg/package.spec) and the upsteam file (upstream/developer.tarball.source) appropriately to reflect to new release and point to the new version  of tarball respectively.
   * Build the package using osg-client tools
      * Test creating the package with rpmbuild, mock and koji. rpmbuild should catch any errors in your spec file and mock should provide isolation from your environment. Finally Koji is what is used as a build tool by OSG for all its packages.
      *  Using rpmbuild: cd package_dir; osg-client rpmbuild .
      *  Using mock: cd package_dir; osg-client mock .
      *  Using koji: cd package_dir; osg-client koji .
   * Documentation the process of promoting the build to production is found at: [[https://twiki.grid.iu.edu/bin/view/Documentation/KojiWorkflow#Promoting_Builds_from_Developmen]]

---+++  References
   *  [[https://twiki.grid.iu.edu/bin/view/SoftwareTeam/RPMDevelopmentGuide][Development guide]]
   * [[https://twiki.grid.iu.edu/bin/view/Documentation/KojiWorkflow][Koji workflow]] 

-- Main.AnandPadmanabhan - 06 Sep 2011
