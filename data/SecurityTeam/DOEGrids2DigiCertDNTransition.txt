%META:TOPICINFO{author="JimBasney" date="1330718279" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="DigiCertPilotProject"}%
---+!! Plan for DOEGrids to !DigiCert Distinguished Name Transition

The [[OSGCATransition2012][2012 OSG CA Transition]] will require OSG participants who currently hold certificates from the DOEGrids CA to obtain certificates from a new CA (expected to be the [[http://www.digicert-grid.com/][DigiCert Grid CA]]). Since each [[http://www.igtf.net/][IGTF]] accredited CA must issue certificates with non-overlapping names, the certificates from the new CA will have different names (called Distinguished Names or DNs). This plan documents the implications of this name change and procedures for making this transition as smooth as possible for OSG participants.

%TOC%

---++ Impacts

The most significant impact of the DN change is that OSG participants will need to register new DNs in VOMS for any certificates used to submit jobs or access data. This includes both user certificates and pilot certificates.

DN changes will also impact data access. (Requires investigation... "As for files on disk/tape, access to these shouldn't rely on fine-grained UNIX identity anyway. For the cases where it must (like dCache at BNL) everyone from a given VO is mapped to a single group account anyway." Still, at least CMS relies on individual DN to account mappings. Need to determine how widespread that is.)

Other OSG services that will require DN registration updates are:
   * https://twiki.grid.iu.edu
   * https://oim.grid.iu.edu
   * https://osg-docdb.opensciencegrid.org:440/cgi-bin/DocumentDatabase/

---++ Prior Experience

---+++ UK eScience

"There are technical limitations in VOMS that can be problematic if DNs are preserved when the CA changes.  There's an ongoing issue with the UK eScience CA doing precisely this, and is getting resolved one DN at a type by hand."

---++ VO Details

---+++ ALICE

---+++ ATLAS

---+++ CMS

Brian Bockelman reports that CMS relies on individual DN to account mappings for output data.

---+++ LIGO

---++ Technical Details

---+++ Software Support

VOMS has the concept of multiple DNs per user, so users can retain their VO roles when their DN changes. However, currently this feature does not work well with GUMS. (More details needed...)

GUMS does not have the concept of multiple DNs per user in the web interface, unless you use the manual mapping feature.  When a user's DN changes, sites:
   * Don't have any files on disk from the user and just ignore it.
   * Already have the user mapped manually, and just alter the manual mapping.
   * Log into the !MySQL interface and change the user account mapping by hand.

---+++ Distinguished Names

Certificates issued by the DOEGrids CA contain distinguished names of the following forms:
   * /DC=org/DC=doegrids/OU=People/CN=<em>full name ID#</em>
   * /DC=org/DC=doegrids/OU=Hosts/CN=<em>fqdn</em>
   * /DC=org/DC=doegrids/OU=Services/CN= <em>servicename</em>

For example:
   * /DC=org/DC=doegrids/OU=People/CN=James Alan Basney 710056
   * /DC=org/DC=doegrids/OU=Hosts/CN=ce.example.edu
   * /DC=org/DC=doegrids/OU=Services/CN=uscmspilot/cmssrv105.fnal.gov

Certificates issued by the !DigiCert Grid CA contain distinguished names of the following forms:
   * /DC=com/DC=DigiCert-Grid/...
   * /DC=com/DC=DigiCertGrid/...
   * /C=US/O=DigiCert Grid/...

For example:
   * /DC=com/DC=DigiCert-Grid/OU=People/CN=Jim Basney
   * /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=ce.example.edu