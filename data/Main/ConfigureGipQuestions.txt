%META:TOPICINFO{author="KyleGross" date="1225985950" format="1.1" version="1.3"}%
%META:TOPICPARENT{name="JohnWeigand"}%
---+!!<nop>configure-osg-gip.sh questions
%TOC%
%STARTINCLUDE%

---++ Introduction
This document is intended as a working discussion of the new questions being asked for in the new <i>./monitoring/configure-osg-gip.sh</i> script and the variables contained in the new <i>./monitoring/gip-attributes.conf</i> file.

These variables are used in the <i>./vdt/setup/configure_gip</i> script.


---++configure-osg-gip.sh questions
---+++Do you want to publish your srm information through GIP (Y/n): [n]

---+++Do you want to publish your gums monitoring information through GIP (Y/n): [n] 
If you wish to publish the status of your GUMS server, a script will periodically probe your GUMS server with an authorization request and record the success or failure in the GLUE schema.

The probe is activated on the CE node, but there is special configuration required in the GUMS server's <i>gums.config</i> for the special authorizations to be successful. Until those changes are made on the GUMS server side, your GUMS server status will show as unavailable.

The <i>configure_gip</i> will populated the following wrapper script:
<DD><i>VDT_LOCATION/lcg/var/gip/provider/osg-info-dynamic-providers</i></DD>

<TABLE>
<TR bgcolor="cyan"><TD>Answer</TD><TD>Wrapper script contents</TD></TR>
<TR><TD>y</TD>
<TD><i>VDT_LOCATION/lcg/libexec/osg-info-gums-status-probe.sh VDT_LOCATION</i></TD>
</TR>
<TR><TD>n</TD>
<TD><i>VDT_LOCATION/lcg/libexec/osg-info-software-provider $app/etc $fullhost</i></TD>
</TR>
</TABLE>

<b>Questions:</b>
   1 If the gums probe is activated, how is the data provided by the <i>osg-info-software-provider</i> script generated. Is it also invoked or collected in the <i>osg-info-gums-status-probe.sh</i> script.

---+++Please enter SE where gsiftp will is running: [UNAVAILABLE]
This questions assumes that an SE (Storage Element) is required for every CE (Compute Element).

<b>Questions:</b>
   1 Globus web services requires a <i>gsiftp</i> service in order to handle any streaming of output or return of files from the process run.  Does this assume or preclude a <i>gsiftp</i> running on the CE node?   I do not know if the <i>gsiftp</i> has to be on the CE node for web services or if it can be elsewhere?

---+++Please enter the Access Path to the data directory on UNAVAILABLE: [UNAVAILABLE]
<b>Questions:</b>
   1 Is this the $OSG_DATA directory or is it assumed to be a common SE data directory?
   1 Can this be the CE nodes data directory?

---++configure-osg-gip.sh behavior
---+++Scenario 1 - no SE / no GUMS data published
<verbatim>
Do you want to publish your srm information through GIP (Y/n): [n] n
Do you want to publish your gums monitoring information through GIP (Y/n): [n] n
We noticed that your Default SE (UNAVAILABLE), is different than your CE host (cms-xen1.fnal.gov).
Please enter SE where gsiftp will is running: [UNAVAILABLE]
Please enter the Access Path to the data directory on UNAVAILABLE: [UNAVAILABLE]
writing configuration files...
Configuring GIP...
</verbatim>

<b>gip-attributes.conf</b>:
<verbatim>
BATCH="condor"
SRM=0
DISK=1
SE_NAME=""
SE_HOST=""
SA_PATH=""
SE_DISK="UNAVAILABLE"
DATA="UNAVAILABLE"
GUMS="0"
SRM=0
#--- EXPORT VARIABLES ---#
export BATCH
export DISK
export SE_NAME
export SE_HOST
export SA_PATH
export SE_DISK
export DATA
export GUMS
</verbatim>

---+++Scenario 2 - publishing SRM, GUMS, GSIFTP information
<verbatim>
Do you want to publish your srm information through GIP (Y/n): [n] y
Do you want to publish your gums monitoring information through GIP (Y/n): [n] y
Do you also wish to publish your gsiftp information (Y/n): [Y] n
What is the siteName of your srm Storage Element? (e.g. UIOWA-ITB): [UNAVAILABLE] SE_SITE_NAME
What is the hostname of your srm Storage Element? (e.g. rsgrid3.its.uiowa.edu) : [UNAVAILABLE]            
... This is a required entry. Try again.
What is the hostname of your srm Storage Element? (e.g. rsgrid3.its.uiowa.edu) : [UNAVAILABLE] SE_HOSTNAME
(This will be your base directory, e.g if your accessible path is your cms accessible area is "/pnfs/xxxx.edu/data1/cms") your full access path may be "/pnfs/xxxx.edu/"
What is the Full path of the root directory for this storage area? : [UNAVAILABLE] 
... This is a required entry. Try again.
What is the Full path of the root directory for this storage area? : [UNAVAILABLE] 
STORAGE_AREA_ROOT_DIRECTORY
Do you want to use a simplified version where all supported VOs will be assigned the same local directory (Y/n): [y]
y
What is the local directory that is the root for all vos ?
LOCAL_DIRECTORY_FOR_ALL_VOS
writing configuration files...
Configuring GIP...
</verbatim>

<b>gip-attributes.conf</b>:
<verbatim>
BATCH="condor"
SRM=1
DISK=0
SE_NAME="SE_SITE_NAME"
SE_HOST="SE_HOSTNAME"
SA_PATH="STORAGE_AREA_ROOT_DIRECTORY"
SE_DISK=""
DATA=""
GUMS="1"
SRM=1
VO_cdf_DIR="LOCAL_DIRECTORY_FOR_ALL_VOS"
   :
<b>.... one for each VO... </b>
VO__DIR="LOCAL_DIRECTORY_FOR_ALL_VOS"
#--- EXPORT VARIABLES ---#
export BATCH
export DISK
export SE_NAME
export SE_HOST
export SA_PATH
export SE_DISK
export DATA
export GUMS
export VO_cdf_DIR
  :
<b>.... one for each VO... </b>
</verbatim>


---++Adding a new VirtualOrganizations/VOInfo or dropping support for a VO




%STOPINCLUDE%
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
*Major updates*:%BR%
<!--Future editors should add their signatures beneath yours!-->
--- Main.JohnWeigand - 08 Jan 2007<br>

%INCLUDE{ "Documentation.ToolsBottomMatter" }%