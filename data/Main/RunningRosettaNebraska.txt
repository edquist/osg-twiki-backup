%META:TOPICINFO{author="DerekWeitzel" date="1275337857" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="HccGridApplications"}%



-- Main.DerekWeitzel - 31 May 2010


---+!! Running CS-Rosetta at Nebraska


---++ Starting the job

   1. Log into glidein with the username provided.
   <pre class="screen">
   ssh username@glidein.unl.edu</pre>
   1. Download the newest version of the Rosetta Workflow
   <pre class="screen">
   svn co svn://t2.unl.edu/brian/GridSubmission/Rosetta/glidein Rosetta</pre>
   1. Run the Rosetta workflow:
   <pre class="screen">
   cd Rosetta
   ./createJob.sh TAB_FILE</pre>

   * =TAB_FILE= is *.tab file.

   %TWISTY{
mode="div"
showlink="Example output"
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
[dweitzel@glidein Rosetta]$ ./createJob.sh PrimaseCTDnohis.tab 
Using PrimaseCTDnohis.tab for job...

-----------------------------------------------------------------------
File for submitting this DAG to Condor           : rosetta.dag.condor.sub
Log of DAGMan debugging messages                 : rosetta.dag.dagman.out
Log of Condor library output                     : rosetta.dag.lib.out
Log of Condor library error messages             : rosetta.dag.lib.err
Log of the life of condor_dagman itself          : rosetta.dag.dagman.log

Submitting job(s).
Logging submit event(s).
1 job(s) submitted to cluster 25633.
-----------------------------------------------------------------------
</pre>

%ENDTWISTY%

---++ Monitoring the jobs
On glidein.unl.edu, type the command:
<pre class="screen">
condor_q username
</pre>
Where =username= is your provided username.  You will receive an email the the job has completed.

The job will create a unique directory where the final output will be placed.  The name of the directory is similar to:
<pre class="screen">
working_dir.05.31.10-15.17.48</pre>
The name is a function of the time of submission.


---++ Changing Parameters
In the file =scripts/init-runRosetta.sh=, you can change the values passed into Rosetta.  Using =sed=, you can change any value inside runRosetta.com.  Notice that the nstruct is reduced because the workflow submits 1200 jobs, then concatenates the output together.

<pre class="file">
...
echo "paths.txt:"
cat paths.txt

echo Changing the number of structs that are going to be made to 20
sed -i 's/-nstruct\ 20000/-nstruct\ 20/g' runRosetta.com

echo ******** Beginning Run ********
#Run the program
./runRosetta.com
...
</pre>
