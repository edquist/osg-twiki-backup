%META:TOPICINFO{author="KyleGross" date="1225985950" format="1.1" version="1.11"}%
%META:TOPICPARENT{name="TWikiUsers"}%
---++ glideinWMS
   * Presentations:
      * [[http://www.cs.wisc.edu/condor/PCW2007/presentations/igor_GlideinFactories_final.pdf][An overview of glidein factories by Igor Sfiligoi]]
      * [[https://indico.fnal.gov/getFile.py/access?contribId=18&sessionId=7&resId=1&materialId=slides&confId=870][glideinWMS and gLExec]]

   * glideinWMS - installation and running
      * [[http://home.fnal.gov/~sfiligoi/glideinWMS/doc/install/index.html/][A somewhat obsolete, but still useful, installation guide]] 
      * *notes:*
         * the latest version of installation script from Igor, while formally providing a possibility to operate with separately (and independently) installed components such as Apache and [[http://www.postgerswl.org][PostgreSQL]], still makes certain assumptions about the paths, so it's always a good idea to install everything from scratch using the script and opt to you the suggested default values
         * it is best to remove directories contaning Condor executables from the path before commencing the installation
         * the environment variable CONDOR_CONFIG should be unset
            * if installing a specific component such as frontend etc, individually, one should set CONDOR_LOCATION=/opt/glidecondor and CONDOR_CONFIG=/opt/glidecondor/etc/condor_config
         * the Apache installation based on the recommended RPM fails during the dependency check of the RPM. However, it is still possbile to install and start the service separately, then restart when needed
      * Grid security:
         * one needs a valid host pair: certificate and key, on the machines that constitute the glideinWMS factory. This can be done by the RCAF personnel
         * one also needs a user certificate and key to operate the glideinWMS. The operator should apply to the certificate service at www.doegrids.org, and then follow the instructions. Basically, once the notification arrives in e-mail, a certificate can be imported into the Web browser on a user's machine, then it must be exported together with the key in "p12" format (which may be associated with *.pfx extension). After that, the user generates
         $ user certificate: openssl pkcs12 -in yourCert.pfx -clcerts -nokeys -out $HOME/.globus/usercert.pem
         $ user key: openssl pkcs12 -in yourCert.p12 -nocerts -out $HOME/.globus/userkey.pem
         $ proxy: /opt/vdt/globus/bin/grid-proxy-init -debug
         * validity of the proxy can be verified by _/opt/vdt/globus/bin/grid-proxy-info -all_
         * one needs to copy the certificate frmo _/tmp_ to _/direct/usatlas+u/mxp/glideinWMS/install_

         * [[http://home.fnal.gov/~sfiligoi/glideinWMS/doc/install/collector_install.html][glidein Pool Collector]] - note on specifying the DNs
         * one needs to make sure that environment variables like OSG_VDT* are pointing to the right location
   * [[http://www.postgerswl.org][PostgreSQL]]:
      * the installation script will install the product in _/var/lib/pgsql/_, and the data will be kept in the directory _/var/lib/pgsql/data_
      * When prompted for the base RPM name, one must specify the truncated name like _/direct/usatlas+u/mxp/downloads/postgresql-8.2.4-1PGDG.i686.rpm_. The installer will then automatically expand that name to include ==perl== and other components
      * starting the server is described  [[http://www.postgresql.org/docs/8.2/static/server-start.html][here]], in particular in our case
         $ by using the postgres executable: ==postgres -D /var/lib/pgsql/data==
         $ by using the wrapper: ==pg_ctl start -l logfile==
      * shutting down the server can by sending it SIGTERM or SIGINT signals, or, for a slightly more graceful shutdown: ==pg_ctl stop==
      * the [[http://www.postgerswl.org][PostgreSQL]] database is used to store data related to the Condor Quills, and this requires that two user account be created: _quillreader_ and _quillupdater_. The glideinWMS software will default to the standard port when trying to establish connection with the server. The passwords for these accounts are defined during the installation, and in our case are something like _quillread_ and _quillupdate_.
   * GCB - generic connection broker:
      * needs to be accessible on the public network
      * for limited testing, can use a FNAL broker at cms-xen10.fnal.gov
      * going forward, we can configure our test machines to have conduits and serve same function
      * when using install script, an entry is written into _/opt/glidecondor/etc/gcb-routing-table_ (to be verified)

   * glidein Factory -- must be installed as the user, not root
      * needs a name for entry point (can be anything, like gridgk01 or any such symbolic name)
      * needs the actual resource gatekeeper specification, such as: gridgk01.racf.bnl.gov:2119/jobmanager-condor
   * VirtualOrganizations/VOInfo Front End -- must be installed as the user, not root
   * Typical install: single factory, multiple frontends. However, one can also have multiple factories
   * Monitoring is done in the usual manner: condor_q, condor_status
   * Configuration file for the factory can be found at ~/glideinsubmit/*/glideinWMS.xml

   * Starting the factory and frontend:
      * _python glideFactory.py 60 5 /direct/usatlas+u/mxp/glideinsubmit/glidein_v1_2 </dev/null&_
         * the actual submission script can be found at ==glidein_v1_2/entry_grid10/job.descript==
      * _python glideinFrontend.py 60 5 myconfig.cfg < /dev/null &_


---++ Twiki-related links

   * %TWIKIWEB%.ATasteOfTWiki - view a short introductory presentation on TWiki for beginners
   * %TWIKIWEB%.WelcomeGuest - starting points on TWiki
   * %TWIKIWEB%.TWikiUsersGuide - complete TWiki documentation, Quick Start to Reference
   * Sandbox.%HOMETOPIC% - try out TWiki on your own
   * Sandbox.%TOPIC%Sandbox - just for me

---++ My Personal Data

Note: if personal data is being stored using a secret database, then it is only visible to the user and to administrators.

| E-mail | %USERINFO{"%TOPIC%" format="$emails"}% |

---++ My Personal Preferences

Uncomment preferences variables to activate them (remove the #-sign). Help and details on preferences variables are available in %TWIKIWEB%.%WIKIPREFSTOPIC%.

   * Show tool-tip topic info on mouse-over of %TWIKIWEB%.WikiWord links, on or off:
      * #Set LINKTOOLTIPINFO = off
   * Horizontal size of text edit box:
      * #Set EDITBOXWIDTH = 70
   * Vertical size of text edit box:
      * #Set EDITBOXHEIGHT = 22
   * Style of text edit box. =width: 99%= for full window width (default), =width: auto= to disable.
      * #Set EDITBOXSTYLE = width: 99%
   * Write protect your home page: (set it to your %TWIKIWEB%.WikiName)
      * #Set ALLOWTOPICCHANGE = Main.MaximPotekhin

---++ Related Topics

   * %TWIKIWEB%.ChangePassword for changing your password
   * %TWIKIWEB%.ChangeEmailAddress for changing your email address
   * %MAINWEB%.%WIKIUSERSTOPIC% has a list of other TWiki users
   * %TWIKIWEB%.UserDocumentationCategory is a list of TWiki user documentation
   * %TWIKIWEB%.UserToolsCategory lists all TWiki user tools

%META:FORM{name="%25MAINWEB%25.UserForm"}%
%META:FIELD{name="FirstName" attributes="" title="<nop>FirstName" value="Maxim"}%
%META:FIELD{name="LastName" attributes="" title="<nop>LastName" value="Potekhin"}%
%META:FIELD{name="OrganisationName" attributes="" title="<nop>OrganisationName" value="Brookhaven National Laboratory"}%
%META:FIELD{name="OrganisationURL" attributes="" title="<nop>OrganisationURL" value="www.bnl.gov"}%
%META:FIELD{name="Profession" attributes="" title="Profession" value="Applications Architect"}%
%META:FIELD{name="Country" attributes="" title="Country" value="USA"}%
%META:FIELD{name="State" attributes="" title="State" value="NY"}%
%META:FIELD{name="Address" attributes="" title="Address" value="BNL Bldg.510A, Upton, NY 11973"}%
%META:FIELD{name="Location" attributes="" title="Location" value=""}%
%META:FIELD{name="Telephone" attributes="" title="Telephone" value="(631) 344 3621"}%
%META:FIELD{name="VoIP" attributes="" title="<nop>VoIP" value=""}%
%META:FIELD{name="InstantMessagingIM" attributes="" title="<nop>InstantMessaging (IM)" value=""}%
%META:FIELD{name="Email" attributes="" title="Email" value="potekhin@bnl.gov"}%
%META:FIELD{name="HomePage" attributes="" title="<nop>HomePage" value=""}%
%META:FIELD{name="Comment" attributes="" title="Comment" value=""}%
%META:PREFERENCE{name="VIEW_TEMPLATE" title="VIEW_TEMPLATE" type="Local" value="UserView"}%
