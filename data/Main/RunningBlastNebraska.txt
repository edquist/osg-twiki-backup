%META:TOPICINFO{author="BrianBockelman" date="1275326348" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="HccGridApplications"}%
---+ Running BLAST at Nebraska

The BLAST application we have put together is designed to run a large number of BLAST queries in parallel.  If you want just one or two queries performed, we recommend using the NCBI website:

http://www.ncbi.nlm.nih.gov/

---++ Starting the job

First, download and configure the software:
   1. Log into glidein with the username provided.
   <pre class="screen">
   ssh username@glidein.unl.edu</pre>
   1. Download the newest version of the BLAST Workflow
   <pre class="screen">
   svn co svn://t2.unl.edu/brian/osg_blast</pre>
   1. If you have not done so lately, re-initialize your proxy
   <pre class="screen">
   voms-proxy-init --voms hcc:/hcc</pre>
   1. Change the directory to the BLAST directory.
   <pre class="screen">
   cd osg_blast</pre>
   1. Edit the blast.cfg to reflect your setup.  For most people, the *only* line which needs to be changed is the =db= line.  Check with an HCC sysadmin for the list of installed DB, or to get one of your own installed. 

Next, chose *one* of the below steps to launch jobs:
   1. Submit a query, one at a time
   <pre class="screen">
   ./blast_mgr --single_submit 1 path/to/query.fasta </pre>
   Substitute =path/to/query.fasta= with the location of your FASTA-formatted DB query
   1. Submit a job for each query in a directory.  Create a new directory, and place all your queries in it (there will be one Condor job per file in the directory):
   <pre class="screen">
   ./blast_mgr --directory_submit queries/ </pre>
   Substitute =queries/= above for the location of the query directory you'd like to process.

Here is an example submission command, processing all of the queries in the directory =queries/=
%TWISTY{
mode="div"
showlink="Show example output"
hidelink="Hide"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
<pre class="screen">
[bbockelm@glidein osg_blast]$ ./blast_mgr --directory_submit queries/
Submitting job(s)....
Logging submit event(s)....
4 job(s) submitted to cluster 25630.
</pre>
%ENDTWISTY%

The query output will go into the directory you submitted the jobs from, and be named blast.out.$JOBID

---++ Monitoring the jobs
On glidein.unl.edu, type the command:
<pre class="screen">
condor_q username
</pre>
Where =username= is your provided username.

The runtime of your jobs can vary widely depending on the size of the sequence database and the size of your queries.
