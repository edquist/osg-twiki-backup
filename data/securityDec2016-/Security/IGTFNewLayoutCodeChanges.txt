%META:TOPICINFO{author="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dAnand_20Padmanabhan_2075166" date="1296785408" format="1.1" version="1.4"}%
%META:TOPICPARENT{name="SecurityTeamWorkingArea"}%
---++Code changes necessary for moving to the new IGTF layout
Table below summarizes changes necessary for the applications hat will run on a computer with openssl 0.9 or 1.0 versions.

| S/W | !OpenSSL 0.9 | VDT Release | Production Release | !OpenSSL 1.0 | VDT Release | Production Release | 
| vdt-update-certs (Uses wget and downloads the tarball from the GOC/VDT cache) | Needs changes. The way vdt-update cert handle symlinks when removing CA. | [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p23.html][VDT 2.0.0p23 Update] | [[ReleaseDocumentation.OSG1216ReleaseNotice][1.2.16]] (Production) | Needs changes. The way vdt-update cert handle symlinks when adding and removing CA. The code has been updated to work with openssl 1.0 but it has not been tested with openssl 1.0 on the ITB.| [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p23.html][VDT 2.0.0p23 Update]] | [[ReleaseDocumentation.OSG1216ReleaseNotice][1.2.16]] (Production) |
| vdt-ca-manage | Needs change | [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p23.html][VDT 2.0.0p23 Update] | [[ReleaseDocumentation.OSG1216ReleaseNotice][1.2.16]] (Production) | Needs change. See VDT ticket 7615 for details. (http://crt.cs.wisc.edu/Ticket/Display.html?user=guest&pass=guest&id=7615). The code has been updated to work with openssl 1.0 but it has not been tested with openssl 1.0 on the ITB. | [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p23.html][VDT 2.0.0p23 Update]] | [[ReleaseDocumentation.OSG1216ReleaseNotice][1.2.16]] (Production) |
| RSV CA probe Looks at the first column of Index file and compares with the hash values of the ca files on disk. (Does not compare tarball versions because sites can use roms instead of pacman) | Needs no changes | No release needed | No release needed | Needs change. Do we have the new rsv code ready?  Yes we have code that has been currently successfully deployed and tested with openssl 0.9 on ITB, it still needs to be tested with openssl 1.0. | Production release pending. | ITB release planned for week of Dec 6. (source: ITB meeting) |
| RSV CA probe for WLCG  Looks at the first column and the last columns of Index file and compares with the hash values of the ca files on disk. (Does not compare tarball versions because sites can use roms instead of pacman) | Needs no change | No release needed | No release needed | Needs change. New version being deployed and tested with openssl 0.9 on ITB, it still needs to be tested with openssl 1.0. | Production release pending. | ITB release planned for week of Dec 6. (source: ITB meeting) |
| RSV CRL probe. Looks at the first column of the index file and then checks the .r0 file with the same hash value | Needs no change | No release needed | No release needed | Needs change. New version being deployed and tested with openssl 0.9 on ITB, it still needs to be tested with openssl 1.0. | Production release pending. | ITB release planned for week of Dec 6. (source: ITB meeting) |
| Fetch-crl current version in VDT Looks at all of the .crl_url files on site's disk and downloads the CRL files. Calculates the hash value with whichever ssl library is on system path and create XXX.r0 file on disk | Needs no change | (Fetch crl 2.8.5 released) [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p21.html][VDT 2.0.0p21 Update]] | [[ReleaseDocumentation.OSG1214ReleaseNotice][1.2.14]] (Production) | Needs no change. We may have to move to fetch-crl 3.0, otherwise crls might be downloaded multiple times. Need testing with openssl 1.0 on ITB. | (Fetch crl 2.8.5 released) [[http://vdt.cs.wisc.edu/releases/2.0.0/release-p21.html][VDT 2.0.0p21 Update]] | [[ReleaseDocumentation.OSG1214ReleaseNotice][1.2.14]] (Production) |


All the above software were tested locally to be backward compatible, i.e. the work with the old layout. However this has not been tested on the ITB.

---+++How to test new software with the old layout on ITB.
   * Create a new ITB CA software release which uses the old IGTF format.
   * Ask ITB sites to update to new cache (should happen automatically if running vdt-update-certs).
   * Conduct regular ITB validation tests, in particular check the status of RSV probes.
   * Once this has been successfully tested, revert back to the new layout and test the transition process from the perspective of the sites.

-- Main.AnandPadmanabhan - 01 Oct 2010