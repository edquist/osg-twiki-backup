%META:TOPICINFO{author="JimBasney" date="1312905926" format="1.1" reprev="1.6" version="1.6"}%
%META:TOPICPARENT{name="SecurityTeamWorkingArea"}%
---++ OSG Identity Management Tasks (2011)
%TOC%

This page documents OSG identity management tasks to be pursued by Main.JimBasney.
See [[IdentityMgmtRoadmap2011]] for a wider ranging OSG identity management roadmap.

---+++ Prioritized OSG IDM Goals

The following goals (in priority order) motivate our work. Individual projects are listed under each goal to which they apply.

   1. Better support use of CAs besides DOEGrids for OSG personal certificates (i.e., support multiple "suppliers" for better resiliency, flexibility).
      * Projects: [[#CILogon_Certificates_for_Local_C][CILogon Certificates for Local Cluster Access]], [[#CILogon_Use_by_OSG_VO][CILogon Use by OSG VO]]
   1. Provide documented and supported alternatives to the DOEGrids CA for OSG host certificates (i.e., in case of DOEGrids CA service disruption).
      * Projects: [[#XSEDE_Provided_Host_Certificates][XSEDE Provided Host Certificates for OSG Sites]], [[#InCommon_Provided_Host_Certifica][InCommon Provided Host Certificates for OSG Sites]]
   1. Provide IDM support for OSG's role as an XSEDE Service Provider (i.e., enable OSG access via XSEDE mechanisms).
      * Projects: [[#OSG_XSEDE_User_Identity_Manageme][OSG-XSEDE User Identity Management]]
   1. Enable OSG access without user certificates (via glide-ins, portals, gateways that use robot/community certificates).
      * Projects: [[#OSG_Access_by_Users_Without_Cert][OSG Access by Users Without Certificates]]
   1. After obtaining additional experience using CAs besides DOEGrids, integrating with XSEDE, and enabling access without user certificates (i.e., the above goals), revisit the larger end-to-end OSG identity management approach.
      * Projects: [[#End_to_End_Vision_for_OSG_Identi][End-to-End Vision for OSG Identity Management]]

---++++ Non-Goals

   * Users of the LHC VOs can obtain certificates from DOEGrids and CERN. Things are working OK for these VOs today. We focus on other VOs for this work.
   * Current OSG users have already obtained their certificates. We focus on making things better for *new OSG users*.

---+++ Principles

   * In achieving our goals, we always strive to improve the usability and maintainability of OSG identity management wherever possible.
   * When possible, we prefer to use [[http://www.igtf.net/][IGTF]] accredited CAs for interoperability and consistency, but we make exceptions as needed.
   * We are committed to participation in the NSF eXtreme Digital (XD) program, and one example of this commitment is for OSG to fulfill the role of an XSEDE Service Provider.
   * OSG will continue to maintain a project identity that is independent from XSEDE. Not all OSG users will be XSEDE users.
   * OSG should provide end-to-end caretaking of users as they follow identity management processes. OSG shouldn't leave OSG users stranded at an external provider. This doesn't imply that OSG won't use external providers, but instead that OSG needs to manage relationships with those providers to avoid stranded users.
   * OSG identity management services must be reliable, to avoid service disruptions. Supporting identity management services from multiple external providers provides valuable redundancy. The design of identity management services must include fault and disaster recovery plans.

---+++ OSG IDM Projects

The following projects are listed in (rough) priority order.

---++++ CILogon Certificates for Local Cluster Access

Target completion date: Sep 30 2011

Contacts: Frank Wuerthwein (UCSD), Terrence Martin (UCSD)

Goal: Demonstrate the use of CILogon (https://cilogon.org/) for easily obtaining certificates for new users for local UCSD cluster access.

Scenario: A new student joins Frank Wuerthwein's group at UCSD, and Frank wants the student to quickly have access to the local UCSD cluster using standard OSG mechanisms (including certificate-based authentication) without registering the student in the CERN HR DB (which is a time-consuming process).

Setup:
   * [DONE] UCSD provides an !InCommon !IdP that is federated with !CILogon.
   * OSG distributes the CILogon Basic CA certificate so UCSD and other sites can install it. Currently this CA certificate is included in the experimental section of the [[https://dist.eugridpma.info/distribution/igtf/current/][IGTF distribution]] and is also available from http://ca.cilogon.org/downloads.
   * Frank configures the UCSD cluster to trust the CILogon Basic CA (i.e., installs the CA certificate and signing policy file in X509_CERT_DIR).
   * CILogon creates a custom interface for this use (https://cilogon.org/?vo=ucsd).

Process:
   * Student browses to https://cilogon.org/?vo=ucsd. The UCSD identity provider is automatically selected.
   * Student clicks "Log On".
   * Student enters username/password at UCSD !IdP.
   * Student downloads certificate from CILogon.
   * CILogon sends email to Frank saying a certificate has been issued to the student with certificate subject=DN.
   * Frank creates an account for the student on the local cluster and adds the DN for the student to the local cluster's grid-mapfile.
   * Frank tells the student that access is ready.
   * The student accesses the cluster using the CILogon certificate.

Deliverables:
   * Lessons learned document.
   * User and admin documentation for using CILogon certificates with local OSG clusters.

---++++ XSEDE Provided Host Certificates for OSG Sites

Goal: Provide a documented procedure for OSG site administrators to obtain IGTF accredited host certificates from XSEDE CAs.

Project Plan:
   * Phase I (target completion: Sep 30 2011): Document manual host certificate issuance by NCSA and TACC CAs for OSG sites.
   * Phase II (target completion: Jun 30 2012): Design and implement streamlined host certificate issuance workflow using new XSEDE CA service.

Currently the NCSA and TACC CAs can both manually issue IGTF accredited host certificates for OSG sites, but the procedure needs to be tested and documented. The XSEDE Security Operations team has a one year project (July 2011 - June 2012) to establish an "XSEDE CA" service that makes it easier for XSEDE Service Providers (such as OSG) to obtain host certificates. OSG needs to provide requirements for that XSEDE project and integrate with the resulting "XSEDE CA" service. We expect the OSG GOC to act as Registration Authority to validate these host certificate requests.

---++++ CILogon Use by OSG VO

Target completion date: Nov 30 2011

Contacts: Ruth Pordes, Chander

Goal: Demonstrate the use of CILogon (https://cilogon.org/) for easily obtaining certificates for new users of the OSG VO.

Setup:
   * Document OSG VO membership management procedures (or locate existing documentation), because when using the CILogon Basic CA or CILogon !OpenID CA, we don't rely on the CA for strong identity proofing but instead rely on VO membership management procedures for identity proofing.
   * Obtain approval from sites that support the OSG VO for use of a non-IGTF CA (i.e., the CILogon Basic CA and/or CILogon !OpenID CA).
   * OSG distributes CILogon CA certificates to sites that support the OSG VO.
   * Sites that support the OSG VO install CILogon CA certificates.
   * CILogon implements a streamlined process for users to register with the OSG VO. Likely this will initially be email-based.
   * User has OSG client software installed.

Process:
   * New OSG user browses to https://cilogon.org/?vo=OSG and selects an identity provider (i.e., an !InCommon campus, !ProtectNetwork, Google, Verisign, or !PayPal).
   * User clicks "Log On".
   * User clicks "request OSG VO membership" button. (This would be a one-time operation for each user. It is not yet implemented.)
   * User clicks "Download Certificate" button which downloads and installs a (short-lived?) certificate in the appropriate location for use with OSG client software.
   * User submits jobs (=condor_submit=), etc., using the certificate. (This may require running voms-proxy-init if we include FNAL.)

Success criteria:
   * Jobs submitted using a CILogon certificate to the OSG VO succeed across multiple OSG sites.

Deliverables:
   * Template for documenting VO registration processes.
   * Lessons learned document.
   * User and admin documentation for using CILogon certificates with a VO.

---++++ OSG-XSEDE User Identity Management

Contacts: Jim Weichel (FNAL), Dan Frasier (ANL), Kim Dillman (Purdue)

Goal: Design and implement identity management mechanisms for XSEDE users to access OSG resources.

Project Plan:
   * Phase I (target completion: Sep 30 2011): Document existing options for XSEDE users to access OSG resources.
   * Phase II (target completion: Jun 30 2012): Implement integrated identity management for streamlined access to OSG resources for XSEDE users.

Scenario: An existing XSEDE user is interested in also using OSG. The user submits a request for access to OSG resources through the XSEDE allocations process. If the request is approved, an OSG resource allocation is added to an XSEDE project of which the user is a member. The user is then able to access OSG resources via an XSEDE "account".

Initial discussion of technical details:
   * The user has an entry in the XSEDE User Database and can obtain IGTF accredited certificates from XSEDE CAs via XSEDE username/password, XSEDE OTP, or !InCommon.
   * Perhaps XSEDE should operate a VOMS server with a "sub-VO" for each allocated "XSEDE project" that has an OSG allocation.
   * XSEDE allocations are processed within 1-2 weeks (startup/educational) or quarterly (TRAC). New users can be added to an existing allocation (a.k.a. "project") within minutes: the user first creates a self-service account on the XSEDE User Portal, and then the project PI/manager adds the user to the project via the XSEDE User Portal.

---++++ !InCommon Provided Host Certificates for OSG Sites

Target completion date: Dec 15 2011

Goal: Demonstrate use of certificates from the [[http://incommon.org/cert][InCommon Certificate Service]] in OSG.

OSG is becoming an !InCommon member. !InCommon already provides host certificates to its members via the [[http://incommon.org/cert][InCommon Certificate Service]]. Although these certificates are not IGTF accredited, they are potentially useful for worker nodes which do not require out-of-site connections. Also, because these certificates are issued by a commercial CA that is already trusted by web browsers, the certificates are useful for HTTPS web sites and portals, so that users don't need to install the DOEGrids CA certificate in their web browser.

Milestones:
   * OSG joins !InCommon.
   * OSG subscribes to the !InCommon Certificate Service.
   * OSG obtains certificates from !InCommon for one or more opensciencegrid.org web sites.
   * OSG distributes the !InCommon CA certificate so OSG sites can install it.
   * One or more OSG sites use certificates from !InCommon for worker nodes. (Target sites need to be identified.)
      * This will work best for sites that themselves are InCommon Certificate Service subscribers, because OSG itself will likely not be able to obtain certificates for site DNS domains.
   * (Optional) One or more OSG sites use certificates from !InCommon for externally facing grid services (if the !InCommon CA is widely accepted by OSG participants).

---++++ OSG Access by Users Without Certificates

Target completion date: Feb 29 2012

Goal: Demonstrate and support access to OSG by users without certificates.

Scenarios:
   1. A user logs in to a VO submission host via SSH (password, SSH key, etc.) and submits jobs. The submission host sends the jobs to OSG using a "robot" (or "community") certificate, likely via a glide-in framework.
   1. A user access OSG resources via a web portal / science gateway. The portal/gateway uses a robot certificate.

This is already happening today with Nanohub in OSG and Fermilab. We need to better understand how this is working today and provide a policy framework for it to grow. This includes creating a process and a venue that can help sites and VOs understand each other's practices and requirements. We will collect common site security requirements and communicate them to VOs and help VOs answer these questions. For example we can create a template document that should be completed by VO security people. We will not determine relationships between sites or VOs, but help them understand one another. We expect that most site security requirements are very similar to one another and can be summarized in a page.

Policy Issues:
   * Does this conflict with push to use glexec for glide-ins? If the user doesn't have a certificate, we can't do glexec. This requires investigation / discussion.

Deliverables:
   * Documentation of existing practice.
   * Cookbook for new submission hosts / glide-in frameworks / portals / gateways to use robot certificates with OSG.

---++++ End-to-End Vision for OSG Identity Management

Target completion date: March 31 2012

Goal: As we work on the above tasks, we gather requirements and experience, resulting in the development of an end-to-end vision for OSG identity management.

Deliverable: An OSG identity management design document that describes current practices, identifies gaps, and proposes a coherent, end-to-end vision for OSG identity management going forward.
