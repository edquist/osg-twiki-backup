%META:TOPICINFO{author="JamesBarlow" date="1271883194" format="1.1" version="1.5"}%
%META:TOPICPARENT{name="OsgRaPlanning"}%
%DOC_STATUS_TABLE%

%TOC%

---+ Robot Certificates
---++ Introduction
Several use cases exist for the need of automated processes  to act on behalf of a person.
Such as RSV monitoring, data processing production (CDF), distributed data colleciton
systems (Mariachi), and others.
These are processes which act as clients and possibly as servers, not necessarily
located on a specific host or may be moved from one host to another, and
are unattended, so that decrypting the private key with a passphrase in not feasible.
The description below are proposed changes to the DOEGrids CP/CPS to
define these types of robot certificate.

I would point out that some similar use cases, and some versions of those above
are actually satisfied with our existing OU=Services certificates performing
as clients.  One can argue that this is the only case where an unencrypted private
key is allowed on disk and that OU=Robots should be strictly on hardware tokens,
but that is not my suggestion below.
---++ Use Cases
---+++ Questions
   1. Describe the intended use and purpose.
   2. Is the certificate identifying a client or server, or both?
   3. How many instances of the robot or automated process need access to the private key?
   4. An individual is responsible for the certificate.  How often will this individual interact with the robot process?  
   5. How long will it run unattended before someone notices that something has gone wrong? In other words, how will it be monitored?
   6. Can a certificate with private key stored only on a hardware token be used?  If not, what protections can be used to ensure that the private key is not compromised?
   7. Why is it not possible to locate the process on a specific host, so a service certificate may be used?

---+++ RSV

---++ CP/CPS changes relative to V 2.9
Additions in %BLUE% BLUE %ENDCOLOR%.

---+++ 1.1.1 General Definitions
%BLUE%
<b>Hardware Security Module (HSM)</b><br>
A hardware device for storing private keys and performing cryptographic operations meeting FIPS 140.

<b>Robot Certificate</b><br>
A certificate for an unattended service or process running on behalf of a person.
%ENDCOLOR%

---+++ 1.3.3 End Entities
DOE GRIDS PKI issues Person, Host%BLUE%, Robot%ENDCOLOR% and  Service 
certificates to scientists, engineers, graduate students, and others working on 
Department of Energy Scientific Research programs as allowed in the ESnet AUP

For a person certificate it will be the subscriber, but for a host%BLUE%, robot%ENDCOLOR%
or service certificate the end entity may be some process running on a machine.


---+++ 1.3.4 Applicability

%BLUE%<b>Robot certificates</b> can be used to identify a person responsible for an 
unattended service or process acting as client and/or server.  
These certificates may be used to authenticate the service to another Grid entity, 
possibly by signing proxy certificates.%ENDCOLOR%

---+++ 2.1.2 Subscriber Obligations
%BLUE%For Robot Certificates
   1. Store the private key encrypted whenever possible.
   2. The private key may be kept unencrypted on an HSM or on a single user host dedicated to purposes identified by the certificate.  There must never be more than a single copy of the unencrypted private key on persistent storage.
   3. Provide correct personal information and authorize the publication of the certificate
   4. Verify that the DN being requested does not yet exist, or assert that they are the registered owner of the DN.
   5. Notify DOE GRIDS PKI immediately of any security incidents. Notification shall occur within the first 12 hours of initial knowledge of incident.
   6. Use the certificate for the permitted and declared uses only. The declared use should be a recorded statement describing the application, the private key management and the group permitted to affect the use, if more than one person.
%ENDCOLOR%

---+++ 3.1.2 Name Meanings
For individuals, the value of the CN component of the DN has no semantic significance.  
It should have a reasonable association with the authenticated name of the subscriber.  
%BLUE%For Robots, the value of the CN component of the DN has no semantic significance.  
It should have a reasonable association with the authenticated name of the subscriber.  %ENDCOLOR%
For Hosts or Services, the CN component has a structure that is defined to support SSL/TLS and the 
Globus software. It should include the Fully Qualified Domain Name (FQDN) of the host.

---+++ 3.1.3 Uniqueness of names
%BLUE%
For robot certificates each CN component will include the Full name of the subscriber as 
determined by the Virtual Organization/Site&#8217;s RA as well as a label reflecting the purpose of the robot entity.  
Certificates must apply to unique individuals. 
Private keys associated with Robot certificates may not be shared between people. 
%ENDCOLOR%


---+++ 7.1.4 Name Forms

   * For People: OU=People; DC= doegrids; DC=org%BLUE%
   * For Robots: OU=Robots; DC= doegrids; DC=org%ENDCOLOR%
   * For Hosts: OU=Hosts; DC= doegrids; DC=org
   * For Services: OU=Services;  DC= doegrids; DC=org

%BLUE%For a Robot.<br> 
A prefix of &#8220;Robot:&#8221; followed by a descriptive name of the purpose of the robot function, 
followed the CN from the personal certificate of the subscriber<br>
    CN= Robot:mymonitor John K. Doe 1W2D3; OU=Robots; DC= doegrids; DC=org
%ENDCOLOR%


---++ Other Examples
---+++ Dutch Grid
Robot private key must be kept on hardware token.

DN=CN=Robot:mymonitor John K. Doe; OU=Nikhef; O=robots; O=dutchgrid

---+++ UK eScience
Robot private key must be kept on hardware token.

DN=CN=Robot:mymonitor; CN=John K. Doe; OU=RAL; O=eScience; C=UK

---+++ Fermilab KCA
Based on Kerberos

DN=UID=jkdoe; CN=John K. Doe; CN=group; OU=Robots; O=Fermilab; DC=fnal; DC=gov

-- Main.DougOlson - 25 Feb 2008

<!-- CONTENT MANAGEMENT PROJECT

   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = DougOlson

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = Security

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (Scientist|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Knowledge
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %NO%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = JamesBarlow
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %NO%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = 
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %IN_PROGRESS%
 
-->