%META:TOPICINFO{author="DougOlson" date="1187359611" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="WebHome"}%
%TOC%

---++ DOEGrids Email Notification

From Mike - 8/16/07:

We've created 2 kinds of certificate confirmation notice messages now.
That's fine, but the notices in effect have 2 functions:

(1) Somebody, presumably you, accomplished the following at the CA'<br>
[RECEIPT]

(2) Here's what you do now<br>
[WORKFLOW]

The mission of this project was to fix #2, but it also changed #1.
But this is not good - we at DOEGrids need to give everybody the same receipt,
so that everybody has adequate information to resolve problems.

The current web-based receipt looks like this:
<verbatim>
	template certIssued_CA_PEOPLE
	
	Your Personal certificate request has been processed successfully.
	SubjectDN= $SubjectDN
	IssuerDN= $IssuerDN
	notAfter= $NotAfter
	notBefore= $NotBefore
	Serial Number= 0x$HexSerialNumber
</verbatim>
	
The script based receipt looks like this:

<verbatim>
	template certIssued_CA_PEOPLE_SCRIPT
	Your certificate requested using the script interface, request id: $RequestId,
</verbatim>

(Approx same for host/service certs - not going to discuss)

Following the receipt text, is the context driven response (browser, script).

The goal of the receipt is to give both the subscriber and DOEGrids operations
a common basis for resolving any problems that might occur (eg subscriber reports I didn't request
this certificate; it doesn't work;  I don't know what this means &c; and DOEGrids operations
when it needs to track down a particular certificate to resolve a problem).

I think the essential information that needs to be in all receipts is

<verbatim>
	SubjectDN= $SubjectDN
	Serial Number= 0x$HexSerialNum
AND
	https://pki1.doegrids.org:$HttpPort/displayBySerial?op=displayBySerial&serialNumber=$SerialNumber
</verbatim>

These validity date attributes _might_ be useful to customers 
notAfter= $NotAfter
notBefore= $NotBefore
and seem like a normal part of a receipt to me.
IssuerDN is not needed.

We need the URL here because it is not useful or interesting to provide every part
of the certificate for the subscriber to examine in the receipt.  But they 
should have an easy way to check their certificate for errors &c.

So, the receipts should say something like this:
<verbatim>
	Your Personal certificate request has been processed successfully.
	SubjectDN= $SubjectDN
	Serial Number= 0x$HexSerialNum
        [Validity dates]
	Complete details can be found here:
	https://pki1.doegrids.org:$HttpPort/displayBySerial?op=displayBySerial&serialNumber=$SerialNumber
        [mail reply to address - currently the From: address]
</verbatim>

The context dependent action or workflow section then follows as appropriate.



-- Main.DougOlson - 08 Aug 2007
