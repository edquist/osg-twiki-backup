%META:TOPICINFO{author="KyleGross" date="1480453377" format="1.1" version="1.16"}%
%META:TOPICPARENT{name="Documentation.PoliciesProcedures"}%
%DOC_STATUS_TABLE%

%TOC%
---+ Adding or Removing CAs from the OSG CA Distribution
This page documents the OSG SecurityTeam Team procedure for adding or removing Certificate Authorities (CAs) to/from the [[Documentation.CaDistribution][OSG CA Distribution]].

This procedure is closely related to the procedure for [[CreatingCADistributions][Creating CA Distributions]],
since the end goal of this procedure is to create a new CA distribution that includes/excludes the added/removed CA.
However, we separate the mechanics of creating the new distribution
from the steps required for adding or removing a CA from the distribution in an orderly fashion.

The policy for acceptance of CAs in OSG is specified in
[[http://osg-docdb.opensciencegrid.org/cgi-bin/ShowDocument?docid=752][OSG Document 752]].
This procedure implements that policy.
The policy can be summarized as follows:
   * VOs choose what CAs they accept.
   * Sites accept the CAs used by the VOs they serve or notify the VO and OSG SecurityTeam Officer of any exceptions.
   * OSG provides a [[Documentation.CaDistribution][CA Distribution]] containing the CAs accepted by OSG VOs.
   * The OSG SecurityTeam Officer has the authority to exclude a CA from the [[Documentation.CaDistribution][CA Distribution]] if that CA is not operating up to standards. However, the ultimate decision to accept or reject a CA remains with the VOs and sites.

---++ IGTF distribution updates

The  [[Documentation.CaDistribution][OSG CA Distribution]] contains all CAs accredited by the [[http://www.igtf.net/][IGTF]] for interoperability with WLCG and EGEE.
Most changes to the OSG CA Distribution result from changes to the 
[[http://dist.eugridpma.info/distribution/igtf/current/][IGTF Distribution of Authority Root Certificates]],
according to the following procedure:

   1 [[SecurityTeamTeamMembers][SecurityTeam Team]] members participate in IGTF meetings to represent OSG concerns and stay informed about new and retiring IGTF CAs.
   1 SecurityTeam Team members monitor the IGTF mailing lists for announcements of new IGTF distribution releases. The announcements are posted on the announce@eugridpma.org and tagpma-general@tagpma.org lists. Instructions for subscribing to these lists can be found on the [[http://www.eugridpma.org/][EUGridPMA]] and [[http://www.tagpma.org][TAGPMA]] web sites.
   1 When a new IGTF distribution is released, a SecurityTeam Team member sends an email message to osg-security-team@opensciencegrid.org volunteering to create a new OSG CA distribution.
   1 The SecurityTeam Team member then follows the procedure for [[CreatingCADistributions][Creating CA Distributions]], which includes sanity checks to be performed on the new IGTF distribution.
   1 The SecurityTeam Team member also verifies that the VDT team updates the [[http://vdt.cs.wisc.edu/certificate_authorities.html][CA Certificates in the VDT]] in a timely manner.


It is possible, though very unlikely (i.e., it has never happened yet), that an IGTF distribution update will remove a CA required by OSG VOs.
So far, CAs have only been removed from IGTF distributions when they retire from operation.
In the case a still-operating CA is removed from the IGTF distribution,
the SecurityTeam Team must determine if it should be kept in the distribution as a non-IGTF CA
or removed according to the procedure below.

---++ Adding a non-IGTF CA

The procedure for adding a non-IGTF CA to the OSG CA distribution is as follows:

   1 The SecurityTeam Team determines that a non-IGTF CA needs to be added.
      * An OSG VO may contact security@opensciencegrid.org or a [[SecurityTeamTeamMembers][SecurityTeam Team]] member to request the addition of a non-IGTF CA.
      * The CentralizedRSVSecurityProbe (cacert-verify-dn-central-probe), which monitors the VO membership information in VOMS, may alert the SecurityTeam Team that an OSG VO has accepted a member certificate from a non-IGTF not present in the current OSG CA distribution. In this case, the SecurityTeam Team will discuss with the VO manager(s) whether the CA needs to be added or if the member certificate was added to the VO in error.
   1 The SecurityTeam Team obtains the required input to the CA distribution from the CA:
      * A PEM encoded X.509v3 CA certificate (hash.0)
      * A Globus signing policy with a namespace that does not overlap with other CAs in the distribution (hash.signing_policy)
      * The URL of an X.509 CRL (hash.crl_url)
   1 The SecurityTeam Team performs additional checks on the CA as appropriate concerning the security of the new CA.
   1 The SecurityTeam Team creates a new  [[Documentation.CaDistribution][CA Distribution]] including the new CA according to the procedure for [[CreatingCADistributions][Creating CA Distributions]].
   1 The reasons for adding the CA must be documented below.

---++ Removing a CA

Removing a CA from the OSG CA distribution is a potentially disruptive action.
VOs and Sites that rely on the CA may encounter authentication errors when the new CA distribution is automatically installed by [[http://vdt.cs.wisc.edu/releases/1.10.1/man/vdt-update-certs.html][vdt-update-certs]].
Therefore the procedure must take care to determine the potential for disruption and give advance notice to VOs and Sites that the CA is being removed.

The procedure for removing a CA from the OSG CA distribution is as follows:

   1 The SecurityTeam Team determines that a CA should be removed.
      * The OSG VO that previously requested the inclusion of a non-IGTF CA may cease operation as an OSG VO or may decide that the CA is no longer needed.
      * The CA may cease operation. For example, the CA certificate may expire. The CentralizedRSVSecurityProbe (cacert-expiry-central-probe) monitors for CA certificates nearing expiration.
      * The OSG SecurityTeam Officer may determine that the CA is not operating up to standards (i.e., CRL has expired or the CA operators are not responsive during a security incident).
   1 The SecurityTeam Team determines if removing the CA may cause disruption.
      * The SecurityTeam Team reviews the membership lists of all OSG VOs to determine if certificates from the CA are in use.
      * The SecurityTeam Team may have other knowledge of the CA's certificates being used, according to who requested the CA to be included, what site(s) the CA is associated with, and whether the CA's certificates are widely used for hosts and services.
   1 If removal of the CA may cause disruption (or if there is any doubt), the SecurityTeam Team announces the pending removal of the CA to the following mailing lists:
      * osg-sites@OPENSCIENCEGRID.ORG
      * tg-security@OPENSCIENCEGRID.ORG, 
      * osg-vo-forum@OPENSCIENCEGRID.ORG
   1 After two weeks, the security team considers any objections received regarding the pending CA removal. If the SecurityTeam Officer decides to go ahead with the removal, SecurityTeam Team creates a new  [[Documentation.CaDistribution][CA Distribution]] removing the new CA according to the procedure for [[CreatingCADistributions][Creating CA Distributions]].
   1 The reasons for removing the CA must be documented below as a historical record.

Note that in any case, OSG VOs and Sites may decide to continue trusting the CA via a local VDT configuration (see [[http://vdt.cs.wisc.edu/certificate_authorities.html][VDT CA]] documentation for details).

---++ Explanation for OSG CA Distribution contents

Here the SecurityTeam Team documents the reasons behind the current OSG CA Distribution contents.

The OSG CA Distribution currently contains:
   * [[http://dist.eugridpma.info/distribution/igtf/current/][IGTF Distribution of Authority Root Certificates]] (CAs accredited by the [[http://igtf.net/][International Grid Trust Federation]])
      * All IGTF CAs are included for compliance with the [[https://edms.cern.ch/document/428038/][WLCG CA Policy]].
   * [[http://security.fnal.gov/pki/][Fermilab KCA]]
      * The Fermilab KCA is included in support of the Fermilab and CDF VOs.
   * [[http://tg-ca.purdue.teragrid.org:8080/ejbca/][Purdue TeraGrid CA]]
      * The Purdue CA is included in support of the !NanoHub and NWICG VOs.

---+++ March 2009: Removal of non-IGTF CAs

Effective March 10, 2009, the OSG SecurityTeam Team has removed the following unused non-IGTF CAs from the
OSG CA distribution:

   * PSC Kerberos CA (290a3b29)
   * PSC Root CA (9b88e95b)
   * PSC Hosts CA (acc06fda)
   * SDSC (3deda549)
   * NPACI (b89793e4)
   * TACC (9a1da9f9)
   * old NCSA CA (4a6cd8b1)

---+++ 2010  
Fermilab KCA has been accredited by IGTF in 2010. Thus, it is included in the regular IGTF CA bundle. 

---+++ April 2014  
Effective April 8, 2014, the OSG SecurityTeam Team has removed Purdue CA and Purdue Teragrid CA (non-IGTF CAs) from the OSG CA distribution. These CAs have been decommissioned. At this point OSG package is same as IGTF distribution.


<!-- CONTENT MANAGEMENT PROJECT

   DEAR DOCUMENT OWNER
   ===================

   Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER          = JamesBarlow

   Please define the document area, choose one of the defined areas from the next line
   DOC_AREA = (ComputeElement|Storage|VO|SecurityTeam|User|Monitoring|General|Trash/Trash/Integration|Operations|Tier3)
   * Local DOC_AREA       = Security

   define the primary role the document serves, choose one of the defined roles from the next line
   DOC_ROLE = (Scientist|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

   Please define the document type, choose one of the defined types from the next line
   DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Knowledge
   
   Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %YES%

   Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

   change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %YES%

   change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %YES%

   change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


   DEAR DOCUMENT REVIEWER
   ======================

   Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = MineAltunay
  
   Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %YES%


   DEAR DOCUMENT TESTER
   ====================

   Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = AnandPadmanabhan
  
   Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %YES%
 
-->