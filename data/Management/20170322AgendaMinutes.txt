%META:TOPICINFO{author="BrianLin" date="1490217759" format="1.1" version="1.7"}%
%META:TOPICPARENT{name="AreaCoordinator"}%
---+ OSG Area Coordinators Meeting &mdash; 22 March 2017


---++ Meeting Coordinates

%TABLE{}%
| When: | Wednesday, 2:00 p.m. Central Time |
| Online: | https://IU.zoom.us/j/320940886 |
| Phone (toll): | +1 (408) 638-0968 &nbsp;<em>or</em>&nbsp; +1 (646) 558-8656 &nbsp; &rarr; &nbsp; PIN 320-940-886 |


---++ Top of Meeting Business
   1. Review the [[https://indico.fnal.gov/categoryDisplay.py?categId=86][OSG calendar]]
   1. Talk about upcoming newsletter articles - NewsletterList

*Note for presenters:* Please report on updates to the area goals we had established at the staff retreat; these goals are available at https://osg-docdb.opensciencegrid.org:440/cgi-bin/ShowDocument?docid=1232. Remember that the next OSG annual report for each area will explicitly state the goals and the results.


---++ Brian Lin - Software

Since 25 January 2017.

---+++ All Hands
Office hours and tutorial were successful but it would be more helpful for admins if we had switched the ordering.

---+++ Software updates
Development for February and March releases:
   * Updated to HTCondor 8.4.11 and 8.6.1 with complete SELinux support (and other bug fixes)
   * Improved Slurm integration in the Blahp
   * Continued osg-configure improvements to better support ATLAS AGIS reporting
   * Updated build infrastructure (koji, osg-build, osg-koji)
   * Wrote data-release scripts for updating VO information in tarball WN clients as well as certs available through [[http://repo.grid.iu.edu/pacman/cadist/ca-certs-version-new][HTTP]]
   * Updated to rsv-perfsonar-1.2.1
   * Updated to frontier-squid 3.5.24, a technology preview of version 3

---+++ HTCondor-CE and Friends
   * LIGO has expressed interest in Debian packaging of the CE.
   * Derek is starting to unify the BLAHP sources between OSG and HTCondor developers (but not INFN yet) and then switch to that single source codebase for both sets of builds. This project helps get the OSG Software team less involved in the maintenance of the BLAHP, which is good.
   * Ongoing support for IU folks doing a security review of HTCondor-CE and the BLAHP.

---+++ Replacement for the Venerable edg-mkgridmap
   * LCMAPS VOMS plugin targeted for the April release with improved VOMS attribute checking along with changes to =lcmaps= and =htcondor-ce=. =lcmaps= version with changes to enable VOMS attribute checks by default.
   * To follow: numerous changes in osg-configure, its defaults, and its documentation to make it easy to set up the LCMAPS plugin, or migrate a site from edg-mkgridmap to it.
   * The goal is to begin migrating friendly sites before the end of the fiscal year (i.e., May 2017), and maybe even get AGLT2 to move from GUMS to this new technology.

---+++ Madison ITB and HTCondor Pre-Release Testing
   * Goal to support testing of HTCondor pre-releases in an OSG environment pushed to the end of March, and testing of OSG pre-release packages to the end of April.
   * After that, we will start expanding the coverage of OSG use cases on our ITB site, in priority order from the OSG Release team.

---+++ OSG Software Support for GR&Aring;CC
Ironing out discrepancies with the old implementations of OSG Display and Apel reporting script.

---+++ Load Balanced !GridFTP doc
Completed document should hit production by the end of the week.

---+++ Updates to VO packaging process
Previously managed by Operations and Software, the Software team will be handling VO data management moving forward.

---+++ Support
The Software team typically handles 1&ndash;2 active site support issues every week, in additional to other random GOC tickets that come our way. Since the last report, we have helped:
   * Baylor - CE installation assistance
   * BU - CE schedd won't start due to corrupt log; investigating SGE draining
   * CIT - gWMS submit node set up to submit locally and to the OSG-LIGO frontend
   * Clemson - Jobs held due to bad PBS installation and bad SPOOL dir permissions
   * CTSC/IU - Ongoing CE installation assistance
   * FIU - Solved bad CRLs on some worker nodes
   * GT - Investigating bad start date in some accounting records
   * LIGO (multiple sites) - Worked around job router crash due to HTCondor bug
   * LBL - Helped with CE/submit host authorization issues
   * OU - CE failing to track job completion [[https://jira.opensciencegrid.org/browse/SOFTWARE-2604][SOFTWARE-2604]]
   * Utah - Investigated errors due to over-aggressive tmpwatch; ongoing support for CVMFS/CRL and accounting issues 

---+++ Concerns
   * Role changes will have an effect on overall productivity, at least for a while; plus OSG Software is losing 0.5 FTE (or so).

---+++ Software Goals for Year 5

<!--
   * Set SWNO = <span style="color: white; background-color: #00D; padding-left: 3px; padding-right: 3px;">abandoned</span>
   * Set SWIP = <span style="color: white; background-color: #F90; padding-left: 3px; padding-right: 3px;">in&nbsp;progress</span>
   * Set SWDN = <span style="color: white; background-color: #0A0; padding-left: 3px; padding-right: 3px;">done</span>
   * Set SWNS = <span style="color: white; background-color: #D00; padding-left: 3px; padding-right: 3px;">not started</span>
-->

   1. Ongoing
      a. Routine updates to software packages
      a. Bug fixes to software and packaging
      a. Routine documentation updates
      a. Support installation and configuration of new OSG sites and HTCondor CE transitions
      a. Support ongoing use of OSG Software
   1. HTCondor-CE and Friends
      a. Unify BLAHP code and switch to HTCondor build [Derek, 2016-11]&nbsp;&mdash; %SWIP%
      a. Help with monitoring improvements, especially that affect HTCondor-CE&nbsp;&mdash; %SWNO%
      a. Implement payload job record in site collectors [Brian&nbsp;L., May 2017]&nbsp;&mdash; %SWNS%
   1. Support SELinux
      a. Define initial project plan [Tim&nbsp;C., 2016-10]&nbsp;&mdash; %SWDN%
      a. Identify all components in the OSG software stack that need SELinux rules&nbsp;&mdash; %SWDN%
      a. Ship initial SELinux rules (from upstream or OSG) for all affected packages [Feb 2017]&nbsp;&mdash; %SWDN%
      a. Work with upstream developers to support SELinux fully in their own sources [Feb 2017]&nbsp;&mdash; %SWDN%
   1. Enhance alternatives to GUMS
      a. Help identify, propose, and have accepted a technology direction for mapping&nbsp;&mdash; %SWDN%
      a. Identify major problems with existing mapping code and fix [Mat, Mar 2017]&nbsp;&mdash; %SWIP%
      a. Improve packaging and configuration defaults to reflect OSG recommendations&nbsp;&mdash; %SWIP%
      a. Document authorization system updates and recommendations&nbsp;&mdash; %SWNS%
      a. Migrate edg-mkgridmap sites to new OSG mapping software&nbsp;&mdash; %SWNS%
      a. Work with AGLT2 to migrate from GUMS and document process [May 2017]&nbsp;&mdash; %SWNS%
      a. Identify specific follow-on projects to allow more sites to migrate from GUMS [May 2017]&nbsp;&mdash; %SWNS%
   1. Release OSG 3.4
      a. Update to Hadoop Distributed File System (HDFS) 3.x with error-correcting codes; skipping 3.4.0, release when available &nbsp;&mdash; %SWNS%
      a. Update GUMS to rely on proxy attributes and hence not call out to VOMS Admin [Carl]&nbsp;&mdash; %SWIP%
      a. Drop Globus GRAM packages [May 2017]&nbsp;&mdash; %SWNS%
      a. Drop GIP and OSG Info Services [May 2017]&nbsp;&mdash; %SWNS%
      a. Drop !BeStMan [May 2017]&nbsp;&mdash; %SWNS%
      a. Drop jGlobus [May 2017]&nbsp;&mdash; %SWNS%
      a. Release 3.4.0 [May 2017]&nbsp;&mdash; %SWNS%
      a. Remove GRAM code from OSG software sources (e.g., OSG Configure) [Sep 2017]&nbsp;&mdash; %SWNS%
      a. Add Singularity&nbsp;&mdash; %SWDN%
   1. Increase utility of Madison ITB
      a. Rebuild ITB machines, devise and start maintenance schedule [Jan 2017]&nbsp;&mdash; %SWDN%
      a. Add the capability to install and test HTCondor pre-releases in an OSG-like environment [Tim&nbsp;C., Mar 2017]&nbsp;&mdash; %SWIP%
      a. Create a tool to maintain steady job pressure on the Madison ITB site [Tim&nbsp;C., Apr 2017]&nbsp;&mdash; %SWNS%
      a. Add newer OSG technologies to ITB (as WBS tasks); e.g., !StashCache, HTCondor-CE-Bosco [Tim&nbsp;C., May 2017]&nbsp;&mdash; %SWNS%
   1. Documentation renovations
      a. Complete initial version of new, user-centered Release3 home page [Brian&nbsp;L., Dec 2016]&nbsp;&mdash; %SWIP%
      a. Update documents in priority order [ongoing]&nbsp;&mdash; %SWIP%
      a. Document !GlideinWMS architecture for internal, then site administrator use [Tim&nbsp;C.]&nbsp;&mdash; %SWIP%
      a. Document HTCondor-CE and -Bosco architectures for internal, then site administrator use [Brian&nbsp;L.]&nbsp;&mdash; %SWIP%
      a. Work with Operations and Investigations to explore other documentation technologies [Tim&nbsp;C.]&nbsp;&mdash; %SWIP%
      a. Migration of !SoftwareTeam docs to !GitHub [Brian&nbsp;L., May 2017]&nbsp;&mdash; %SWNS%
      a. Migration of Release3 end user docs to !GitHub [Brian&nbsp;L.]&nbsp;&mdash; %SWNS%
   1. Smaller Year 5 projects
      a. Finish remaining EL 7 builds&nbsp;&mdash; %SWDN%
      a. Complete another significant round of scalability testing for OSG and CMS [Edgar, Nov 2016]&nbsp;&mdash; %SWIP%
      a. Support GRÅCC project as needed, esp. by changing OSG software to use it (e.g., osg-display and gratia-apel) [Feb 2017]&nbsp;&mdash; %SWIP%
      a. Automate some pieces of tracking OSG CEs&nbsp;&mdash; %SWNO%
      a. Consolidate public software download repositories to a single GOC host&nbsp;&mdash; %SWIP%
      a. Help OSG move from BDII to CE-Collector&nbsp;&mdash; %SWDN%
      a. Help incorporate a generic HTCondor pilot job executable into the HTCondor source code&nbsp;&mdash; %SWNO%
      a. Migrate OSG software from Java 7 to Java 8&nbsp;&mdash; %SWDN%
      a. Manage new stakeholder and internal projects that involve the OSG Software team [Brian&nbsp;L.]&nbsp;&mdash; %SWIP%
   1. Year 5 Internal Maintenance
      a. Move Koji build host from batlab.org domain to chtc.wisc.edu domain&nbsp;&mdash; %SWDN%
      a. Update Koji build system to latest version&nbsp;&mdash; %SWDN%
      a. Work on very simple effort reporting system [Tim&nbsp;C.]&nbsp;&mdash; %SWIP%
   1. Automated Testing
      a. Expand coverage of components and test cases&nbsp;&mdash; %SWIP%
         1. Add HTCondor-CE + Slurm integration tests&nbsp;&mdash; %SWDN%
         1. Add !GridFTP-HDFS and !XRootD-HDFS plugin tests with HDFS client in POSIX mode&nbsp;&mdash; %SWNS%
      a. Improve expressiveness of test infrastructure [Brian&nbsp;L., Mar 2017]&nbsp;&mdash; %SWIP%
      a. Investigate automated testing across multiple hosts in CHTC&nbsp;&mdash; %SWNO%

---+++ Metrics

JIRA tickets for Software (orange) and Software+Release (grey):


%ATTACHURL%/sw-jira-2017-03-22.png

---++ Release, by Tim Theisen
---+++ Recent Accomplishments

   * Since January 25th
   * Software Releases
      * February Release (2017-02-14)
         * [[Documentation.Release3.Release3321][3.3.21]]: CVMFS 2.3.2 patched, !GlideinWMS 3.2.17, HTCondor 8.4.11, HTCondor-CE 2.1.2, osg-configure 1.6.1, osg-update-vos 1.3.0, RSV-PerfSONAR 1.2.1; Upcoming: Singularity 2.2.1
      * March Release (2017-03-14)
         * [[Documentation.Release3.Release3322][3.3.22]]: BLAHP 1.18.29, CVMFS 2.3.3, emi-trustmanager 3.0.3-14, !GlideinWMS 3.2.18, gratia-probe 1.17.4, HTCondor 8.6.1, HTCondor-CE 2.1.4, VOMS 2.0.14-1.3, <strike>!XRootD 4.6.0</strike>; Upcoming: frontier-squid 3.5.24, HTCondor 8.6.1

   * Data Releases
      * 2017-01-26: [[Documentation.Release3.Release33202][3.3.20-2]]: IGTF 1.79, VO Package v70
      * 2017-02-16: [[Documentation.Release3.Release33212][3.3.21-2]]: IGTF 1.70
      * 2017-03-02: [[Documentation.Release3.Release33213][3.3.21-3]]: IGTF 1.81, VO Package v71

   * Special Releases: None

   * Defects found in testing
      * 1 of 13 tickets in February
         * osg-configure and Resource Entry (ATLAS) would continue without mandatory attributes set
      * 1 of 20 tickets in March
         * PKI tools would do a bunch of unnecessary work when it should know that it would fail (pushed to April release)

   * Defect released in March
      * !XRootD 4.6.0
         * Non-functional when using GSI authentication
         * Should have discovered this
            * OSG Technology Investigations Team noticed problems and did not inform Release Team
            * Testing inadequate. Did not test this necessary feature
            * Automated testing inadequate.
            * !XRootD community knew of problems and were not consulted

   * Continue Beta Testing HTCondor Releases (VM Universe)
      * Found and fixed a problem with !ClassAd shared library version

   * New process to release data (CA Certificates and VO Package)
      * Three recent data releases
      * Shipped scripts in February to easily update the data in installed tarballs

---+++ Goals
   * Ongoing
      * Test and Release Software
      * Collect metrics on effectiveness
      * Collect new testing recipes
   * Madison ITB
      * Start Beta Testing HTCondor Releases in ITB environment [IN PROGRESS]
      * Waiting on Software Team to implement ITB site
   * SELinux
      * Start Testing HTCondor in VMU environment with SELinux enforcing [DONE]
   * Data Only Release
      * Implement process for releasing data (CA Certificates and VO Packages) [DONE]

---++ Minutes

_TBD_

<!--

*Attendees:* 

---+++ Software

---+++ Release

---+++ Action items

-->

%META:FILEATTACHMENT{name="sw-jira-2017-03-22.png" attachment="sw-jira-2017-03-22.png" attr="h" comment="" date="1490202779" path="sw-jira-2017-03-22.png" size="106759" stream="sw-jira-2017-03-22.png" tmpFilename="/usr/tmp/CGItemp37092" user="BrianLin" version="3"}%
