%META:TOPICINFO{author="SuchandraThapa" date="1212087031" format="1.1" version="1.43"}%
%META:TOPICPARENT{name="ComputeElementPostInstall"}%
---+!! *<nop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

%STARTINCLUDE%
%BR%
---+ _%INCLUDEHEADING%  %SPACEOUT{ "%TOPIC%" }%_
%EDITTHIS%
%BR%

#DisCovering
---++ Discovering exactly what software has been installed
<pre class="screen">
# <b>source $VDT_LOCATION/setup.sh </b>
# <b>./osg-version </b>
%CACHE% %VERSION%
</pre>

<pre class="screen">
# <b>source $VDT_LOCATION/setup.sh </b>
# <b>vdt-version </b>
You have installed a subset of VDT version 1.8.1:
    Apache HTTPD 2.2.4
    gLite CEMon Server (INFN release from 2006-05-19, plus RAW dialect) 1.7.1
    CA Certificates v30 (includes IGTF 1.16 CAs)
    Condor/Condor-G Developers Series 6.9.4
    EDG Make Gridmap 2.9.0
    Fetch CRL 2.6.2
    Generic Information Provider 1.0.15 (Iowa 15-Feb-2006)
    Globus Toolkit, pre web-services, client 4.0.5
    Globus Toolkit, pre web-services, server 4.0.5
    Globus Toolkit, web-services, client 4.0.5
    Globus Toolkit, web-services, server 4.0.5
    GLUE Schema 1.2 draft 7
    GPT 3.2
    Gratia Condor Probe 0.27.3-1
    Gratia Metric Probe 0.27.3-1
    Java SDK 1.4.2_14
    Java 5 SDK 1.5.0_12
    KX509 20031111
    Logrotate 3.7
    MonALISA 1.6.22
    MyProxy 3.9
    MySQL 4.1.22
    MySQL Connector/J 5.0.6
    OSG Resource and Service Validation 1.4
    Pegaus Worker Package 2.0.1
    PPDG Cert Scripts 2.5
    PRIMA Authorization Module 0.7
    PRIMA Authorization Module For GT4 Web Services 0.1.2
    RLS, client 3.0.041021
    SRM V1 Client 1.25
    SRM V2 Client 2.2.0.3
    syslog-ng 2.0.4
    Apache Tomcat 5.0.28
    UberFTP 1.24
    Wget 1.10.2
</pre>


---++ Finding all services that are part of your install

You can use the =vdt-control= command to see all services that are installed as part of the install, and whether or not they are enabled or disabled. For example:

<pre class="programlisting">
# <b>vdt-control --list </b>
Service            | Type   | Desired State
-------------------+--------+--------------
fetch-crl          | cron   | enable
vdt-rotate-logs    | cron   | enable
gris               | init   | do not enable
globus-gatekeeper  | inetd  | enable
gsiftp             | inetd  | enable
mysql              | init   | enable
globus-ws          | init   | enable
edg-mkgridmap      | cron   | do not enable
gums-host-cron     | cron   | do not enable   
MLD                | init   | do not enable           
vdt-update-certs   | cron   | do not enable    
condor-devel       | init   | enable                  
osg-rsv            | init   | enable                     
apache             | init   | enable
tomcat-5           | init   | enable
syslog-ng          | init   | enable                     
gratia-condor      | cron   | enable
</pre>

For debugging purposes _only_, you can look at =$VDT_LOCATION/vdt/services/state=. This file is automatically generated and should _not_ be edited by hand. It contains all the information used by vdt-control to start and stop services in the VDT. 

Below we break down the services that you can expect to be on your system. All of these are listed by =vdt-control=: they are broken down here in order to give you more information.  Note that the corresponding files will not be moved in /etc/xinetd.d, crontab, or /etc/init.d until the vdt-control --on command is executed, and then only for those 
that are marked "enable" in the list of services above.

---+++ !!The xinetd services that are included
Two services are run via xinetd:
| *Service* | *Description* |
| gsiftp | !GridFTP |
| globus-gatekeeper | The GRAM 2 (pre-web services) interface |

---+++ !!/etc/services
Two entries have been appended to your =/etc/services= file:
| *Service* | *Port* |
| gsiftp | 2811/tcp | 
| globus-gatekeeper | 2119/tcp |

---+++ !!The init.d services that are included in /etc/init.d

| *Service* | *Description* |
| globus-ws | Globus web services |
| mysql     | used by globus-ws |
| condor    | setup optionally by ManagedFork or Globus-Condor-Setup |
| MLD       | MonALISA - setup optionally by configure-osg.py |
| tomcat-5  |  used by CEMon and BDII and optionally globus-ws |
| apache    | In front of Tomcat |
| condor-devel | A new version of condor that is used only to manage the crons from the RSV process | 
| osg-rsv | Resource and Service Validation probes | 
|syslog-ng | optional service to share syslog-ng logs with central ITB staff for debugging purposes | 


---++ Cron jobs
Some cron jobs are installed with random times. Look at =crontab -l= to see which ones you have. Likely candidates are:

| *Cron Job* | *Description* |
| fetch-crl | Update the certificate authority revocation lists. Verify importation for security purposes |
| vdt-rotate-logs | Rotate log files periodically, to keep them from growing too large |
| edg-mkgridmap | If you use a grid-mapfile, keeps it up to date | 
| gums-host-cron | If you use GUMS, generate the osg-user-vo-map.txt file | 
| gratia-condor | Report accounting data from Condor | 
| gratia-pbs-lsf | Report accounting data from PBS or LSF |
| vdt-update-certs | optional way to get new CA-Certificates packages without doing pacman -update | 

---++ Log file rotation
The following is an example of the log files that are configured for rotation. To see exactly what files are rotated in your installation, look in =$VDT_LOCATION/vdt/etc/vdt.logrotate=:

<pre class="programlisting">
# Rotate daily
daily
# Keep a week's worth
rotate 7
# Compress old files
compress
compressoptions -9f
# Truncate, instead of moving, files to avoid problems with apps
copytruncate
# Just ignore it if they're not there
missingok
# Rotate these files
/storage/local/data1/osg-ce/globus/var/grid-info-system.log {}
/storage/local/data1/osg-ce/globus/var/accounting.log {}
/storage/local/data1/osg-ce/globus/var/globus-gatekeeper.log {}
/storage/local/data1/osg-ce/globus/var/log/gridftp.log {}
/storage/local/data1/osg-ce/globus/var/log/gridftp-auth.log {}
/storage/local/data1/osg-ce/apache/logs/access_log {}
/storage/local/data1/osg-ce/apache/logs/error_log {}
/storage/local/data1/osg-ce/apache/logs/mod_jk.log {}
/storage/local/data1/osg-ce/apache/logs/ssl_request_log {}
/storage/local/data1/osg-ce/tomcat/v5/logs/catalina.out {}
</pre>

%STOPINCLUDE%
%BR%
%COMPLETE3% %BR%
%RESPONSIBLE% Main.SuchandraThapa - 18 Oct 2007 %BR%
%REVIEW%

%META:TOPICMOVED{by="ForrestChristian" date="1166045216" from="Integration.CESoftWare050" to="Integration/ITB_0_5.CESoftWare"}%
