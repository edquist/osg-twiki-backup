%META:TOPICINFO{author="TedHesselroth" date="1270499128" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="Hadoop"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%
---++ Testing a gridftp endpoint
Testing a gridftp endpoint is fairly straight forward.  You'll need to know the SE path endpoint on the hadoop door and you'll have to have a valid gridcert that is permitted to move files in and out of your site.
   * generate a proxy certificate (grid-proxy-init)
   * attempt to pull from your gridftp door.  The command will look something like:
  <verbatim>
globus-url-copy gsiftp://<server>:port/path/to/test/file file:////tmp/testfile.out
</verbatim>
the port is most likely 2811.
   * attempt to push a file to your gridftp door.  The command will look something like:
<verbatim>
globus-url-copy  file:////tmp/testfile.out gsiftp://<server>:port/path/to/test/file
</verbatim>

---++ Monitoring the gridftp endpoint with RSV.
You should try and monitor standalone gridftp doors via RSV.
<verbatim>
 ./configure_osg_rsv --user rsvuser --init  --gridftp-uri gridftp.domain.name --gridftp-probes --gratia --grid-type "OSG" --consumers --verbose --setup-for-apache --proxy /tmp/x509up_u<uid>
</verbatim>

---++ Monitoring the gridftp endpoint with Nagios
The gridftp endpoints can be monitored with the standard check_tcp plugin for Nagios.  This won't tell you if your gridftp server is functioning correctly like the RSV test would, but it will serve as a simple ping test to verify that the gridftp service is alive.  An incomplete nagios configuration for such a check would look like:

<verbatim>
define command{
        command_name    check_gridftp
        command_line    $USER1$/check_tcp -H $HOSTADDRESS$ -t 30 -p $ARG1$ -e "GridFTP Server 2.8"
}

define service{
        use                             your-service-template
        host_name                       gridftp01.ultralight.org,gridftp02.ultralight.org
        service_description             GRIDFTP
        check_command                   check_gridftp!2811
}
</verbatim>
-- Main.CarlLundstedt - 17 Aug 2009

<!-- CONTENT MANAGEMENT PROJECT
############################################################################################################
 DEAR DOCUMENT OWNER
 ===================

 Thank you for claiming ownership for this document! Please fill in your FirstLast name here:
   * Local OWNER = BrianBockelman

 Please define the document area, choose one of the defined areas from the next line
 DOC_AREA = (ComputeElement|Storage|VO|Security|User|Monitoring|General|Integration|Operations|Tier3)
   * Local DOC_AREA       = Storage

 define the primary role the document serves, choose one of the defined roles from the next line
 DOC_ROLE = (EndUser|Student|Developer|SysAdmin|VOManager)
   * Local DOC_ROLE       = SysAdmin

 Please define the document type, choose one of the defined types from the next line
 DOC_TYPE = (Troubleshooting|Training|Installation|HowTo|Planning|Navigation|Knowledge)
   * Local DOC_TYPE       = Installation
  Please define if this document in general needs to be reviewed before release ( %YES% | %NO% )
   * Local INCLUDE_REVIEW = %NO%

 Please define if this document in general needs to be tested before release ( %YES% | %NO% )
   * Local INCLUDE_TEST   = %NO%

 change to %YES% once the document is ready to be reviewed and back to %NO% if that is not the case
   * Local REVIEW_READY   = %NO%

 change to %YES% once the document is ready to be tested and back to %NO% if that is not the case
   * Local TEST_READY     = %NO%

 change to %YES% only if the document has passed the review and the test (if applicable) and is ready for release
   * Local RELEASE_READY  = %YES%


 DEAR DOCUMENT REVIEWER
 ======================

 Thank for reviewing this document! Please fill in your FirstLast name here:
   * Local REVIEWER       = FirstName
 Please define the review status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local REVIEW_PASSED  = %NO%


 DEAR DOCUMENT TESTER
 ====================

 Thank for testing this document! Please fill in your FirstLast name here:
   * Local TESTER         = FirstLast
 Please define the test status for this document to be in progress ( %IN_PROGRESS% ), failed ( %NO% ) or passed ( %YES% )
   * Local TEST_PASSED    = %NO%
############################################################################################################
-->
