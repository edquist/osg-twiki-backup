%META:TOPICINFO{author="TedHesselroth" date="1195060615" format="1.1" reprev="1.1" version="1.1"}%
%META:TOPICPARENT{name="OpportunisticStorageUse"}%
<verbatim>
#
#$ld: PoolManager.conf,v 1.3 2007/04/07 02:19:58 timur Exp $
#
# Setup of PoolManager (diskCacheV111.poolManager.PoolManagerV5)
#
set pool decision  -spacecostfactor=1.0 -cpucostfactor=1.0
#
#
# The units ...
#
psu create unit -net    0.0.0.0/255.255.255.255
psu create unit -net    0.0.0.0/0.0.0.0
psu create unit -store  *@*
psu create unit -store  public:osg@osm
psu create unit -protocol */*
#
# The unit Groups ...
#
psu create ugroup any-store
psu addto ugroup any-store *@*
psu create ugroup opportunistic-store
psu addto ugroup opportunistic-store public:osg@osm
psu create ugroup world-net
psu addto ugroup world-net 0.0.0.0/0.0.0.0
psu create ugroup any-protocol
psu addto  ugroup any-protocol */*
#
# The pools ...
#
psu create pool dummy_default_pool
psu create pool dummy_volatile_pool_1
psu create pool poolnode1_1
psu create pool poolnode1_2
psu create pool poolnode2_1
psu create pool poolnode2_2
psu create pool poolnode3_2
psu create pool poolnode3_2
#
# The pool groups ...
#
#psu create pgroup ResilientPools
psu create pgroup default
psu addto  pgroup default dummy_default_pool
psu create pgroup volatile
psu addto  pgroup volatile dummy_volatile_pool_1
psu create pgroup opportunistic-pools
psu addto pgroup opportunistic-pools poolnode1_1
psu addto pgroup opportunistic-pools poolnode1_2
psu addto pgroup opportunistic-pools poolnode2_1
psu addto pgroup opportunistic-pools poolnode2_2
psu addto pgroup opportunistic-pools poolnode3_1
psu addto pgroup opportunistic-pools poolnode3_2
#
# The links ...
#
# default - will be linkGrouped as custodial storage area
psu create link default-link any-store world-net any-protocol
psu set link default-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link default-link default
# volatile - needed for linkGroups to work even if all actual storage is custodial
psu create link volatile-link any-store world-net any-protocol
psu set link volatile-link -readpref=10 -writepref=10 -cachepref=10 -p2ppref=-1
psu add link volatile-link volatile
# opportunistic - for public storage
psu create link opportunistic-link opportunistic-store world-net any-protocol
psu set link opportunistic-link -readpref=10 -writepref=20 -cachepref=10 -p2ppref=-1
psu add link opportunistic-link opportunistic-pools
# psu add link default-link all-pools
#
#
# The link groups ...
#
# to define a link group capable of storing 
# custodial type of files HSM attribute should be Non-None
# HSM setting allows writing of custodial files to this area
# like in this example:
psu create linkGroup default-link-group
psu addto linkGroup default-link-group default-link
psu set linkGroup custodialAllowed default-link-group true
psu set linkGroup onlineAllowed default-link-group true
psu set linkGroup nearlineAllowed default-link-group true
psu set linkGroup replicaAllowed default-link-group false
psu set linkGroup outputAllowed default-link-group true
psu set linkGroup attribute default-link-group HSM=anynonNone

# HSM setting will not allow writing of custodial files to the volatile area
psu create linkGroup volatile-link-group
psu addto  linkGroup volatile-link-group volatile-link
psu set    linkGroup attribute volatile-link-group HSM=None
psu set linkGroup custodialAllowed volatile-link-group false
psu set linkGroup onlineAllowed volatile-link-group true
psu set linkGroup nearlineAllowed volatile-link-group true
psu set linkGroup replicaAllowed volatile-link-group true
psu set linkGroup outputAllowed volatile-link-group true

# HSM setting will not allow writing of custodial files to the public area
psu create linkGroup opportunistic-link-group
psu addto  linkGroup opportunistic-link-group opportunistic-link
psu set    linkGroup attribute opportunistic-link-group HSM=None
psu set linkGroup custodialAllowed opportunistic-link-group false
psu set linkGroup onlineAllowed opportunistic-link-group true
psu set linkGroup nearlineAllowed opportunistic-link-group true
psu set linkGroup replicaAllowed opportunistic-link-group true
psu set linkGroup outputAllowed opportunistic-link-group true

#
# Submodule [rc] : class diskCacheV111.poolManager.RequestContainerV5
#
#rc onerror suspend
#rc set max retries 3
#rc set retry 900
#rc set warning path billing
#rc set p2p oncost
#rc set stage off
#rc set fallback oncost off
#set costcut 1.0 2.0
#
#
#
rc onerror suspend
rc set max retries 999
rc set max retries 3
rc set retry 900
rc set warning path billing
rc set poolpingtimer 600
rc set slope 0.0
rc set p2p oncost
rc set stage oncost off
rc set stage off
set timeout pool 120
set costcuts -idle=0.0 -p2p=2.0 -alert=0.0 -halt=0.0 -fallback=0.0
rc set max copies 500
rc set max restore unlimited
rc set sameHostCopy besteffort
rc set max threads 0
#
# Cost Module
#
cm set magic on
</verbatim>


