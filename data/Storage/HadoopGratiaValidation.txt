%META:TOPICINFO{author="BrianBockelman" date="1250691653" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="Hadoop"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*
%TOC%

---+ Gratia Validation

---++ Local validation

   1 Run the gridftp validation; transfer at least one file so there are transfers to report to Gratia.
   1 Verify that the gratia probe's cron job shows up in =/etc/cron.d/gratia-probe-gridftp-transfer.cron=
   1 Run the cron script by hand:
      <verbatim>/opt/vdt/gratia/probe/gridftp-transfer/gridftp-transfer_meter.cron.sh</verbatim>
   1 Verify that the exit code was 0; <verbatim>echo $?</verbatim>
   1 Examine the log file, =/opt/vdt/gratia/var/logs/<date>.log=.  Verify there are no error messages or exceptions.

---++ Collector validation
   1 Go to the web interface for the Gratia collector.  Usually, this is http://<collector host>:<port>/gratia-reporting.  [[http://gratia-osg-transfer.opensciencegrid.org/gratia-reporting/][For the OSG transfer collectory, click here]].
   1 Click on the "Custom SQL Report"
   1 Run the following query:
      <verbatim> select * from MasterTransferSummary where StartTime >= DATE_SUB(NOW(), INTERVAL 4 DAY) and ProbeName like '%.<hostname>' limit 10;</verbatim>
      Replace the word "<hostname>" with your actual hostname.  The query should return results (if necessary, wait 5 minutes and try again), assuming your probe reported some data.