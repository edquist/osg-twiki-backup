%META:TOPICINFO{author="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dJohn_20Weigand_20458491" date="1291739874" format="1.1" reprev="1.13" version="1.13"}%
%META:TOPICPARENT{name="ReleaseDocumentation.WebHome"}%
---+!! *<noop>%SPACEOUT{ "%TOPIC%" }%*

%RED%CURRENTLY BEING MODIFIED.  SO WILL NOT BE COMPLETE%ENDCOLOR%

%TOC%
---++ Overview
Accounting records collected by Gratia are forwarded to the EGEE accounting system, APEL.    This is important for US-LHC Tier1 and Tier2 facilities which have to demonstrate to the LHC project delivered computing resources on behalf of ATLAS, ALICE and CMS collaborations, in accordance with signed Memorandum of Understanding (MOU) agreements.  A service outside the OSG software infrastructure (VDT) runs at Fermilab, parses and analyzes accounting records for a resource, scales wall time figures into SPEC_int2000 (!SI2K)  for the processor type, and then forwards to an APEL server at the EGEE GOC.

This accounting data is used to publish monthly Tier 1/2 reports for those OSG registered resource groups that have been registered with LHC and have enabled the !MyOsg !WLCGInformation !InteropAccounting flag and !AccountingName data.

For an OSG resource group (aka site) to be included in WLCG Interoperability reporting the following must occur/exist:
   1 It must be registered in OSG (see the [[#OSG_Registration][OSG Registration section]])
   1 It must be registered with LCG LHC (see the  [[#LHC_Registration][LHC Registration section]])

For a detailed description of the interface, refer to the [[Accounting.GratiaInterfacesApelLcg][OSG Accounting APEL/WLCG interface document]].


---++ LHC Registration
An OSG resource group must be registered with the [[http://lcg.web.cern.ch/LCG/Default.htm][LCG Worldwide LHC Computing Grid]]. These should be good sections of that page to get started with:
   * [[http://lcg.web.cern.ch/LCG/site-help.htm][Site Registration]] 
   * [[http://lcg.web.cern.ch/LCG/site_start.htm][Getting Started]] 

---++ OSG Registration
A resource group (site) must be registered in OSG using [[https://oim.grid.iu.edu/oim/home][OSG Information Management System (OIM)]]

The process for enabling Accounting Interoperability when registering (or later point in time):
   1 Check the box indicating "This is a WLCG resource" (the display will expand to add more information)
   1 Check the box "Should this resource be part of WLCG Interop Accounting?"
   1 Populate the "WLCG Accounting Name" with the Federation Accounting Name of your resource group in the [[http://gstat-wlcg.cern.ch/apps/topology/][LCG Topology]]

Data will only be forwarded to WLCG for OSG resources that have this !InteropAccounting data populated.  However, it will not be used in any WLCG reporting until the resource is registered with LHC ([[#LHC_Registration][LCH Registration]]).

---++ Open Issues
Refer to the [[https://twiki.grid.iu.edu/bin/view/Interoperability/AccountingInteropQuestionsAndIssues][Accounting Systems Interoperability Questions, Issues, and Proposals twiki]]




%STOPINCLUDE%



---++ *Comments*
%COMMENT{type="tableappend"}%

%META:TOPICMOVED{by="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dKyle_20A_2e_20Gross_20453426" date="1291735234" from="ReleaseDocumentation.AccountingAndWLCG" to="Interoperability.AccountingAndWLCG"}%
