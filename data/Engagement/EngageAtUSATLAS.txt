%META:TOPICINFO{author="KyleGross" date="1480625595" format="1.1" version="1.4"}%
-- Main.StevenCox - 06 Jun 2011

---+!! %SPACEOUT{ "%TOPIC%" }%
%DOC_STATUS_TABLE%
%TOC%

%STARTINCLUDE%

---++Engage VO
   * The Engage Virtual Organization of the Open Science Grid
   * Contacts: Steven Cox, John McGee, Mats Rynge
   * Submission System: GlideinWMS
   * Workflow Management: Pegasus


---++Requirements

   * Worker node OS should be RHEL 5, CentOS5 or SL5
   * Worker nodes require outbound internet access (nodes can be behind NAT)
   * Worker node memory: 1GB / slot minimum, assume 1.5-2 GB
   * Worker node scratch: assume 10G per job slot - though this has never exceeded 500 MB
   * The worker nodes require the OSG CA certs that are installed as part of the OSG Worker Node Client. Host certs on the worker nodes are not required.
   * OSG wn-client is required; globus-url-copy heavily used.
   * Site squid (optional): used for data 10 MB to 150 MB
   * Job preemption is okay

---++SecurityTeam Profile
Description:

   1. For every job slot, a pilot job process starts up.
   2. The pilot job sends outbound TCP traffic over HTTP to a host at UCSD ("factory") and via HTTP to a host at RENCI ("frontend").
   3. The pilot job spawns a condor startd, which spawns a condor starter.
   4. The startd sends outbound UDP traffic to a single port on the frontend. This is randomly chosen (per pilot) from a range of 200 ports currently. This can be changed to TCP if necessary.
   5. The starter sends outbound TCP traffic to a port on the RENCI frontend. This is chosen randomly (per pilot) from the frontend's ephemeral ports. 

Hosts and ports:

   * The frontend is engage-submit3.renci.org (152.54.1.174)
      * ports: 80, 9618-9830 
   * The factory is glidein-1.t2.ucsd.edu
      * port 8319 

---++Setup

[[http://myosg.grid.iu.edu/vosummary/index?datasource=summary&summary_attrs_showdesc=on&summary_attrs_showmember_resource=on&summary_attrs_showfield_of_science=on&summary_attrs_showreporting_group=on&summary_attrs_showparent_vo=on&summary_attrs_showcontact=on&start_type=7daysago&start_date=06%2F06%2F2011&end_type=now&end_date=06%2F06%2F2011&vomsstatus_attrs_showdesc=on&vo=on&vo_8=on&active_value=1&sort_key=name][Engage in MyOSG]]

Adding a VO to your site from the OSG documentation, https://twiki.grid.iu.edu/bin/view/ReleaseDocumentation/PreparingComputeElement#Required_User_Accounts

The steps are generally:

   * Create local UNIX account for the VO (eg. "engage")
   * In GUMS, create a VO account mapping between the VO and the local UNIX account
   * There is no need to reconfigure the CE - the next time gums-host-cron runs the VO gets added to the osg-user-vo-map.txt file, as well as the osg-supported-vo-list.txt file.
   * You'll need this: vomss://osg-engage.renci.org:8443/voms/Engage



---++Status

[[http://myosg.grid.iu.edu/vovomsstatus/index?datasource=vomsstatus&start_type=7daysago&start_date=06%2F06%2F2011&end_type=now&end_date=06%2F06%2F2011&vomsstatus_attrs_showdesc=on&vo=on&vo_8=on&active_value=1&sort_key=name][Engage VOMS Status]]

   * [[http://engage-submit3.renci.org/glideinwms/monitor/frontend_EngageVO-submit3-v1_0/frontendStatus.html][GlideinWMS Front End Status]]
   * [[http://engage-submit3.renci.org/glideinwms/monitor/frontend_EngageVO-submit3-v1_0/frontendRRDBrowse.html][GlideinWMS Front End - Browse]]
   * [[http://rcf-gratia.unl.edu/gratia/xml/vo_success_cumulative_smry][Cumulative Hours By VO]]
   * [[http://myosg.grid.iu.edu/rgsummary/index?datasource=summary&summary_attrs_showdesc=on&summary_attrs_showgipstatus=on&summary_attrs_showwlcg=on&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&summary_attrs_showenv=on&summary_attrs_showcontact=on&gip_status_attrs_showtestresults=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&start_type=7daysago&start_date=05%2F17%2F2011&end_type=now&end_date=05%2F17%2F2011&sc=on&sc_29=on&gridtype=on&gridtype_1=on&gridtype_2=on&service_1=on&service_5=on&service_2=on&service_3=on&service_central_value=0&service_hidden_value=0&active=on&active_value=1&disable_value=1][OSG US ATLAS Resources]]


