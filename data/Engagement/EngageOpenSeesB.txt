%META:TOPICINFO{author="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dMarko_20Slyz_20664315" date="1297729125" format="1.1" reprev="1.4" version="1.4"}%
%META:TOPICPARENT{name="WebHome"}%
---+ Running the !OpenSees application of the Network Earthquake Engineering Simulation (NEES) on the Open Science Grid

[[http://opensees.berkeley.edu/OpenSees/home/about.php][OpenSees]] is a program that simulates the response of buildings and
other structures to earthquakes. It can require a lot of computation
time so it is useful to run multiple simultaneous instances of it on
the grid.

The rest of this page describes a prototype integration of the
!OpenSees workflow of one user but it is hoped that this work, with
some changes, will be more generally applicable. This prototype builds
on [[Main.OpenSeesAndCactusDocs][previous work done by OSG]] to remove MPI dependencies.

For this user the needs are as follows:

* Be able to run on the order of 60 simultaneous jobs at once.
  Could be somewhat more sometimes.

* There would typically be multiple batches of runs over the course of a month
followed by a time with no runs.
  
* Ideally some runs would be fairly long, 36+ hours,
  though shorter ones, up to 1 day long, are still useful.
    OSG does not generally support 36+ hour runs. We are currently
  looking into this problem, including some
  [[VirtualOrganizations.VOGroupMeeting20110210#Running_long_jobs_without_fixed][discussion at the VO Forum.]]
 The basic problems are that in this case glidein
  pilots don't run for more than 24 hours, many sites evict jobs after
  a certain amount of runtime, and many sites preempt jobs if there
  are higher priority ones.

* Does not need special dynamically-linked libraries.
  
* Does not need to handle much input or output data.
  At least during the current testing the input tar file after
  compression is on the order of 4Mb, which includes both the !OpenSees
  executable and input data. The output file can be at least up to
  30Mb but was often smaller.

* Does not need much RAM.
  During one test an !OpenSees job needed less than 200Mb although this
  could be checked.


We have some instructions for the [[running_OpenSees_on_OSG_b][prototype integration with OSG]].
Apart from the long-run-time problem mentioned above, it has some
small things to fix. It's still currently being developed and tested
with help from the user.


-- Main.MarkoSlyz - 14 Feb 2011


%META:FILEATTACHMENT{name="running_OpenSees_on_OSG.html" attachment="running_OpenSees_on_OSG.html" attr="h" comment="Details about the integration." date="1297408134" path="running_OpenSees_on_OSG.html" size="14980" stream="running_OpenSees_on_OSG.html" tmpFilename="/usr/tmp/CGItemp3529" user="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dMarko_20Slyz_20664315" version="1"}%
%META:FILEATTACHMENT{name="interactive_access_to_running_jobB.txt" attachment="interactive_access_to_running_jobB.txt" attr="h" comment="" date="1297406180" path="interactive_access_to_running_jobB.txt" size="5428" stream="interactive_access_to_running_jobB.txt" tmpFilename="/usr/tmp/CGItemp61848" user="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dMarko_20Slyz_20664315" version="1"}%
%META:FILEATTACHMENT{name="untarring_multiple_output_filesA.txt" attachment="untarring_multiple_output_filesA.txt" attr="h" comment="" date="1297406243" path="untarring_multiple_output_filesA.txt" size="3433" stream="untarring_multiple_output_filesA.txt" tmpFilename="/usr/tmp/CGItemp61629" user="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dMarko_20Slyz_20664315" version="1"}%
%META:FILEATTACHMENT{name="running_OpenSees_on_OSG.pdf" attachment="running_OpenSees_on_OSG.pdf" attr="h" comment="" date="1297409942" path="running_OpenSees_on_OSG.pdf" size="218300" stream="running_OpenSees_on_OSG.pdf" tmpFilename="/usr/tmp/CGItemp64438" user="X509_2fDC_3dorg_2fDC_3ddoegrids_2fOU_3dPeople_2fCN_3dMarko_20Slyz_20664315" version="1"}%
