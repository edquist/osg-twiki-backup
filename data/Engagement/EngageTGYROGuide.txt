%META:TOPICINFO{author="ChrisGreen" date="1253132254" format="1.1" reprev="1.2" version="1.2"}%
%META:TOPICPARENT{name="EngageNewUserGuide"}%
%TOC%

---+!! Guide to using OSG for users of the TGYRO application.

---++ Overview

This guide is specifically aimed at enabling TGYRO users to take advantage of the Open Science Grid. It may look daunting at first, but a large fraction of these instructions only need to be followed once.

---++ Authorization and authentication.

Perhaps the biggest difference from the methods for running TGYRO with which you are familiar is that one logs onto one machine, =engage-submit.renci.org= in order to submit jobs to any one of several sites. The authentication and authorization requirements of those sites are generally handled using X.509 certificates. The ones used are so-called, "extended attribute" certificates known as, "VOMS proxies." These extended attributes encode information about your, "Virtual Organization" and, particular scientific purpose to enable sites to decide whether to allow you access and how to prioritize your usage with respect to everyone else.

---+++ Obtaining an X.509 certificate (once-only).

The first thing one needs to do is obtain an X.509 certificate. If you do not already have an X.509 certificate of your own, you should obtain one from the DOE. In order to do this you should use a browser, preferably Mozilla Firefox.

---++++ Ensure your browser recognizes and accepts DOE certificates.

%INCLUDE{"EngageNewUserGuide" section="UpdateDOECAChain"}%

---++++ Apply for a personal certificate

%INCLUDE{"EngageNewUserGuide" section="ApplyForDOECert"}%

---++++ Retrieve your personal certificate

When your certificate has been successfully issued, you 
                        will receive an email that contains a link to a page containing 
                        all your certificate information. Open that page in your 
                        browser and click on <font color="#993399">Import Your 
                        Certificate</font> button at the bottom of that page.

---++++ Export your certificate for use in job submission.

See the instructions on the [[http://www.doegrids.org/pages/cert-request.html#Globus][DOEGrids certificate page]].

---+++ Renewing your DOEGrids certificate (once per year only).

A few weeks before your certificate arrives you will start receiving emails warning you of the impending expiration of your certificate. In order to renew your certificate _at any time before it expires_, do the following:

   1. Ensure you have your current certificate in your browser. For greatest ease use the same browser from which you requested the certificate in the first place; otherwise import from the backup you made (and kept, right?)
   1. Visit http://www.doegrids.org/ and select the "Certificate Renewal" link from the left sidebar.
   1. Follow the instructions. Your certificate will be automatically renewed and imported into your browser.
   1. Follow the instructions [[#Export_your_certificate_for_use][above]].

If your certificate has expired, you will need to [[#Apply_for_a_personal_certificate][request a new one]]. In the comments field, request that your certificate be issued with the same DN (including "random" number) as your existing one, and paste the DN in the comments field also. This can be obtained either from your browser or certificate handling utility or by executing the command from your submit node:<pre>openssl x509 -noout -in $HOME/.globus/usercert.pem -subject=.</pre>

-- Main.ChrisGreen - 16 Sep 2009
