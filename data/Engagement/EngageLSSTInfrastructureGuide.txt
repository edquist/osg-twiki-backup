%META:TOPICINFO{author="ChrisGreen" date="1280421033" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="EngageLSST"}%
---+!! LSST infrastructure guide (Phase I).

The LSST infrastructure is maintained using the OSGMM installation on engage-central.renci.org. The LSST-specific scripts are in the Engage SVN repository, =https://osg-svn.renci.org/svn/Engage/trunk/LSST=.

In order to obtain access to engage-central (user OSGMM) or the repository, contact the [[mailto:engage-team@renci.org][Engage team]].

---++ LSST configuration in OSGMM

OSGMM has two hooks: maintenance and verification. Maintenance jobs are run once per day on each site, verification jobs generally 1-4 times per day.

<ol>
<li>=https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/extra.maintenance-script.fork.frag= needs to be inserted into the correct place in =~osgmm/installs/current/etc/extra.maintenance-script.fork=.<br/>
This insert's main function is to obtain the actual =install-lsst= script from =http://engage-central.renci.org/~osgmm/software/install-lsst= and execute it.
</li>
<li>Similarly, =https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/extra.verification-script.fork.frag= needs to be inserted into the correct place in =~osgmm/installs/current/etc/extra.verification-script.fork=.<br/>
This script fragment examines the software environment on the target site and advertises attributes in the OSGMM !ClassAd for that site.
</li>
</ol>

---+++ =install-lsst= and associated files.

=https://osg-svn.renci.org/svn/Engage/trunk/LSST/osgmm/install-lsst= should be installed in =~osgmm/software/=. This is the real location of =http://engage-central.renci.org/~osgmm/software/install-lsst=.

At the top of the =install-lsst= script are the variables which may need to be changed to manage the installation of new versions of the code. The versions are in code rather than (for instance) in an obtained configuration in order to avoid hammering the software server.

Current location of install packages: =gsiftp://fermigridosg1.fnal.gov/grid/data/engage/LSST/software/LSSTsim/$LSST_version/=.

---++ Packaging software and data.

Source packages as used for the build are in =https://osg-svn.renci.org/svn/Engage/trunk/LSST/src/=.

The script =https://osg-svn.renci.org/svn/Engage/trunk/LSST/util-scripts/build-host.sh= will build and name the resulting tar file according to the architecture of the host upon which it was executed. For example:

   * =fnpcsrv1.fnal.gov=: FSL4/32
   * =fnpcsrv2.fnal.gov=: FSL4/64
   * =fnpcsrv532.fnal.gov=: FSL5/32
   * =fnpcsrv564.fnal.gov=: FSL5/64





-- Main.ChrisGreen - 29 Jul 2010