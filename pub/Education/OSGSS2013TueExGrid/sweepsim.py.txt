#!/usr/bin/env python

import math
import sys

if len(sys.argv)!=6:
    print "Usage:"
    print " sim.py x y minangle maxangle steps"
    sys.exit(1)

args=sys.argv[1:]

startx=float(args[0])
starty=float(args[1])
startang1=float(args[2])
startang2=float(args[3])
angsteps=int(args[4])

if angsteps<1:
    print "Need at least one steps"
    sys.exit(1)

if startx>50.0:
    print "Initial x must be <= 50.0"
    sys.exit(1)

if startx<0.0 or starty<150.0 or starty>250.0:
    print "Initial x must be in the 0-50 range."
    print "Initial y must be in the 150-250 range."
    sys.exit(1)

da=(startang2-startang1)/angsteps

import sim

min_bounce=None
min_s=None

max_bounce=20
for s in range(angsteps+1):
    ang=(startang1+s*da)/180*math.pi
    nbounce=sim.check((startx,starty,ang),max_bounce,None)
    if not (nbounce is None):
        #print s,startang1+s*da,nbounce
        if min_bounce is None:
            min_bounce=nbounce
            min_s=s
            #print s,startang1+s*da,nbounce
        else:
            if nbounce<min_bounce:
                min_bounce=nbounce
                min_s=s
                #print s,startang1+s*da,nbounce

if not (min_bounce is None):
    print min_bounce,startang1+min_s*da
    sys.exit(0)
else:
    sys.exit(2)
