Alias /koji "/usr/share/koji-web/scripts/"

<Directory "/usr/share/koji-web/scripts/">
    # Config for the publisher handler
    SetHandler mod_python
    # Use kojiweb's publisher (which handles errors more gracefully)
    # You can also use mod_python.publisher, but you will lose the pretty tracebacks
    PythonHandler kojiweb.publisher

    # General settings
    PythonDebug On
    PythonOption SiteName Koji
    PythonOption KojiHubURL http://koji-hub.batlab.org/kojihub
    PythonOption KojiWebURL http://koji-hub.batlab.org/koji
    PythonOption KojiPackagesURL http://koji-hub.batlab.org/mnt/koji/packages
    PythonOption KojiMavenURL http://koji-hub.batlab.org/mnt/koji/maven2
    PythonOption KojiImagesURL http://koji-hub.batlab.org/mnt/koji/images
    PythonOption WebPrincipal koji/web@EXAMPLE.COM
    PythonOption WebKeytab /etc/httpd.keytab
    PythonOption WebCCache /var/tmp/kojiweb.ccache
    PythonOption WebCert /etc/pki/tls/private/kojiweb.pem
    PythonOption ClientCA /etc/pki/tls/certs/doegrids_hostcert.crt
    PythonOption KojiHubCA /etc/pki/tls/certs/doe-chain.crt
    PythonOption LoginTimeout 72
    # This must be changed before deployment
    PythonOption Secret XXXXXXXXX
    PythonPath "sys.path + ['/usr/share/koji-web/lib']"
    PythonCleanupHandler kojiweb.handlers::cleanup
    PythonAutoReload Off
</Directory>

# uncomment this to enable authentication via Kerberos
# <Location /koji/login>
#     AuthType Kerberos
#     AuthName "Koji Web UI"
#     KrbMethodNegotiate on
#     KrbMethodK5Passwd off
#     KrbServiceName HTTP
#     KrbAuthRealm EXAMPLE.COM
#     Krb5Keytab /etc/httpd.keytab
#     KrbSaveCredentials off
#     Require valid-user
#     ErrorDocument 401 /koji-static/errors/unauthorized.html
# </Location>

# uncomment this to enable authentication via SSL client certificates
<Location /koji/login>
    SSLVerifyClient require
    SSLVerifyDepth  10
    SSLOptions +StdEnvVars
</Location>

Alias /koji-static/ "/usr/share/koji-web/static/"

<Directory "/usr/share/koji-web/static/">
    Options None
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
