%META:TOPICINFO{author="StevenTimm" date="1172787576" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="SiteFabricBestPractices"}%
%LINKCSS%

<!-- This is the default OSG Integration template. Please modify it in the sections indicated to create your topic! --> 

<!-- By default the title is the WikiWord used to create this topic !-->
<!-- if you want to modify it to something more meaningful, just replace %TOPIC% below with i.e "My Topic"!-->

---+!! %SPACEOUT{ "%TOPIC%" }%
%TOC%

%STARTINCLUDE%
%EDITTHIS%
%TOC%

---++ Purpose
      To enable the !PBS batch scheduler to work with the !OSG software stack

---++ Word Of The Wise
   * Install the !PBS server (or flavours thereof) on a different node than the !OSG gatekeeper node to avoid problems in the gatekeeper node bringing down the batch scheduler
   * You can have multiple gatekeepers talking to a single !PBS server/scheduler (eg: Production and !ITB) with different scheduling rules

---++ !PBS Configuration
 !PBS *does not* stream stdout and stderr. It maintains stderr and stdout at the local cluster node and copies back these files at the end of the job.
   * Copy back, *by default*, is done using the =pbs_rcp= command which might not be supported or might not want to be supported on most clusters.
   * If your home directories are mounted across cluster nodes, use the =$usecp= directive to manage copy back.

&nbsp;&nbsp;&nbsp;&nbsp;Edit =/var/spool/pbs/mom_priv/config= and add
      <verbatim>
      $usecp *.my.sub.domain:/home /home
      </verbatim>

---++ Gatekeeper Configuration

---+++ Pre !WebServices Gatekeeper (preWS-GRAM)
 =$VDT_LOCATION/globus/lib/perl/Globus/GRAM/JobManager/pbs.pm= is the !Perl script that the preWS gatekeeper uses to translate RSL to the !PBS submit script. 

---+++ !WebServices Gatekeeper (WS-GRAM)

---++ Troubleshooting




%STOPINCLUDE%

%BOTTOMMATTER%

-- Main.StevenTimm - 01 Mar 2007