%META:TOPICINFO{author="JohnWeigand" date="1172248248" format="1.1" reprev="1.14" version="1.14"}%
%META:TOPICPARENT{name="CEInstallGuide"}%
%LINKCSS%

---+!!<nop>OSG CE - Installing the Services
%TOC%
%STARTINCLUDE%


---++ Installing OSG CE Services
%EDITTHIS%

Now you're ready to start installing the Compute Element (CE) services.  We distinguish between software that must be installed on the server/gatekeeper (e.g., ce.pacman), and software which must be executable from the worker nodes.

This section addresses the software executed on the CE (server/gatekeeper node).  

---+++ Choose an installation directory 
This is typically something like =/usr/local/grid=, but whatever suits the local resource structure is fine. This directory does not need to be shared to the worker nodes.  Any software which needs to be seen from the worker nodes may be provided by the worker node client package as described above. 

For example (shown for sh, bash):
<pre>
&gt; export VDT_LOCATION=/usr/local/grid
&gt; cd $VDT_LOCATION
</pre>

(S. Timm note 10/12/06, the setting of VDT_LOCATION is extraneous, it will work if you 
are just in the directory in which you want to install the VDT)

---+++Installing the OSG CE software package

The installation described here is done as root. Even though services will not necssarily run as root:

   * <nop>MonaLisa, <nop>Globus-ws, <nop>MySql and the GRIS will run as the user "daemon" by default, if installed and activated
   * *%BLUE%Verify that the umask is set to "0022" prior to installation.  Failure to do so may render the installation unusable. %ENDCOLOR%*
   * A few questions regarding trust of the caches from which the software is downloaded will be displayed.   %BR%  Please answer *y* (yes) so that the software can be retrieved.
   * Finally, make sure there are no non-standard versions of perl, tcsh, or bash in your $PATH variable.


The following pacman commands will install the OSG software packages.
<pre>
   &gt;  pacman -get ITB:ce     <b><i>... for the ITB test version</i></b>
   &gt;  pacman -get OSG:ce     <b><i>... for the OSG production version</i></b>
</pre>

See the [[PacmanInfo][Pacman section]] of this guide if you encounter an 'unsupported' platform message.

%NOTE% This will take between 10 and 60 minutes to complete, depending upon the system and network connection. During this time you may open a second terminal and watch the progress by monitoring the =$VDT_LOCATION/vdt-install.log= file.

You should not be asked any other questions during the installation process.

The installation should complete with the following message. 
<pre>
Downloading [site-verify-1.0-9.tar.gz] from [http://vdt.cs.wisc.edu/software///site-verify/1.0]...

Pacman Installation of OSG-0.5.2 Complete
d61 5
</pre>

---+++ Setup the OSG environment
 Assuming the Pacman install completed without fatal errors, you should now be able to source the OSG setup environment. In your installation directory, from here forward known as the <i>$VDT_LOCATION</i>, source the setup script.

<pre class="screen">
&gt; <b>cd $VDT_LOCATION</b>
$ <b>source setup.sh</b>
      <em>OR</em>
% <b>source setup.csh</b>
<pre>
&gt; cd $VDT_LOCATION
$ source setup.sh
         or
% source setup.csh
</pre> 

---+++ Optional packages for Condor, PBS, LSF, or SGE
You need to install an extra package to interface with your existing  Condor, PBS, LSF, or SGE installation. *%BLUE% Ensure that that the command-line utilities for your batch system are in your path,%ENDCOLOR%* then install the appropriate package in your =$VDT_LOCATION= directory (for Condor, PBS, LSF, or SGE respectively).  Choose one of the following as appropriate:  
<pre>
&gt; pacman -get OSG:Globus-Condor-Setup
&gt; pacman -get OSG:Globus-PBS-Setup
&gt; pacman -get OSG:Globus-LSF-Setup
&gt; pacman -get OSG:Globus-SGE-Setup
</pre>

Or for OSG-ITB substitute <i>ITB</i> for <i>OSG</i>, i.e., choose one of:

<pre>
&gt; pacman -get ITB:Globus-Condor-Setup
&gt; pacman -get ITB:Globus-PBS-Setup
&gt; pacman -get ITB:Globus-LSF-Setup
&gt; pacman -get ITB:Globus-SGE-Setup
</pre>

Globus-XXX-Setup will include web-services (Globus-WS-XXX-Setup) and Gratia probes EXCEPT for SGE batch systems. SGE versions are still in development.
  
This guide will not go into the detail on the installation of any of these packages.

%NOTE% For the PBS connector, make sure your binaries are in the path prior to installation.  The install will fail silently with error reported to =vdt-install.log= and jobmanager-pbs will not be created.  If this is done, do a =<userinput>pacman -remove ITB:Globus-PBS-Setup</userinput>=, insert the binaries into your PATH and install again.

---+++ Post install README
Read the =$VDT_LOCATION/post-install/README= file. We suggest that you read the file for information only, and follow the instructions in the various OSG installation guides presented in these pages, rather than those in the VDT README file.  

%NOTE% Do not be concerned with any error messages you may see in this README file.  They are usually not a problem.

This page and others that it links to will take you through all the steps necessary to configure your installation.
%STOPINCLUDE%

%WHU%
<!-- MAJOR UPDATES
For significant updates to the topic, consider adding your 'signature' (beneath this editing box) !-->
-- Main.RobQ - 01 May 2006<br>
-- Main.JohnWeigand - 07 Sep 2006 - updated for OSG 0.5.0<br>

%META:TOPICMOVED{by="ForrestChristian" date="1166039320" from="Integration.CEInstallingServices050" to="Integration/ITB_0_5.CEInstallingServices"}%
