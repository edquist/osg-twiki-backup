#!/usr/bin/env perl
use strict;
use warnings;

use Getopt::Long;

my $timeout = 300; # 300 = 5 minute default
GetOptions("timeout=s" => \$timeout);

$SIG{ALRM} = \&timeout;
$SIG{TERM} = \&kill;
$SIG{KILL} = \&kill;
$SIG{QUIT} = \&kill;
$SIG{INT}  = \&kill;

alarm($timeout);

my $a = "";
while(1) {
    $a .= "a";
    $a = "" if(length($a) > 10_000_000);
}

exit 0;

sub timeout {
    print "$timeout second timeout reached\n";
    exit 0;
}

sub kill {
    print "received signal, exiting\n";
    exit 0;
}
