usage: ../bin/cert-lookup { -s|-p } { -n <name> | -e <email> } [-c] [-v] [-V]
   version: V2-7
  Queries the DOEGrids ldap directory of public certificates
  and prints some information from the certificates for each
  matching subject name.
   -p  searches in OU=People     (one of -p or -s is required)
   -s  searches in OU=Services
   -n  <name>  name is the subject name to look up, can include
               wildcards, i.e., "*Olson*" will match all subject
               names that include 'Olson' in them
   -e  <email>  part or all of the email address to look up, can include
               wildecards
         (one of -n or -e is required)
   -c  a debugging option, will cause temporary files & directories
       to be left and not deleted, means 'no clean'
   -d  <workingn directory>, defaults to .
   -v  verbose option, prints lots of debugging info
   -V  print version of cert-scripts package and exit

 Description of output:
  For each matching subject name entry in the ldap directory the following
  3 lines (sometimes 2) are written to stdout:
------------------------------------------------------------------------
     cn: <matching CN component of subject name>  email:  <address>
sponsor: <name of person given as sponsor to request for this certificate>
     RA:  registration authority affiliation

Note that service certificates and some person certificate directory 
entries do not have the sponsor field, or email address.
If there are valid (not revoked) certificates for this subject name they
are listed as follows (there can be several certificates):
-----------------
subject= <full subject name from certificate from 'openssl -subject'>
serial= <serial number of certificate, from 'openssl -serial'>
<email address from 'openssl -email'>
notBefore= <starting validity date, from openssl -startdate'>
notAfter= <ending validity date, from 'openssl -enddate'>

 
  Side effects:
     Creates some temporary files with prefix 'tmp'
     and directories named 'cn-#' where # is a number.
     These temporary files & directories are removed unless -c is used.

 Questions & comments about this script should be directed to
 osg-ra@opensciencegrid.org, or dlolson@lbl.gov
