{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\froman\fcharset0 Times New Roman;}{\f1\fswiss\fcharset0 Arial;}{\f2\fnil\fcharset2 Symbol;}}
{\colortbl ;\red0\green0\blue255;}
{\*\generator Msftedit 5.41.15.1507;}\viewkind4\uc1\pard\keepn\sb100\sa100\kerning36\b\f0\fs48 Quick Install Guide\par
\pard{\pntext\f2\'B7\tab}{\*\pn\pnlvlblt\pnf2\pnindent360{\pntxtb\'B7}}\fi-360\li720\sb100\sa100\kerning0\b0\fs24{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/external_edit"HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/external_edit"}}{\fldrslt{}}}\f0\fs24\par
{\field{\*\fldinst{HYPERLINK "{\pntext\f2\'B7\tab}https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/sendto_form"HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/sendto_form"}}{\fldrslt{}}}\f0\fs24\par
{\field{\*\fldinst{HYPERLINK "{\pntext\f2\'B7\tab}javascript:this.print();"HYPERLINK "javascript:this.print();"}}{\fldrslt{}}}\f0\fs24\par
{\field{\*\fldinst{HYPERLINK "{\pntext\f2\'B7\tab}https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/addtoFavorites"HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/addtoFavorites"}}{\fldrslt{}}}\f0\fs24\par
\pard\sb100\sa100 last edited 4 months ago by \b jorge\b0  \par
\pard\keepn\sb100\sa100\kerning36\b\fs48 These instructions pertain to VDT 1.3.3\par
\kerning0\fs36 Before you begin \par
\pard\sb100\sa100\b0\fs24 The DRM service needs to run on your server to move, copy and delete files. It is therefore highly recommended that you not run this service as root. By default the VDT will use the deamon user to run the DRM service unless your system has been given a non-priveledged user called "srm". The service will also require authentication certificates to run. Even though DRM can use a user, a host or a service certificate we strongly recomend that you use a service certificate since the user cert requires a password and the host requires you to run the service as root. \par
To get a service certificate you can generate the request from a working gtk installation by issuing the grid-cert-request command with the following options: \par
\pard\li360\ri360\sb100\sa100 grid-cert-request -host your.drmhost.edu -service srm -dir ./\par
\pard\sb100\sa100 Once your request is generated go to http://igoc.ivdgl.indiana.edu/RAinfo/newra/overview.php and follow the directions there to get your service certifcate.\par
When you recieve your cert you can put it the srm home directory. You will be pointing to this file from the DRM configuration file in the post install section. \par
\pard\keepn\sb100\sa100\b\fs36 Installation Options and Proceedure\par
\pard\sb100\sa100\b0\fs24 There are two options for installing the DRM service on the Computing Element (CE) site.\par
\pard\fi-360\li720\sb100\sa100\tx720 You can install it directly from the VDT1.3.3 by answering yes to the questions related to the DRM service. Begin by following the intructions on the current ITB release at http://osg.ivdgl.org/twiki/bin/view/Integration/ItbRel014 \par
You can install it from the DRM.pacman package into its own area. To do this pick a location with sufficient space, grab a recent verison of pacman untar it and source its setup.(c)sh file. Then get and install the package from the VDT 1.3.3 with\par
\pard\li360\ri360\sb100\sa100 pacman -get {\field{\*\fldinst{HYPERLINK "http://www.cs.wisc.edu/vdt/vdt_133_cache/DRM.pacman"}}{\fldrslt{\cf1\ul http://www.cs.wisc.edu/vdt/vdt_133_cache:DRM}}}\cf0\ulnone\f0\fs24\par
Answers to VDT questions:\line Do you agree to the licenses? [y/n]{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=y/n"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  yes\line Would you like to enable the DRM server to run automatically?\line Choices: y (yes), n(no), s (skip this question) s \i (for now since you'll probably want to start and stop the service from the installation directory during this phase of testing\i0 )\line Would you like to enable Globus GridFTP{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=GridFTP"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  daemon to run automatically?\line Choices: y (yes), n(no), s (skip this question) y (\i see what happens)\line\i0 Where would you like to install CA files? n ( \i these have already been installed\i0 )\line\line\par
\pard\sb100\sa100 Post Installation of the DRM Service Once you have installed the DRM service you can edit the single configuration file created for you by the VDT. The file is $DRM_HOME/conf/drm.rc. The conf file is divided into three sections. The top section contains most if not all of the paramters you'll need to adjust to get your site to function as you intend. Please examine them before you launch the service. The second section contains paramters that where determined automatically but most likely you will not need to change, things like log file and parameter file locations are defined here. The thirs section includes those that you should not change unless you know a lot about DRM's internall. Here is a list of paramters you'll most likely want to change from the defaults determined by the VDT. These are in the top section of the config file. \par
\pard\li360\ri360\sb100\sa100\b wsg*HostKey{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=HostKey"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24 =/etc/grid-security/http/httpkey.pem\line wsg*HostCert{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=HostCert"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24 =/etc/grid-security/http/httpcert.pem\b0  \line Change these to your service certificate (see the Before you begin section)\line\line\b drm*cachehome=/share/igt/DRM-vdt133/drm/cache\b0\line By default the VDT creates this directory in the installation area. You'll probably want to move this somewhere else. This is where DRM will put it's cache and it can go any normal unix filesystem, local, NFS, etc..\line\line\b drm*maxCacheSize=29GB\b0\line Change this to max size your cache should be\par
\pard\sb100\sa100 You can read the $VDT_LOCATION/post-install/README file for more information about what VDT did during your install. \par
\pard\keepn\sb100\sa100\b\fs36 Starting and Stopping the DRM services\par
\pard\sb100\sa100\b0\fs24 To start the services go to the $DRM_HOME area and launch the SXXsrm{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=SXXsrm"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  script with a "./SXXsrm{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=SXXsrm"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  start" if you are root. If you are the srm user you can use the SXXsrm{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=SXXsrm"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24 .personal script instead. You may need need to chmod a+x the scripts before you run them. The scripts will run the service as either deamon or the srm user.\par
The script will start four mother processes. The nameserv process will be started first followed by the drmServer.linux. The nameserv runs on port 6171 and the drmServer runs on 6172 by default. The scripts define these port numbers and you can change them there if you need. You will have to modify the drm.rc configuration file as well before you start the service. Two webservice commponents are started next. These will not function if if the CORBA server don't start properly. Examine the stnd out/err messages for errors during the startup proceedure. Here is what to expect.\par
\pard{\pntext\f2\'B7\tab}{\*\pn\pnlvlblt\pnf2\pnindent360{\pntxtb\'B7}}\fi-360\li720\sb100\sa100 At the end of the CORBA service startup \par
\pard\li360\ri360\sb100\sa100 "=> DRM is Ready" \par
\pard{\pntext\f2\'B7\tab}{\*\pn\pnlvlblt\pnf2\pnindent360{\pntxtb\'B7}}\fi-360\li720\sb100\sa100 After success in starting the first WS component you'll see this \par
\pard\li360\ri360\sb100\sa100 "---------- HRMServant{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=HRMServant"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  is ready" \par
\pard{\pntext\f2\'B7\tab}{\*\pn\pnlvlblt\pnf2\pnindent360{\pntxtb\'B7}}\fi-360\li720\sb100\sa100 After everything is started and working properly you should see this \par
\pard\li360\ri360\sb100\sa100 "------- HRMServant{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=HRMServant"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  Binding is OK"\par
\pard\sb100\sa100 To stop the service issue the "SRMsrm{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=SRMsrm"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  stop" command from the $DRM_HOME\par
The SXXsrm{\field{\*\fldinst{HYPERLINK "https://plone3.opensciencegrid.org/techgroups/tg-storage/DRM/install/QuickInstallGuide/createform?page=SXXsrm"}}{\fldrslt{\cf1\ul ?}}}\cf0\ulnone\f0\fs24  scripts may be installed in the sysV init area if you asked the VDT to do so. Look for these there as well and check that they are executed on system startup.\par
\pard\f1\fs20\par
}
 