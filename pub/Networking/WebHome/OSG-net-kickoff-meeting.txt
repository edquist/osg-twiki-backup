                                             
Meeting Notes - 20120823 @ UWisc
--------------------------------

Web Page:
	https://indico.cern.ch/conferenceDisplay.py?confId=205612

Attending (in person):
	Shawn - UMich/OSG
	Jason - Internet2
	Andy - ESnet
	Parag - FNAL
	Phil - FNAL
	Perry B - UWisc 
	Dale - UWisc
	Mark H - UWisc
	Mike T - UWisc
	Bruce M - UWisc CIO
	Alain R - UWisc/OSG
	Rob Q - IU/OSG GOC
	Miron L - UWisc/OSG
	Tom W - BNL

Attending (remote):
	Brian T - ESnet
	Aaron B - Internet2
	Nils J - Internet2
	Kavitha K - Internet2

Notes:
--------------------------------

Shawn:
	Overview - info on new OSG area (networking).  History on some of what has been done before in the ATLAS space.  Lots of work done on assuring the network is working via instrumentation.  Standardized on the perfSONAR-PS framework, particularly the pS Performance Toolkit.  Applications (dashboard) to visualize performance + alert when falls below expectations.  

	Currently 111 OSG sites.  do we envision instrumenting all?  Yes, and want to avoid duplication (e.g if CMS and ATLAS at same site, don't want to see 4 testers testing around the globe) - but its always a possibility.  

	Instrumentation of applications?  GridFTP would be a natural.  Jason can ask members of the pS project about this to see where it left off.  

Jason:
	history on the pS project. What pS is and what pS isn't (important distinctions).  History of where we came from, and what we were hoping to do.  Did we get there, not yet, some work yet to be done.  Products that are out there (Specific tools), how we support things.  pSPT is an island for most part, tests are configured for that host to test to others, and data is stored on that host.  No central method to do this.  Sharing configurations was hard, but working on a way to do this (e.g. configure the mesh at one host, then share with others to enable full mesh).   

	Where the gaps are still:

 		- Mesh configuration (in progress) + GUI
 		- Stabilizing the discovery framework
 		- CentOS 6 OS + other arch support
 		- Stabilizing the APIs and data retrieval to get some better performance numbers

	Need community involvement to do this properly - make it as open source as we can.  Not a total failure on this front, just no real involvement so far.  Debugging lots of connections still - free service with the office of the CTO.  Soft funding to do certain things always a possibility, none right now.  Web100 tie in - need to create new tool or update NDT (not clear which)

	pS as a service you  pay for - will this work?  Some are skeptical.  Not a definite thing yet, but we are trying to find a funding stream that allows us to develop the software for all, fix the problems that are out there, and still enable things free for the power users.  

	Medical Community - applications they want to use for monitoring and data movement.  Chinese Schools/Networks, some things they like as well.  

Brian/Andy:
	ESnet history mirrors Internet2, with an emphasis on supporting customer sites within the DOE community.  Some information on recent projects to make upgrades to software (e.g. the LS, the CentOS 6 project, USB operation, GUI to support mesh).  Just as many developers as Internet2, low fractions of FTE.  Demo of MADDash GUI and some talk about how it could be integrated into existing ATLAS GUI (more on this later).  

	Discussion of CentOS vs other OSs how much can/will you support. We stop @ CentOS because its all inclosed and thats what was popular.  If you want debian or whatever, build from src.  

	VDT includes clients already (and servers).  Documentation is an issue though.  How do people use these tools.  Some documentation was written a while back, can't be found though.  Should improve this if its there.  'Troubleshooting' guide.  Step by step on how to diagnose, and who to contact for the problems locally.  

Parag/Phil: 
	Information on HPC and 100G work.  Ensuring networking of for the entire lab, CMS being the largest customer.  eCenter information.  main developer (Maxim) is out, but still trying to finish up.  portal application that focuses on circuits (visualization for each person's use of the network).  'social' features too.  Have some GUIs that use pS and OSCARS

Tom:
	history of the dashboard and why it was created.  Have several (12? 13?) sites in USATLAS that need to do a full mesh of tests.  Only way to extract data is to pull it from all hosts individually.  Can construct a GUI that couldd display all data, builds up a cache to improve running time.  Current generation:

 		- Scripts to pull data from hosts and store in local DB
 		- alarms that iterate over datasets
 		- Display in a mesh for various metrics
 		- allow configuration for authenticated users

	Overview of architecture and where we see this project going.  Ideally OSG would take over collection, and either use software to display/alarm as is, or integrate new features via already in use myosg portal GUIS and displays.  Want to avoid too many user displays and places to look, useful if we can iterate it into daily lives of people.  

Talk (till Lunch):
	Does a tech meeting (phone first) make sense?  Sure, can try to arrange this so that the developers on all sides can talk.  

	UWisc CIO committed to supporting HPC and networking.  

	OSG Build and Test infrastructure could be useful for pS Devs (especially as they look to move to koji for building).  Action for Andy/Aaron to look into this.  

-------------------------- LUNCH --------------------------
 
pS Discussion:

	Rank the most important development things for pS:

		1) mesh configuration and MADDash GUI

		2) LS stabilization + redeployment of gLS / hLS infrastructure

		3) CentOS 6, 64 bits, USB key install

		4) stabilization of APIs to allow for JSON use instead of raw XML (will improve performance)

	Where does topology collection/mining/traceroute alerts fit into this?  Lots of work is needed on the topology front.  We have a TS/LS infrastructure, but its a very manual process to get the data in for a given network.  If you don't have complete info, an end to end solution is hard.  TR DB stuff can tell you if a route 'changes' in some way, but thats about it.  No good GUI for this, although eCenter has done some work in this area.  

	Target for developments:
		pSPT Team = Joint Techs (2/2013)

		OSG Team = March 2013

	Largest help OSG could be would be documentation as well as build and testing systems.  Aaron/Andy to look into the OSG offerings to see if it would make sense to move things here.  

	pSPS needs to consider moving all things (svn included) into the google code area to encourage more development in an open way.  

	VDT documentation - how and when to use the tools that are included.  What is the difference between pSPT and the OSG VDT stuff?  pSPT sits in corner and 'does its thing'.  If there is a real problem on a compute/storage node, we need clients on these to help narrow down the problem.  Complimentary use cases, want to see both continue.  Doc does need to be improved though.  Currently nothing (or very little).  Debugging guides and use guides:
		
		Explain the use cases
		
		Get the users to involve local networking staff

		Explain how to use tools

		Explain how to debug a problem end to end

	Documentation pointers (from Brian):

			Here are some links on fasterdata that may be useful:

			http://fasterdata.es.net/performance-testing/perfsonar/troubleshooting/overview/
			http://fasterdata.es.net/performance-testing/perfsonar/troubleshooting/overview/troubleshooting-expert-section-other-things-to-check/

			http://fasterdata.es.net/performance-testing/perfsonar/ps-howto/perfsonar-configuration-guide/

			and of course, please suggest improvements to these pages.

	Training - used to give this at site admin workshops and may or may not be useful.  Would be better to give this to the GOC techs (and others).  Rob and Jason to talk about doing this in the future.  May not occur for 4-6 months, but will start the dialog.  

	Details of a tech meeting … phone is better to start this.  Would really need to have an agenda and plan.  'Code sprint' to produce something useful.  Initial meeting can be 'soon', face to face meeting not till next year most likely (after SC and the holidays).  

	Regular testing strategies - what is the best thing to do?  Let the VOs identify the best places to go.  Set up tests between/within these areas.  Better if VO coordinates instead of independent people to reduce the testing load

	Application instrumentation - back to GridFTP.  pS knows there was work done here to put logging into GridFTP to get out throughput/disk measurements.  May not be exposed via pS, but could be.  May also make sense to talk to the developers of GridFTP to have them do an export of data instead of pS doing the work.  

	Interim step to start the conversation - need to get people on the pSPT Development list: 

		https://lists.internet2.edu/sympa/subscribe/i2-perfsonar

Dashboard Discussion:

	Dashboard effort is growing, now have a mailing list and a production vs non-production instances.  

	Things that are still not settled:
		Open source software license (BNL has not assigned one - Tom to ask what to do)

		Src code - still not in a public place.  Options would be:

			- Public (but authenticated) place @ BNL

			- Public repo (like google code/source forge).  Some concerns about anyone in the world having access.  

		Issue/wiki needed too

	Maddash vs current BNL dashboard.  Maddash is really just for displaying things, doesn't do alarms, and is not very user configurable.  Still working (andy/tom) on how to move into a single product

	Packaging - tomcat stuff is tricky.  OSG approach has been to get the list of del libraries, the version of tomcat needed, build package from that.  Not really ready to consider packaging yet, so this discussion can be shelved.  

	Collection location - currently @ BNL.  Want to move this to a central location.  'GOC' is at IU Indy, but OSG operations is done all over (CERN, UCSD, UWisc, etc).  Can think about where it makes sense to house things.  Most likely will need a new machine though.  Interest is high, can start to spec one out and get it in place soon.  Then talk about moving software and changing dashboard operations staff.  

Next Steps:
	Doodle poll for Tech meeting (targeting week of 9/3 or 9/10.  

	OSG folks (and anyone really) to join pS mailing list (https://lists.internet2.edu/sympa/subscribe/i2-perfsonar)
	
	Tom to talk to BNL management about the src code/license

	pS project to re-do/publish milestones for 6 months (at least)

	Pursuing soft money for some efforts

	Documentation @ OSG for using the tools on VDT (and more - troubleshooting problems)

	Training for GOC staff


-------------------------------- Mail between Jason and Ezra/Martin/Yee/Dan --------------------------------


There are two existing approaches that I know of:

1) The netlogger driver for gridftp that ships as part of Globus.  When loaded, it can write standard netlogger-formatted records to a specified file. I'm not sure if there has been any effort to pull those up to an MA or similar.

2) Dan and I have subsequently developed logging within an xio-xsp driver.  It spits out netlogger summaries in a JSON/BSON representation over an XSP session to a collector.  This collector is typically a wrapper around a mongodb backend but we are also integrating this logging into Periscope and other pS-friendly interfaces.

We are in the process of updating the driver to use our most recent metadata format, and we should also think about exporting it to existing pS services.  Ahmed has been working on this schema and I believe the latest can be found here (document also attached):

https://github.com/periscope-ps/periscope/tree/iu-merge/peri-tornado/docs/source/schema

Ahmed (cc'ed), correct me if I'm wrong there.

Not to confuse things, but the current metadata/data output of the xio-xsp looks something like the following (not consistent with the above schema).  This does at least gives you an idea of what we are currently collecting.

{
  'meta': [{'_id': 'c2d870ef-32fd-11e0-b554-002511ccae1a',
            'event_type': 'xfer.xsp.xio',
            'params': {},
            'subject': {'task_id': 'XXX',
                        'type': 'network',
			 'src': '127.0.0.1',
			 'dst': '127.0.0.1',
			 'sport': '34566',
			 'dport': '23456'
                        'u_user': '...',
                        'u_src': '...',
                        'u_resource': '...',
                        ... }}],
  'data': [],
  'version': '0.1'
}

{
  'meta': [{'_id': 'c2d86f34-32fd-11e0-b554-002511ccae1a',
            '_pid': 'c2d870ef-32fd-11e0-b554-002511ccae1a',
            'event_type': 'nl.read.summary',
            'params': {'dt': 5.0000, 'ts': 1297112631.706690},
            'subject': {'stream_id': 1234567} }],
  'data': [{'_id': '4d505d2d0e644d0200000036',
            '_mid': 'c2d86f34-32fd-11e0-b554-002511ccae1a',
            'event_type': 'nl.read.summary',
            'values': {'_sample': 0,
      	     'sum.v': 2707947520.000000,
	     'min.v': 262144.000000,
	     ... }}],
  'version': '0.1'
}

- ezra

On 8/23/2012 2:59 PM, Jason Zurawski wrote:
Dan/Martin/Ezra/Yee;

Andy, Brian, Aaron, and I are in a meeting today, and the topic of 'netloggerized GridFTP' came up, as well as exporting information into pS for future use.  Did that ever get completed in one of your projects?  We couldn't remember where this stood.

Thanks;

-jason