mine_altunay@hotmail.com (3:16:52 PM): hello Phillippe
mine_altunay@hotmail.com (3:16:55 PM): is this a good time
pcanal00 (3:18:05 PM): Yes
mine_altunay@hotmail.com (3:18:49 PM): first, for the configuration mgmt issue: I need 3-5 sentences , listing which software components are used in Gratia, their versions and special configuration .
mine_altunay@hotmail.com (3:19:15 PM): basically if you disapppear tomorrow and Gratia shuts down, can I re-build it by reading your documentation
mine_altunay@hotmail.com (3:19:24 PM): does this make sense ?
pcanal00 (3:20:54 PM): Yes
mine_altunay@hotmail.com (3:21:10 PM): ok, thanks. it does not have to be supre long. just sufficient info
mine_altunay@hotmail.com (3:21:20 PM): on another issue, i need help with gratia
mine_altunay@hotmail.com (3:21:39 PM): I am downloading CPU hours by Site
mine_altunay@hotmail.com (3:21:52 PM): it gives me two answers wall clock and cpuhours
pcanal00 (3:22:05 PM): yes, of courses
mine_altunay@hotmail.com (3:22:14 PM): what does it mean by cpu hours? how it differs from wallclock
mine_altunay@hotmail.com (3:22:18 PM): ?
pcanal00 (3:22:56 PM): Wall Clock is the time between the start of the job and its end
pcanal00 (3:23:33 PM): Cpu Hours is the amount of cumulative time the CPU actually spent doing the job (as opposed to being idle and doing some other jobs work loads)
pcanal00 (3:23:52 PM): For an extreme example a job whose sole task would be to read a file from the web, 
pcanal00 (3:24:21 PM): the Wall Clock would be very long .. but the CPU hours will be very low since the jobs would be sitting idle waiting for input from the web
mine_altunay@hotmail.com (3:24:34 PM): yes, makes sense. are they both in seconds
mine_altunay@hotmail.com (3:24:42 PM): hours?
pcanal00 (3:24:57 PM): they are stored in seconds
mine_altunay@hotmail.com (3:25:05 PM): ok. 
mine_altunay@hotmail.com (3:25:19 PM): I am trying to get last years CPUhours average per Site
mine_altunay@hotmail.com (3:25:27 PM): and I would like to calculate this for each month
pcanal00 (3:25:38 PM): use something like:
pcanal00 (3:27:00 PM): select DATE_FORMAT(EndTime, '%Y-%m'),  avg(CPUhours) from ... where ... group by DATE_FORMAT(EndTime, '%Y-%m')
mine_altunay@hotmail.com (3:27:32 PM): ok 
mine_altunay@hotmail.com (3:27:35 PM): thank you
pcanal00 (3:28:13 PM): 1) Java runtime, 1.5.0 (java 5, latest update).
2) Tomcat 5.5 series, latest version.
3) Mysql 5.0 series, latest version.
4) Gratia Services, latest released version.
pcanal00 (3:28:33 PM): The Gratia code is kept in CVS on sourgeforge.net
pcanal00 (3:28:50 PM): To recompile and reinstall, follow the instruction at Java runtime, 1.5.0 (java 5, latest update).
mine_altunay@hotmail.com (3:28:50 PM): is there any access restriction to the cvs tree
pcanal00 (3:29:01 PM): To recompile and reinstall, follow the instruction at https://twiki.grid.iu.edu/twiki/bin/view/Accounting/InstallationGuideFNAL
pcanal00 (3:29:12 PM): There is no read restriction on the cvs tree
pcanal00 (3:29:41 PM): There is more than one 'project' administration (Chris Green and I for now)
There is many developer with full write access
pcanal00 (3:30:10 PM): For the maintenance one would also need the root database password which is known to a few people ....
pcanal00 (3:30:35 PM): However the read access (in case the data needs to be copied to a new database) is available
mine_altunay@hotmail.com (3:36:28 PM): thank you
pcanal00 went idle at 3:45:50 PM.
pcanal00 went away at 3:50:50 PM.
pcanal00 returned at 4:15:48 PM.
mine_altunay@hotmail.com (4:21:42 PM): phillipe , I never used mysql before. I figured to get cpu average per site for a given month
mine_altunay@hotmail.com (4:21:57 PM): how do I repeat this for entire year
mine_altunay@hotmail.com (4:22:09 PM): i tried interval and loop with no avail
pcanal00 (4:27:13 PM): !?
pcanal00 (4:27:16 PM): What do you mean
pcanal00 (4:27:34 PM): Are you looking for the average over the year ...
pcanal00 (4:27:45 PM): then replace DATE_FORMAT(EndTime, '%Y-%m') with DATE_FORMAT(EndTime, '%Y')
mine_altunay@hotmail.com (4:28:42 PM): average cpu for each site during a month. and repeat this 12 months -- last year
pcanal00 (4:29:04 PM): Simple 
mine_altunay@hotmail.com (4:29:04 PM): no, i need a loop to calculate each site's average 
pcanal00 (4:29:11 PM): No you do not
mine_altunay@hotmail.com (4:29:19 PM): oh thanks I spent an hour at mysql tutorials
mine_altunay@hotmail.com (4:32:46 PM): phillipe , did i miss you ?
pcanal00 (4:33:49 PM): no 
pcanal00 (4:33:55 PM): checking the syntax
mine_altunay@hotmail.com (4:34:05 PM): ok 
pcanal00 (4:35:05 PM): select SiteName,DATE_FORMAT(EndTime, '%Y-%m') as Month,  avg(CpuUserDuration+CpuSystemDuration) as 'Average Cpu Hours' 
from Site,Probe,VOProbeSummary 
where Probe.siteid = Site.siteid and VOProbeSummary.ProbeName = Probe.probename 
and Date('2007/09/01') <= EndTime and EndTime < Date('2008/01/01') 
group by SiteName,DATE_FORMAT(EndTime, '%Y-%m') 
order by SiteName,Month;
pcanal00 (4:35:43 PM): And varies the actual date in the where clause to suit you lenght
pcanal00 (4:36:01 PM): also you can change the ordeing by chaging the 'order by' clause
mine_altunay@hotmail.com (4:41:24 PM): thank you so much
mine_altunay@hotmail.com (4:41:40 PM): i should get together with you sometime for a crash course in gratia
mine_altunay@hotmail.com (4:41:47 PM): let me know when is good for you
pcanal00 (4:42:29 PM): Sometime later this week
pcanal00 (4:43:02 PM): As a preparation you should try to click and the 'Show Query' link of the gratia display and look at the canned queries 
mine_altunay@hotmail.com (4:43:13 PM): good idea
pcanal00 signed off at 5:24:39 PM.
pcanal00 is offline and will receive your IMs when signing back in.
pcanal00 signed off at 7:09:22 PM.
pcanal00 is offline and will receive your IMs when signing back in.
pcanal00 signed off at 7:36:55 PM.
pcanal00 is offline and will receive your IMs when signing back in.